/*! For license information please see main.9320d639.js.LICENSE.txt */
!function(){var e={3361:function(e,t,n){"use strict";n.d(t,{Z:function(){return ae}});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),a=Math.abs,i=String.fromCharCode,o=Object.assign;function s(e){return e.trim()}function u(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function l(e,t){return 0|e.charCodeAt(t)}function d(e,t,n){return e.slice(t,n)}function f(e){return e.length}function h(e){return e.length}function p(e,t){return t.push(e),e}var v=1,m=1,g=0,y=0,b=0,x="";function k(e,t,n,r,a,i,o){return{value:e,root:t,parent:n,type:r,props:a,children:i,line:v,column:m,length:o,return:""}}function w(e,t){return o(k("",null,null,"",null,null,0),e,{length:-e.length},t)}function S(){return b=y>0?l(x,--y):0,m--,10===b&&(m=1,v--),b}function I(){return b=y<g?l(x,y++):0,m++,10===b&&(m=1,v++),b}function N(){return l(x,y)}function T(){return y}function C(e,t){return d(x,e,t)}function E(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function _(e){return v=m=1,g=f(x=e),y=0,[]}function A(e){return x="",e}function R(e){return s(C(y-1,P(91===e?e+2:40===e?e+1:e)))}function O(e){for(;(b=N())&&b<33;)I();return E(e)>2||E(b)>3?"":" "}function D(e,t){for(;--t&&I()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return C(e,T()+(t<6&&32==N()&&32==I()))}function P(e){for(;I();)switch(b){case e:return y;case 34:case 39:34!==e&&39!==e&&P(b);break;case 40:41===e&&P(e);break;case 92:I()}return y}function F(e,t){for(;I()&&e+b!==57&&(e+b!==84||47!==N()););return"/*"+C(t,y-1)+"*"+i(47===e?e:I())}function M(e){for(;!E(N());)I();return C(e,y)}var L="-ms-",$="-moz-",j="-webkit-",z="comm",B="rule",U="decl",V="@keyframes";function W(e,t){for(var n="",r=h(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function G(e,t,n,r){switch(e.type){case"@import":case U:return e.return=e.return||e.value;case z:return"";case V:return e.return=e.value+"{"+W(e.children,r)+"}";case B:e.value=e.props.join(",")}return f(n=W(e.children,r))?e.return=e.value+"{"+n+"}":""}function Z(e){return A(H("",null,null,null,[""],e=_(e),0,[0],e))}function H(e,t,n,r,a,o,s,d,h){for(var v=0,m=0,g=s,y=0,b=0,x=0,k=1,w=1,C=1,E=0,_="",A=a,P=o,L=r,$=_;w;)switch(x=E,E=I()){case 40:if(108!=x&&58==l($,g-1)){-1!=c($+=u(R(E),"&","&\f"),"&\f")&&(C=-1);break}case 34:case 39:case 91:$+=R(E);break;case 9:case 10:case 13:case 32:$+=O(x);break;case 92:$+=D(T()-1,7);continue;case 47:switch(N()){case 42:case 47:p(K(F(I(),T()),t,n),h);break;default:$+="/"}break;case 123*k:d[v++]=f($)*C;case 125*k:case 59:case 0:switch(E){case 0:case 125:w=0;case 59+m:b>0&&f($)-g&&p(b>32?X($+";",r,n,g-1):X(u($," ","")+";",r,n,g-2),h);break;case 59:$+=";";default:if(p(L=q($,t,n,v,m,a,d,_,A=[],P=[],g),o),123===E)if(0===m)H($,t,L,L,A,o,g,d,P);else switch(99===y&&110===l($,3)?100:y){case 100:case 109:case 115:H(e,L,L,r&&p(q(e,L,L,0,0,a,d,_,a,A=[],g),P),a,P,g,d,r?A:P);break;default:H($,L,L,L,[""],P,0,d,P)}}v=m=b=0,k=C=1,_=$="",g=s;break;case 58:g=1+f($),b=x;default:if(k<1)if(123==E)--k;else if(125==E&&0==k++&&125==S())continue;switch($+=i(E),E*k){case 38:C=m>0?1:($+="\f",-1);break;case 44:d[v++]=(f($)-1)*C,C=1;break;case 64:45===N()&&($+=R(I())),y=N(),m=g=f(_=$+=M(T())),E++;break;case 45:45===x&&2==f($)&&(k=0)}}return o}function q(e,t,n,r,i,o,c,l,f,p,v){for(var m=i-1,g=0===i?o:[""],y=h(g),b=0,x=0,w=0;b<r;++b)for(var S=0,I=d(e,m+1,m=a(x=c[b])),N=e;S<y;++S)(N=s(x>0?g[S]+" "+I:u(I,/&\f/g,g[S])))&&(f[w++]=N);return k(e,t,n,0===i?B:l,f,p,v)}function K(e,t,n){return k(e,t,n,z,i(b),d(e,2,-2),0)}function X(e,t,n,r){return k(e,t,n,U,d(e,0,r),d(e,r+1,-1),r)}var J=function(e,t,n){for(var r=0,a=0;r=a,a=N(),38===r&&12===a&&(t[n]=1),!E(a);)I();return C(e,y)},Y=function(e,t){return A(function(e,t){var n=-1,r=44;do{switch(E(r)){case 0:38===r&&12===N()&&(t[n]=1),e[n]+=J(y-1,t,n);break;case 2:e[n]+=R(r);break;case 4:if(44===r){e[++n]=58===N()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=i(r)}}while(r=I());return e}(_(e),t))},Q=new WeakMap,ee=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Q.get(n))&&!r){Q.set(e,!0);for(var a=[],i=Y(t,a),o=n.props,s=0,u=0;s<i.length;s++)for(var c=0;c<o.length;c++,u++)e.props[u]=a[s]?i[s].replace(/&\f/g,o[c]):o[c]+" "+i[s]}}},te=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^l(e,0)?(((t<<2^l(e,0))<<2^l(e,1))<<2^l(e,2))<<2^l(e,3):0}(e,t)){case 5103:return"-webkit-print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return j+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return j+e+$+e+L+e+e;case 6828:case 4268:return j+e+L+e+e;case 6165:return j+e+L+"flex-"+e+e;case 5187:return j+e+u(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return j+e+L+"flex-item-"+u(e,/flex-|-self/,"")+e;case 4675:return j+e+L+"flex-line-pack"+u(e,/align-content|flex-|-self/,"")+e;case 5548:return j+e+L+u(e,"shrink","negative")+e;case 5292:return j+e+L+u(e,"basis","preferred-size")+e;case 6060:return"-webkit-box-"+u(e,"-grow","")+j+e+L+u(e,"grow","positive")+e;case 4554:return j+u(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return u(u(u(e,/(zoom-|grab)/,"-webkit-$1"),/(image-set)/,"-webkit-$1"),e,"")+e;case 5495:case 3959:return u(e,/(image-set\([^]*)/,"-webkit-$1$`$1");case 4968:return u(u(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+j+e+e;case 4095:case 3583:case 4068:case 2532:return u(e,/(.+)-inline(.+)/,"-webkit-$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(f(e)-1-t>6)switch(l(e,t+1)){case 109:if(45!==l(e,t+4))break;case 102:return u(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1-moz-"+(108==l(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?ne(u(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==l(e,t+1))break;case 6444:switch(l(e,f(e)-3-(~c(e,"!important")&&10))){case 107:return u(e,":",":-webkit-")+e;case 101:return u(e,/(.+:)([^;!]+)(;|!.+)?/,"$1-webkit-"+(45===l(e,14)?"inline-":"")+"box$3$1"+"-webkit-$2$3$1"+"-ms-$2box$3")+e}break;case 5936:switch(l(e,t+11)){case 114:return j+e+L+u(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return j+e+L+u(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return j+e+L+u(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return j+e+L+e+e}return e}var re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case U:e.return=ne(e.value,e.length);break;case V:return W([w(e,{value:u(e.value,"@","@-webkit-")})],r);case B:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return W([w(e,{props:[u(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return W([w(e,{props:[u(t,/:(plac\w+)/,":-webkit-input-$1")]}),w(e,{props:[u(t,/:(plac\w+)/,":-moz-$1")]}),w(e,{props:[u(t,/:(plac\w+)/,"-ms-input-$1")]})],r)}return""}))}}],ae=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var a=e.stylisPlugins||re;var i,o,s={},u=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;u.push(e)}));var c,l,d=[G,(l=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&l(e)})],f=function(e){var t=h(e);return function(n,r,a,i){for(var o="",s=0;s<t;s++)o+=e[s](n,r,a,i)||"";return o}}([ee,te].concat(a,d));o=function(e,t,n,r){c=n,W(Z(e?e+"{"+t.styles+"}":t.styles),f),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new r({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return p.sheet.hydrate(u),p}},9797:function(e,t){"use strict";t.Z=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},7711:function(e,t,n){"use strict";var r=n(7441),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var a=h(n);a&&a!==p&&e(t,a,r)}var o=l(n);d&&(o=o.concat(d(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var g=o[m];if(!i[g]&&(!r||!r[g])&&(!v||!v[g])&&(!s||!s[g])){var y=f(n,g);try{c(t,g,y)}catch(b){}}}}return t}},9140:function(e,t,n){"use strict";n.d(t,{O:function(){return v}});var r=function(e){for(var t,n=0,r=0,a=e.length;a>=4;++r,a-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(a){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(9797),o=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,u=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},l=(0,i.Z)((function(e){return u(e)?e:e.replace(o,"-$&").toLowerCase()})),d=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return h={name:t,styles:n,next:h},t}))}return 1===a[e]||u(e)||"number"!==typeof t||0===t?t:t+"px"};function f(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return h={name:n.name,styles:n.styles,next:h},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)h={name:r.name,styles:r.styles,next:h},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=f(e,t,n[a])+";";else for(var i in n){var o=n[i];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=i+"{"+t[o]+"}":c(o)&&(r+=l(i)+":"+d(i,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=f(e,t,o);switch(i){case"animation":case"animationName":r+=l(i)+":"+s+";";break;default:r+=i+"{"+s+"}"}}else for(var u=0;u<o.length;u++)c(o[u])&&(r+=l(i)+":"+d(i,o[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=h,i=n(e);return h=a,f(e,t,i)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var h,p=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var v=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var a=!0,i="";h=void 0;var o=e[0];null==o||void 0===o.raw?(a=!1,i+=f(n,t,o)):i+=o[0];for(var s=1;s<e.length;s++)i+=f(n,t,e[s]),a&&(i+=o[s]);p.lastIndex=0;for(var u,c="";null!==(u=p.exec(i));)c+="-"+u[1];return{name:r(i)+c,styles:i,next:h}}},2561:function(e,t,n){"use strict";var r;n.d(t,{L:function(){return o}});var a=n(2791),i=!!(r||(r=n.t(a,2))).useInsertionEffect&&(r||(r=n.t(a,2))).useInsertionEffect,o=i||function(e){return e()};i||a.useLayoutEffect},5545:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20z"}),"AccountCircle");t.Z=o},260:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"}),"ArrowBackIosNew");t.Z=o},4694:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M13.35 20.13c-.76.69-1.93.69-2.69-.01l-.11-.1C5.3 15.27 1.87 12.16 2 8.28c.06-1.7.93-3.33 2.34-4.29 2.64-1.8 5.9-.96 7.66 1.1 1.76-2.06 5.02-2.91 7.66-1.1 1.41.96 2.28 2.59 2.34 4.29.14 3.88-3.3 6.99-8.55 11.76l-.1.09z"}),"FavoriteRounded");t.Z=o},7541:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");t.Z=o},5649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(9475)},6532:function(e,t){"use strict";var n,r=Symbol.for("react.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case i:case s:case o:case f:case h:return e;default:switch(e=e&&e.$$typeof){case l:case c:case d:case v:case p:case u:return e;default:return t}}case a:return t}}}n=Symbol.for("react.module.reference")},8457:function(e,t,n){"use strict";n(6532)},9330:function(e,t,n){"use strict";n.d(t,{Z:function(){return Z}});var r=n(7462),a=n(3366),i=n(6189),o=n(2466),s=n(5080),u=n(7416),c=n(104),l=n(4942);function d(e,t){var n;return(0,r.Z)({toolbar:(n={minHeight:56},(0,l.Z)(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),(0,l.Z)(n,e.up("sm"),{minHeight:64}),n)},t)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function h(e){if(e.type)return e;if("#"===e.charAt(0))return h(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,i.Z)(9,e));var r,a=e.substring(t+1,e.length-1);if("color"===n){if(r=(a=a.split(" ")).shift(),4===a.length&&"/"===a[3].charAt(0)&&(a[3]=a[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error((0,i.Z)(10,r))}else a=a.split(",");return{type:n,values:a=a.map((function(e){return parseFloat(e)})),colorSpace:r}}function p(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function v(e){var t="hsl"===(e=h(e)).type||"hsla"===e.type?h(function(e){var t=(e=h(e)).values,n=t[0],r=t[1]/100,a=t[2]/100,i=r*Math.min(a,1-a),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return a-i*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),p({type:s,values:u})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function m(e,t){if(e=h(e),t=f(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return p(e)}function g(e,t){if(e=h(e),t=f(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return p(e)}var y={black:"#000",white:"#fff"},b={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},x={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},k={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},w={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},S={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},I={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},N={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},T=["mode","contrastThreshold","tonalOffset"],C={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:y.white,default:y.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},E={text:{primary:y.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:y.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function _(e,t,n,r){var a=r.light||r,i=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=g(e.main,a):"dark"===t&&(e.dark=m(e.main,i)))}function A(e){var t=e.mode,n=void 0===t?"light":t,s=e.contrastThreshold,u=void 0===s?3:s,c=e.tonalOffset,l=void 0===c?.2:c,d=(0,a.Z)(e,T),f=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:S[200],light:S[50],dark:S[400]}:{main:S[700],light:S[400],dark:S[800]}}(n),h=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:x[200],light:x[50],dark:x[400]}:{main:x[500],light:x[300],dark:x[700]}}(n),p=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:k[500],light:k[300],dark:k[700]}:{main:k[700],light:k[400],dark:k[800]}}(n),m=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:I[400],light:I[300],dark:I[700]}:{main:I[700],light:I[500],dark:I[900]}}(n),g=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:N[400],light:N[300],dark:N[700]}:{main:N[800],light:N[500],dark:N[900]}}(n),A=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:w[400],light:w[300],dark:w[700]}:{main:"#ed6c02",light:w[500],dark:w[900]}}(n);function R(e){var t=function(e,t){var n=v(e),r=v(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,E.text.primary)>=u?E.text.primary:C.text.primary;return t}var O=function(e){var t=e.color,n=e.name,a=e.mainShade,o=void 0===a?500:a,s=e.lightShade,u=void 0===s?300:s,c=e.darkShade,d=void 0===c?700:c;if(!(t=(0,r.Z)({},t)).main&&t[o]&&(t.main=t[o]),!t.hasOwnProperty("main"))throw new Error((0,i.Z)(11,n?" (".concat(n,")"):"",o));if("string"!==typeof t.main)throw new Error((0,i.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return _(t,"light",u,l),_(t,"dark",d,l),t.contrastText||(t.contrastText=R(t.main)),t},D={dark:E,light:C};return(0,o.Z)((0,r.Z)({common:(0,r.Z)({},y),mode:n,primary:O({color:f,name:"primary"}),secondary:O({color:h,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:O({color:p,name:"error"}),warning:O({color:A,name:"warning"}),info:O({color:m,name:"info"}),success:O({color:g,name:"success"}),grey:b,contrastThreshold:u,getContrastText:R,augmentColor:O,tonalOffset:l},D[n]),d)}var R=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var O={textTransform:"uppercase"},D='"Roboto", "Helvetica", "Arial", sans-serif';function P(e,t){var n="function"===typeof t?t(e):t,i=n.fontFamily,s=void 0===i?D:i,u=n.fontSize,c=void 0===u?14:u,l=n.fontWeightLight,d=void 0===l?300:l,f=n.fontWeightRegular,h=void 0===f?400:f,p=n.fontWeightMedium,v=void 0===p?500:p,m=n.fontWeightBold,g=void 0===m?700:m,y=n.htmlFontSize,b=void 0===y?16:y,x=n.allVariants,k=n.pxToRem,w=(0,a.Z)(n,R);var S=c/14,I=k||function(e){return"".concat(e/b*S,"rem")},N=function(e,t,n,a,i){return(0,r.Z)({fontFamily:s,fontWeight:e,fontSize:I(t),lineHeight:n},s===D?{letterSpacing:"".concat((o=a/t,Math.round(1e5*o)/1e5),"em")}:{},i,x);var o},T={h1:N(d,96,1.167,-1.5),h2:N(d,60,1.2,-.5),h3:N(h,48,1.167,0),h4:N(h,34,1.235,.25),h5:N(h,24,1.334,0),h6:N(v,20,1.6,.15),subtitle1:N(h,16,1.75,.15),subtitle2:N(v,14,1.57,.1),body1:N(h,16,1.5,.15),body2:N(h,14,1.43,.15),button:N(v,14,1.75,.4,O),caption:N(h,12,1.66,.4),overline:N(h,12,2.66,1,O),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,o.Z)((0,r.Z)({htmlFontSize:b,pxToRem:I,fontFamily:s,fontSize:c,fontWeightLight:d,fontWeightRegular:h,fontWeightMedium:v,fontWeightBold:g},T),w,{clone:!1})}function F(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var M=["none",F(0,2,1,-1,0,1,1,0,0,1,3,0),F(0,3,1,-2,0,2,2,0,0,1,5,0),F(0,3,3,-2,0,3,4,0,0,1,8,0),F(0,2,4,-1,0,4,5,0,0,1,10,0),F(0,3,5,-1,0,5,8,0,0,1,14,0),F(0,3,5,-1,0,6,10,0,0,1,18,0),F(0,4,5,-2,0,7,10,1,0,2,16,1),F(0,5,5,-3,0,8,10,1,0,3,14,2),F(0,5,6,-3,0,9,12,1,0,3,16,2),F(0,6,6,-3,0,10,14,1,0,4,18,3),F(0,6,7,-4,0,11,15,1,0,4,20,3),F(0,7,8,-4,0,12,17,2,0,5,22,4),F(0,7,8,-4,0,13,19,2,0,5,24,4),F(0,7,9,-4,0,14,21,2,0,5,26,4),F(0,8,9,-5,0,15,22,2,0,6,28,5),F(0,8,10,-5,0,16,24,2,0,6,30,5),F(0,8,11,-5,0,17,26,2,0,6,32,5),F(0,9,11,-5,0,18,28,2,0,7,34,6),F(0,9,12,-6,0,19,29,2,0,7,36,6),F(0,10,13,-6,0,20,31,3,0,8,38,7),F(0,10,13,-6,0,21,33,3,0,8,40,7),F(0,10,14,-6,0,22,35,3,0,8,42,7),F(0,11,14,-7,0,23,36,3,0,9,44,8),F(0,11,15,-7,0,24,38,3,0,9,46,8)],L=["duration","easing","delay"],$={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},j={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function z(e){return"".concat(Math.round(e),"ms")}function B(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function U(e){var t=(0,r.Z)({},$,e.easing),n=(0,r.Z)({},j,e.duration);return(0,r.Z)({getAutoHeightDuration:B,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.duration,o=void 0===i?n.standard:i,s=r.easing,u=void 0===s?t.easeInOut:s,c=r.delay,l=void 0===c?0:c;(0,a.Z)(r,L);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof o?o:z(o)," ").concat(u," ").concat("string"===typeof l?l:z(l))})).join(",")}},e,{easing:t,duration:n})}var V={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},W=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,l=e.palette,f=void 0===l?{}:l,h=e.transitions,p=void 0===h?{}:h,v=e.typography,m=void 0===v?{}:v,g=(0,a.Z)(e,W);if(e.vars)throw new Error((0,i.Z)(18));var y=A(f),b=(0,s.Z)(e),x=(0,o.Z)(b,{mixins:d(b.breakpoints,n),palette:y,shadows:M.slice(),typography:P(y,m),transitions:U(p),zIndex:(0,r.Z)({},V)});x=(0,o.Z)(x,g);for(var k=arguments.length,w=new Array(k>1?k-1:0),S=1;S<k;S++)w[S-1]=arguments[S];return(x=w.reduce((function(e,t){return(0,o.Z)(e,t)}),x)).unstable_sxConfig=(0,r.Z)({},u.Z,null==g?void 0:g.unstable_sxConfig),x.unstable_sx=function(e){return(0,c.Z)({sx:e,theme:this})},x}var Z=G()},9359:function(e,t,n){"use strict";n.d(t,{ZP:function(){return Z}});var r=n(3433),a=n(9439),i=n(3366),o=n(7462),s=n(2791),u=n(9797),c=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,l=(0,u.Z)((function(e){return c.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),d=n(3361),f=n(9140),h=n(2561),p=(0,s.createContext)("undefined"!==typeof HTMLElement?(0,d.Z)({key:"css"}):null);p.Provider;var v=function(e){return(0,s.forwardRef)((function(t,n){var r=(0,s.useContext)(p);return e(t,r,n)}))},m=(0,s.createContext)({});function g(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var y=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},b=l,x=function(e){return"theme"!==e},k=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?b:x},w=function(e,t,n){var r;if(t){var a=t.shouldForwardProp;r=e.__emotion_forwardProp&&a?function(t){return e.__emotion_forwardProp(t)&&a(t)}:a}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},S=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;y(t,n,r);(0,h.L)((function(){return function(e,t,n){y(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a=t;do{e.insert(t===a?"."+r:"",a,e.sheet,!0),a=a.next}while(void 0!==a)}}(t,n,r)}));return null},I=function e(t,n){var r,a,i=t.__emotion_real===t,u=i&&t.__emotion_base||t;void 0!==n&&(r=n.label,a=n.target);var c=w(t,n,i),l=c||k(u),d=!l("as");return function(){var h=arguments,p=i&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&p.push("label:"+r+";"),null==h[0]||void 0===h[0].raw)p.push.apply(p,h);else{0,p.push(h[0][0]);for(var y=h.length,b=1;b<y;b++)p.push(h[b],h[0][b])}var x=v((function(e,t,n){var r=d&&e.as||u,i="",o=[],h=e;if(null==e.theme){for(var v in h={},e)h[v]=e[v];h.theme=(0,s.useContext)(m)}"string"===typeof e.className?i=g(t.registered,o,e.className):null!=e.className&&(i=e.className+" ");var y=(0,f.O)(p.concat(o),t.registered,h);i+=t.key+"-"+y.name,void 0!==a&&(i+=" "+a);var b=d&&void 0===c?k(r):l,x={};for(var w in e)d&&"as"===w||b(w)&&(x[w]=e[w]);return x.className=i,x.ref=n,(0,s.createElement)(s.Fragment,null,(0,s.createElement)(S,{cache:t,serialized:y,isStringTag:"string"===typeof r}),(0,s.createElement)(r,x))}));return x.displayName=void 0!==r?r:"Styled("+("string"===typeof u?u:u.displayName||u.name||"Component")+")",x.defaultProps=t.defaultProps,x.__emotion_real=x,x.__emotion_base=u,x.__emotion_styles=p,x.__emotion_forwardProp=c,Object.defineProperty(x,"toString",{value:function(){return"."+a}}),x.withComponent=function(t,r){return e(t,(0,o.Z)({},n,r,{shouldForwardProp:w(x,r,!0)})).apply(void 0,p)},x}},N=I.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){N[e]=N(e)}));var T=N;function C(e,t){return T(e,t)}var E=function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},_=n(5080),A=n(7312),R=["variant"];function O(e){return 0===e.length}function D(e){var t=e.variant,n=(0,i.Z)(e,R),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?O(r)?e[t]:(0,A.Z)(e[t]):"".concat(O(r)?t:(0,A.Z)(t)).concat((0,A.Z)(e[t].toString()))})),r}var P=n(104),F=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],M=["theme"],L=["theme"];function $(e){return 0===Object.keys(e).length}function j(e){return"string"===typeof e&&e.charCodeAt(0)>96}var z=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},B=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=D(e.props);r[t]=e.style})),r},U=function(e,t,n,r){var a,i,o=e.ownerState,s=void 0===o?{}:o,u=[],c=null==n||null==(a=n.components)||null==(i=a[r])?void 0:i.variants;return c&&c.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[D(n.props)])})),u};function V(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var W=(0,_.Z)();var G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?W:t,s=e.rootShouldForwardProp,u=void 0===s?V:s,c=e.slotShouldForwardProp,l=void 0===c?V:c,d=function(e){var t=$(e.theme)?n:e.theme;return(0,P.Z)((0,o.Z)({},e,{theme:t}))};return d.__mui_systemSx=!0,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};E(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var s,c=t.name,f=t.slot,h=t.skipVariantsResolver,p=t.skipSx,v=t.overridesResolver,m=(0,i.Z)(t,F),g=void 0!==h?h:f&&"Root"!==f||!1,y=p||!1;var b=V;"Root"===f?b=u:f?b=l:j(e)&&(b=void 0);var x=C(e,(0,o.Z)({shouldForwardProp:b,label:s},m)),k=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),u=1;u<t;u++)s[u-1]=arguments[u];var l=s?s.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,a=(0,i.Z)(t,M);return e((0,o.Z)({theme:$(r)?n:r},a))}:e})):[],f=e;c&&v&&l.push((function(e){var t=$(e.theme)?n:e.theme,r=z(c,t);if(r){var i={};return Object.entries(r).forEach((function(n){var r=(0,a.Z)(n,2),s=r[0],u=r[1];i[s]="function"===typeof u?u((0,o.Z)({},e,{theme:t})):u})),v(e,i)}return null})),c&&!g&&l.push((function(e){var t=$(e.theme)?n:e.theme;return U(e,B(c,t),t,c)})),y||l.push(d);var h=l.length-s.length;if(Array.isArray(e)&&h>0){var p=new Array(h).fill("");(f=[].concat((0,r.Z)(e),(0,r.Z)(p))).raw=[].concat((0,r.Z)(e.raw),(0,r.Z)(p))}else"function"===typeof e&&e.__emotion_real!==e&&(f=function(t){var r=t.theme,a=(0,i.Z)(t,L);return e((0,o.Z)({theme:$(r)?n:r},a))});var m=x.apply(void 0,[f].concat((0,r.Z)(l)));return m};return x.withConfig&&(k.withConfig=x.withConfig),k}}({defaultTheme:n(9330).Z,rootShouldForwardProp:function(e){return V(e)&&"classes"!==e}}),Z=G},1388:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(7462);function a(e,t){var n=(0,r.Z)({},t);return Object.keys(e).forEach((function(i){if(i.toString().match(/^(components|slots)$/))n[i]=(0,r.Z)({},e[i],n[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){var o=e[i]||{},s=t[i];n[i]={},s&&Object.keys(s)?o&&Object.keys(o)?(n[i]=(0,r.Z)({},s),Object.keys(o).forEach((function(e){n[i][e]=a(o[e],s[e])}))):n[i]=s:n[i]=o}else void 0===n[i]&&(n[i]=e[i])})),n}function i(e){var t=e.theme,n=e.name,r=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?a(t.components[n].defaultProps,r):r}var o=n(5080),s=n(2791);var u=s.createContext(null);function c(){return s.useContext(u)}function l(e){return 0===Object.keys(e).length}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=c();return!t||l(t)?e:t},f=(0,o.Z)();var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return d(e)};var p=n(9330);function v(e){return function(e){var t=e.props,n=e.name,r=e.defaultTheme;return i({theme:h(r),name:n,props:t})}({props:e.props,name:e.name,defaultTheme:p.Z})}},9475:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return a},createChainedFunction:function(){return i},createSvgIcon:function(){return w},debounce:function(){return S},deprecatedPropType:function(){return I},isMuiElement:function(){return N},ownerDocument:function(){return C},ownerWindow:function(){return E},requirePropFactory:function(){return _},setRef:function(){return A},unstable_ClassNameGenerator:function(){return B},unstable_useEnhancedEffect:function(){return R},unstable_useId:function(){return F},unsupportedProp:function(){return M},useControlled:function(){return L},useEventCallback:function(){return $.Z},useForkRef:function(){return j.Z},useIsFocusVisible:function(){return z.Z}});var r=n(5902),a=n(7312).Z;var i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),(function(){}))},o=n(7462),s=n(2791),u=n.t(s,2),c=n(3366),l=n(8182),d=n(4419),f=n(1388),h=n(9359),p=n(5878),v=n(1217);function m(e){return(0,v.Z)("MuiSvgIcon",e)}(0,p.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var g=n(184),y=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],b=(0,h.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat(a(n.color))],t["fontSize".concat(a(n.fontSize))]]}})((function(e){var t,n,r,a,i,o,s,u,c,l,d,f,h,p,v,m,g,y=e.theme,b=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=y.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=y.transitions)||null==(a=r.duration)?void 0:a.shorter}),fontSize:{inherit:"inherit",small:(null==(i=y.typography)||null==(o=i.pxToRem)?void 0:o.call(i,20))||"1.25rem",medium:(null==(s=y.typography)||null==(u=s.pxToRem)?void 0:u.call(s,24))||"1.5rem",large:(null==(c=y.typography)||null==(l=c.pxToRem)?void 0:l.call(c,35))||"2.1875rem"}[b.fontSize],color:null!=(d=null==(f=(y.vars||y).palette)||null==(h=f[b.color])?void 0:h.main)?d:{action:null==(p=(y.vars||y).palette)||null==(v=p.action)?void 0:v.active,disabled:null==(m=(y.vars||y).palette)||null==(g=m.action)?void 0:g.disabled,inherit:void 0}[b.color]}})),x=s.forwardRef((function(e,t){var n=(0,f.Z)({props:e,name:"MuiSvgIcon"}),r=n.children,i=n.className,s=n.color,u=void 0===s?"inherit":s,h=n.component,p=void 0===h?"svg":h,v=n.fontSize,x=void 0===v?"medium":v,k=n.htmlColor,w=n.inheritViewBox,S=void 0!==w&&w,I=n.titleAccess,N=n.viewBox,T=void 0===N?"0 0 24 24":N,C=(0,c.Z)(n,y),E=(0,o.Z)({},n,{color:u,component:p,fontSize:x,instanceFontSize:e.fontSize,inheritViewBox:S,viewBox:T}),_={};S||(_.viewBox=T);var A=function(e){var t=e.color,n=e.fontSize,r=e.classes,i={root:["root","inherit"!==t&&"color".concat(a(t)),"fontSize".concat(a(n))]};return(0,d.Z)(i,m,r)}(E);return(0,g.jsxs)(b,(0,o.Z)({as:p,className:(0,l.Z)(A.root,i),focusable:"false",color:k,"aria-hidden":!I||void 0,role:I?"img":void 0,ref:t},_,C,{ownerState:E,children:[r,I?(0,g.jsx)("title",{children:I}):null]}))}));x.muiName="SvgIcon";var k=x;function w(e,t){function n(n,r){return(0,g.jsx)(k,(0,o.Z)({"data-testid":"".concat(t,"Icon"),ref:r},n,{children:e}))}return n.muiName=k.muiName,s.memo(s.forwardRef(n))}var S=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var s=function(){e.apply(r,i)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r};var I=function(e,t){return function(){return null}};var N=function(e,t){return s.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)};function T(e){return e&&e.ownerDocument||document}var C=T;var E=function(e){return T(e).defaultView||window};var _=function(e,t){return function(){return null}},A=n(2971).Z,R=n(5721).Z,O=n(9439),D=0;var P=u.useId;var F=function(e){if(void 0!==P){var t=P();return null!=e?e:t}return function(e){var t=s.useState(e),n=(0,O.Z)(t,2),r=n[0],a=n[1],i=e||r;return s.useEffect((function(){null==r&&a("mui-".concat(D+=1))}),[r]),i}(e)};var M=function(e,t,n,r,a){return null};var L=function(e){var t=e.controlled,n=e.default,r=(e.name,e.state,s.useRef(void 0!==t).current),a=s.useState(n),i=(0,O.Z)(a,2),o=i[0],u=i[1];return[r?t:o,s.useCallback((function(e){r||u(e)}),[])]},$=n(6868),j=n(4843),z=n(3031),B={configure:function(e){r.Z.configure(e)}}},6868:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2791),a=n(5721);var i=function(e){var t=r.useRef(e);return(0,a.Z)((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},4843:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2791),a=n(2971);var i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((function(){return t.every((function(e){return null==e}))?null:function(e){t.forEach((function(t){(0,a.Z)(t,e)}))}}),t)}},3031:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r,a=n(2791),i=!0,o=!1,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function u(e){e.metaKey||e.altKey||e.ctrlKey||(i=!0)}function c(){i=!1}function l(){"hidden"===this.visibilityState&&o&&(i=!0)}function d(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return i||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!s[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var f=function(){var e=a.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",u,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",l,!0))}),[]),t=a.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!d(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(o=!0,window.clearTimeout(r),r=window.setTimeout((function(){o=!1}),100),t.current=!1,!0)},ref:e}}},1184:function(e,t,n){"use strict";n.d(t,{VO:function(){return r},k9:function(){return i},W8:function(){return o},L7:function(){return s}});var r={xs:0,sm:600,md:900,lg:1200,xl:1536},a={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(r[e],"px)")}};function i(e,t,n){var i=e.theme||{};if(Array.isArray(t)){var o=i.breakpoints||a;return t.reduce((function(e,r,a){return e[o.up(o.keys[a])]=n(t[a]),e}),{})}if("object"===typeof t){var s=i.breakpoints||a;return Object.keys(t).reduce((function(e,a){if(-1!==Object.keys(s.values||r).indexOf(a)){e[s.up(a)]=n(t[a],a)}else{var i=a;e[i]=t[i]}return e}),{})}return n(t)}function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function s(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}},5080:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(7462),a=n(3366),i=n(2466),o=n(4942),s=["values","unit","step"];function u(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,i=e.unit,u=void 0===i?"px":i,c=e.step,l=void 0===c?5:c,d=(0,a.Z)(e,s),f=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return(0,r.Z)({},e,(0,o.Z)({},t.key,t.val))}),{})}(n),h=Object.keys(f);function p(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(u,")")}function v(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-l/100).concat(u,")")}function m(e,t){var r=h.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(u,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[h[r]]?n[h[r]]:t)-l/100).concat(u,")")}return(0,r.Z)({keys:h,values:f,up:p,down:v,between:m,only:function(e){return h.indexOf(e)+1<h.length?m(e,h[h.indexOf(e)+1]):p(e)},not:function(e){var t=h.indexOf(e);return 0===t?p(h[1]):t===h.length-1?v(h[t]):m(e,h[h.indexOf(e)+1]).replace("@media","@media not all and")},unit:u},d)}var c={borderRadius:4},l=n(5682);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,l.hB)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=0===n.length?[1]:n;return a.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var f=n(104),h=n(7416),p=["breakpoints","palette","spacing","shape"];var v=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,o=e.palette,s=void 0===o?{}:o,l=e.spacing,v=e.shape,m=void 0===v?{}:v,g=(0,a.Z)(e,p),y=u(n),b=d(l),x=(0,i.Z)({breakpoints:y,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},s),spacing:b,shape:(0,r.Z)({},c,m)},g),k=arguments.length,w=new Array(k>1?k-1:0),S=1;S<k;S++)w[S-1]=arguments[S];return(x=w.reduce((function(e,t){return(0,i.Z)(e,t)}),x)).unstable_sxConfig=(0,r.Z)({},h.Z,null==g?void 0:g.unstable_sxConfig),x.unstable_sx=function(e){return(0,f.Z)({sx:e,theme:this})},x}},8247:function(e,t,n){"use strict";var r=n(2466);t.Z=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},5682:function(e,t,n){"use strict";n.d(t,{hB:function(){return v},eI:function(){return p},NA:function(){return m},e6:function(){return b},o3:function(){return x}});var r=n(9439),a=n(1184),i=n(8529),o=n(8247);var s={m:"margin",p:"padding"},u={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},c={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},l=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!c[e])return[e];e=c[e]}var t=e.split(""),n=(0,r.Z)(t,2),a=n[0],i=n[1],o=s[a],l=u[i]||"";return Array.isArray(l)?l.map((function(e){return o+e})):[o+l]})),d=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],f=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],h=[].concat(d,f);function p(e,t,n,r){var a,o=null!=(a=(0,i.DW)(e,t,!1))?a:n;return"number"===typeof o?function(e){return"string"===typeof e?e:o*e}:Array.isArray(o)?function(e){return"string"===typeof e?e:o[e]}:"function"===typeof o?o:function(){}}function v(e){return p(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(e,t,n,r){if(-1===t.indexOf(n))return null;var i=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=m(t,n),e}),{})}}(l(n),r),o=e[n];return(0,a.k9)(e,o,i)}function y(e,t){var n=v(e.theme);return Object.keys(e).map((function(r){return g(e,t,r,n)})).reduce(o.Z,{})}function b(e){return y(e,d)}function x(e){return y(e,f)}function k(e){return y(e,h)}b.propTypes={},b.filterProps=d,x.propTypes={},x.filterProps=f,k.propTypes={},k.filterProps=h},8529:function(e,t,n){"use strict";n.d(t,{DW:function(){return o},Jq:function(){return s}});var r=n(4942),a=n(7312),i=n(1184);function o(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function s(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||a:o(e,n)||a,t&&(r=t(r,a,e)),r}t.ZP=function(e){var t=e.prop,n=e.cssProperty,u=void 0===n?e.prop:n,c=e.themeKey,l=e.transform,d=function(e){if(null==e[t])return null;var n=e[t],d=o(e.theme,c)||{};return(0,i.k9)(e,n,(function(e){var n=s(d,l,e);return e===n&&"string"===typeof e&&(n=s(d,l,"".concat(t).concat("default"===e?"":(0,a.Z)(e)),e)),!1===u?n:(0,r.Z)({},u,n)}))};return d.propTypes={},d.filterProps=[t],d}},7416:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var r=n(5682),a=n(8529),i=n(8247);var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),a=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?(0,i.Z)(t,r[n](e)):t}),{})};return a.propTypes={},a.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),a},s=n(1184);function u(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var c=(0,a.ZP)({prop:"border",themeKey:"borders",transform:u}),l=(0,a.ZP)({prop:"borderTop",themeKey:"borders",transform:u}),d=(0,a.ZP)({prop:"borderRight",themeKey:"borders",transform:u}),f=(0,a.ZP)({prop:"borderBottom",themeKey:"borders",transform:u}),h=(0,a.ZP)({prop:"borderLeft",themeKey:"borders",transform:u}),p=(0,a.ZP)({prop:"borderColor",themeKey:"palette"}),v=(0,a.ZP)({prop:"borderTopColor",themeKey:"palette"}),m=(0,a.ZP)({prop:"borderRightColor",themeKey:"palette"}),g=(0,a.ZP)({prop:"borderBottomColor",themeKey:"palette"}),y=(0,a.ZP)({prop:"borderLeftColor",themeKey:"palette"}),b=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=(0,r.eI)(e.theme,"shape.borderRadius",4,"borderRadius");return(0,s.k9)(e,e.borderRadius,(function(e){return{borderRadius:(0,r.NA)(t,e)}}))}return null};b.propTypes={},b.filterProps=["borderRadius"];o(c,l,d,f,h,p,v,m,g,y,b);var x=function(e){if(void 0!==e.gap&&null!==e.gap){var t=(0,r.eI)(e.theme,"spacing",8,"gap");return(0,s.k9)(e,e.gap,(function(e){return{gap:(0,r.NA)(t,e)}}))}return null};x.propTypes={},x.filterProps=["gap"];var k=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=(0,r.eI)(e.theme,"spacing",8,"columnGap");return(0,s.k9)(e,e.columnGap,(function(e){return{columnGap:(0,r.NA)(t,e)}}))}return null};k.propTypes={},k.filterProps=["columnGap"];var w=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=(0,r.eI)(e.theme,"spacing",8,"rowGap");return(0,s.k9)(e,e.rowGap,(function(e){return{rowGap:(0,r.NA)(t,e)}}))}return null};w.propTypes={},w.filterProps=["rowGap"];o(x,k,w,(0,a.ZP)({prop:"gridColumn"}),(0,a.ZP)({prop:"gridRow"}),(0,a.ZP)({prop:"gridAutoFlow"}),(0,a.ZP)({prop:"gridAutoColumns"}),(0,a.ZP)({prop:"gridAutoRows"}),(0,a.ZP)({prop:"gridTemplateColumns"}),(0,a.ZP)({prop:"gridTemplateRows"}),(0,a.ZP)({prop:"gridTemplateAreas"}),(0,a.ZP)({prop:"gridArea"}));function S(e,t){return"grey"===t?t:e}o((0,a.ZP)({prop:"color",themeKey:"palette",transform:S}),(0,a.ZP)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:S}),(0,a.ZP)({prop:"backgroundColor",themeKey:"palette",transform:S}));function I(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var N=(0,a.ZP)({prop:"width",transform:I}),T=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return(0,s.k9)(e,e.maxWidth,(function(t){var n,r,a;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(a=r.values)?void 0:a[t])||s.VO[t]||I(t)}}))}return null};T.filterProps=["maxWidth"];var C=(0,a.ZP)({prop:"minWidth",transform:I}),E=(0,a.ZP)({prop:"height",transform:I}),_=(0,a.ZP)({prop:"maxHeight",transform:I}),A=(0,a.ZP)({prop:"minHeight",transform:I}),R=((0,a.ZP)({prop:"size",cssProperty:"width",transform:I}),(0,a.ZP)({prop:"size",cssProperty:"height",transform:I}),o(N,T,C,E,_,A,(0,a.ZP)({prop:"boxSizing"})),{border:{themeKey:"borders",transform:u},borderTop:{themeKey:"borders",transform:u},borderRight:{themeKey:"borders",transform:u},borderBottom:{themeKey:"borders",transform:u},borderLeft:{themeKey:"borders",transform:u},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:b},color:{themeKey:"palette",transform:S},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:S},backgroundColor:{themeKey:"palette",transform:S},p:{style:r.o3},pt:{style:r.o3},pr:{style:r.o3},pb:{style:r.o3},pl:{style:r.o3},px:{style:r.o3},py:{style:r.o3},padding:{style:r.o3},paddingTop:{style:r.o3},paddingRight:{style:r.o3},paddingBottom:{style:r.o3},paddingLeft:{style:r.o3},paddingX:{style:r.o3},paddingY:{style:r.o3},paddingInline:{style:r.o3},paddingInlineStart:{style:r.o3},paddingInlineEnd:{style:r.o3},paddingBlock:{style:r.o3},paddingBlockStart:{style:r.o3},paddingBlockEnd:{style:r.o3},m:{style:r.e6},mt:{style:r.e6},mr:{style:r.e6},mb:{style:r.e6},ml:{style:r.e6},mx:{style:r.e6},my:{style:r.e6},margin:{style:r.e6},marginTop:{style:r.e6},marginRight:{style:r.e6},marginBottom:{style:r.e6},marginLeft:{style:r.e6},marginX:{style:r.e6},marginY:{style:r.e6},marginInline:{style:r.e6},marginInlineStart:{style:r.e6},marginInlineEnd:{style:r.e6},marginBlock:{style:r.e6},marginBlockStart:{style:r.e6},marginBlockEnd:{style:r.e6},displayPrint:{cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:x},rowGap:{style:w},columnGap:{style:k},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:I},maxWidth:{style:T},minWidth:{transform:I},height:{transform:I},maxHeight:{transform:I},minHeight:{transform:I},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}})},104:function(e,t,n){"use strict";var r=n(4942),a=n(7312),i=n(8247),o=n(8529),s=n(1184),u=n(7416);var c=function(){function e(e,t,n,i){var u,c=(u={},(0,r.Z)(u,e,t),(0,r.Z)(u,"theme",n),u),l=i[e];if(!l)return(0,r.Z)({},e,t);var d=l.cssProperty,f=void 0===d?e:d,h=l.themeKey,p=l.transform,v=l.style;if(null==t)return null;if("typography"===h&&"inherit"===t)return(0,r.Z)({},e,t);var m=(0,o.DW)(n,h)||{};if(v)return v(c);return(0,s.k9)(c,t,(function(t){var n=(0,o.Jq)(m,p,t);return t===n&&"string"===typeof t&&(n=(0,o.Jq)(m,p,"".concat(e).concat("default"===t?"":(0,a.Z)(t)),t)),!1===f?n:(0,r.Z)({},f,n)}))}return function t(n){var a,o=n||{},c=o.sx,l=o.theme,d=void 0===l?{}:l;if(!c)return null;var f=null!=(a=d.unstable_sxConfig)?a:u.Z;function h(n){var a=n;if("function"===typeof n)a=n(d);else if("object"!==typeof n)return n;if(!a)return null;var o=(0,s.W8)(d.breakpoints),u=Object.keys(o),c=o;return Object.keys(a).forEach((function(n){var o,u,l=(o=a[n],u=d,"function"===typeof o?o(u):o);if(null!==l&&void 0!==l)if("object"===typeof l)if(f[n])c=(0,i.Z)(c,e(n,l,d,f));else{var h=(0,s.k9)({theme:d},l,(function(e){return(0,r.Z)({},n,e)}));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),a=new Set(r);return t.every((function(e){return a.size===Object.keys(e).length}))}(h,l)?c=(0,i.Z)(c,h):c[n]=t({sx:l,theme:d})}else c=(0,i.Z)(c,e(n,l,d,f))})),(0,s.L7)(u,c)}return Array.isArray(c)?c.map(h):h(c)}}();c.filterProps=["sx"],t.Z=c},5902:function(e,t){"use strict";var n=function(e){return e},r=function(){var e=n;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=n}}}();t.Z=r},7312:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(6189);function a(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},4419:function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r={};return Object.keys(e).forEach((function(a){r[a]=e[a].reduce((function(e,r){if(r){var a=t(r);""!==a&&e.push(a),n&&n[r]&&e.push(n[r])}return e}),[]).join(" ")})),r}n.d(t,{Z:function(){return r}})},2466:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(7462);function a(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function i(e){if(!a(e))return e;var t={};return Object.keys(e).forEach((function(n){t[n]=i(e[n])})),t}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},s=n.clone?(0,r.Z)({},e):e;return a(e)&&a(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(a(t[r])&&r in e&&a(e[r])?s[r]=o(e[r],t[r],n):n.clone?s[r]=a(t[r])?i(t[r]):t[r]:s[r]=t[r])})),s}},6189:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},1217:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(5902),a={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",i=a[t];return i?"".concat(n,"-").concat(i):"".concat(r.Z.generate(e),"-").concat(t)}},5878:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1217);function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",a={};return t.forEach((function(t){a[t]=(0,r.Z)(e,t,n)})),a}},2971:function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},5721:function(e,t,n){"use strict";var r=n(2791),a="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;t.Z=a},4383:function(e){var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},1694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var o=a.apply(null,n);o&&e.push(o)}}else if("object"===i){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},8182:function(e,t,n){"use strict";function r(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}t.Z=function(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}},5629:function(e,t,n){n(4665);var r=n(2802);e.exports=r("Array").concat},4346:function(e,t,n){n(1028);var r=n(2802);e.exports=r("Array").filter},2918:function(e,t,n){n(4488);var r=n(2802);e.exports=r("Array").indexOf},1438:function(e,t,n){n(9182);var r=n(2802);e.exports=r("Array").map},3200:function(e,t,n){n(5780);var r=n(2802);e.exports=r("Array").reduce},3454:function(e,t,n){n(4427);var r=n(2802);e.exports=r("Array").slice},7512:function(e,t,n){var r=n(4765),a=n(5629),i=Array.prototype;e.exports=function(e){var t=e.concat;return e===i||r(i,e)&&t===i.concat?a:t}},403:function(e,t,n){var r=n(4765),a=n(4346),i=Array.prototype;e.exports=function(e){var t=e.filter;return e===i||r(i,e)&&t===i.filter?a:t}},3253:function(e,t,n){var r=n(4765),a=n(2918),i=Array.prototype;e.exports=function(e){var t=e.indexOf;return e===i||r(i,e)&&t===i.indexOf?a:t}},4494:function(e,t,n){var r=n(4765),a=n(1438),i=Array.prototype;e.exports=function(e){var t=e.map;return e===i||r(i,e)&&t===i.map?a:t}},1845:function(e,t,n){var r=n(4765),a=n(3200),i=Array.prototype;e.exports=function(e){var t=e.reduce;return e===i||r(i,e)&&t===i.reduce?a:t}},654:function(e,t,n){var r=n(4765),a=n(3454),i=Array.prototype;e.exports=function(e){var t=e.slice;return e===i||r(i,e)&&t===i.slice?a:t}},6945:function(e,t,n){n(7165);var r=n(983),a=n(4680);r.JSON||(r.JSON={stringify:JSON.stringify}),e.exports=function(e,t,n){return a(r.JSON.stringify,null,arguments)}},2307:function(e,t,n){n(1027);var r=n(983);e.exports=r.Object.assign},8058:function(e,t,n){n(6713);var r=n(983).Object,a=e.exports=function(e,t){return r.defineProperties(e,t)};r.defineProperties.sham&&(a.sham=!0)},9730:function(e,t,n){n(9768);var r=n(983).Object,a=e.exports=function(e,t,n){return r.defineProperty(e,t,n)};r.defineProperty.sham&&(a.sham=!0)},2165:function(e,t,n){n(1893);var r=n(983).Object,a=e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)};r.getOwnPropertyDescriptor.sham&&(a.sham=!0)},6637:function(e,t,n){n(9753);var r=n(983);e.exports=r.Object.getOwnPropertyDescriptors},6057:function(e,t,n){n(9526);var r=n(983);e.exports=r.Object.getOwnPropertySymbols},7502:function(e,t,n){n(3169);var r=n(983);e.exports=r.Object.keys},9533:function(e,t,n){n(8458);var r=n(983);e.exports=r.parseFloat},5893:function(e,t,n){n(4493);var r=n(983);e.exports=r.Reflect.construct},9473:function(e,t,n){var r=n(4724),a=n(7589),i=n(3431),o=r.TypeError;e.exports=function(e){if(a(e))return e;throw o(i(e)+" is not a function")}},8041:function(e,t,n){var r=n(4724),a=n(620),i=n(3431),o=r.TypeError;e.exports=function(e){if(a(e))return e;throw o(i(e)+" is not a constructor")}},9427:function(e,t,n){var r=n(4724),a=n(3419),i=r.String,o=r.TypeError;e.exports=function(e){if(a(e))return e;throw o(i(e)+" is not an object")}},9302:function(e,t,n){var r=n(8179),a=n(1462),i=n(4440),o=function(e){return function(t,n,o){var s,u=r(t),c=i(u),l=a(o,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},2770:function(e,t,n){var r=n(790),a=n(4188),i=n(2916),o=n(1265),s=n(4440),u=n(2288),c=a([].push),l=function(e){var t=1==e,n=2==e,a=3==e,l=4==e,d=6==e,f=7==e,h=5==e||d;return function(p,v,m,g){for(var y,b,x=o(p),k=i(x),w=r(v,m),S=s(k),I=0,N=g||u,T=t?N(p,S):n||f?N(p,0):void 0;S>I;I++)if((h||I in k)&&(b=w(y=k[I],I,x),e))if(t)T[I]=b;else if(b)switch(e){case 3:return!0;case 5:return y;case 6:return I;case 2:c(T,y)}else switch(e){case 4:return!1;case 7:c(T,y)}return d?-1:a||l?l:T}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},882:function(e,t,n){var r=n(3998),a=n(8907),i=n(5561),o=a("species");e.exports=function(e){return i>=51||!r((function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},995:function(e,t,n){"use strict";var r=n(3998);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},2116:function(e,t,n){var r=n(4724),a=n(9473),i=n(1265),o=n(2916),s=n(4440),u=r.TypeError,c=function(e){return function(t,n,r,c){a(n);var l=i(t),d=o(l),f=s(l),h=e?f-1:0,p=e?-1:1;if(r<2)for(;;){if(h in d){c=d[h],h+=p;break}if(h+=p,e?h<0:f<=h)throw u("Reduce of empty array with no initial value")}for(;e?h>=0:f>h;h+=p)h in d&&(c=n(c,d[h],h,l));return c}};e.exports={left:c(!1),right:c(!0)}},4369:function(e,t,n){var r=n(4724),a=n(1462),i=n(4440),o=n(7401),s=r.Array,u=Math.max;e.exports=function(e,t,n){for(var r=i(e),c=a(t,r),l=a(void 0===n?r:n,r),d=s(u(l-c,0)),f=0;c<l;c++,f++)o(d,f,e[c]);return d.length=f,d}},6372:function(e,t,n){var r=n(4188);e.exports=r([].slice)},8001:function(e,t,n){var r=n(4724),a=n(6078),i=n(620),o=n(3419),s=n(8907)("species"),u=r.Array;e.exports=function(e){var t;return a(e)&&(t=e.constructor,(i(t)&&(t===u||a(t.prototype))||o(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?u:t}},2288:function(e,t,n){var r=n(8001);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},7629:function(e,t,n){var r=n(4188),a=r({}.toString),i=r("".slice);e.exports=function(e){return i(a(e),8,-1)}},9829:function(e,t,n){var r=n(4724),a=n(8895),i=n(7589),o=n(7629),s=n(8907)("toStringTag"),u=r.Object,c="Arguments"==o(function(){return arguments}());e.exports=a?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=u(e),s))?n:c?o(t):"Object"==(r=o(t))&&i(t.callee)?"Arguments":r}},3540:function(e,t,n){var r=n(8240),a=n(9179),i=n(3898);e.exports=r?function(e,t,n){return a.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},3898:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7401:function(e,t,n){"use strict";var r=n(8944),a=n(9179),i=n(3898);e.exports=function(e,t,n){var o=r(t);o in e?a.f(e,o,i(0,n)):e[o]=n}},4174:function(e,t,n){var r=n(983),a=n(5645),i=n(2334),o=n(9179).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});a(t,e)||o(t,e,{value:i.f(e)})}},8240:function(e,t,n){var r=n(3998);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},7303:function(e,t,n){var r=n(4724),a=n(3419),i=r.document,o=a(i)&&a(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},9969:function(e,t,n){var r=n(7629),a=n(4724);e.exports="process"==r(a.process)},3086:function(e,t,n){var r=n(5285);e.exports=r("navigator","userAgent")||""},5561:function(e,t,n){var r,a,i=n(4724),o=n(3086),s=i.process,u=i.Deno,c=s&&s.versions||u&&u.version,l=c&&c.v8;l&&(a=(r=l.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!a&&o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(a=+r[1]),e.exports=a},2802:function(e,t,n){var r=n(983);e.exports=function(e){return r[e+"Prototype"]}},9832:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7834:function(e,t,n){"use strict";var r=n(4724),a=n(4680),i=n(4188),o=n(7589),s=n(4963).f,u=n(7832),c=n(983),l=n(790),d=n(3540),f=n(5645),h=function(e){var t=function t(n,r,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,i)}return a(e,this,arguments)};return t.prototype=e.prototype,t};e.exports=function(e,t){var n,a,p,v,m,g,y,b,x=e.target,k=e.global,w=e.stat,S=e.proto,I=k?r:w?r[x]:(r[x]||{}).prototype,N=k?c:c[x]||d(c,x,{})[x],T=N.prototype;for(p in t)n=!u(k?p:x+(w?".":"#")+p,e.forced)&&I&&f(I,p),m=N[p],n&&(g=e.noTargetGet?(b=s(I,p))&&b.value:I[p]),v=n&&g?g:t[p],n&&typeof m==typeof v||(y=e.bind&&n?l(v,r):e.wrap&&n?h(v):S&&o(v)?i(v):v,(e.sham||v&&v.sham||m&&m.sham)&&d(y,"sham",!0),d(N,p,y),S&&(f(c,a=x+"Prototype")||d(c,a,{}),d(c[a],p,v),e.real&&T&&!T[p]&&d(T,p,v)))}},3998:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},4680:function(e){var t=Function.prototype,n=t.apply,r=t.bind,a=t.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(n):function(){return a.apply(n,arguments)})},790:function(e,t,n){var r=n(4188),a=n(9473),i=r(r.bind);e.exports=function(e,t){return a(e),void 0===t?e:i?i(e,t):function(){return e.apply(t,arguments)}}},7425:function(e,t,n){"use strict";var r=n(4724),a=n(4188),i=n(9473),o=n(3419),s=n(5645),u=n(6372),c=r.Function,l=a([].concat),d=a([].join),f={},h=function(e,t,n){if(!s(f,t)){for(var r=[],a=0;a<t;a++)r[a]="a["+a+"]";f[t]=c("C,a","return new C("+d(r,",")+")")}return f[t](e,n)};e.exports=c.bind||function(e){var t=i(this),n=t.prototype,r=u(arguments,1),a=function(){var n=l(r,u(arguments));return this instanceof a?h(t,n.length,n):t.apply(e,n)};return o(n)&&(a.prototype=n),a}},8647:function(e){var t=Function.prototype.call;e.exports=t.bind?t.bind(t):function(){return t.apply(t,arguments)}},4188:function(e){var t=Function.prototype,n=t.bind,r=t.call,a=n&&n.bind(r);e.exports=n?function(e){return e&&a(r,e)}:function(e){return e&&function(){return r.apply(e,arguments)}}},5285:function(e,t,n){var r=n(983),a=n(4724),i=n(7589),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e])||o(a[e]):r[e]&&r[e][t]||a[e]&&a[e][t]}},3660:function(e,t,n){var r=n(9473);e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},4724:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},5645:function(e,t,n){var r=n(4188),a=n(1265),i=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(a(e),t)}},7001:function(e){e.exports={}},8719:function(e,t,n){var r=n(5285);e.exports=r("document","documentElement")},18:function(e,t,n){var r=n(8240),a=n(3998),i=n(7303);e.exports=!r&&!a((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},2916:function(e,t,n){var r=n(4724),a=n(4188),i=n(3998),o=n(7629),s=r.Object,u=a("".split);e.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?u(e,""):s(e)}:s},5033:function(e,t,n){var r=n(4188),a=n(7589),i=n(5358),o=r(Function.toString);a(i.inspectSource)||(i.inspectSource=function(e){return o(e)}),e.exports=i.inspectSource},4546:function(e,t,n){var r,a,i,o=n(5351),s=n(4724),u=n(4188),c=n(3419),l=n(3540),d=n(5645),f=n(5358),h=n(5503),p=n(7001),v="Object already initialized",m=s.TypeError,g=s.WeakMap;if(o||f.state){var y=f.state||(f.state=new g),b=u(y.get),x=u(y.has),k=u(y.set);r=function(e,t){if(x(y,e))throw new m(v);return t.facade=e,k(y,e,t),t},a=function(e){return b(y,e)||{}},i=function(e){return x(y,e)}}else{var w=h("state");p[w]=!0,r=function(e,t){if(d(e,w))throw new m(v);return t.facade=e,l(e,w,t),t},a=function(e){return d(e,w)?e[w]:{}},i=function(e){return d(e,w)}}e.exports={set:r,get:a,has:i,enforce:function(e){return i(e)?a(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=a(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return n}}}},6078:function(e,t,n){var r=n(7629);e.exports=Array.isArray||function(e){return"Array"==r(e)}},7589:function(e){e.exports=function(e){return"function"==typeof e}},620:function(e,t,n){var r=n(4188),a=n(3998),i=n(7589),o=n(9829),s=n(5285),u=n(5033),c=function(){},l=[],d=s("Reflect","construct"),f=/^\s*(?:class|function)\b/,h=r(f.exec),p=!f.exec(c),v=function(e){if(!i(e))return!1;try{return d(c,l,e),!0}catch(t){return!1}},m=function(e){if(!i(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!h(f,u(e))}catch(t){return!0}};m.sham=!0,e.exports=!d||a((function(){var e;return v(v.call)||!v(Object)||!v((function(){e=!0}))||e}))?m:v},7832:function(e,t,n){var r=n(3998),a=n(7589),i=/#|\.prototype\./,o=function(e,t){var n=u[s(e)];return n==l||n!=c&&(a(t)?r(t):!!t)},s=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},u=o.data={},c=o.NATIVE="N",l=o.POLYFILL="P";e.exports=o},3419:function(e,t,n){var r=n(7589);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},7741:function(e){e.exports=!0},7802:function(e,t,n){var r=n(4724),a=n(5285),i=n(7589),o=n(4765),s=n(4194),u=r.Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=a("Symbol");return i(t)&&o(t.prototype,u(e))}},4440:function(e,t,n){var r=n(3782);e.exports=function(e){return r(e.length)}},3227:function(e,t,n){var r=n(5561),a=n(3998);e.exports=!!Object.getOwnPropertySymbols&&!a((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},5351:function(e,t,n){var r=n(4724),a=n(7589),i=n(5033),o=r.WeakMap;e.exports=a(o)&&/native code/.test(i(o))},6854:function(e,t,n){var r=n(4724),a=n(3998),i=n(4188),o=n(2787),s=n(3119).trim,u=n(563),c=i("".charAt),l=r.parseFloat,d=r.Symbol,f=d&&d.iterator,h=1/l(u+"-0")!==-1/0||f&&!a((function(){l(Object(f))}));e.exports=h?function(e){var t=s(o(e)),n=l(t);return 0===n&&"-"==c(t,0)?-0:n}:l},8956:function(e,t,n){"use strict";var r=n(8240),a=n(4188),i=n(8647),o=n(3998),s=n(4757),u=n(7772),c=n(7085),l=n(1265),d=n(2916),f=Object.assign,h=Object.defineProperty,p=a([].concat);e.exports=!f||o((function(){if(r&&1!==f({b:1},f(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),a="abcdefghijklmnopqrst";return e[n]=7,a.split("").forEach((function(e){t[e]=e})),7!=f({},e)[n]||s(f({},t)).join("")!=a}))?function(e,t){for(var n=l(e),a=arguments.length,o=1,f=u.f,h=c.f;a>o;)for(var v,m=d(arguments[o++]),g=f?p(s(m),f(m)):s(m),y=g.length,b=0;y>b;)v=g[b++],r&&!i(h,m,v)||(n[v]=m[v]);return n}:f},5599:function(e,t,n){var r,a=n(9427),i=n(5343),o=n(9832),s=n(7001),u=n(8719),c=n(7303),l=n(5503),d=l("IE_PROTO"),f=function(){},h=function(e){return"<script>"+e+"</"+"script>"},p=function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}v="undefined"!=typeof document?document.domain&&r?p(r):function(){var e,t=c("iframe");return t.style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F}():p(r);for(var e=o.length;e--;)delete v.prototype[o[e]];return v()};s[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f.prototype=a(e),n=new f,f.prototype=null,n[d]=e):n=v(),void 0===t?n:i(n,t)}},5343:function(e,t,n){var r=n(8240),a=n(9179),i=n(9427),o=n(8179),s=n(4757);e.exports=r?Object.defineProperties:function(e,t){i(e);for(var n,r=o(t),u=s(t),c=u.length,l=0;c>l;)a.f(e,n=u[l++],r[n]);return e}},9179:function(e,t,n){var r=n(4724),a=n(8240),i=n(18),o=n(9427),s=n(8944),u=r.TypeError,c=Object.defineProperty;t.f=a?c:function(e,t,n){if(o(e),t=s(t),o(n),i)try{return c(e,t,n)}catch(r){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},4963:function(e,t,n){var r=n(8240),a=n(8647),i=n(7085),o=n(3898),s=n(8179),u=n(8944),c=n(5645),l=n(18),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=s(e),t=u(t),l)try{return d(e,t)}catch(n){}if(c(e,t))return o(!a(i.f,e,t),e[t])}},2088:function(e,t,n){var r=n(7629),a=n(8179),i=n(2523).f,o=n(4369),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"Window"==r(e)?function(e){try{return i(e)}catch(t){return o(s)}}(e):i(a(e))}},2523:function(e,t,n){var r=n(1955),a=n(9832).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,a)}},7772:function(e,t){t.f=Object.getOwnPropertySymbols},4765:function(e,t,n){var r=n(4188);e.exports=r({}.isPrototypeOf)},1955:function(e,t,n){var r=n(4188),a=n(5645),i=n(8179),o=n(9302).indexOf,s=n(7001),u=r([].push);e.exports=function(e,t){var n,r=i(e),c=0,l=[];for(n in r)!a(s,n)&&a(r,n)&&u(l,n);for(;t.length>c;)a(r,n=t[c++])&&(~o(l,n)||u(l,n));return l}},4757:function(e,t,n){var r=n(1955),a=n(9832);e.exports=Object.keys||function(e){return r(e,a)}},7085:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!n.call({1:2},1);t.f=a?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},1876:function(e,t,n){"use strict";var r=n(8895),a=n(9829);e.exports=r?{}.toString:function(){return"[object "+a(this)+"]"}},4686:function(e,t,n){var r=n(4724),a=n(8647),i=n(7589),o=n(3419),s=r.TypeError;e.exports=function(e,t){var n,r;if("string"===t&&i(n=e.toString)&&!o(r=a(n,e)))return r;if(i(n=e.valueOf)&&!o(r=a(n,e)))return r;if("string"!==t&&i(n=e.toString)&&!o(r=a(n,e)))return r;throw s("Can't convert object to primitive value")}},6217:function(e,t,n){var r=n(5285),a=n(4188),i=n(2523),o=n(7772),s=n(9427),u=a([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(s(e)),n=o.f;return n?u(t,n(e)):t}},983:function(e){e.exports={}},8232:function(e,t,n){var r=n(3540);e.exports=function(e,t,n,a){a&&a.enumerable?e[t]=n:r(e,t,n)}},7914:function(e,t,n){var r=n(4724).TypeError;e.exports=function(e){if(void 0==e)throw r("Can't call method on "+e);return e}},4066:function(e,t,n){var r=n(4724),a=Object.defineProperty;e.exports=function(e,t){try{a(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},5417:function(e,t,n){var r=n(8895),a=n(9179).f,i=n(3540),o=n(5645),s=n(1876),u=n(8907)("toStringTag");e.exports=function(e,t,n,c){if(e){var l=n?e:e.prototype;o(l,u)||a(l,u,{configurable:!0,value:t}),c&&!r&&i(l,"toString",s)}}},5503:function(e,t,n){var r=n(797),a=n(123),i=r("keys");e.exports=function(e){return i[e]||(i[e]=a(e))}},5358:function(e,t,n){var r=n(4724),a=n(4066),i="__core-js_shared__",o=r[i]||a(i,{});e.exports=o},797:function(e,t,n){var r=n(7741),a=n(5358);(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.1",mode:r?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},3119:function(e,t,n){var r=n(4188),a=n(7914),i=n(2787),o=n(563),s=r("".replace),u="["+o+"]",c=RegExp("^"+u+u+"*"),l=RegExp(u+u+"*$"),d=function(e){return function(t){var n=i(a(t));return 1&e&&(n=s(n,c,"")),2&e&&(n=s(n,l,"")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},1462:function(e,t,n){var r=n(8037),a=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?a(n+t,0):i(n,t)}},8179:function(e,t,n){var r=n(2916),a=n(7914);e.exports=function(e){return r(a(e))}},8037:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){var r=+e;return r!==r||0===r?0:(r>0?n:t)(r)}},3782:function(e,t,n){var r=n(8037),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},1265:function(e,t,n){var r=n(4724),a=n(7914),i=r.Object;e.exports=function(e){return i(a(e))}},8501:function(e,t,n){var r=n(4724),a=n(8647),i=n(3419),o=n(7802),s=n(3660),u=n(4686),c=n(8907),l=r.TypeError,d=c("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var n,r=s(e,d);if(r){if(void 0===t&&(t="default"),n=a(r,e,t),!i(n)||o(n))return n;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),u(e,t)}},8944:function(e,t,n){var r=n(8501),a=n(7802);e.exports=function(e){var t=r(e,"string");return a(t)?t:t+""}},8895:function(e,t,n){var r={};r[n(8907)("toStringTag")]="z",e.exports="[object z]"===String(r)},2787:function(e,t,n){var r=n(4724),a=n(9829),i=r.String;e.exports=function(e){if("Symbol"===a(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},3431:function(e,t,n){var r=n(4724).String;e.exports=function(e){try{return r(e)}catch(t){return"Object"}}},123:function(e,t,n){var r=n(4188),a=0,i=Math.random(),o=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++a+i,36)}},4194:function(e,t,n){var r=n(3227);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},2334:function(e,t,n){var r=n(8907);t.f=r},8907:function(e,t,n){var r=n(4724),a=n(797),i=n(5645),o=n(123),s=n(3227),u=n(4194),c=a("wks"),l=r.Symbol,d=l&&l.for,f=u?l:l&&l.withoutSetter||o;e.exports=function(e){if(!i(c,e)||!s&&"string"!=typeof c[e]){var t="Symbol."+e;s&&i(l,e)?c[e]=l[e]:c[e]=u&&d?d(t):f(t)}return c[e]}},563:function(e){e.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},4665:function(e,t,n){"use strict";var r=n(7834),a=n(4724),i=n(3998),o=n(6078),s=n(3419),u=n(1265),c=n(4440),l=n(7401),d=n(2288),f=n(882),h=n(8907),p=n(5561),v=h("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",y=a.TypeError,b=p>=51||!i((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),x=f("concat"),k=function(e){if(!s(e))return!1;var t=e[v];return void 0!==t?!!t:o(e)};r({target:"Array",proto:!0,forced:!b||!x},{concat:function(e){var t,n,r,a,i,o=u(this),s=d(o,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(k(i=-1===t?o:arguments[t])){if(f+(a=c(i))>m)throw y(g);for(n=0;n<a;n++,f++)n in i&&l(s,f,i[n])}else{if(f>=m)throw y(g);l(s,f++,i)}return s.length=f,s}})},1028:function(e,t,n){"use strict";var r=n(7834),a=n(2770).filter;r({target:"Array",proto:!0,forced:!n(882)("filter")},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},4488:function(e,t,n){"use strict";var r=n(7834),a=n(4188),i=n(9302).indexOf,o=n(995),s=a([].indexOf),u=!!s&&1/s([1],1,-0)<0,c=o("indexOf");r({target:"Array",proto:!0,forced:u||!c},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return u?s(this,e,t)||0:i(this,e,t)}})},9182:function(e,t,n){"use strict";var r=n(7834),a=n(2770).map;r({target:"Array",proto:!0,forced:!n(882)("map")},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},5780:function(e,t,n){"use strict";var r=n(7834),a=n(2116).left,i=n(995),o=n(5561),s=n(9969);r({target:"Array",proto:!0,forced:!i("reduce")||!s&&o>79&&o<83},{reduce:function(e){var t=arguments.length;return a(this,e,t,t>1?arguments[1]:void 0)}})},4427:function(e,t,n){"use strict";var r=n(7834),a=n(4724),i=n(6078),o=n(620),s=n(3419),u=n(1462),c=n(4440),l=n(8179),d=n(7401),f=n(8907),h=n(882),p=n(6372),v=h("slice"),m=f("species"),g=a.Array,y=Math.max;r({target:"Array",proto:!0,forced:!v},{slice:function(e,t){var n,r,a,f=l(this),h=c(f),v=u(e,h),b=u(void 0===t?h:t,h);if(i(f)&&(n=f.constructor,(o(n)&&(n===g||i(n.prototype))||s(n)&&null===(n=n[m]))&&(n=void 0),n===g||void 0===n))return p(f,v,b);for(r=new(void 0===n?g:n)(y(b-v,0)),a=0;v<b;v++,a++)v in f&&d(r,a,f[v]);return r.length=a,r}})},7165:function(e,t,n){var r=n(7834),a=n(4724),i=n(5285),o=n(4680),s=n(4188),u=n(3998),c=a.Array,l=i("JSON","stringify"),d=s(/./.exec),f=s("".charAt),h=s("".charCodeAt),p=s("".replace),v=s(1..toString),m=/[\uD800-\uDFFF]/g,g=/^[\uD800-\uDBFF]$/,y=/^[\uDC00-\uDFFF]$/,b=function(e,t,n){var r=f(n,t-1),a=f(n,t+1);return d(g,e)&&!d(y,a)||d(y,e)&&!d(g,r)?"\\u"+v(h(e,0),16):e},x=u((function(){return'"\\udf06\\ud834"'!==l("\udf06\ud834")||'"\\udead"'!==l("\udead")}));l&&r({target:"JSON",stat:!0,forced:x},{stringify:function(e,t,n){for(var r=0,a=arguments.length,i=c(a);r<a;r++)i[r]=arguments[r];var s=o(l,null,i);return"string"==typeof s?p(s,m,b):s}})},1027:function(e,t,n){var r=n(7834),a=n(8956);r({target:"Object",stat:!0,forced:Object.assign!==a},{assign:a})},6713:function(e,t,n){var r=n(7834),a=n(8240);r({target:"Object",stat:!0,forced:!a,sham:!a},{defineProperties:n(5343)})},9768:function(e,t,n){var r=n(7834),a=n(8240);r({target:"Object",stat:!0,forced:!a,sham:!a},{defineProperty:n(9179).f})},1893:function(e,t,n){var r=n(7834),a=n(3998),i=n(8179),o=n(4963).f,s=n(8240),u=a((function(){o(1)}));r({target:"Object",stat:!0,forced:!s||u,sham:!s},{getOwnPropertyDescriptor:function(e,t){return o(i(e),t)}})},9753:function(e,t,n){var r=n(7834),a=n(8240),i=n(6217),o=n(8179),s=n(4963),u=n(7401);r({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),a=s.f,c=i(r),l={},d=0;c.length>d;)void 0!==(n=a(r,t=c[d++]))&&u(l,t,n);return l}})},3169:function(e,t,n){var r=n(7834),a=n(1265),i=n(4757);r({target:"Object",stat:!0,forced:n(3998)((function(){i(1)}))},{keys:function(e){return i(a(e))}})},8458:function(e,t,n){var r=n(7834),a=n(6854);r({global:!0,forced:parseFloat!=a},{parseFloat:a})},4493:function(e,t,n){var r=n(7834),a=n(5285),i=n(4680),o=n(7425),s=n(8041),u=n(9427),c=n(3419),l=n(5599),d=n(3998),f=a("Reflect","construct"),h=Object.prototype,p=[].push,v=d((function(){function e(){}return!(f((function(){}),[],e)instanceof e)})),m=!d((function(){f((function(){}))})),g=v||m;r({target:"Reflect",stat:!0,forced:g,sham:g},{construct:function(e,t){s(e),u(t);var n=arguments.length<3?e:s(arguments[2]);if(m&&!v)return f(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return i(p,r,t),new(i(o,e,r))}var a=n.prototype,d=l(c(a)?a:h),g=i(e,d,t);return c(g)?g:d}})},9526:function(e,t,n){"use strict";var r=n(7834),a=n(4724),i=n(5285),o=n(4680),s=n(8647),u=n(4188),c=n(7741),l=n(8240),d=n(3227),f=n(3998),h=n(5645),p=n(6078),v=n(7589),m=n(3419),g=n(4765),y=n(7802),b=n(9427),x=n(1265),k=n(8179),w=n(8944),S=n(2787),I=n(3898),N=n(5599),T=n(4757),C=n(2523),E=n(2088),_=n(7772),A=n(4963),R=n(9179),O=n(7085),D=n(6372),P=n(8232),F=n(797),M=n(5503),L=n(7001),$=n(123),j=n(8907),z=n(2334),B=n(4174),U=n(5417),V=n(4546),W=n(2770).forEach,G=M("hidden"),Z="Symbol",H=j("toPrimitive"),q=V.set,K=V.getterFor(Z),X=Object.prototype,J=a.Symbol,Y=J&&J.prototype,Q=a.TypeError,ee=a.QObject,te=i("JSON","stringify"),ne=A.f,re=R.f,ae=E.f,ie=O.f,oe=u([].push),se=F("symbols"),ue=F("op-symbols"),ce=F("string-to-symbol-registry"),le=F("symbol-to-string-registry"),de=F("wks"),fe=!ee||!ee.prototype||!ee.prototype.findChild,he=l&&f((function(){return 7!=N(re({},"a",{get:function(){return re(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=ne(X,t);r&&delete X[t],re(e,t,n),r&&e!==X&&re(X,t,r)}:re,pe=function(e,t){var n=se[e]=N(Y);return q(n,{type:Z,tag:e,description:t}),l||(n.description=t),n},ve=function(e,t,n){e===X&&ve(ue,t,n),b(e);var r=w(t);return b(n),h(se,r)?(n.enumerable?(h(e,G)&&e[G][r]&&(e[G][r]=!1),n=N(n,{enumerable:I(0,!1)})):(h(e,G)||re(e,G,I(1,{})),e[G][r]=!0),he(e,r,n)):re(e,r,n)},me=function(e,t){b(e);var n=k(t),r=T(n).concat(xe(n));return W(r,(function(t){l&&!s(ge,n,t)||ve(e,t,n[t])})),e},ge=function(e){var t=w(e),n=s(ie,this,t);return!(this===X&&h(se,t)&&!h(ue,t))&&(!(n||!h(this,t)||!h(se,t)||h(this,G)&&this[G][t])||n)},ye=function(e,t){var n=k(e),r=w(t);if(n!==X||!h(se,r)||h(ue,r)){var a=ne(n,r);return!a||!h(se,r)||h(n,G)&&n[G][r]||(a.enumerable=!0),a}},be=function(e){var t=ae(k(e)),n=[];return W(t,(function(e){h(se,e)||h(L,e)||oe(n,e)})),n},xe=function(e){var t=e===X,n=ae(t?ue:k(e)),r=[];return W(n,(function(e){!h(se,e)||t&&!h(X,e)||oe(r,se[e])})),r};(d||(J=function(){if(g(Y,this))throw Q("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?S(arguments[0]):void 0,t=$(e),n=function e(n){this===X&&s(e,ue,n),h(this,G)&&h(this[G],t)&&(this[G][t]=!1),he(this,t,I(1,n))};return l&&fe&&he(X,t,{configurable:!0,set:n}),pe(t,e)},P(Y=J.prototype,"toString",(function(){return K(this).tag})),P(J,"withoutSetter",(function(e){return pe($(e),e)})),O.f=ge,R.f=ve,A.f=ye,C.f=E.f=be,_.f=xe,z.f=function(e){return pe(j(e),e)},l&&(re(Y,"description",{configurable:!0,get:function(){return K(this).description}}),c||P(X,"propertyIsEnumerable",ge,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:J}),W(T(de),(function(e){B(e)})),r({target:Z,stat:!0,forced:!d},{for:function(e){var t=S(e);if(h(ce,t))return ce[t];var n=J(t);return ce[t]=n,le[n]=t,n},keyFor:function(e){if(!y(e))throw Q(e+" is not a symbol");if(h(le,e))return le[e]},useSetter:function(){fe=!0},useSimple:function(){fe=!1}}),r({target:"Object",stat:!0,forced:!d,sham:!l},{create:function(e,t){return void 0===t?N(e):me(N(e),t)},defineProperty:ve,defineProperties:me,getOwnPropertyDescriptor:ye}),r({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:be,getOwnPropertySymbols:xe}),r({target:"Object",stat:!0,forced:f((function(){_.f(1)}))},{getOwnPropertySymbols:function(e){return _.f(x(e))}}),te)&&r({target:"JSON",stat:!0,forced:!d||f((function(){var e=J();return"[null]"!=te([e])||"{}"!=te({a:e})||"{}"!=te(Object(e))}))},{stringify:function(e,t,n){var r=D(arguments),a=t;if((m(t)||void 0!==e)&&!y(e))return p(t)||(t=function(e,t){if(v(a)&&(t=s(a,this,e,t)),!y(t))return t}),r[1]=t,o(te,null,r)}});if(!Y[H]){var ke=Y.valueOf;P(Y,H,(function(e){return s(ke,this)}))}U(J,Z),L[G]=!0},1168:function(e,t,n){var r=n(7512);e.exports=r},810:function(e,t,n){var r=n(403);e.exports=r},70:function(e,t,n){var r=n(3253);e.exports=r},3243:function(e,t,n){var r=n(4494);e.exports=r},6186:function(e,t,n){var r=n(1845);e.exports=r},1323:function(e,t,n){var r=n(654);e.exports=r},1452:function(e,t,n){var r=n(6945);e.exports=r},5644:function(e,t,n){var r=n(2307);e.exports=r},1063:function(e,t,n){var r=n(8058);e.exports=r},8597:function(e,t,n){var r=n(9730);e.exports=r},5162:function(e,t,n){var r=n(2165);e.exports=r},6829:function(e,t,n){var r=n(6637);e.exports=r},6363:function(e,t,n){var r=n(6057);e.exports=r},3195:function(e,t,n){var r=n(7502);e.exports=r},1551:function(e,t,n){var r=n(9533);e.exports=r},8561:function(e,t,n){var r=n(5893);e.exports=r},2358:function(e){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var a=e[r]<<16|e[r+1]<<8|e[r+2],i=0;i<4;i++)8*r+6*i<=8*e.length?n.push(t.charAt(a>>>6*(3-i)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,a=0;r<e.length;a=++r%4)0!=a&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*a+8)-1)<<2*a|t.indexOf(e.charAt(r))>>>6-2*a);return n}};e.exports=n}()},2176:function(e){"use strict";e.exports=function(e,t,n,r,a,i,o,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,i,o,s],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},5586:function(e){function t(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},4045:function(e){e.exports=function(){if("undefined"!==typeof window&&null!==window){if("(-webkit-min-device-pixel-ratio: 1.25), (min--moz-device-pixel-ratio: 1.25), (-o-min-device-pixel-ratio: 5/4), (min-resolution: 1.25dppx)",window.devicePixelRatio>1.25)return!0;if(window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.25), (min--moz-device-pixel-ratio: 1.25), (-o-min-device-pixel-ratio: 5/4), (min-resolution: 1.25dppx)").matches)return!0}return!1}},8890:function(e,t){var n;!function(t,n){"use strict";"object"===typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!==typeof window?window:this,(function(r,a){"use strict";var i=[],o=Object.getPrototypeOf,s=i.slice,u=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},c=i.push,l=i.indexOf,d={},f=d.toString,h=d.hasOwnProperty,p=h.toString,v=p.call(Object),m={},g=function(e){return"function"===typeof e&&"number"!==typeof e.nodeType&&"function"!==typeof e.item},y=function(e){return null!=e&&e===e.window},b=r.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function k(e,t,n){var r,a,i=(n=n||b).createElement("script");if(i.text=e,t)for(r in x)(a=t[r]||t.getAttribute&&t.getAttribute(r))&&i.setAttribute(r,a);n.head.appendChild(i).parentNode.removeChild(i)}function w(e){return null==e?e+"":"object"===typeof e||"function"===typeof e?d[f.call(e)]||"object":typeof e}var S="3.6.4",I=function e(t,n){return new e.fn.init(t,n)};function N(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!g(e)&&!y(e)&&("array"===n||0===t||"number"===typeof t&&t>0&&t-1 in e)}I.fn=I.prototype={jquery:S,constructor:I,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=I.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return I.each(this,e)},map:function(e){return this.pushStack(I.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(I.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(I.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:i.sort,splice:i.splice},I.extend=I.fn.extend=function(){var e,t,n,r,a,i,o=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"===typeof o&&(c=o,o=arguments[s]||{},s++),"object"===typeof o||g(o)||(o={}),s===u&&(o=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(c&&r&&(I.isPlainObject(r)||(a=Array.isArray(r)))?(n=o[t],i=a&&!Array.isArray(n)?[]:a||I.isPlainObject(n)?n:{},a=!1,o[t]=I.extend(c,i,r)):void 0!==r&&(o[t]=r));return o},I.extend({expando:"jQuery"+(S+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==f.call(e))&&(!(t=o(e))||"function"===typeof(n=h.call(t,"constructor")&&t.constructor)&&p.call(n)===v)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){k(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(N(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(N(Object(e))?I.merge(n,"string"===typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:l.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,a=e.length;r<n;r++)e[a++]=t[r];return e.length=a,e},grep:function(e,t,n){for(var r=[],a=0,i=e.length,o=!n;a<i;a++)!t(e[a],a)!==o&&r.push(e[a]);return r},map:function(e,t,n){var r,a,i=0,o=[];if(N(e))for(r=e.length;i<r;i++)null!=(a=t(e[i],i,n))&&o.push(a);else for(i in e)null!=(a=t(e[i],i,n))&&o.push(a);return u(o)},guid:1,support:m}),"function"===typeof Symbol&&(I.fn[Symbol.iterator]=i[Symbol.iterator]),I.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var T=function(e){var t,n,r,a,i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,x="sizzle"+1*new Date,k=e.document,w=0,S=0,I=ue(),N=ue(),T=ue(),C=ue(),E=function(e,t){return e===t&&(d=!0),0},_={}.hasOwnProperty,A=[],R=A.pop,O=A.push,D=A.push,P=A.slice,F=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",$="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",j="\\[[\\x20\\t\\r\\n\\f]*("+$+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+$+"))|)"+L+"*\\]",z=":("+$+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",B=new RegExp(L+"+","g"),U=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),V=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),W=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),G=new RegExp(L+"|>"),Z=new RegExp(z),H=new RegExp("^"+$+"$"),q={ID:new RegExp("^#("+$+")"),CLASS:new RegExp("^\\.("+$+")"),TAG:new RegExp("^("+$+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},K=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ae=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ie=function(){f()},oe=xe((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{D.apply(A=P.call(k.childNodes),k.childNodes),A[k.childNodes.length].nodeType}catch(Ne){D={apply:A.length?function(e,t){O.apply(e,P.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,a){var i,s,c,l,d,p,g,y=t&&t.ownerDocument,k=t?t.nodeType:9;if(r=r||[],"string"!==typeof e||!e||1!==k&&9!==k&&11!==k)return r;if(!a&&(f(t),t=t||h,v)){if(11!==k&&(d=Q.exec(e)))if(i=d[1]){if(9===k){if(!(c=t.getElementById(i)))return r;if(c.id===i)return r.push(c),r}else if(y&&(c=y.getElementById(i))&&b(t,c)&&c.id===i)return r.push(c),r}else{if(d[2])return D.apply(r,t.getElementsByTagName(e)),r;if((i=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return D.apply(r,t.getElementsByClassName(i)),r}if(n.qsa&&!C[e+" "]&&(!m||!m.test(e))&&(1!==k||"object"!==t.nodeName.toLowerCase())){if(g=e,y=t,1===k&&(G.test(e)||W.test(e))){for((y=ee.test(e)&&ge(t.parentNode)||t)===t&&n.scope||((l=t.getAttribute("id"))?l=l.replace(re,ae):t.setAttribute("id",l=x)),s=(p=o(e)).length;s--;)p[s]=(l?"#"+l:":scope")+" "+be(p[s]);g=p.join(",")}try{return D.apply(r,y.querySelectorAll(g)),r}catch(w){C(e,!0)}finally{l===x&&t.removeAttribute("id")}}}return u(e.replace(U,"$1"),t,r,a)}function ue(){var e=[];return function t(n,a){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=a}}function ce(e){return e[x]=!0,e}function le(e){var t=h.createElement("fieldset");try{return!!e(t)}catch(Ne){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var n=e.split("|"),a=n.length;a--;)r.attrHandle[n[a]]=t}function fe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function he(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ve(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ce((function(t){return t=+t,ce((function(n,r){for(var a,i=e([],n.length,t),o=i.length;o--;)n[a=i[o]]&&(n[a]=!(r[a]=n[a]))}))}))}function ge(e){return e&&"undefined"!==typeof e.getElementsByTagName&&e}for(t in n=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!K.test(t||n&&n.nodeName||"HTML")},f=se.setDocument=function(e){var t,a,o=e?e.ownerDocument||e:k;return o!=h&&9===o.nodeType&&o.documentElement?(p=(h=o).documentElement,v=!i(h),k!=h&&(a=h.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",ie,!1):a.attachEvent&&a.attachEvent("onunload",ie)),n.scope=le((function(e){return p.appendChild(e).appendChild(h.createElement("div")),"undefined"!==typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.cssHas=le((function(){try{return h.querySelector(":has(*,:jqfake)"),!1}catch(Ne){return!0}})),n.attributes=le((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=le((function(e){return e.appendChild(h.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Y.test(h.getElementsByClassName),n.getById=le((function(e){return p.appendChild(e).id=x,!h.getElementsByName||!h.getElementsByName(x).length})),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&v){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&v){var n,r,a,i=t.getElementById(e);if(i){if((n=i.getAttributeNode("id"))&&n.value===e)return[i];for(a=t.getElementsByName(e),r=0;i=a[r++];)if((n=i.getAttributeNode("id"))&&n.value===e)return[i]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return"undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],a=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[a++];)1===n.nodeType&&r.push(n);return r}return i},r.find.CLASS=n.getElementsByClassName&&function(e,t){if("undefined"!==typeof t.getElementsByClassName&&v)return t.getElementsByClassName(e)},g=[],m=[],(n.qsa=Y.test(h.querySelectorAll))&&(le((function(e){var t;p.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+M+")"),e.querySelectorAll("[id~="+x+"-]").length||m.push("~="),(t=h.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),le((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=h.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=Y.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&le((function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),g.push("!=",z)})),n.cssHas||m.push(":has"),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Y.test(p.compareDocumentPosition),b=t||Y.test(p.contains)?function(e,t){var n=9===e.nodeType&&e.documentElement||e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},E=t?function(e,t){if(e===t)return d=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==h||e.ownerDocument==k&&b(k,e)?-1:t==h||t.ownerDocument==k&&b(k,t)?1:l?F(l,e)-F(l,t):0:4&r?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,r=0,a=e.parentNode,i=t.parentNode,o=[e],s=[t];if(!a||!i)return e==h?-1:t==h?1:a?-1:i?1:l?F(l,e)-F(l,t):0;if(a===i)return fe(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?fe(o[r],s[r]):o[r]==k?-1:s[r]==k?1:0},h):h},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(f(e),n.matchesSelector&&v&&!C[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(Ne){C(t,!0)}return se(t,h,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=h&&f(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=h&&f(e);var a=r.attrHandle[t.toLowerCase()],i=a&&_.call(r.attrHandle,t.toLowerCase())?a(e,t,!v):void 0;return void 0!==i?i:n.attributes||!v?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},se.escape=function(e){return(e+"").replace(re,ae)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],a=0,i=0;if(d=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(E),d){for(;t=e[i++];)t===e[i]&&(a=r.push(i));for(;a--;)e.splice(r[a],1)}return l=null,e},a=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"===typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=a(t);return n},r=se.selectors={cacheLength:50,createPseudo:ce,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Z.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=I[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+L+"|$)"))&&I(e,(function(e){return t.test("string"===typeof e.className&&e.className||"undefined"!==typeof e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var a=se.attr(r,e);return null==a?"!="===t:!t||(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&a.indexOf(n)>-1:"$="===t?n&&a.slice(-n.length)===n:"~="===t?(" "+a.replace(B," ")+" ").indexOf(n)>-1:"|="===t&&(a===n||a.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,a){var i="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===a?function(e){return!!e.parentNode}:function(t,n,u){var c,l,d,f,h,p,v=i!==o?"nextSibling":"previousSibling",m=t.parentNode,g=s&&t.nodeName.toLowerCase(),y=!u&&!s,b=!1;if(m){if(i){for(;v;){for(f=t;f=f[v];)if(s?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;p=v="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?m.firstChild:m.lastChild],o&&y){for(b=(h=(c=(l=(d=(f=m)[x]||(f[x]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===w&&c[1])&&c[2],f=h&&m.childNodes[h];f=++h&&f&&f[v]||(b=h=0)||p.pop();)if(1===f.nodeType&&++b&&f===t){l[e]=[w,h,b];break}}else if(y&&(b=h=(c=(l=(d=(f=t)[x]||(f[x]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]||[])[0]===w&&c[1]),!1===b)for(;(f=++h&&f&&f[v]||(b=h=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++b||(y&&((l=(d=f[x]||(f[x]={}))[f.uniqueID]||(d[f.uniqueID]={}))[e]=[w,b]),f!==t)););return(b-=a)===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,t){var n,a=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[x]?a(t):a.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,n){for(var r,i=a(e,t),o=i.length;o--;)e[r=F(e,i[o])]=!(n[r]=i[o])})):function(e){return a(e,0,n)}):a}},pseudos:{not:ce((function(e){var t=[],n=[],r=s(e.replace(U,"$1"));return r[x]?ce((function(e,t,n,a){for(var i,o=r(e,null,a,[]),s=e.length;s--;)(i=o[s])&&(e[s]=!(t[s]=i))})):function(e,a,i){return t[0]=e,r(t,null,i,n),t[0]=null,!n.pop()}})),has:ce((function(e){return function(t){return se(e,t).length>0}})),contains:ce((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||a(t)).indexOf(e)>-1}})),lang:ce((function(e){return H.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ve(!1),disabled:ve(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me((function(){return[0]})),last:me((function(e,t){return[t-1]})),eq:me((function(e,t,n){return[n<0?n+t:n]})),even:me((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:me((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:me((function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:me((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},r.pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=he(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function ye(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function xe(e,t,n){var r=t.dir,a=t.next,i=a||r,o=n&&"parentNode"===i,s=S++;return t.first?function(t,n,a){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,a);return!1}:function(t,n,u){var c,l,d,f=[w,s];if(u){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(l=(d=t[x]||(t[x]={}))[t.uniqueID]||(d[t.uniqueID]={}),a&&a===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=l[i])&&c[0]===w&&c[1]===s)return f[2]=c[2];if(l[i]=f,f[2]=e(t,n,u))return!0}return!1}}function ke(e){return e.length>1?function(t,n,r){for(var a=e.length;a--;)if(!e[a](t,n,r))return!1;return!0}:e[0]}function we(e,t,n,r,a){for(var i,o=[],s=0,u=e.length,c=null!=t;s<u;s++)(i=e[s])&&(n&&!n(i,r,a)||(o.push(i),c&&t.push(s)));return o}function Se(e,t,n,r,a,i){return r&&!r[x]&&(r=Se(r)),a&&!a[x]&&(a=Se(a,i)),ce((function(i,o,s,u){var c,l,d,f=[],h=[],p=o.length,v=i||function(e,t,n){for(var r=0,a=t.length;r<a;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!i&&t?v:we(v,f,e,s,u),g=n?a||(i?e:p||r)?[]:o:m;if(n&&n(m,g,s,u),r)for(c=we(g,h),r(c,[],s,u),l=c.length;l--;)(d=c[l])&&(g[h[l]]=!(m[h[l]]=d));if(i){if(a||e){if(a){for(c=[],l=g.length;l--;)(d=g[l])&&c.push(m[l]=d);a(null,g=[],c,u)}for(l=g.length;l--;)(d=g[l])&&(c=a?F(i,d):f[l])>-1&&(i[c]=!(o[c]=d))}}else g=we(g===o?g.splice(p,g.length):g),a?a(null,o,g,u):D.apply(o,g)}))}function Ie(e){for(var t,n,a,i=e.length,o=r.relative[e[0].type],s=o||r.relative[" "],u=o?1:0,l=xe((function(e){return e===t}),s,!0),d=xe((function(e){return F(t,e)>-1}),s,!0),f=[function(e,n,r){var a=!o&&(r||n!==c)||((t=n).nodeType?l(e,n,r):d(e,n,r));return t=null,a}];u<i;u++)if(n=r.relative[e[u].type])f=[xe(ke(f),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[x]){for(a=++u;a<i&&!r.relative[e[a].type];a++);return Se(u>1&&ke(f),u>1&&be(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(U,"$1"),n,u<a&&Ie(e.slice(u,a)),a<i&&Ie(e=e.slice(a)),a<i&&be(e))}f.push(n)}return ke(f)}return ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,o=se.tokenize=function(e,t){var n,a,i,o,s,u,c,l=N[e+" "];if(l)return t?0:l.slice(0);for(s=e,u=[],c=r.preFilter;s;){for(o in n&&!(a=V.exec(s))||(a&&(s=s.slice(a[0].length)||s),u.push(i=[])),n=!1,(a=W.exec(s))&&(n=a.shift(),i.push({value:n,type:a[0].replace(U," ")}),s=s.slice(n.length)),r.filter)!(a=q[o].exec(s))||c[o]&&!(a=c[o](a))||(n=a.shift(),i.push({value:n,type:o,matches:a}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):N(e,u).slice(0)},s=se.compile=function(e,t){var n,a=[],i=[],s=T[e+" "];if(!s){for(t||(t=o(e)),n=t.length;n--;)(s=Ie(t[n]))[x]?a.push(s):i.push(s);s=T(e,function(e,t){var n=t.length>0,a=e.length>0,i=function(i,o,s,u,l){var d,p,m,g=0,y="0",b=i&&[],x=[],k=c,S=i||a&&r.find.TAG("*",l),I=w+=null==k?1:Math.random()||.1,N=S.length;for(l&&(c=o==h||o||l);y!==N&&null!=(d=S[y]);y++){if(a&&d){for(p=0,o||d.ownerDocument==h||(f(d),s=!v);m=e[p++];)if(m(d,o||h,s)){u.push(d);break}l&&(w=I)}n&&((d=!m&&d)&&g--,i&&b.push(d))}if(g+=y,n&&y!==g){for(p=0;m=t[p++];)m(b,x,o,s);if(i){if(g>0)for(;y--;)b[y]||x[y]||(x[y]=R.call(u));x=we(x)}D.apply(u,x),l&&!i&&x.length>0&&g+t.length>1&&se.uniqueSort(u)}return l&&(w=I,c=k),b};return n?ce(i):i}(i,a)),s.selector=e}return s},u=se.select=function(e,t,n,a){var i,u,c,l,d,f="function"===typeof e&&e,h=!a&&o(e=f.selector||e);if(n=n||[],1===h.length){if((u=h[0]=h[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&9===t.nodeType&&v&&r.relative[u[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(i=q.needsContext.test(e)?0:u.length;i--&&(c=u[i],!r.relative[l=c.type]);)if((d=r.find[l])&&(a=d(c.matches[0].replace(te,ne),ee.test(u[0].type)&&ge(t.parentNode)||t))){if(u.splice(i,1),!(e=a.length&&be(u)))return D.apply(n,a),n;break}}return(f||s(e,h))(a,t,!v,n,!t||ee.test(e)&&ge(t.parentNode)||t),n},n.sortStable=x.split("").sort(E).join("")===x,n.detectDuplicates=!!d,f(),n.sortDetached=le((function(e){return 1&e.compareDocumentPosition(h.createElement("fieldset"))})),le((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&le((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),le((function(e){return null==e.getAttribute("disabled")}))||de(M,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),se}(r);I.find=T,(I.expr=T.selectors)[":"]=I.expr.pseudos,I.uniqueSort=I.unique=T.uniqueSort,I.text=T.getText,I.isXMLDoc=T.isXML,I.contains=T.contains,I.escapeSelector=T.escape;var C=function(e,t,n){for(var r=[],a=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&I(e).is(n))break;r.push(e)}return r},E=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},_=I.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var R=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(e,t,n){return g(t)?I.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?I.grep(e,(function(e){return e===t!==n})):"string"!==typeof t?I.grep(e,(function(e){return l.call(t,e)>-1!==n})):I.filter(t,e,n)}I.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?I.find.matchesSelector(r,e)?[r]:[]:I.find.matches(e,I.grep(t,(function(e){return 1===e.nodeType})))},I.fn.extend({find:function(e){var t,n,r=this.length,a=this;if("string"!==typeof e)return this.pushStack(I(e).filter((function(){for(t=0;t<r;t++)if(I.contains(a[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)I.find(e,a[t],n);return r>1?I.uniqueSort(n):n},filter:function(e){return this.pushStack(O(this,e||[],!1))},not:function(e){return this.pushStack(O(this,e||[],!0))},is:function(e){return!!O(this,"string"===typeof e&&_.test(e)?I(e):e||[],!1).length}});var D,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(I.fn.init=function(e,t,n){var r,a;if(!e)return this;if(n=n||D,"string"===typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:P.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof I?t[0]:t,I.merge(this,I.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),R.test(r[1])&&I.isPlainObject(t))for(r in t)g(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(a=b.getElementById(r[2]))&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(I):I.makeArray(e,this)}).prototype=I.fn,D=I(b);var F=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function L(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}I.fn.extend({has:function(e){var t=I(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(I.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,a=this.length,i=[],o="string"!==typeof e&&I(e);if(!_.test(e))for(;r<a;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&I.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?I.uniqueSort(i):i)},index:function(e){return e?"string"===typeof e?l.call(I(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(I.uniqueSort(I.merge(this.get(),I(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),I.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return C(e,"parentNode")},parentsUntil:function(e,t,n){return C(e,"parentNode",n)},next:function(e){return L(e,"nextSibling")},prev:function(e){return L(e,"previousSibling")},nextAll:function(e){return C(e,"nextSibling")},prevAll:function(e){return C(e,"previousSibling")},nextUntil:function(e,t,n){return C(e,"nextSibling",n)},prevUntil:function(e,t,n){return C(e,"previousSibling",n)},siblings:function(e){return E((e.parentNode||{}).firstChild,e)},children:function(e){return E(e.firstChild)},contents:function(e){return null!=e.contentDocument&&o(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),I.merge([],e.childNodes))}},(function(e,t){I.fn[e]=function(n,r){var a=I.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"===typeof r&&(a=I.filter(r,a)),this.length>1&&(M[e]||I.uniqueSort(a),F.test(e)&&a.reverse()),this.pushStack(a)}}));var $=/[^\x20\t\r\n\f]+/g;function j(e){return e}function z(e){throw e}function B(e,t,n,r){var a;try{e&&g(a=e.promise)?a.call(e).done(t).fail(n):e&&g(a=e.then)?a.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}I.Callbacks=function(e){e="string"===typeof e?function(e){var t={};return I.each(e.match($)||[],(function(e,n){t[n]=!0})),t}(e):I.extend({},e);var t,n,r,a,i=[],o=[],s=-1,u=function(){for(a=a||e.once,r=t=!0;o.length;s=-1)for(n=o.shift();++s<i.length;)!1===i[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=i.length,n=!1);e.memory||(n=!1),t=!1,a&&(i=n?[]:"")},c={add:function(){return i&&(n&&!t&&(s=i.length-1,o.push(n)),function t(n){I.each(n,(function(n,r){g(r)?e.unique&&c.has(r)||i.push(r):r&&r.length&&"string"!==w(r)&&t(r)}))}(arguments),n&&!t&&u()),this},remove:function(){return I.each(arguments,(function(e,t){for(var n;(n=I.inArray(t,i,n))>-1;)i.splice(n,1),n<=s&&s--})),this},has:function(e){return e?I.inArray(e,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return a=o=[],i=n="",this},disabled:function(){return!i},lock:function(){return a=o=[],n||t||(i=n=""),this},locked:function(){return!!a},fireWith:function(e,n){return a||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},I.extend({Deferred:function(e){var t=[["notify","progress",I.Callbacks("memory"),I.Callbacks("memory"),2],["resolve","done",I.Callbacks("once memory"),I.Callbacks("once memory"),0,"resolved"],["reject","fail",I.Callbacks("once memory"),I.Callbacks("once memory"),1,"rejected"]],n="pending",a={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return I.Deferred((function(n){I.each(t,(function(t,r){var a=g(e[r[4]])&&e[r[4]];i[r[1]]((function(){var e=a&&a.apply(this,arguments);e&&g(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,a?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,a){var i=0;function o(e,t,n,a){return function(){var s=this,u=arguments,c=function(){var r,c;if(!(e<i)){if((r=n.apply(s,u))===t.promise())throw new TypeError("Thenable self-resolution");c=r&&("object"===typeof r||"function"===typeof r)&&r.then,g(c)?a?c.call(r,o(i,t,j,a),o(i,t,z,a)):(i++,c.call(r,o(i,t,j,a),o(i,t,z,a),o(i,t,j,t.notifyWith))):(n!==j&&(s=void 0,u=[r]),(a||t.resolveWith)(s,u))}},l=a?c:function(){try{c()}catch(r){I.Deferred.exceptionHook&&I.Deferred.exceptionHook(r,l.stackTrace),e+1>=i&&(n!==z&&(s=void 0,u=[r]),t.rejectWith(s,u))}};e?l():(I.Deferred.getStackHook&&(l.stackTrace=I.Deferred.getStackHook()),r.setTimeout(l))}}return I.Deferred((function(r){t[0][3].add(o(0,r,g(a)?a:j,r.notifyWith)),t[1][3].add(o(0,r,g(e)?e:j)),t[2][3].add(o(0,r,g(n)?n:z))})).promise()},promise:function(e){return null!=e?I.extend(e,a):a}},i={};return I.each(t,(function(e,r){var o=r[2],s=r[5];a[r[1]]=o.add,s&&o.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(r[3].fire),i[r[0]]=function(){return i[r[0]+"With"](this===i?void 0:this,arguments),this},i[r[0]+"With"]=o.fireWith})),a.promise(i),e&&e.call(i,i),i},when:function(e){var t=arguments.length,n=t,r=Array(n),a=s.call(arguments),i=I.Deferred(),o=function(e){return function(n){r[e]=this,a[e]=arguments.length>1?s.call(arguments):n,--t||i.resolveWith(r,a)}};if(t<=1&&(B(e,i.done(o(n)).resolve,i.reject,!t),"pending"===i.state()||g(a[n]&&a[n].then)))return i.then();for(;n--;)B(a[n],o(n),i.reject);return i.promise()}});var U=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;I.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&U.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},I.readyException=function(e){r.setTimeout((function(){throw e}))};var V=I.Deferred();function W(){b.removeEventListener("DOMContentLoaded",W),r.removeEventListener("load",W),I.ready()}I.fn.ready=function(e){return V.then(e).catch((function(e){I.readyException(e)})),this},I.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--I.readyWait:I.isReady)||(I.isReady=!0,!0!==e&&--I.readyWait>0||V.resolveWith(b,[I]))}}),I.ready.then=V.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(I.ready):(b.addEventListener("DOMContentLoaded",W),r.addEventListener("load",W));var G=function e(t,n,r,a,i,o,s){var u=0,c=t.length,l=null==r;if("object"===w(r))for(u in i=!0,r)e(t,n,u,r[u],!0,o,s);else if(void 0!==a&&(i=!0,g(a)||(s=!0),l&&(s?(n.call(t,a),n=null):(l=n,n=function(e,t,n){return l.call(I(e),n)})),n))for(;u<c;u++)n(t[u],r,s?a:a.call(t[u],u,n(t[u],r)));return i?t:l?n.call(t):c?n(t[0],r):o},Z=/^-ms-/,H=/-([a-z])/g;function q(e,t){return t.toUpperCase()}function K(e){return e.replace(Z,"ms-").replace(H,q)}var X=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function J(){this.expando=I.expando+J.uid++}J.uid=1,J.prototype={cache:function(e){var t=e[this.expando];return t||(t={},X(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,a=this.cache(e);if("string"===typeof t)a[K(t)]=n;else for(r in t)a[K(r)]=t[r];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][K(t)]},access:function(e,t,n){return void 0===t||t&&"string"===typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(K):(t=K(t))in r?[t]:t.match($)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||I.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!I.isEmptyObject(t)}};var Y=new J,Q=new J,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(te,"-$&").toLowerCase(),"string"===typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(a){}Q.set(e,t,n)}else n=void 0;return n}I.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),I.fn.extend({data:function(e,t){var n,r,a,i=this[0],o=i&&i.attributes;if(void 0===e){if(this.length&&(a=Q.get(i),1===i.nodeType&&!Y.get(i,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=K(r.slice(5)),ne(i,r,a[r]));Y.set(i,"hasDataAttrs",!0)}return a}return"object"===typeof e?this.each((function(){Q.set(this,e)})):G(this,(function(t){var n;if(i&&void 0===t)return void 0!==(n=Q.get(i,e))||void 0!==(n=ne(i,e))?n:void 0;this.each((function(){Q.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Q.remove(this,e)}))}}),I.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,I.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){var n=I.queue(e,t=t||"fx"),r=n.length,a=n.shift(),i=I._queueHooks(e,t);"inprogress"===a&&(a=n.shift(),r--),a&&("fx"===t&&n.unshift("inprogress"),delete i.stop,a.call(e,(function(){I.dequeue(e,t)}),i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:I.Callbacks("once memory").add((function(){Y.remove(e,[t+"queue",n])}))})}}),I.fn.extend({queue:function(e,t){var n=2;return"string"!==typeof e&&(t=e,e="fx",n--),arguments.length<n?I.queue(this[0],e):void 0===t?this:this.each((function(){var n=I.queue(this,e,t);I._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&I.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){I.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,a=I.Deferred(),i=this,o=this.length,s=function(){--r||a.resolveWith(i,[i])};for("string"!==typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=Y.get(i[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),a.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ae=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),ie=["Top","Right","Bottom","Left"],oe=b.documentElement,se=function(e){return I.contains(e.ownerDocument,e)},ue={composed:!0};oe.getRootNode&&(se=function(e){return I.contains(e.ownerDocument,e)||e.getRootNode(ue)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&se(e)&&"none"===I.css(e,"display")};function le(e,t,n,r){var a,i,o=20,s=r?function(){return r.cur()}:function(){return I.css(e,t,"")},u=s(),c=n&&n[3]||(I.cssNumber[t]?"":"px"),l=e.nodeType&&(I.cssNumber[t]||"px"!==c&&+u)&&ae.exec(I.css(e,t));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;o--;)I.style(e,t,l+c),(1-i)*(1-(i=s()/u||.5))<=0&&(o=0),l/=i;I.style(e,t,(l*=2)+c),n=n||[]}return n&&(l=+l||+u||0,a=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=a)),a}var de={};function fe(e){var t,n=e.ownerDocument,r=e.nodeName,a=de[r];return a||(t=n.body.appendChild(n.createElement(r)),a=I.css(t,"display"),t.parentNode.removeChild(t),"none"===a&&(a="block"),de[r]=a,a)}function he(e,t){for(var n,r,a=[],i=0,o=e.length;i<o;i++)(r=e[i]).style&&(n=r.style.display,t?("none"===n&&(a[i]=Y.get(r,"display")||null,a[i]||(r.style.display="")),""===r.style.display&&ce(r)&&(a[i]=fe(r))):"none"!==n&&(a[i]="none",Y.set(r,"display",n)));for(i=0;i<o;i++)null!=a[i]&&(e[i].style.display=a[i]);return e}I.fn.extend({show:function(){return he(this,!0)},hide:function(){return he(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each((function(){ce(this)?I(this).show():I(this).hide()}))}});var pe=/^(?:checkbox|radio)$/i,ve=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,me=/^$|^module$|\/(?:java|ecma)script/i;!function(){var e=b.createDocumentFragment().appendChild(b.createElement("div")),t=b.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),m.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,e.innerHTML="<option></option>",m.option=!!e.lastChild}();var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ye(e,t){var n;return n="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!==typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?I.merge([e],n):n}function be(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,m.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var xe=/<|&#?\w+;/;function ke(e,t,n,r,a){for(var i,o,s,u,c,l,d=t.createDocumentFragment(),f=[],h=0,p=e.length;h<p;h++)if((i=e[h])||0===i)if("object"===w(i))I.merge(f,i.nodeType?[i]:i);else if(xe.test(i)){for(o=o||d.appendChild(t.createElement("div")),s=(ve.exec(i)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,o.innerHTML=u[1]+I.htmlPrefilter(i)+u[2],l=u[0];l--;)o=o.lastChild;I.merge(f,o.childNodes),(o=d.firstChild).textContent=""}else f.push(t.createTextNode(i));for(d.textContent="",h=0;i=f[h++];)if(r&&I.inArray(i,r)>-1)a&&a.push(i);else if(c=se(i),o=ye(d.appendChild(i),"script"),c&&be(o),n)for(l=0;i=o[l++];)me.test(i.type||"")&&n.push(i);return d}var we=/^([^.]*)(?:\.(.+)|)/;function Se(){return!0}function Ie(){return!1}function Ne(e,t){return e===function(){try{return b.activeElement}catch(e){}}()===("focus"===t)}function Te(e,t,n,r,a,i){var o,s;if("object"===typeof t){for(s in"string"!==typeof n&&(r=r||n,n=void 0),t)Te(e,s,n,r,t[s],i);return e}if(null==r&&null==a?(a=n,r=n=void 0):null==a&&("string"===typeof n?(a=r,r=void 0):(a=r,r=n,n=void 0)),!1===a)a=Ie;else if(!a)return e;return 1===i&&(o=a,a=function(e){return I().off(e),o.apply(this,arguments)},a.guid=o.guid||(o.guid=I.guid++)),e.each((function(){I.event.add(this,t,a,r,n)}))}function Ce(e,t,n){n?(Y.set(e,t,!1),I.event.add(e,t,{namespace:!1,handler:function(e){var r,a,i=Y.get(this,t);if(1&e.isTrigger&&this[t]){if(i.length)(I.event.special[t]||{}).delegateType&&e.stopPropagation();else if(i=s.call(arguments),Y.set(this,t,i),r=n(this,t),this[t](),i!==(a=Y.get(this,t))||r?Y.set(this,t,!1):a={},i!==a)return e.stopImmediatePropagation(),e.preventDefault(),a&&a.value}else i.length&&(Y.set(this,t,{value:I.event.trigger(I.extend(i[0],I.Event.prototype),i.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,t)&&I.event.add(e,t,Se)}I.event={global:{},add:function(e,t,n,r,a){var i,o,s,u,c,l,d,f,h,p,v,m=Y.get(e);if(X(e))for(n.handler&&(n=(i=n).handler,a=i.selector),a&&I.find.matchesSelector(oe,a),n.guid||(n.guid=I.guid++),(u=m.events)||(u=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(t){return I.event.triggered!==t.type?I.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match($)||[""]).length;c--;)h=v=(s=we.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),h&&(d=I.event.special[h]||{},h=(a?d.delegateType:d.bindType)||h,d=I.event.special[h]||{},l=I.extend({type:h,origType:v,data:r,handler:n,guid:n.guid,selector:a,needsContext:a&&I.expr.match.needsContext.test(a),namespace:p.join(".")},i),(f=u[h])||((f=u[h]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,r,p,o)||e.addEventListener&&e.addEventListener(h,o)),d.add&&(d.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),a?f.splice(f.delegateCount++,0,l):f.push(l),I.event.global[h]=!0)},remove:function(e,t,n,r,a){var i,o,s,u,c,l,d,f,h,p,v,m=Y.hasData(e)&&Y.get(e);if(m&&(u=m.events)){for(c=(t=(t||"").match($)||[""]).length;c--;)if(h=v=(s=we.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),h){for(d=I.event.special[h]||{},f=u[h=(r?d.delegateType:d.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=i=f.length;i--;)l=f[i],!a&&v!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(i,1),l.selector&&f.delegateCount--,d.remove&&d.remove.call(e,l));o&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,p,m.handle)||I.removeEvent(e,h,m.handle),delete u[h])}else for(h in u)I.event.remove(e,h+t[c],n,r,!0);I.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,a,i,o,s=new Array(arguments.length),u=I.event.fix(e),c=(Y.get(this,"events")||Object.create(null))[u.type]||[],l=I.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,u)){for(o=I.event.handlers.call(this,u,c),t=0;(a=o[t++])&&!u.isPropagationStopped();)for(u.currentTarget=a.elem,n=0;(i=a.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==i.namespace&&!u.rnamespace.test(i.namespace)||(u.handleObj=i,u.data=i.data,void 0!==(r=((I.event.special[i.origType]||{}).handle||i.handler).apply(a.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,a,i,o,s=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(i=[],o={},n=0;n<u;n++)void 0===o[a=(r=t[n]).selector+" "]&&(o[a]=r.needsContext?I(a,this).index(c)>-1:I.find(a,this,null,[c]).length),o[a]&&i.push(r);i.length&&s.push({elem:c,handlers:i})}return c=this,u<t.length&&s.push({elem:c,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(I.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[I.expando]?e:new I.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Ce(t,"click",Se),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Ce(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},I.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},(I.Event=function(e,t){if(!(this instanceof I.Event))return new I.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Se:Ie,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&I.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[I.expando]=!0}).prototype={constructor:I.Event,isDefaultPrevented:Ie,isPropagationStopped:Ie,isImmediatePropagationStopped:Ie,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Se,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Se,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Se,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},I.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},I.event.addProp),I.each({focus:"focusin",blur:"focusout"},(function(e,t){I.event.special[e]={setup:function(){return Ce(this,e,Ne),!1},trigger:function(){return Ce(this,e),!0},_default:function(t){return Y.get(t.target,e)},delegateType:t}})),I.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){I.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,a=e.relatedTarget,i=e.handleObj;return a&&(a===r||I.contains(r,a))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}})),I.fn.extend({on:function(e,t,n,r){return Te(this,e,t,n,r)},one:function(e,t,n,r){return Te(this,e,t,n,r,1)},off:function(e,t,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,I(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!==typeof t||(n=t,t=void 0),!1===n&&(n=Ie),this.each((function(){I.event.remove(this,e,n,t)}))}});var Ee=/<script|<style|<link/i,_e=/checked\s*(?:[^=]|=\s*.checked.)/i,Ae=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Re(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&I(e).children("tbody")[0]||e}function Oe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function De(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Pe(e,t){var n,r,a,i,o,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(a in Y.remove(t,"handle events"),s)for(n=0,r=s[a].length;n<r;n++)I.event.add(t,a,s[a][n]);Q.hasData(e)&&(i=Q.access(e),o=I.extend({},i),Q.set(t,o))}}function Fe(e,t){var n=t.nodeName.toLowerCase();"input"===n&&pe.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Me(e,t,n,r){t=u(t);var a,i,o,s,c,l,d=0,f=e.length,h=f-1,p=t[0],v=g(p);if(v||f>1&&"string"===typeof p&&!m.checkClone&&_e.test(p))return e.each((function(a){var i=e.eq(a);v&&(t[0]=p.call(this,a,i.html())),Me(i,t,n,r)}));if(f&&(i=(a=ke(t,e[0].ownerDocument,!1,e,r)).firstChild,1===a.childNodes.length&&(a=i),i||r)){for(s=(o=I.map(ye(a,"script"),Oe)).length;d<f;d++)c=a,d!==h&&(c=I.clone(c,!0,!0),s&&I.merge(o,ye(c,"script"))),n.call(e[d],c,d);if(s)for(l=o[o.length-1].ownerDocument,I.map(o,De),d=0;d<s;d++)c=o[d],me.test(c.type||"")&&!Y.access(c,"globalEval")&&I.contains(l,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?I._evalUrl&&!c.noModule&&I._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},l):k(c.textContent.replace(Ae,""),c,l))}return e}function Le(e,t,n){for(var r,a=t?I.filter(t,e):e,i=0;null!=(r=a[i]);i++)n||1!==r.nodeType||I.cleanData(ye(r)),r.parentNode&&(n&&se(r)&&be(ye(r,"script")),r.parentNode.removeChild(r));return e}I.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,a,i,o,s=e.cloneNode(!0),u=se(e);if(!m.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!I.isXMLDoc(e))for(o=ye(s),r=0,a=(i=ye(e)).length;r<a;r++)Fe(i[r],o[r]);if(t)if(n)for(i=i||ye(e),o=o||ye(s),r=0,a=i.length;r<a;r++)Pe(i[r],o[r]);else Pe(e,s);return(o=ye(s,"script")).length>0&&be(o,!u&&ye(e,"script")),s},cleanData:function(e){for(var t,n,r,a=I.event.special,i=0;void 0!==(n=e[i]);i++)if(X(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)a[r]?I.event.remove(n,r):I.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),I.fn.extend({detach:function(e){return Le(this,e,!0)},remove:function(e){return Le(this,e)},text:function(e){return G(this,(function(e){return void 0===e?I.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Me(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Re(this,e).appendChild(e)}))},prepend:function(){return Me(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Re(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Me(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Me(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(I.cleanData(ye(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return I.clone(this,e,t)}))},html:function(e){return G(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!Ee.test(e)&&!ge[(ve.exec(e)||["",""])[1].toLowerCase()]){e=I.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(I.cleanData(ye(t,!1)),t.innerHTML=e);t=0}catch(a){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Me(this,arguments,(function(t){var n=this.parentNode;I.inArray(this,e)<0&&(I.cleanData(ye(this)),n&&n.replaceChild(t,this))}),e)}}),I.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){I.fn[e]=function(e){for(var n,r=[],a=I(e),i=a.length-1,o=0;o<=i;o++)n=o===i?this:this.clone(!0),I(a[o])[t](n),c.apply(r,n.get());return this.pushStack(r)}}));var $e=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),je=/^--/,ze=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Be=function(e,t,n){var r,a,i={};for(a in t)i[a]=e.style[a],e.style[a]=t[a];for(a in r=n.call(e),t)e.style[a]=i[a];return r},Ue=new RegExp(ie.join("|"),"i"),Ve=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g");function We(e,t,n){var r,a,i,o,s=je.test(t),u=e.style;return(n=n||ze(e))&&(o=n.getPropertyValue(t)||n[t],s&&o&&(o=o.replace(Ve,"$1")||void 0),""!==o||se(e)||(o=I.style(e,t)),!m.pixelBoxStyles()&&$e.test(o)&&Ue.test(t)&&(r=u.width,a=u.minWidth,i=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=a,u.maxWidth=i)),void 0!==o?o+"":o}function Ge(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",oe.appendChild(c).appendChild(l);var e=r.getComputedStyle(l);n="1%"!==e.top,u=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),a=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),oe.removeChild(c),l=null}}function t(e){return Math.round(parseFloat(e))}var n,a,i,o,s,u,c=b.createElement("div"),l=b.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===l.style.backgroundClip,I.extend(m,{boxSizingReliable:function(){return e(),a},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,a;return null==s&&(e=b.createElement("table"),t=b.createElement("tr"),n=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",oe.appendChild(e).appendChild(t).appendChild(n),a=r.getComputedStyle(t),s=parseInt(a.height,10)+parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10)===t.offsetHeight,oe.removeChild(e)),s}}))}();var Ze=["Webkit","Moz","ms"],He=b.createElement("div").style,qe={};function Ke(e){var t=I.cssProps[e]||qe[e];return t||(e in He?e:qe[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ze.length;n--;)if((e=Ze[n]+t)in He)return e}(e)||e)}var Xe=/^(none|table(?!-c[ea]).+)/,Je={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"};function Qe(e,t,n){var r=ae.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function et(e,t,n,r,a,i){var o="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(u+=I.css(e,n+ie[o],!0,a)),r?("content"===n&&(u-=I.css(e,"padding"+ie[o],!0,a)),"margin"!==n&&(u-=I.css(e,"border"+ie[o]+"Width",!0,a))):(u+=I.css(e,"padding"+ie[o],!0,a),"padding"!==n?u+=I.css(e,"border"+ie[o]+"Width",!0,a):s+=I.css(e,"border"+ie[o]+"Width",!0,a));return!r&&i>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-u-s-.5))||0),u}function tt(e,t,n){var r=ze(e),a=(!m.boxSizingReliable()||n)&&"border-box"===I.css(e,"boxSizing",!1,r),i=a,o=We(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if($e.test(o)){if(!n)return o;o="auto"}return(!m.boxSizingReliable()&&a||!m.reliableTrDimensions()&&A(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===I.css(e,"display",!1,r))&&e.getClientRects().length&&(a="border-box"===I.css(e,"boxSizing",!1,r),(i=s in e)&&(o=e[s])),(o=parseFloat(o)||0)+et(e,t,n||(a?"border":"content"),i,r,o)+"px"}function nt(e,t,n,r,a){return new nt.prototype.init(e,t,n,r,a)}I.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,i,o,s=K(t),u=je.test(t),c=e.style;if(u||(t=Ke(s)),o=I.cssHooks[t]||I.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(a=o.get(e,!1,r))?a:c[t];"string"===(i=typeof n)&&(a=ae.exec(n))&&a[1]&&(n=le(e,t,a),i="number"),null!=n&&n===n&&("number"!==i||u||(n+=a&&a[3]||(I.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(u?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var a,i,o,s=K(t);return je.test(t)||(t=Ke(s)),(o=I.cssHooks[t]||I.cssHooks[s])&&"get"in o&&(a=o.get(e,!0,n)),void 0===a&&(a=We(e,t,r)),"normal"===a&&t in Ye&&(a=Ye[t]),""===n||n?(i=parseFloat(a),!0===n||isFinite(i)?i||0:a):a}}),I.each(["height","width"],(function(e,t){I.cssHooks[t]={get:function(e,n,r){if(n)return!Xe.test(I.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,t,r):Be(e,Je,(function(){return tt(e,t,r)}))},set:function(e,n,r){var a,i=ze(e),o=!m.scrollboxSize()&&"absolute"===i.position,s=(o||r)&&"border-box"===I.css(e,"boxSizing",!1,i),u=r?et(e,t,r,s,i):0;return s&&o&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-et(e,t,"border",!1,i)-.5)),u&&(a=ae.exec(n))&&"px"!==(a[3]||"px")&&(e.style[t]=n,n=I.css(e,t)),Qe(0,n,u)}}})),I.cssHooks.marginLeft=Ge(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-Be(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),I.each({margin:"",padding:"",border:"Width"},(function(e,t){I.cssHooks[e+t]={expand:function(n){for(var r=0,a={},i="string"===typeof n?n.split(" "):[n];r<4;r++)a[e+ie[r]+t]=i[r]||i[r-2]||i[0];return a}},"margin"!==e&&(I.cssHooks[e+t].set=Qe)})),I.fn.extend({css:function(e,t){return G(this,(function(e,t,n){var r,a,i={},o=0;if(Array.isArray(t)){for(r=ze(e),a=t.length;o<a;o++)i[t[o]]=I.css(e,t[o],!1,r);return i}return void 0!==n?I.style(e,t,n):I.css(e,t)}),e,t,arguments.length>1)}}),I.Tween=nt,nt.prototype={constructor:nt,init:function(e,t,n,r,a,i){this.elem=e,this.prop=n,this.easing=a||I.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(I.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=I.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}},nt.prototype.init.prototype=nt.prototype,nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=I.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){I.fx.step[e.prop]?I.fx.step[e.prop](e):1!==e.elem.nodeType||!I.cssHooks[e.prop]&&null==e.elem.style[Ke(e.prop)]?e.elem[e.prop]=e.now:I.style(e.elem,e.prop,e.now+e.unit)}}},nt.propHooks.scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},I.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},(I.fx=nt.prototype.init).step={};var rt,at,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function st(){at&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(st):r.setTimeout(st,I.fx.interval),I.fx.tick())}function ut(){return r.setTimeout((function(){rt=void 0})),rt=Date.now()}function ct(e,t){var n,r=0,a={height:e};for(t=t?1:0;r<4;r+=2-t)a["margin"+(n=ie[r])]=a["padding"+n]=e;return t&&(a.opacity=a.width=e),a}function lt(e,t,n){for(var r,a=(dt.tweeners[t]||[]).concat(dt.tweeners["*"]),i=0,o=a.length;i<o;i++)if(r=a[i].call(n,t,e))return r}function dt(e,t,n){var r,a,i=0,o=dt.prefilters.length,s=I.Deferred().always((function(){delete u.elem})),u=function(){if(a)return!1;for(var t=rt||ut(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),i=0,o=c.tweens.length;i<o;i++)c.tweens[i].run(r);return s.notifyWith(e,[c,r,n]),r<1&&o?n:(o||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:I.extend({},t),opts:I.extend(!0,{specialEasing:{},easing:I.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||ut(),duration:n.duration,tweens:[],createTween:function(t,n){var r=I.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(a)return this;for(a=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),l=c.props;for(!function(e,t){var n,r,a,i,o;for(n in e)if(a=t[r=K(n)],i=e[n],Array.isArray(i)&&(a=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(o=I.cssHooks[r])&&"expand"in o)for(n in i=o.expand(i),delete e[r],i)n in e||(e[n]=i[n],t[n]=a);else t[r]=a}(l,c.opts.specialEasing);i<o;i++)if(r=dt.prefilters[i].call(c,e,l,c.opts))return g(r.stop)&&(I._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return I.map(l,lt,c),g(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),I.fx.timer(I.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c}I.Animation=I.extend(dt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,ae.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match($);for(var n,r=0,a=e.length;r<a;r++)n=e[r],dt.tweeners[n]=dt.tweeners[n]||[],dt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,a,i,o,s,u,c,l,d="width"in t||"height"in t,f=this,h={},p=e.style,v=e.nodeType&&ce(e),m=Y.get(e,"fxshow");for(r in n.queue||(null==(o=I._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,f.always((function(){f.always((function(){o.unqueued--,I.queue(e,"fx").length||o.empty.fire()}))}))),t)if(a=t[r],it.test(a)){if(delete t[r],i=i||"toggle"===a,a===(v?"hide":"show")){if("show"!==a||!m||void 0===m[r])continue;v=!0}h[r]=m&&m[r]||I.style(e,r)}if((u=!I.isEmptyObject(t))||!I.isEmptyObject(h))for(r in d&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=Y.get(e,"display")),"none"===(l=I.css(e,"display"))&&(c?l=c:(he([e],!0),c=e.style.display||c,l=I.css(e,"display"),he([e]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===I.css(e,"float")&&(u||(f.done((function(){p.display=c})),null==c&&(l=p.display,c="none"===l?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),u=!1,h)u||(m?"hidden"in m&&(v=m.hidden):m=Y.access(e,"fxshow",{display:c}),i&&(m.hidden=!v),v&&he([e],!0),f.done((function(){for(r in v||he([e]),Y.remove(e,"fxshow"),h)I.style(e,r,h[r])}))),u=lt(v?m[r]:0,r,f),r in m||(m[r]=u.start,v&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?dt.prefilters.unshift(e):dt.prefilters.push(e)}}),I.speed=function(e,t,n){var r=e&&"object"===typeof e?I.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return I.fx.off?r.duration=0:"number"!==typeof r.duration&&(r.duration in I.fx.speeds?r.duration=I.fx.speeds[r.duration]:r.duration=I.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&I.dequeue(this,r.queue)},r},I.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var a=I.isEmptyObject(e),i=I.speed(t,n,r),o=function(){var t=dt(this,I.extend({},e),i);(a||Y.get(this,"finish"))&&t.stop(!0)};return o.finish=o,a||!1===i.queue?this.each(o):this.queue(i.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!==typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,a=null!=e&&e+"queueHooks",i=I.timers,o=Y.get(this);if(a)o[a]&&o[a].stop&&r(o[a]);else for(a in o)o[a]&&o[a].stop&&ot.test(a)&&r(o[a]);for(a=i.length;a--;)i[a].elem!==this||null!=e&&i[a].queue!==e||(i[a].anim.stop(n),t=!1,i.splice(a,1));!t&&n||I.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=Y.get(this),r=n[e+"queue"],a=n[e+"queueHooks"],i=I.timers,o=r?r.length:0;for(n.finish=!0,I.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),I.each(["toggle","show","hide"],(function(e,t){var n=I.fn[t];I.fn[t]=function(e,r,a){return null==e||"boolean"===typeof e?n.apply(this,arguments):this.animate(ct(t,!0),e,r,a)}})),I.each({slideDown:ct("show"),slideUp:ct("hide"),slideToggle:ct("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){I.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),I.timers=[],I.fx.tick=function(){var e,t=0,n=I.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||I.fx.stop(),rt=void 0},I.fx.timer=function(e){I.timers.push(e),I.fx.start()},I.fx.interval=13,I.fx.start=function(){at||(at=!0,st())},I.fx.stop=function(){at=null},I.fx.speeds={slow:600,fast:200,_default:400},I.fn.delay=function(e,t){return e=I.fx&&I.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var a=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(a)}}))},function(){var e=b.createElement("input"),t=b.createElement("select").appendChild(b.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=b.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var ft,ht=I.expr.attrHandle;I.fn.extend({attr:function(e,t){return G(this,I.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){I.removeAttr(this,e)}))}}),I.extend({attr:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return"undefined"===typeof e.getAttribute?I.prop(e,t,n):(1===i&&I.isXMLDoc(e)||(a=I.attrHooks[t.toLowerCase()]||(I.expr.match.bool.test(t)?ft:void 0)),void 0!==n?null===n?void I.removeAttr(e,t):a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:(e.setAttribute(t,n+""),n):a&&"get"in a&&null!==(r=a.get(e,t))?r:null==(r=I.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,a=t&&t.match($);if(a&&1===e.nodeType)for(;n=a[r++];)e.removeAttribute(n)}}),ft={set:function(e,t,n){return!1===t?I.removeAttr(e,n):e.setAttribute(n,n),n}},I.each(I.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=ht[t]||I.find.attr;ht[t]=function(e,t,r){var a,i,o=t.toLowerCase();return r||(i=ht[o],ht[o]=a,a=null!=n(e,t,r)?o:null,ht[o]=i),a}}));var pt=/^(?:input|select|textarea|button)$/i,vt=/^(?:a|area)$/i;function mt(e){return(e.match($)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function yt(e){return Array.isArray(e)?e:"string"===typeof e&&e.match($)||[]}I.fn.extend({prop:function(e,t){return G(this,I.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[I.propFix[e]||e]}))}}),I.extend({prop:function(e,t,n){var r,a,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&I.isXMLDoc(e)||(t=I.propFix[t]||t,a=I.propHooks[t]),void 0!==n?a&&"set"in a&&void 0!==(r=a.set(e,n,t))?r:e[t]=n:a&&"get"in a&&null!==(r=a.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=I.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||vt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(I.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),I.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){I.propFix[this.toLowerCase()]=this})),I.fn.extend({addClass:function(e){var t,n,r,a,i,o;return g(e)?this.each((function(t){I(this).addClass(e.call(this,t,gt(this)))})):(t=yt(e)).length?this.each((function(){if(r=gt(this),n=1===this.nodeType&&" "+mt(r)+" "){for(i=0;i<t.length;i++)a=t[i],n.indexOf(" "+a+" ")<0&&(n+=a+" ");o=mt(n),r!==o&&this.setAttribute("class",o)}})):this},removeClass:function(e){var t,n,r,a,i,o;return g(e)?this.each((function(t){I(this).removeClass(e.call(this,t,gt(this)))})):arguments.length?(t=yt(e)).length?this.each((function(){if(r=gt(this),n=1===this.nodeType&&" "+mt(r)+" "){for(i=0;i<t.length;i++)for(a=t[i];n.indexOf(" "+a+" ")>-1;)n=n.replace(" "+a+" "," ");o=mt(n),r!==o&&this.setAttribute("class",o)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,r,a,i,o=typeof e,s="string"===o||Array.isArray(e);return g(e)?this.each((function(n){I(this).toggleClass(e.call(this,n,gt(this),t),t)})):"boolean"===typeof t&&s?t?this.addClass(e):this.removeClass(e):(n=yt(e),this.each((function(){if(s)for(i=I(this),a=0;a<n.length;a++)r=n[a],i.hasClass(r)?i.removeClass(r):i.addClass(r);else void 0!==e&&"boolean"!==o||((r=gt(this))&&Y.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":Y.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+mt(gt(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;I.fn.extend({val:function(e){var t,n,r,a=this[0];return arguments.length?(r=g(e),this.each((function(n){var a;1===this.nodeType&&(null==(a=r?e.call(this,n,I(this).val()):e)?a="":"number"===typeof a?a+="":Array.isArray(a)&&(a=I.map(a,(function(e){return null==e?"":e+""}))),(t=I.valHooks[this.type]||I.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))}))):a?(t=I.valHooks[a.type]||I.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(a,"value"))?n:"string"===typeof(n=a.value)?n.replace(bt,""):null==n?"":n:void 0}}),I.extend({valHooks:{option:{get:function(e){var t=I.find.attr(e,"value");return null!=t?t:mt(I.text(e))}},select:{get:function(e){var t,n,r,a=e.options,i=e.selectedIndex,o="select-one"===e.type,s=o?null:[],u=o?i+1:a.length;for(r=i<0?u:o?i:0;r<u;r++)if(((n=a[r]).selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=I(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,a=e.options,i=I.makeArray(t),o=a.length;o--;)((r=a[o]).selected=I.inArray(I.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),I.each(["radio","checkbox"],(function(){I.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=I.inArray(I(e).val(),t)>-1}},m.checkOn||(I.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),m.focusin="onfocusin"in r;var xt=/^(?:focusinfocus|focusoutblur)$/,kt=function(e){e.stopPropagation()};I.extend(I.event,{trigger:function(e,t,n,a){var i,o,s,u,c,l,d,f,p=[n||b],v=h.call(e,"type")?e.type:e,m=h.call(e,"namespace")?e.namespace.split("."):[];if(o=f=s=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!xt.test(v+I.event.triggered)&&(v.indexOf(".")>-1&&(m=v.split("."),v=m.shift(),m.sort()),c=v.indexOf(":")<0&&"on"+v,(e=e[I.expando]?e:new I.Event(v,"object"===typeof e&&e)).isTrigger=a?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:I.makeArray(t,[e]),d=I.event.special[v]||{},a||!d.trigger||!1!==d.trigger.apply(n,t))){if(!a&&!d.noBubble&&!y(n)){for(u=d.delegateType||v,xt.test(u+v)||(o=o.parentNode);o;o=o.parentNode)p.push(o),s=o;s===(n.ownerDocument||b)&&p.push(s.defaultView||s.parentWindow||r)}for(i=0;(o=p[i++])&&!e.isPropagationStopped();)f=o,e.type=i>1?u:d.bindType||v,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=c&&o[c])&&l.apply&&X(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=v,a||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),t)||!X(n)||c&&g(n[v])&&!y(n)&&((s=n[c])&&(n[c]=null),I.event.triggered=v,e.isPropagationStopped()&&f.addEventListener(v,kt),n[v](),e.isPropagationStopped()&&f.removeEventListener(v,kt),I.event.triggered=void 0,s&&(n[c]=s)),e.result}},simulate:function(e,t,n){var r=I.extend(new I.Event,n,{type:e,isSimulated:!0});I.event.trigger(r,null,t)}}),I.fn.extend({trigger:function(e,t){return this.each((function(){I.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return I.event.trigger(e,t,n,!0)}}),m.focusin||I.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){I.event.simulate(t,e.target,I.event.fix(e))};I.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,a=Y.access(r,t);a||r.addEventListener(e,n,!0),Y.access(r,t,(a||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,a=Y.access(r,t)-1;a?Y.access(r,t,a):(r.removeEventListener(e,n,!0),Y.remove(r,t))}}}));var wt=r.location,St={guid:Date.now()},It=/\?/;I.parseXML=function(e){var t,n;if(!e||"string"!==typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(a){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||I.error("Invalid XML: "+(n?I.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Nt=/\[\]$/,Tt=/\r?\n/g,Ct=/^(?:submit|button|image|reset|file)$/i,Et=/^(?:input|select|textarea|keygen)/i;function _t(e,t,n,r){var a;if(Array.isArray(t))I.each(t,(function(t,a){n||Nt.test(e)?r(e,a):_t(e+"["+("object"===typeof a&&null!=a?t:"")+"]",a,n,r)}));else if(n||"object"!==w(t))r(e,t);else for(a in t)_t(e+"["+a+"]",t[a],n,r)}I.param=function(e,t){var n,r=[],a=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!I.isPlainObject(e))I.each(e,(function(){a(this.name,this.value)}));else for(n in e)_t(n,e[n],t,a);return r.join("&")},I.fn.extend({serialize:function(){return I.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=I.prop(this,"elements");return e?I.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!I(this).is(":disabled")&&Et.test(this.nodeName)&&!Ct.test(e)&&(this.checked||!pe.test(e))})).map((function(e,t){var n=I(this).val();return null==n?null:Array.isArray(n)?I.map(n,(function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}})):{name:t.name,value:n.replace(Tt,"\r\n")}})).get()}});var At=/%20/g,Rt=/#.*$/,Ot=/([?&])_=[^&]*/,Dt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,Ft=/^\/\//,Mt={},Lt={},$t="*/".concat("*"),jt=b.createElement("a");function zt(e){return function(t,n){"string"!==typeof t&&(n=t,t="*");var r,a=0,i=t.toLowerCase().match($)||[];if(g(n))for(;r=i[a++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Bt(e,t,n,r){var a={},i=e===Lt;function o(s){var u;return a[s]=!0,I.each(e[s]||[],(function(e,s){var c=s(t,n,r);return"string"!==typeof c||i||a[c]?i?!(u=c):void 0:(t.dataTypes.unshift(c),o(c),!1)})),u}return o(t.dataTypes[0])||!a["*"]&&o("*")}function Ut(e,t){var n,r,a=I.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:r||(r={}))[n]=t[n]);return r&&I.extend(!0,e,r),e}jt.href=wt.href,I.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":I.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ut(Ut(e,I.ajaxSettings),t):Ut(I.ajaxSettings,e)},ajaxPrefilter:zt(Mt),ajaxTransport:zt(Lt),ajax:function(e,t){"object"===typeof e&&(t=e,e=void 0);var n,a,i,o,s,u,c,l,d,f,h=I.ajaxSetup({},t=t||{}),p=h.context||h,v=h.context&&(p.nodeType||p.jquery)?I(p):I.event,m=I.Deferred(),g=I.Callbacks("once memory"),y=h.statusCode||{},x={},k={},w="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(c){if(!o)for(o={};t=Dt.exec(i);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?i:null},setRequestHeader:function(e,t){return null==c&&(e=k[e.toLowerCase()]=k[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)S.always(e[S.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||w;return n&&n.abort(t),N(0,t),this}};if(m.promise(S),h.url=((e||h.url||wt.href)+"").replace(Ft,wt.protocol+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match($)||[""],null==h.crossDomain){u=b.createElement("a");try{u.href=h.url,u.href=u.href,h.crossDomain=jt.protocol+"//"+jt.host!==u.protocol+"//"+u.host}catch(T){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!==typeof h.data&&(h.data=I.param(h.data,h.traditional)),Bt(Mt,h,t,S),c)return S;for(d in(l=I.event&&h.global)&&0===I.active++&&I.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Pt.test(h.type),a=h.url.replace(Rt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(At,"+")):(f=h.url.slice(a.length),h.data&&(h.processData||"string"===typeof h.data)&&(a+=(It.test(a)?"&":"?")+h.data,delete h.data),!1===h.cache&&(a=a.replace(Ot,"$1"),f=(It.test(a)?"&":"?")+"_="+St.guid+++f),h.url=a+f),h.ifModified&&(I.lastModified[a]&&S.setRequestHeader("If-Modified-Since",I.lastModified[a]),I.etag[a]&&S.setRequestHeader("If-None-Match",I.etag[a])),(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&S.setRequestHeader("Content-Type",h.contentType),S.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+$t+"; q=0.01":""):h.accepts["*"]),h.headers)S.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(!1===h.beforeSend.call(p,S,h)||c))return S.abort();if(w="abort",g.add(h.complete),S.done(h.success),S.fail(h.error),n=Bt(Lt,h,t,S)){if(S.readyState=1,l&&v.trigger("ajaxSend",[S,h]),c)return S;h.async&&h.timeout>0&&(s=r.setTimeout((function(){S.abort("timeout")}),h.timeout));try{c=!1,n.send(x,N)}catch(T){if(c)throw T;N(-1,T)}}else N(-1,"No Transport");function N(e,t,o,u){var d,f,b,x,k,w=t;c||(c=!0,s&&r.clearTimeout(s),n=void 0,i=u||"",S.readyState=e>0?4:0,d=e>=200&&e<300||304===e,o&&(x=function(e,t,n){for(var r,a,i,o,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){u.unshift(a);break}if(u[0]in n)i=u[0];else{for(a in n){if(!u[0]||e.converters[a+" "+u[0]]){i=a;break}o||(o=a)}i=i||o}if(i)return i!==u[0]&&u.unshift(i),n[i]}(h,S,o)),!d&&I.inArray("script",h.dataTypes)>-1&&I.inArray("json",h.dataTypes)<0&&(h.converters["text script"]=function(){}),x=function(e,t,n,r){var a,i,o,s,u,c={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(i=l.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=i,i=l.shift())if("*"===i)i=u;else if("*"!==u&&u!==i){if(!(o=c[u+" "+i]||c["* "+i]))for(a in c)if((s=a.split(" "))[1]===i&&(o=c[u+" "+s[0]]||c["* "+s[0]])){!0===o?o=c[a]:!0!==c[a]&&(i=s[0],l.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(T){return{state:"parsererror",error:o?T:"No conversion from "+u+" to "+i}}}return{state:"success",data:t}}(h,x,S,d),d?(h.ifModified&&((k=S.getResponseHeader("Last-Modified"))&&(I.lastModified[a]=k),(k=S.getResponseHeader("etag"))&&(I.etag[a]=k)),204===e||"HEAD"===h.type?w="nocontent":304===e?w="notmodified":(w=x.state,f=x.data,d=!(b=x.error))):(b=w,!e&&w||(w="error",e<0&&(e=0))),S.status=e,S.statusText=(t||w)+"",d?m.resolveWith(p,[f,w,S]):m.rejectWith(p,[S,w,b]),S.statusCode(y),y=void 0,l&&v.trigger(d?"ajaxSuccess":"ajaxError",[S,h,d?f:b]),g.fireWith(p,[S,w]),l&&(v.trigger("ajaxComplete",[S,h]),--I.active||I.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return I.get(e,t,n,"json")},getScript:function(e,t){return I.get(e,void 0,t,"script")}}),I.each(["get","post"],(function(e,t){I[t]=function(e,n,r,a){return g(n)&&(a=a||r,r=n,n=void 0),I.ajax(I.extend({url:e,type:t,dataType:a,data:n,success:r},I.isPlainObject(e)&&e))}})),I.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),I._evalUrl=function(e,t,n){return I.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){I.globalEval(e,t,n)}})},I.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=I(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return g(e)?this.each((function(t){I(this).wrapInner(e.call(this,t))})):this.each((function(){var t=I(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=g(e);return this.each((function(n){I(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){I(this).replaceWith(this.childNodes)})),this}}),I.expr.pseudos.hidden=function(e){return!I.expr.pseudos.visible(e)},I.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},I.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},Wt=I.ajaxSettings.xhr();m.cors=!!Wt&&"withCredentials"in Wt,m.ajax=Wt=!!Wt,I.ajaxTransport((function(e){var t,n;if(m.cors||Wt&&!e.crossDomain)return{send:function(a,i){var o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];for(o in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)s.setRequestHeader(o,a[o]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!==typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Vt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!==typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout((function(){t&&n()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}})),I.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),I.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return I.globalEval(e),e}}}),I.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),I.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,a){t=I("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&a("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Gt=[],Zt=/(=)\?(?=&|$)|\?\?/;I.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||I.expando+"_"+St.guid++;return this[e]=!0,e}}),I.ajaxPrefilter("json jsonp",(function(e,t,n){var a,i,o,s=!1!==e.jsonp&&(Zt.test(e.url)?"url":"string"===typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return a=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Zt,"$1"+a):!1!==e.jsonp&&(e.url+=(It.test(e.url)?"&":"?")+e.jsonp+"="+a),e.converters["script json"]=function(){return o||I.error(a+" was not called"),o[0]},e.dataTypes[0]="json",i=r[a],r[a]=function(){o=arguments},n.always((function(){void 0===i?I(r).removeProp(a):r[a]=i,e[a]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(a)),o&&g(i)&&i(o[0]),o=i=void 0})),"script"})),m.createHTMLDocument=function(){var e=b.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),I.parseHTML=function(e,t,n){return"string"!==typeof e?[]:("boolean"===typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?((r=(t=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,t.head.appendChild(r)):t=b),i=!n&&[],(a=R.exec(e))?[t.createElement(a[1])]:(a=ke([e],t,i),i&&i.length&&I(i).remove(),I.merge([],a.childNodes)));var r,a,i},I.fn.load=function(e,t,n){var r,a,i,o=this,s=e.indexOf(" ");return s>-1&&(r=mt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"===typeof t&&(a="POST"),o.length>0&&I.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done((function(e){i=arguments,o.html(r?I("<div>").append(I.parseHTML(e)).find(r):e)})).always(n&&function(e,t){o.each((function(){n.apply(this,i||[e.responseText,t,e])}))}),this},I.expr.pseudos.animated=function(e){return I.grep(I.timers,(function(t){return e===t.elem})).length},I.offset={setOffset:function(e,t,n){var r,a,i,o,s,u,c=I.css(e,"position"),l=I(e),d={};"static"===c&&(e.style.position="relative"),s=l.offset(),i=I.css(e,"top"),u=I.css(e,"left"),("absolute"===c||"fixed"===c)&&(i+u).indexOf("auto")>-1?(o=(r=l.position()).top,a=r.left):(o=parseFloat(i)||0,a=parseFloat(u)||0),g(t)&&(t=t.call(e,n,I.extend({},s))),null!=t.top&&(d.top=t.top-s.top+o),null!=t.left&&(d.left=t.left-s.left+a),"using"in t?t.using.call(e,d):l.css(d)}},I.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){I.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],a={top:0,left:0};if("fixed"===I.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===I.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((a=I(e).offset()).top+=I.css(e,"borderTopWidth",!0),a.left+=I.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-I.css(r,"marginTop",!0),left:t.left-a.left-I.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===I.css(e,"position");)e=e.offsetParent;return e||oe}))}}),I.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;I.fn[e]=function(r){return G(this,(function(e,r,a){var i;if(y(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===a)return i?i[t]:e[r];i?i.scrollTo(n?i.pageXOffset:a,n?a:i.pageYOffset):e[r]=a}),e,r,arguments.length)}})),I.each(["top","left"],(function(e,t){I.cssHooks[t]=Ge(m.pixelPosition,(function(e,n){if(n)return n=We(e,t),$e.test(n)?I(e).position()[t]+"px":n}))})),I.each({Height:"height",Width:"width"},(function(e,t){I.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){I.fn[r]=function(a,i){var o=arguments.length&&(n||"boolean"!==typeof a),s=n||(!0===a||!0===i?"margin":"border");return G(this,(function(t,n,a){var i;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===a?I.css(t,n,s):I.style(t,n,a,s)}),t,o?a:void 0,o)}}))})),I.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){I.fn[t]=function(e){return this.on(t,e)}})),I.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),I.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){I.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var Ht=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;I.proxy=function(e,t){var n,r,a;if("string"===typeof t&&(n=e[t],t=e,e=n),g(e))return r=s.call(arguments,2),a=function(){return e.apply(t||this,r.concat(s.call(arguments)))},a.guid=e.guid=e.guid||I.guid++,a},I.holdReady=function(e){e?I.readyWait++:I.ready(!0)},I.isArray=Array.isArray,I.parseJSON=JSON.parse,I.nodeName=A,I.isFunction=g,I.isWindow=y,I.camelCase=K,I.type=w,I.now=Date.now,I.isNumeric=function(e){var t=I.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},I.trim=function(e){return null==e?"":(e+"").replace(Ht,"$1")},void 0===(n=function(){return I}.apply(t,[]))||(e.exports=n);var qt=r.jQuery,Kt=r.$;return I.noConflict=function(e){return r.$===I&&(r.$=Kt),e&&r.jQuery===I&&(r.jQuery=qt),I},"undefined"===typeof a&&(r.jQuery=r.$=I),I}))},8987:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(N){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=u(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?g:m;if(t){if(e<0)return g;if(e>=h)return w}else{if(e<=-p)return S;if(e+1>=p)return k}return e<0?s(-e,t).neg():u(e%f|0,e/f|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=u;var c=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var a=s(c(n,8)),i=m,o=0;o<e.length;o+=8){var u=Math.min(8,e.length-o),d=parseInt(e.substring(o,o+u),n);if(u<8){var f=s(c(n,u));i=i.mul(f).add(s(d))}else i=(i=i.mul(a)).add(s(d))}return i.unsigned=t,i}function d(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?l(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=d;var f=4294967296,h=f*f,p=h/2,v=o(1<<24),m=o(0);n.ZERO=m;var g=o(0,!0);n.UZERO=g;var y=o(1);n.ONE=y;var b=o(1,!0);n.UONE=b;var x=o(-1);n.NEG_ONE=x;var k=u(-1,2147483647,!1);n.MAX_VALUE=k;var w=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=w;var S=u(0,-2147483648,!1);n.MIN_VALUE=S;var I=n.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},I.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(c(e,6),this.unsigned),i=this,o="";;){var u=i.div(a),l=(i.sub(u.mul(a)).toInt()>>>0).toString(e);if((i=u).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1===(1&this.low)},I.isEven=function(){return 0===(1&this.low)},I.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(y)},I.neg=I.negate,I.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,c=e.low>>>16,l=0,f=0,h=0,p=0;return h+=(p+=i+(65535&e.low))>>>16,f+=(h+=a+c)>>>16,l+=(f+=n+s)>>>16,l+=t+o,u((h&=65535)<<16|(p&=65535),(l&=65535)<<16|(f&=65535),this.unsigned)},I.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return m;if(r(e)||(e=d(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(S))return e.isOdd()?S:m;if(e.eq(S))return this.isOdd()?S:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,o=65535&this.low,c=e.high>>>16,l=65535&e.high,f=e.low>>>16,h=65535&e.low,p=0,g=0,y=0,b=0;return y+=(b+=o*h)>>>16,g+=(y+=i*h)>>>16,y&=65535,g+=(y+=o*f)>>>16,p+=(g+=a*h)>>>16,g&=65535,p+=(g+=i*f)>>>16,g&=65535,p+=(g+=o*l)>>>16,p+=n*h+a*f+i*l+o*c,u((y&=65535)<<16|(b&=65535),(p&=65535)<<16|(g&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return b;i=g}else{if(this.eq(S))return e.eq(y)||e.eq(x)?S:e.eq(S)?y:(n=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?y:x:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(S))return this.unsigned?g:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=m}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),l=o<=48?1:c(2,o-48),f=s(n),h=f.mul(e);h.isNegative()||h.gt(a);)h=(f=s(n-=l,this.unsigned)).mul(e);f.isZero()&&(f=y),i=i.add(f),a=a.sub(h)}return i},I.div=I.divide,I.modulo=function(e){return r(e)||(e=d(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return u(~this.low,~this.high,this.unsigned)},I.and=function(e){return r(e)||(e=d(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return r(e)||(e=d(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return r(e)||(e=d(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},3329:function(e,t,n){!function(){var t=n(2358),r=n(4383).utf8,a=n(5586),i=n(4383).bin,o=function e(n,o){n.constructor==String?n=o&&"binary"===o.encoding?i.stringToBytes(n):r.stringToBytes(n):a(n)?n=Array.prototype.slice.call(n,0):Array.isArray(n)||n.constructor===Uint8Array||(n=n.toString());for(var s=t.bytesToWords(n),u=8*n.length,c=1732584193,l=-271733879,d=-1732584194,f=271733878,h=0;h<s.length;h++)s[h]=16711935&(s[h]<<8|s[h]>>>24)|4278255360&(s[h]<<24|s[h]>>>8);s[u>>>5]|=128<<u%32,s[14+(u+64>>>9<<4)]=u;var p=e._ff,v=e._gg,m=e._hh,g=e._ii;for(h=0;h<s.length;h+=16){var y=c,b=l,x=d,k=f;c=p(c,l,d,f,s[h+0],7,-680876936),f=p(f,c,l,d,s[h+1],12,-389564586),d=p(d,f,c,l,s[h+2],17,606105819),l=p(l,d,f,c,s[h+3],22,-1044525330),c=p(c,l,d,f,s[h+4],7,-176418897),f=p(f,c,l,d,s[h+5],12,1200080426),d=p(d,f,c,l,s[h+6],17,-1473231341),l=p(l,d,f,c,s[h+7],22,-45705983),c=p(c,l,d,f,s[h+8],7,1770035416),f=p(f,c,l,d,s[h+9],12,-1958414417),d=p(d,f,c,l,s[h+10],17,-42063),l=p(l,d,f,c,s[h+11],22,-1990404162),c=p(c,l,d,f,s[h+12],7,1804603682),f=p(f,c,l,d,s[h+13],12,-40341101),d=p(d,f,c,l,s[h+14],17,-1502002290),c=v(c,l=p(l,d,f,c,s[h+15],22,1236535329),d,f,s[h+1],5,-165796510),f=v(f,c,l,d,s[h+6],9,-1069501632),d=v(d,f,c,l,s[h+11],14,643717713),l=v(l,d,f,c,s[h+0],20,-373897302),c=v(c,l,d,f,s[h+5],5,-701558691),f=v(f,c,l,d,s[h+10],9,38016083),d=v(d,f,c,l,s[h+15],14,-660478335),l=v(l,d,f,c,s[h+4],20,-405537848),c=v(c,l,d,f,s[h+9],5,568446438),f=v(f,c,l,d,s[h+14],9,-1019803690),d=v(d,f,c,l,s[h+3],14,-187363961),l=v(l,d,f,c,s[h+8],20,1163531501),c=v(c,l,d,f,s[h+13],5,-1444681467),f=v(f,c,l,d,s[h+2],9,-51403784),d=v(d,f,c,l,s[h+7],14,1735328473),c=m(c,l=v(l,d,f,c,s[h+12],20,-1926607734),d,f,s[h+5],4,-378558),f=m(f,c,l,d,s[h+8],11,-2022574463),d=m(d,f,c,l,s[h+11],16,1839030562),l=m(l,d,f,c,s[h+14],23,-35309556),c=m(c,l,d,f,s[h+1],4,-1530992060),f=m(f,c,l,d,s[h+4],11,1272893353),d=m(d,f,c,l,s[h+7],16,-155497632),l=m(l,d,f,c,s[h+10],23,-1094730640),c=m(c,l,d,f,s[h+13],4,681279174),f=m(f,c,l,d,s[h+0],11,-358537222),d=m(d,f,c,l,s[h+3],16,-722521979),l=m(l,d,f,c,s[h+6],23,76029189),c=m(c,l,d,f,s[h+9],4,-640364487),f=m(f,c,l,d,s[h+12],11,-421815835),d=m(d,f,c,l,s[h+15],16,530742520),c=g(c,l=m(l,d,f,c,s[h+2],23,-995338651),d,f,s[h+0],6,-198630844),f=g(f,c,l,d,s[h+7],10,1126891415),d=g(d,f,c,l,s[h+14],15,-1416354905),l=g(l,d,f,c,s[h+5],21,-57434055),c=g(c,l,d,f,s[h+12],6,1700485571),f=g(f,c,l,d,s[h+3],10,-1894986606),d=g(d,f,c,l,s[h+10],15,-1051523),l=g(l,d,f,c,s[h+1],21,-2054922799),c=g(c,l,d,f,s[h+8],6,1873313359),f=g(f,c,l,d,s[h+15],10,-30611744),d=g(d,f,c,l,s[h+6],15,-1560198380),l=g(l,d,f,c,s[h+13],21,1309151649),c=g(c,l,d,f,s[h+4],6,-145523070),f=g(f,c,l,d,s[h+11],10,-1120210379),d=g(d,f,c,l,s[h+2],15,718787259),l=g(l,d,f,c,s[h+9],21,-343485551),c=c+y>>>0,l=l+b>>>0,d=d+x>>>0,f=f+k>>>0}return t.endian([c,l,d,f])};o._ff=function(e,t,n,r,a,i,o){var s=e+(t&n|~t&r)+(a>>>0)+o;return(s<<i|s>>>32-i)+t},o._gg=function(e,t,n,r,a,i,o){var s=e+(t&r|n&~r)+(a>>>0)+o;return(s<<i|s>>>32-i)+t},o._hh=function(e,t,n,r,a,i,o){var s=e+(t^n^r)+(a>>>0)+o;return(s<<i|s>>>32-i)+t},o._ii=function(e,t,n,r,a,i,o){var s=e+(n^(t|~r))+(a>>>0)+o;return(s<<i|s>>>32-i)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,n){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var r=t.wordsToBytes(o(e,n));return n&&n.asBytes?r:n&&n.asString?i.bytesToString(r):t.bytesToHex(r)}}()},1725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,i){for(var o,s,u=a(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var d=0;d<s.length;d++)r.call(o,s[d])&&(u[s[d]]=o[s[d]])}}return u}},888:function(e,t,n){"use strict";var r=n(9047);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var r=n(2791),a=n(1725),i=n(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function x(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!h.call(v,e)||!h.call(p,e)&&(f.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,S=60106,I=60107,N=60108,T=60114,C=60109,E=60110,_=60112,A=60113,R=60120,O=60115,D=60116,P=60121,F=60128,M=60129,L=60130,$=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;w=j("react.element"),S=j("react.portal"),I=j("react.fragment"),N=j("react.strict_mode"),T=j("react.profiler"),C=j("react.provider"),E=j("react.context"),_=j("react.forward_ref"),A=j("react.suspense"),R=j("react.suspense_list"),O=j("react.memo"),D=j("react.lazy"),P=j("react.block"),j("react.scope"),F=j("react.opaque.id"),M=j("react.debug_trace_mode"),L=j("react.offscreen"),$=j("react.legacy_hidden")}var z,B="function"===typeof Symbol&&Symbol.iterator;function U(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function V(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var W=!1;function G(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var a=u.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s])return"\n"+a[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function Z(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case S:return"Portal";case T:return"Profiler";case N:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case O:return H(e.type);case P:return H(e._render);case D:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ie(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ce(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de="http://www.w3.org/1999/xhtml",fe="http://www.w3.org/2000/svg";function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?he(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ge=(me=function(e,t){if(e.namespaceURI!==fe||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function ke(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=ke(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(be).forEach((function(e){xe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var Se=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ne(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ee=null,_e=null;function Ae(e){if(e=ra(e)){if("function"!==typeof Ce)throw Error(o(280));var t=e.stateNode;t&&(t=ia(t),Ce(e.stateNode,e.type,t))}}function Re(e){Ee?_e?_e.push(e):_e=[e]:Ee=e}function Oe(){if(Ee){var e=Ee,t=_e;if(_e=Ee=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function De(e,t){return e(t)}function Pe(e,t,n,r,a){return e(t,n,r,a)}function Fe(){}var Me=De,Le=!1,$e=!1;function je(){null===Ee&&null===_e||(Fe(),Oe())}function ze(e,t){var n=e.stateNode;if(null===n)return null;var r=ia(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(d)try{var Ue={};Object.defineProperty(Ue,"passive",{get:function(){Be=!0}}),window.addEventListener("test",Ue,Ue),window.removeEventListener("test",Ue,Ue)}catch(me){Be=!1}function Ve(e,t,n,r,a,i,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var We=!1,Ge=null,Ze=!1,He=null,qe={onError:function(e){We=!0,Ge=e}};function Ke(e,t,n,r,a,i,o,s,u){We=!1,Ge=null,Ve.apply(qe,arguments)}function Xe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ye(e){if(Xe(e)!==e)throw Error(o(188))}function Qe(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Xe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Ye(a),e;if(i===r)return Ye(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,at,it=!1,ot=[],st=null,ut=null,ct=null,lt=new Map,dt=new Map,ft=[],ht="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:a,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function mt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e=pt(t,n,r,a,i),null!==t&&(null!==(t=ra(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function gt(e){var t=na(e.target);if(null!==t){var n=Xe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void at(e.lanePriority,(function(){i.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ra(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){yt(e)&&n.delete(t)}function xt(){for(it=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ra(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&yt(st)&&(st=null),null!==ut&&yt(ut)&&(ut=null),null!==ct&&yt(ct)&&(ct=null),lt.forEach(bt),dt.forEach(bt)}function kt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,xt)))}function wt(e){function t(t){return kt(t,e)}if(0<ot.length){kt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&kt(st,e),null!==ut&&kt(ut,e),null!==ct&&kt(ct,e),lt.forEach(t),dt.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)gt(n),null===n.blockedOn&&ft.shift()}function St(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},Nt={},Tt={};function Ct(e){if(Nt[e])return Nt[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Nt[e]=n[t];return e}d&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Et=Ct("animationend"),_t=Ct("animationiteration"),At=Ct("animationstart"),Rt=Ct("transitionend"),Ot=new Map,Dt=new Map,Pt=["abort","abort",Et,"animationEnd",_t,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function Ft(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Dt.set(r,t),Ot.set(r,a),c(a,[r])}}(0,i.unstable_now)();var Mt=8;function Lt(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function $t(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,a=0,i=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==i)r=i,a=Mt=15;else if(0!==(i=134217727&n)){var u=i&~o;0!==u?(r=Lt(u),a=Mt):0!==(s&=i)&&(r=Lt(s),a=Mt)}else 0!==(i=n&~o)?(r=Lt(i),a=Mt):0!==s&&(r=Lt(s),a=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Wt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Lt(t),a<=Mt)return t;Mt=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-Wt(t)),r|=e[n],t&=~a;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function zt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?zt(10,t):e;case 10:return 0===(e=Bt(192&~t))?zt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Bt(e){return e&-e}function Ut(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Wt(t)]=n}var Wt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Zt|0)|0},Gt=Math.log,Zt=Math.LN2;var Ht=i.unstable_UserBlockingPriority,qt=i.unstable_runWithPriority,Kt=!0;function Xt(e,t,n,r){Le||Fe();var a=Yt,i=Le;Le=!0;try{Pe(a,e,t,n,r)}finally{(Le=i)||je()}}function Jt(e,t,n,r){qt(Ht,Yt.bind(null,e,t,n,r))}function Yt(e,t,n,r){var a;if(Kt)if((a=0===(4&t))&&0<ot.length&&-1<ht.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var i=Qt(e,t,n,r);if(null===i)a&&vt(e,r);else{if(a){if(-1<ht.indexOf(e))return e=pt(i,e,t,n,r),void ot.push(e);if(function(e,t,n,r,a){switch(t){case"focusin":return st=mt(st,e,t,n,r,a),!0;case"dragenter":return ut=mt(ut,e,t,n,r,a),!0;case"mouseover":return ct=mt(ct,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return lt.set(i,mt(lt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,dt.set(i,mt(dt.get(i)||null,e,t,n,r,a)),!0}return!1}(i,e,t,n,r))return;vt(e,r)}Fr(e,t,r,null,n)}}}function Qt(e,t,n,r){var a=Te(r);if(null!==(a=na(a))){var i=Xe(a);if(null===i)a=null;else{var o=i.tag;if(13===o){if(null!==(a=Je(i)))return a;a=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Fr(e,t,r,a,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,a="value"in en?en.value:en.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return nn=a.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?on:sn,this.isPropagationStopped=sn,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,dn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=un(fn),pn=a({},fn,{view:0,detail:0}),vn=un(pn),mn=a({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dn&&(dn&&"mousemove"===e.type?(cn=e.screenX-dn.screenX,ln=e.screenY-dn.screenY):ln=cn=0,dn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=un(mn),yn=un(a({},mn,{dataTransfer:0})),bn=un(a({},pn,{relatedTarget:0})),xn=un(a({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),kn=a({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=un(kn),Sn=un(a({},fn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function En(){return Cn}var _n=a({},pn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=un(_n),Rn=un(a({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=un(a({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Dn=un(a({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=a({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fn=un(Pn),Mn=[9,13,27,32],Ln=d&&"CompositionEvent"in window,$n=null;d&&"documentMode"in document&&($n=document.documentMode);var jn=d&&"TextEvent"in window&&!$n,zn=d&&(!Ln||$n&&8<$n&&11>=$n),Bn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Zn[e.type]:"textarea"===t}function qn(e,t,n,r){Re(r),0<(t=Lr(t,"onChange")).length&&(n=new hn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Xn=null;function Jn(e){_r(e,0)}function Yn(e){if(J(aa(e)))return e}function Qn(e,t){if("change"===e)return t}var er=!1;if(d){var tr;if(d){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ar(){Kn&&(Kn.detachEvent("onpropertychange",ir),Xn=Kn=null)}function ir(e){if("value"===e.propertyName&&Yn(Xn)){var t=[];if(qn(t,Xn,e,Te(e)),e=Jn,Le)e(t);else{Le=!0;try{De(e,t)}finally{Le=!1,je()}}}}function or(e,t,n){"focusin"===e?(ar(),Xn=n,(Kn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&ar()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Xn)}function ur(e,t){if("click"===e)return Yn(t)}function cr(e,t){if("input"===e||"change"===e)return Yn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},dr=Object.prototype.hasOwnProperty;function fr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!dr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function hr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=hr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=d&&"documentMode"in document&&11>=document.documentMode,br=null,xr=null,kr=null,wr=!1;function Sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==br||br!==Y(r)||("selectionStart"in(r=br)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},kr&&fr(kr,r)||(kr=r,0<(r=Lr(xr,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}Ft("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ft("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ft(Pt,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Nr=0;Nr<Ir.length;Nr++)Dt.set(Ir[Nr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Er(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,s,u,c){if(Ke.apply(this,arguments),We){if(!We)throw Error(o(198));var l=Ge;We=!1,Ge=null,Ze||(Ze=!0,He=l)}}(r,t,void 0,e),e.currentTarget=null}function _r(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;Er(a,s,c),i=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;Er(a,s,c),i=u}}}if(Ze)throw e=He,Ze=!1,He=null,e}function Ar(e,t){var n=oa(t),r=e+"__bubble";n.has(r)||(Pr(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Or(e){e[Rr]||(e[Rr]=!0,s.forEach((function(t){Cr.has(t)||Dr(t,!1,e,null),Dr(t,!0,e,null)})))}function Dr(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=n;if("selectionchange"===e&&9!==n.nodeType&&(i=n.ownerDocument),null!==r&&!t&&Cr.has(e)){if("scroll"!==e)return;a|=2,i=r}var o=oa(i),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(a|=4),Pr(i,e,a,t),o.add(s))}function Pr(e,t,n,r){var a=Dt.get(t);switch(void 0===a?2:a){case 0:a=Xt;break;case 1:a=Jt;break;default:a=Yt}n=a.bind(null,t,n,e),a=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Fr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=na(s)))return;if(5===(u=o.tag)||6===u){r=i=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if($e)return e(t,n);$e=!0;try{Me(e,t,n)}finally{$e=!1,je()}}((function(){var r=i,a=Te(n),o=[];e:{var s=Ot.get(e);if(void 0!==s){var u=hn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=An;break;case"focusin":c="focus",u=bn;break;case"focusout":c="blur",u=bn;break;case"beforeblur":case"afterblur":u=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=On;break;case Et:case _t:case At:u=xn;break;case Rt:u=Dn;break;case"scroll":u=vn;break;case"wheel":u=Fn;break;case"copy":case"cut":case"paste":u=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Rn}var l=0!==(4&t),d=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var h,p=r;null!==p;){var v=(h=p).stateNode;if(5===h.tag&&null!==v&&(h=v,null!==f&&(null!=(v=ze(p,f))&&l.push(Mr(p,v,h)))),d)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,a),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!na(c)&&!c[ea])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?na(c):null)&&(c!==(d=Xe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=gn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Rn,v="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==u?s:aa(u),h=null==c?s:aa(c),(s=new l(v,p+"leave",u,n,a)).target=d,s.relatedTarget=h,v=null,na(a)===r&&((l=new l(f,p+"enter",c,n,a)).target=h,l.relatedTarget=d,v=l),d=v,u&&c)e:{for(f=c,p=0,h=l=u;h;h=$r(h))p++;for(h=0,v=f;v;v=$r(v))h++;for(;0<p-h;)l=$r(l),p--;for(;0<h-p;)f=$r(f),h--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=$r(l),f=$r(f)}l=null}else l=null;null!==u&&jr(o,s,u,l,!1),null!==c&&null!==d&&jr(o,d,c,l,!0)}if("select"===(u=(s=r?aa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Qn;else if(Hn(s))if(er)m=cr;else{m=sr;var g=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ur);switch(m&&(m=m(e,r))?qn(o,m,n,a):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ae(s,"number",s.value)),g=r?aa(r):window,e){case"focusin":(Hn(g)||"true"===g.contentEditable)&&(br=g,xr=r,kr=null);break;case"focusout":kr=xr=br=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,Sr(o,n,a);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Sr(o,n,a)}var y;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Gn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(zn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Gn&&(y=rn()):(tn="value"in(en=a)?en.value:en.textContent,Gn=!0)),0<(g=Lr(r,b)).length&&(b=new Sn(b,e,null,n,a),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Wn(n))&&(b.data=y))),(y=jn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(Un=!0,Bn);case"textInput":return(e=t.data)===Bn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Ln&&Vn(e,t)?(e=rn(),nn=tn=en=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Lr(r,"onBeforeInput")).length&&(a=new Sn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}_r(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Lr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=ze(e,n))&&r.unshift(Mr(e,i,a)),null!=(i=ze(e,t))&&r.push(Mr(e,i,a))),e=e.return}return r}function $r(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(u=ze(n,i))&&o.unshift(Mr(n,u,s)):a||null!=(u=ze(n,i))&&o.push(Mr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function zr(){}var Br=null,Ur=null;function Vr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Wr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gr="function"===typeof setTimeout?setTimeout:void 0,Zr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Kr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Xr=0;var Jr=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Jr,Qr="__reactProps$"+Jr,ea="__reactContainer$"+Jr,ta="__reactEvents$"+Jr;function na(e){var t=e[Yr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ea]||n[Yr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Kr(e);null!==e;){if(n=e[Yr])return n;e=Kr(e)}return t}n=(e=n).parentNode}return null}function ra(e){return!(e=e[Yr]||e[ea])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function aa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ia(e){return e[Qr]||null}function oa(e){var t=e[ta];return void 0===t&&(t=e[ta]=new Set),t}var sa=[],ua=-1;function ca(e){return{current:e}}function la(e){0>ua||(e.current=sa[ua],sa[ua]=null,ua--)}function da(e,t){ua++,sa[ua]=e.current,e.current=t}var fa={},ha=ca(fa),pa=ca(!1),va=fa;function ma(e,t){var n=e.type.contextTypes;if(!n)return fa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ga(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ya(){la(pa),la(ha)}function ba(e,t,n){if(ha.current!==fa)throw Error(o(168));da(ha,t),da(pa,n)}function xa(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,H(t)||"Unknown",i));return a({},n,r)}function ka(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fa,va=ha.current,da(ha,e),da(pa,pa.current),!0}function wa(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=xa(e,t,va),r.__reactInternalMemoizedMergedChildContext=e,la(pa),la(ha),da(ha,e)):la(pa),da(pa,n)}var Sa=null,Ia=null,Na=i.unstable_runWithPriority,Ta=i.unstable_scheduleCallback,Ca=i.unstable_cancelCallback,Ea=i.unstable_shouldYield,_a=i.unstable_requestPaint,Aa=i.unstable_now,Ra=i.unstable_getCurrentPriorityLevel,Oa=i.unstable_ImmediatePriority,Da=i.unstable_UserBlockingPriority,Pa=i.unstable_NormalPriority,Fa=i.unstable_LowPriority,Ma=i.unstable_IdlePriority,La={},$a=void 0!==_a?_a:function(){},ja=null,za=null,Ba=!1,Ua=Aa(),Va=1e4>Ua?Aa:function(){return Aa()-Ua};function Wa(){switch(Ra()){case Oa:return 99;case Da:return 98;case Pa:return 97;case Fa:return 96;case Ma:return 95;default:throw Error(o(332))}}function Ga(e){switch(e){case 99:return Oa;case 98:return Da;case 97:return Pa;case 96:return Fa;case 95:return Ma;default:throw Error(o(332))}}function Za(e,t){return e=Ga(e),Na(e,t)}function Ha(e,t,n){return e=Ga(e),Ta(e,t,n)}function qa(){if(null!==za){var e=za;za=null,Ca(e)}Ka()}function Ka(){if(!Ba&&null!==ja){Ba=!0;var e=0;try{var t=ja;Za(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ja=null}catch(n){throw null!==ja&&(ja=ja.slice(e+1)),Ta(Oa,qa),n}finally{Ba=!1}}}var Xa=k.ReactCurrentBatchConfig;function Ja(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ya=ca(null),Qa=null,ei=null,ti=null;function ni(){ti=ei=Qa=null}function ri(e){var t=Ya.current;la(Ya),e.type._context._currentValue=t}function ai(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ii(e,t){Qa=e,ti=ei=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Lo=!0),e.firstContext=null)}function oi(e,t){if(ti!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ti=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ei){if(null===Qa)throw Error(o(308));ei=t,Qa.dependencies={lanes:0,firstContext:t,responders:null}}else ei=ei.next=t;return e._currentValue}var si=!1;function ui(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ci(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function li(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function di(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function fi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function hi(e,t,n,r){var i=e.updateQueue;si=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var d=e.alternate;if(null!==d){var f=(d=d.updateQueue).lastBaseUpdate;f!==s&&(null===f?d.firstBaseUpdate=l:f.next=l,d.lastBaseUpdate=c)}}if(null!==o){for(f=i.baseState,s=0,d=l=c=null;;){u=o.lane;var h=o.eventTime;if((r&u)===u){null!==d&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,h=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(h,f,u);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(h,f,u):p)||void 0===u)break e;f=a({},f,u);break e;case 2:si=!0}}null!==o.callback&&(e.flags|=32,null===(u=i.effects)?i.effects=[o]:u.push(o))}else h={eventTime:h,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(l=d=h,c=f):d=d.next=h,s|=u;if(null===(o=o.next)){if(null===(u=i.shared.pending))break;o=u.next,u.next=null,i.lastBaseUpdate=u,i.shared.pending=null}}null===d&&(c=f),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=d,Bs|=s,e.lanes=s,e.memoizedState=f}}function pi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var vi=(new r.Component).refs;function mi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var gi={isMounted:function(e){return!!(e=e._reactInternals)&&Xe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=fu(),a=hu(e),i=li(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),di(e,i),pu(e,a,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=fu(),a=hu(e),i=li(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),di(e,i),pu(e,a,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fu(),r=hu(e),a=li(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),di(e,a),pu(e,r,n)}};function yi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!fr(n,r)||!fr(a,i))}function bi(e,t,n){var r=!1,a=fa,i=t.contextType;return"object"===typeof i&&null!==i?i=oi(i):(a=ga(t)?va:ha.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?ma(e,a):fa),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=gi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function xi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gi.enqueueReplaceState(t,t.state,null)}function ki(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=vi,ui(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=oi(i):(i=ga(t)?va:ha.current,a.context=ma(e,i)),hi(e,n,a,r),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(mi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&gi.enqueueReplaceState(a,a.state,null),hi(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4)}var wi=Array.isArray;function Si(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===vi&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ii(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ni(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Zu(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Xu(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=Si(e,t,n),r.return=e,r):((r=Hu(n.type,n.key,n.props,null,e.mode,r)).ref=Si(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ju(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=qu(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Xu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Hu(t.type,t.key,t.props,null,e.mode,n)).ref=Si(e,null,t),n.return=e,n;case S:return(t=Ju(t,e.mode,n)).return=e,t}if(wi(t)||U(t))return(t=qu(t,e.mode,n,null)).return=e,t;Ii(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?n.type===I?d(e,t,n.props.children,r,a):c(e,t,n,r):null;case S:return n.key===a?l(e,t,n,r):null}if(wi(n)||U(n))return null!==a?null:d(e,t,n,r,null);Ii(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===I?d(t,e,r.props.children,a,r.key):c(t,e,r,a);case S:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(wi(r)||U(r))return d(t,e=e.get(n)||null,r,a,null);Ii(t,r)}return null}function v(a,o,s,u){for(var c=null,l=null,d=o,v=o=0,m=null;null!==d&&v<s.length;v++){d.index>v?(m=d,d=null):m=d.sibling;var g=h(a,d,s[v],u);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(a,d),o=i(g,o,v),null===l?c=g:l.sibling=g,l=g,d=m}if(v===s.length)return n(a,d),c;if(null===d){for(;v<s.length;v++)null!==(d=f(a,s[v],u))&&(o=i(d,o,v),null===l?c=d:l.sibling=d,l=d);return c}for(d=r(a,d);v<s.length;v++)null!==(m=p(d,a,v,s[v],u))&&(e&&null!==m.alternate&&d.delete(null===m.key?v:m.key),o=i(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&d.forEach((function(e){return t(a,e)})),c}function m(a,s,u,c){var l=U(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var d=l=null,v=s,m=s=0,g=null,y=u.next();null!==v&&!y.done;m++,y=u.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=h(a,v,y.value,c);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(a,v),s=i(b,s,m),null===d?l=b:d.sibling=b,d=b,v=g}if(y.done)return n(a,v),l;if(null===v){for(;!y.done;m++,y=u.next())null!==(y=f(a,y.value,c))&&(s=i(y,s,m),null===d?l=y:d.sibling=y,d=y);return l}for(v=r(a,v);!y.done;m++,y=u.next())null!==(y=p(v,a,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=i(y,s,m),null===d?l=y:d.sibling=y,d=y);return e&&v.forEach((function(e){return t(a,e)})),l}return function(e,r,i,u){var c="object"===typeof i&&null!==i&&i.type===I&&null===i.key;c&&(i=i.props.children);var l="object"===typeof i&&null!==i;if(l)switch(i.$$typeof){case w:e:{for(l=i.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(i.type===I){n(e,c.sibling),(r=a(c,i.props.children)).return=e,e=r;break e}}else if(c.elementType===i.type){n(e,c.sibling),(r=a(c,i.props)).ref=Si(e,c,i),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}i.type===I?((r=qu(i.props.children,e.mode,u,i.key)).return=e,e=r):((u=Hu(i.type,i.key,i.props,null,e.mode,u)).ref=Si(e,r,i),u.return=e,e=u)}return s(e);case S:e:{for(c=i.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=a(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ju(i,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,i)).return=e,e=r):(n(e,r),(r=Xu(i,e.mode,u)).return=e,e=r),s(e);if(wi(i))return v(e,r,i,u);if(U(i))return m(e,r,i,u);if(l&&Ii(e,i),"undefined"===typeof i&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var Ti=Ni(!0),Ci=Ni(!1),Ei={},_i=ca(Ei),Ai=ca(Ei),Ri=ca(Ei);function Oi(e){if(e===Ei)throw Error(o(174));return e}function Di(e,t){switch(da(Ri,t),da(Ai,e),da(_i,Ei),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}la(_i),da(_i,t)}function Pi(){la(_i),la(Ai),la(Ri)}function Fi(e){Oi(Ri.current);var t=Oi(_i.current),n=pe(t,e.type);t!==n&&(da(Ai,e),da(_i,n))}function Mi(e){Ai.current===e&&(la(_i),la(Ai))}var Li=ca(0);function $i(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ji=null,zi=null,Bi=!1;function Ui(e,t){var n=Wu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Vi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wi(e){if(Bi){var t=zi;if(t){var n=t;if(!Vi(e,t)){if(!(t=qr(n.nextSibling))||!Vi(e,t))return e.flags=-1025&e.flags|2,Bi=!1,void(ji=e);Ui(ji,n)}ji=e,zi=qr(t.firstChild)}else e.flags=-1025&e.flags|2,Bi=!1,ji=e}}function Gi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ji=e}function Zi(e){if(e!==ji)return!1;if(!Bi)return Gi(e),Bi=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Wr(t,e.memoizedProps))for(t=zi;t;)Ui(e,t),t=qr(t.nextSibling);if(Gi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){zi=qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}zi=null}}else zi=ji?qr(e.stateNode.nextSibling):null;return!0}function Hi(){zi=ji=null,Bi=!1}var qi=[];function Ki(){for(var e=0;e<qi.length;e++)qi[e]._workInProgressVersionPrimary=null;qi.length=0}var Xi=k.ReactCurrentDispatcher,Ji=k.ReactCurrentBatchConfig,Yi=0,Qi=null,eo=null,to=null,no=!1,ro=!1;function ao(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,a,i){if(Yi=i,Qi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xi.current=null===e||null===e.memoizedState?Do:Po,e=n(r,a),ro){i=0;do{if(ro=!1,!(25>i))throw Error(o(301));i+=1,to=eo=null,t.updateQueue=null,Xi.current=Fo,e=n(r,a)}while(ro)}if(Xi.current=Oo,t=null!==eo&&null!==eo.next,Yi=0,to=eo=Qi=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Qi.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=Qi.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Qi.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Qi.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var u=s=i=null,c=a;do{var l=c.lane;if((Yi&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var d={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=d,i=r):u=u.next=d,Qi.lanes|=l,Bs|=l}c=c.next}while(null!==c&&c!==a);null===u?i=r:u.next=s,lr(r,t.memoizedState)||(Lo=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);lr(i,t.memoizedState)||(Lo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=(Yi&e)===e)&&(t._workInProgressVersionPrimary=r,qi.push(t))),e)return n(t._source);throw qi.push(t),Error(o(350))}function po(e,t,n,r){var a=Ds;if(null===a)throw Error(o(349));var i=t._getVersion,s=i(t._source),u=Xi.current,c=u.useState((function(){return ho(a,t,n)})),l=c[1],d=c[0];c=to;var f=e.memoizedState,h=f.refs,p=h.getSnapshot,v=f.source;f=f.subscribe;var m=Qi;return e.memoizedState={refs:h,source:t,subscribe:r},u.useEffect((function(){h.getSnapshot=n,h.setSnapshot=l;var e=i(t._source);if(!lr(s,e)){e=n(t._source),lr(d,e)||(l(e),e=hu(m),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,o=e;0<o;){var u=31-Wt(o),c=1<<u;r[u]|=e,o&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=h.getSnapshot,n=h.setSnapshot;try{n(e(t._source));var r=hu(m);a.mutableReadLanes|=r&a.pendingLanes}catch(i){n((function(){throw i}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:d}).dispatch=l=Ro.bind(null,Qi,e),c.queue=e,c.baseQueue=null,d=ho(a,t,n),c.memoizedState=c.baseState=d),d}function vo(e,t,n){return po(uo(),e,t,n)}function mo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ro.bind(null,Qi,e),[t.memoizedState,e]}function go(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Qi.updateQueue)?(t={lastEffect:null},Qi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},so().memoizedState=e}function bo(){return uo().memoizedState}function xo(e,t,n,r){var a=so();Qi.flags|=e,a.memoizedState=go(1|t,n,void 0,void 0===r?null:r)}function ko(e,t,n,r){var a=uo();r=void 0===r?null:r;var i=void 0;if(null!==eo){var o=eo.memoizedState;if(i=o.destroy,null!==r&&io(r,o.deps))return void go(t,n,i,r)}Qi.flags|=e,a.memoizedState=go(1|t,n,i,r)}function wo(e,t){return xo(516,4,e,t)}function So(e,t){return ko(516,4,e,t)}function Io(e,t){return ko(4,2,e,t)}function No(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ko(4,2,No.bind(null,t,e),n)}function Co(){}function Eo(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _o(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=Wa();Za(98>n?98:n,(function(){e(!0)})),Za(97<n?97:n,(function(){var n=Ji.transition;Ji.transition=1;try{e(!1),t()}finally{Ji.transition=n}}))}function Ro(e,t,n){var r=fu(),a=hu(e),i={lane:a,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===Qi||null!==o&&o===Qi)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(i.eagerReducer=o,i.eagerState=u,lr(u,s))return}catch(c){}pu(e,a,r)}}var Oo={readContext:oi,useCallback:ao,useContext:ao,useEffect:ao,useImperativeHandle:ao,useLayoutEffect:ao,useMemo:ao,useReducer:ao,useRef:ao,useState:ao,useDebugValue:ao,useDeferredValue:ao,useTransition:ao,useMutableSource:ao,useOpaqueIdentifier:ao,unstable_isNewReconciler:!1},Do={readContext:oi,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oi,useEffect:wo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,xo(4,2,No.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xo(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ro.bind(null,Qi,e),[r.memoizedState,e]},useRef:yo,useState:mo,useDebugValue:Co,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return wo((function(){var t=Ji.transition;Ji.transition=1;try{r(e)}finally{Ji.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return yo(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Bi){var e=!1,t=function(e){return{$$typeof:F,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Xr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&Qi.mode)&&(Qi.flags|=516,go(5,(function(){n("r:"+(Xr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Xr++).toString(36)),t},unstable_isNewReconciler:!1},Po={readContext:oi,useCallback:Eo,useContext:oi,useEffect:So,useImperativeHandle:To,useLayoutEffect:Io,useMemo:_o,useReducer:lo,useRef:bo,useState:function(){return lo(co)},useDebugValue:Co,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return So((function(){var t=Ji.transition;Ji.transition=1;try{r(e)}finally{Ji.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[bo().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Fo={readContext:oi,useCallback:Eo,useContext:oi,useEffect:So,useImperativeHandle:To,useLayoutEffect:Io,useMemo:_o,useReducer:fo,useRef:bo,useState:function(){return fo(co)},useDebugValue:Co,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return So((function(){var t=Ji.transition;Ji.transition=1;try{r(e)}finally{Ji.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[bo().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=k.ReactCurrentOwner,Lo=!1;function $o(e,t,n,r){t.child=null===e?Ci(t,null,n,r):Ti(t,e.child,n,r)}function jo(e,t,n,r,a){n=n.render;var i=t.ref;return ii(t,a),r=oo(e,t,n,r,i,a),null===e||Lo?(t.flags|=1,$o(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,is(e,t,a))}function zo(e,t,n,r,a,i){if(null===e){var o=n.type;return"function"!==typeof o||Gu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,a,i))}return o=e.child,0===(a&i)&&(a=o.memoizedProps,(n=null!==(n=n.compare)?n:fr)(a,r)&&e.ref===t.ref)?is(e,t,i):(t.flags|=1,(e=Zu(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,a,i){if(null!==e&&fr(e.memoizedProps,r)&&e.ref===t.ref){if(Lo=!1,0===(i&a))return t.lanes=e.lanes,is(e,t,i);0!==(16384&e.flags)&&(Lo=!0)}return Wo(e,t,n,r,i)}function Uo(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},wu(t,n);else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},wu(t,e),null;t.memoizedState={baseLanes:0},wu(t,null!==i?i.baseLanes:n)}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,wu(t,r);return $o(e,t,a,n),t.child}function Vo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Wo(e,t,n,r,a){var i=ga(n)?va:ha.current;return i=ma(t,i),ii(t,a),n=oo(e,t,n,r,i,a),null===e||Lo?(t.flags|=1,$o(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,is(e,t,a))}function Go(e,t,n,r,a){if(ga(n)){var i=!0;ka(t)}else i=!1;if(ii(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),bi(t,n,r),ki(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oi(c):c=ma(t,c=ga(n)?va:ha.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&xi(t,o,r,c),si=!1;var f=t.memoizedState;o.state=f,hi(t,r,o,a),u=t.memoizedState,s!==r||f!==u||pa.current||si?("function"===typeof l&&(mi(t,n,l,r),u=t.memoizedState),(s=si||yi(t,n,s,r,f,u,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ci(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Ja(t.type,s),o.props=c,d=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oi(u):u=ma(t,u=ga(n)?va:ha.current);var h=n.getDerivedStateFromProps;(l="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||f!==u)&&xi(t,o,r,u),si=!1,f=t.memoizedState,o.state=f,hi(t,r,o,a);var p=t.memoizedState;s!==d||f!==p||pa.current||si?("function"===typeof h&&(mi(t,n,h,r),p=t.memoizedState),(c=si||yi(t,n,c,r,f,p,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Zo(e,t,n,r,i,a)}function Zo(e,t,n,r,a,i){Vo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return a&&wa(t,n,!1),is(e,t,i);r=t.stateNode,Mo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ti(t,e.child,null,i),t.child=Ti(t,null,s,i)):$o(e,t,s,i),t.memoizedState=r.state,a&&wa(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?ba(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ba(0,t.context,!1),Di(e,t.containerInfo)}var qo,Ko,Xo,Jo={dehydrated:null,retryLane:0};function Yo(e,t,n){var r,a=t.pendingProps,i=Li.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(i|=1),da(Li,1&i),null===e?(void 0!==a.fallback&&Wi(t),e=a.children,i=a.fallback,o?(e=Qo(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"===typeof a.unstable_expectedLoadTime?(e=Qo(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=Ku({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(a=ts(e,t,a.children,a.fallback,n),o=t.child,i=e.child.memoizedState,o.memoizedState=null===i?{baseLanes:n}:{baseLanes:i.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,a):(n=es(e,t,a.children,n),t.memoizedState=null,n))}function Qo(e,t,n,r){var a=e.mode,i=e.child;return t={mode:"hidden",children:t},0===(2&a)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=Ku(t,a,0,null),n=qu(n,a,r,null),i.return=e,n.return=e,i.sibling=n,e.child=i,n}function es(e,t,n,r){var a=e.child;return e=a.sibling,n=Zu(a,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,a){var i=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&i)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Zu(o,s),null!==e?r=Zu(e,r):(r=qu(r,i,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ai(e.return,t)}function rs(e,t,n,r,a,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,lastEffect:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a,o.lastEffect=i)}function as(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if($o(e,t,r.children,n),0!==(2&(r=Li.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(da(Li,r),0===(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===$i(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),rs(t,!1,a,n,i,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===$i(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}rs(t,!0,n,null,i,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function is(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Zu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Zu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!Bi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return ga(t.type)&&ya(),null;case 3:return Pi(),la(pa),la(ha),Ki(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Zi(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Mi(t);var i=Oi(Ri.current);if(n=t.type,null!==e&&null!=t.stateNode)Ko(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Oi(_i.current),Zi(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Yr]=t,r[Qr]=s,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Ar(Tr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,s),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ar("invalid",r);break;case"textarea":ue(r,s),Ar("invalid",r)}for(var c in Ie(n,s),e=null,s)s.hasOwnProperty(c)&&(i=s[c],"children"===c?"string"===typeof i?r.textContent!==i&&(e=["children",i]):"number"===typeof i&&r.textContent!==""+i&&(e=["children",""+i]):u.hasOwnProperty(c)&&null!=i&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":X(r),re(r,s,!0);break;case"textarea":X(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=zr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===i.nodeType?i:i.ownerDocument,e===de&&(e=he(n)),e===de?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Yr]=t,e[Qr]=r,qo(e,t),t.stateNode=e,c=Ne(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),i=r;break;case"iframe":case"object":case"embed":Ar("load",e),i=r;break;case"video":case"audio":for(i=0;i<Tr.length;i++)Ar(Tr[i],e);i=r;break;case"source":Ar("error",e),i=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),i=r;break;case"details":Ar("toggle",e),i=r;break;case"input":ee(e,r),i=Q(e,r),Ar("invalid",e);break;case"option":i=ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=a({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":ue(e,r),i=se(e,r),Ar("invalid",e);break;default:i=r}Ie(n,i);var l=i;for(s in l)if(l.hasOwnProperty(s)){var d=l[s];"style"===s?we(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&ge(e,d):"children"===s?"string"===typeof d?("textarea"!==n||""!==d)&&ye(e,d):"number"===typeof d&&ye(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Ar("scroll",e):null!=d&&x(e,s,d,c))}switch(n){case"input":X(e),re(e,r,!1);break;case"textarea":X(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=zr)}Vr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Oi(Ri.current),Oi(_i.current),Zi(t)?(r=t.stateNode,n=t.memoizedProps,r[Yr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Yr]=t,t.stateNode=r)}return null;case 13:return la(Li),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Zi(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Li.current)?0===$s&&($s=3):(0!==$s&&3!==$s||($s=4),null===Ds||0===(134217727&Bs)&&0===(134217727&Us)||yu(Ds,Fs))),(r||n)&&(t.flags|=4),null);case 4:return Pi(),null===e&&Or(t.stateNode.containerInfo),null;case 10:return ri(t),null;case 19:if(la(Li),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)os(r,!1);else{if(0!==$s||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=$i(e))){for(t.flags|=64,os(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return da(Li,1&Li.current|2),t.child}e=e.sibling}null!==r.tail&&Va()>Zs&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=$i(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Bi)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Va()-r.renderingStartTime>Zs&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Va(),n.sibling=null,t=Li.current,da(Li,s?1&t|2:1&t),n):null;case 23:case 24:return Su(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:ga(e.type)&&ya();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Pi(),la(pa),la(ha),Ki(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Mi(e),null;case 13:return la(Li),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return la(Li),null;case 4:return Pi(),null;case 10:return ri(e),null;case 23:case 24:return Su(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=Z(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ko=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Oi(_i.current);var o,s=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),s=[];break;case"option":i=ie(e,i),r=ie(e,r),s=[];break;case"select":i=a({},i,{value:void 0}),r=a({},r,{value:void 0}),s=[];break;case"textarea":i=se(e,i),r=se(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=zr)}for(d in Ie(n,r),n=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var c=i[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(u.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var l=r[d];if(c=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&l!==c&&(null!=l||null!=c))if("style"===d)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(d,n)),n=l;else"dangerouslySetInnerHTML"===d?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(d,l)):"children"===d?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(d,""+l):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(u.hasOwnProperty(d)?(null!=l&&"onScroll"===d&&Ar("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===F?l.toString():(s=s||[]).push(d,l))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Xo=function(e,t,n,r){n!==r&&(t.flags|=4)};var ds="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=li(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xs||(Xs=!0,Js=r),ls(0,t)},n}function hs(e,t,n){(n=li(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return ls(0,t),r(a)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ys?Ys=new Set([this]):Ys.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){zu(e,n)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ja(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo))}throw Error(o(163))}function gs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;r=a.next,0!==(4&(a=a.tag))&&0!==(1&a)&&(Lu(n,e),Mu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ja(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pi(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pi(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Vr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))))}throw Error(o(163))}function ys(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var a=n.memoizedProps.style;a=void 0!==a&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=ke("display",a)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function bs(e,t){if(Ia&&"function"===typeof Ia.onCommitFiberUnmount)try{Ia.onCommitFiberUnmount(Sa,t)}catch(i){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,a=r.destroy;if(r=r.tag,void 0!==a)if(0!==(4&r))Lu(t,n);else{r=t;try{a()}catch(i){zu(r,i)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){zu(t,i)}break;case 5:vs(t);break;case 4:Ns(e,t)}}function xs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ks(e){return 5===e.tag||3===e.tag||4===e.tag}function ws(e){e:{for(var t=e.return;null!==t;){if(ks(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ks(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Ss(e,n,t):Is(e,n,t)}function Ss(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=zr));else if(4!==r&&null!==(e=e.child))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function Is(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Is(e,t,n),e=e.sibling;null!==e;)Is(e,t,n),e=e.sibling}function Ns(e,t){for(var n,r,a=t,i=!1;;){if(!i){i=a.return;e:for(;;){if(null===i)throw Error(o(160));switch(n=i.stateNode,i.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===a.tag||6===a.tag){e:for(var s=e,u=a,c=u;;)if(bs(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=a.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(bs(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(i=!1)}a.sibling.return=a.return,a=a.sibling}}function Ts(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var a=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[Qr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ne(e,a),t=Ne(e,r),a=0;a<i.length;a+=2){var s=i[a],u=i[a+1];"style"===s?we(n,u):"dangerouslySetInnerHTML"===s?ge(n,u):"children"===s?ye(n,u):x(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?oe(n,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Gs=Va(),ys(t.child,!0)),void Cs(t);case 19:return void Cs(t);case 23:case 24:return void ys(t,null!==t.memoizedState)}throw Error(o(163))}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=Uu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Es(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var _s=Math.ceil,As=k.ReactCurrentDispatcher,Rs=k.ReactCurrentOwner,Os=0,Ds=null,Ps=null,Fs=0,Ms=0,Ls=ca(0),$s=0,js=null,zs=0,Bs=0,Us=0,Vs=0,Ws=null,Gs=0,Zs=1/0;function Hs(){Zs=Va()+500}var qs,Ks=null,Xs=!1,Js=null,Ys=null,Qs=!1,eu=null,tu=90,nu=[],ru=[],au=null,iu=0,ou=null,su=-1,uu=0,cu=0,lu=null,du=!1;function fu(){return 0!==(48&Os)?Va():-1!==su?su:su=Va()}function hu(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Wa()?1:2;if(0===uu&&(uu=zs),0!==Xa.transition){0!==cu&&(cu=null!==Ws?Ws.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Wa(),0!==(4&Os)&&98===e?e=zt(12,uu):e=zt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<iu)throw iu=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;Vt(e,t,n),e===Ds&&(Us|=t,4===$s&&yu(e,Fs));var r=Wa();1===t?0!==(8&Os)&&0===(48&Os)?bu(e):(mu(e,n),0===Os&&(Hs(),qa())):(0===(4&Os)||98!==r&&99!==r||(null===au?au=new Set([e]):au.add(e)),mu(e,n)),Ws=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function mu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Wt(s),c=1<<u,l=i[u];if(-1===l){if(0===(c&r)||0!==(c&a)){l=t,Lt(c);var d=Mt;i[u]=10<=d?l+250:6<=d?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=$t(e,e===Ds?Fs:0),t=Mt,0===r)null!==n&&(n!==La&&Ca(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==La&&Ca(n)}15===t?(n=bu.bind(null,e),null===ja?(ja=[n],za=Ta(Oa,Ka)):ja.push(n),n=La):14===t?n=Ha(99,bu.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Ha(n,gu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function gu(e){if(su=-1,cu=uu=0,0!==(48&Os))throw Error(o(327));var t=e.callbackNode;if(Fu()&&e.callbackNode!==t)return null;var n=$t(e,e===Ds?Fs:0);if(0===n)return null;var r=n,a=Os;Os|=16;var i=Tu();for(Ds===e&&Fs===r||(Hs(),Iu(e,r));;)try{_u();break}catch(u){Nu(e,u)}if(ni(),As.current=i,Os=a,null!==Ps?r=0:(Ds=null,Fs=0,r=$s),0!==(zs&Us))Iu(e,0);else if(0!==r){if(2===r&&(Os|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=jt(e))&&(r=Cu(e,n))),1===r)throw t=js,Iu(e,0),yu(e,n),mu(e,Va()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ou(e);break;case 3:if(yu(e,n),(62914560&n)===n&&10<(r=Gs+500-Va())){if(0!==$t(e,0))break;if(((a=e.suspendedLanes)&n)!==n){fu(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Gr(Ou.bind(null,e),r);break}Ou(e);break;case 4:if(yu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,a=-1;0<n;){var s=31-Wt(n);i=1<<s,(s=r[s])>a&&(a=s),n&=~i}if(n=a,10<(n=(120>(n=Va()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*_s(n/1960))-n)){e.timeoutHandle=Gr(Ou.bind(null,e),n);break}Ou(e);break;default:throw Error(o(329))}}return mu(e,Va()),e.callbackNode===t?gu.bind(null,e):null}function yu(e,t){for(t&=~Vs,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function bu(e){if(0!==(48&Os))throw Error(o(327));if(Fu(),e===Ds&&0!==(e.expiredLanes&Fs)){var t=Fs,n=Cu(e,t);0!==(zs&Us)&&(n=Cu(e,t=$t(e,t)))}else n=Cu(e,t=$t(e,0));if(0!==e.tag&&2===n&&(Os|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=jt(e))&&(n=Cu(e,t))),1===n)throw n=js,Iu(e,0),yu(e,t),mu(e,Va()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ou(e),mu(e,Va()),null}function xu(e,t){var n=Os;Os|=1;try{return e(t)}finally{0===(Os=n)&&(Hs(),qa())}}function ku(e,t){var n=Os;Os&=-2,Os|=8;try{return e(t)}finally{0===(Os=n)&&(Hs(),qa())}}function wu(e,t){da(Ls,Ms),Ms|=t,zs|=t}function Su(){Ms=Ls.current,la(Ls)}function Iu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Zr(n)),null!==Ps)for(n=Ps.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ya();break;case 3:Pi(),la(pa),la(ha),Ki();break;case 5:Mi(r);break;case 4:Pi();break;case 13:case 19:la(Li);break;case 10:ri(r);break;case 23:case 24:Su()}n=n.return}Ds=e,Ps=Zu(e.current,null),Fs=Ms=zs=t,$s=0,js=null,Vs=Us=Bs=0}function Nu(e,t){for(;;){var n=Ps;try{if(ni(),Xi.current=Oo,no){for(var r=Qi.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}no=!1}if(Yi=0,to=eo=Qi=null,ro=!1,Rs.current=null,null===n||null===n.return){$s=1,js=t,Ps=null;break}e:{var i=e,o=n.return,s=n,u=t;if(t=Fs,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var d=0!==(1&Li.current),f=o;do{var h;if(h=13===f.tag){var p=f.memoizedState;if(null!==p)h=null!==p.dehydrated;else{var v=f.memoizedProps;h=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!d)}}if(h){var m=f.updateQueue;if(null===m){var g=new Set;g.add(c),f.updateQueue=g}else m.add(c);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=li(-1,1);y.tag=2,di(s,y)}s.lanes|=1;break e}u=void 0,s=t;var b=i.pingCache;if(null===b?(b=i.pingCache=new ds,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(s)){u.add(s);var x=Bu.bind(null,i,c,s);c.then(x,x)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((H(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==$s&&($s=2),u=cs(u,s),f=o;do{switch(f.tag){case 3:i=u,f.flags|=4096,t&=-t,f.lanes|=t,fi(f,fs(0,i,t));break e;case 1:i=u;var k=f.type,w=f.stateNode;if(0===(64&f.flags)&&("function"===typeof k.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Ys||!Ys.has(w)))){f.flags|=4096,t&=-t,f.lanes|=t,fi(f,hs(f,i,t));break e}}f=f.return}while(null!==f)}Ru(n)}catch(S){t=S,Ps===n&&null!==n&&(Ps=n=n.return);continue}break}}function Tu(){var e=As.current;return As.current=Oo,null===e?Oo:e}function Cu(e,t){var n=Os;Os|=16;var r=Tu();for(Ds===e&&Fs===t||Iu(e,t);;)try{Eu();break}catch(a){Nu(e,a)}if(ni(),Os=n,As.current=r,null!==Ps)throw Error(o(261));return Ds=null,Fs=0,$s}function Eu(){for(;null!==Ps;)Au(Ps)}function _u(){for(;null!==Ps&&!Ea();)Au(Ps)}function Au(e){var t=qs(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,null===t?Ru(e):Ps=t,Rs.current=null}function Ru(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ms)))return void(Ps=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ms)||0===(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Ps=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ps=t);Ps=t=e}while(null!==t);0===$s&&($s=5)}function Ou(e){var t=Wa();return Za(99,Du.bind(null,e,t)),null}function Du(e,t){do{Fu()}while(null!==eu);if(0!==(48&Os))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,a=r,i=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<i;){var c=31-Wt(i),l=1<<c;a[c]=0,s[c]=-1,u[c]=-1,i&=~l}if(null!==au&&0===(24&r)&&au.has(e)&&au.delete(e),e===Ds&&(Ps=Ds=null,Fs=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(a=Os,Os|=32,Rs.current=null,Br=Kt,gr(s=mr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,i=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(T){u=null;break e}var d=0,f=-1,h=-1,p=0,v=0,m=s,g=null;t:for(;;){for(var y;m!==u||0!==i&&3!==m.nodeType||(f=d+i),m!==c||0!==l&&3!==m.nodeType||(h=d+l),3===m.nodeType&&(d+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===s)break t;if(g===u&&++p===i&&(f=d),g===c&&++v===l&&(h=d),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}u=-1===f||-1===h?null:{start:f,end:h}}else u=null;u=u||{start:0,end:0}}else u=null;Ur={focusedElem:s,selectionRange:u},Kt=!1,lu=null,du=!1,Ks=r;do{try{Pu()}catch(T){if(null===Ks)throw Error(o(330));zu(Ks,T),Ks=Ks.nextEffect}}while(null!==Ks);lu=null,Ks=r;do{try{for(s=e;null!==Ks;){var b=Ks.flags;if(16&b&&ye(Ks.stateNode,""),128&b){var x=Ks.alternate;if(null!==x){var k=x.ref;null!==k&&("function"===typeof k?k(null):k.current=null)}}switch(1038&b){case 2:ws(Ks),Ks.flags&=-3;break;case 6:ws(Ks),Ks.flags&=-3,Ts(Ks.alternate,Ks);break;case 1024:Ks.flags&=-1025;break;case 1028:Ks.flags&=-1025,Ts(Ks.alternate,Ks);break;case 4:Ts(Ks.alternate,Ks);break;case 8:Ns(s,u=Ks);var w=u.alternate;xs(u),null!==w&&xs(w)}Ks=Ks.nextEffect}}catch(T){if(null===Ks)throw Error(o(330));zu(Ks,T),Ks=Ks.nextEffect}}while(null!==Ks);if(k=Ur,x=mr(),b=k.focusedElem,s=k.selectionRange,x!==b&&b&&b.ownerDocument&&vr(b.ownerDocument.documentElement,b)){null!==s&&gr(b)&&(x=s.start,void 0===(k=s.end)&&(k=x),"selectionStart"in b?(b.selectionStart=x,b.selectionEnd=Math.min(k,b.value.length)):(k=(x=b.ownerDocument||document)&&x.defaultView||window).getSelection&&(k=k.getSelection(),u=b.textContent.length,w=Math.min(s.start,u),s=void 0===s.end?w:Math.min(s.end,u),!k.extend&&w>s&&(u=s,s=w,w=u),u=pr(b,w),i=pr(b,s),u&&i&&(1!==k.rangeCount||k.anchorNode!==u.node||k.anchorOffset!==u.offset||k.focusNode!==i.node||k.focusOffset!==i.offset)&&((x=x.createRange()).setStart(u.node,u.offset),k.removeAllRanges(),w>s?(k.addRange(x),k.extend(i.node,i.offset)):(x.setEnd(i.node,i.offset),k.addRange(x))))),x=[];for(k=b;k=k.parentNode;)1===k.nodeType&&x.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<x.length;b++)(k=x[b]).element.scrollLeft=k.left,k.element.scrollTop=k.top}Kt=!!Br,Ur=Br=null,e.current=n,Ks=r;do{try{for(b=e;null!==Ks;){var S=Ks.flags;if(36&S&&gs(b,Ks.alternate,Ks),128&S){x=void 0;var I=Ks.ref;if(null!==I){var N=Ks.stateNode;Ks.tag,x=N,"function"===typeof I?I(x):I.current=x}}Ks=Ks.nextEffect}}catch(T){if(null===Ks)throw Error(o(330));zu(Ks,T),Ks=Ks.nextEffect}}while(null!==Ks);Ks=null,$a(),Os=a}else e.current=n;if(Qs)Qs=!1,eu=e,tu=t;else for(Ks=r;null!==Ks;)t=Ks.nextEffect,Ks.nextEffect=null,8&Ks.flags&&((S=Ks).sibling=null,S.stateNode=null),Ks=t;if(0===(r=e.pendingLanes)&&(Ys=null),1===r?e===ou?iu++:(iu=0,ou=e):iu=0,n=n.stateNode,Ia&&"function"===typeof Ia.onCommitFiberRoot)try{Ia.onCommitFiberRoot(Sa,n,void 0,64===(64&n.current.flags))}catch(T){}if(mu(e,Va()),Xs)throw Xs=!1,e=Js,Js=null,e;return 0!==(8&Os)||qa(),null}function Pu(){for(;null!==Ks;){var e=Ks.alternate;du||null===lu||(0!==(8&Ks.flags)?et(Ks,lu)&&(du=!0):13===Ks.tag&&Es(e,Ks)&&et(Ks,lu)&&(du=!0));var t=Ks.flags;0!==(256&t)&&ms(e,Ks),0===(512&t)||Qs||(Qs=!0,Ha(97,(function(){return Fu(),null}))),Ks=Ks.nextEffect}}function Fu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Za(e,$u)}return!1}function Mu(e,t){nu.push(t,e),Qs||(Qs=!0,Ha(97,(function(){return Fu(),null})))}function Lu(e,t){ru.push(t,e),Qs||(Qs=!0,Ha(97,(function(){return Fu(),null})))}function $u(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Os))throw Error(o(331));var t=Os;Os|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var a=n[r],i=n[r+1],s=a.destroy;if(a.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===i)throw Error(o(330));zu(i,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){a=n[r],i=n[r+1];try{var u=a.create;a.destroy=u()}catch(c){if(null===i)throw Error(o(330));zu(i,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Os=t,qa(),!0}function ju(e,t,n){di(e,t=fs(0,t=cs(n,t),1)),t=fu(),null!==(e=vu(e,1))&&(Vt(e,1,t),mu(e,t))}function zu(e,t){if(3===e.tag)ju(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){ju(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ys||!Ys.has(r))){var a=hs(n,e=cs(t,e),1);if(di(n,a),a=fu(),null!==(n=vu(n,1)))Vt(n,1,a),mu(n,a);else if("function"===typeof r.componentDidCatch&&(null===Ys||!Ys.has(r)))try{r.componentDidCatch(t,e)}catch(i){}break}}n=n.return}}function Bu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=fu(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Fs&n)===n&&(4===$s||3===$s&&(62914560&Fs)===Fs&&500>Va()-Gs?Iu(e,0):Vs|=n),mu(e,t)}function Uu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Wa()?1:2:(0===uu&&(uu=zs),0===(t=Bt(62914560&~uu))&&(t=4194304))),n=fu(),null!==(e=vu(e,t))&&(Vt(e,t,n),mu(e,n))}function Vu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Wu(e,t,n,r){return new Vu(e,t,n,r)}function Gu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Zu(e,t){var n=e.alternate;return null===n?((n=Wu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hu(e,t,n,r,a,i){var s=2;if(r=e,"function"===typeof e)Gu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case I:return qu(n.children,a,i,t);case M:s=8,a|=16;break;case N:s=8,a|=1;break;case T:return(e=Wu(12,n,t,8|a)).elementType=T,e.type=T,e.lanes=i,e;case A:return(e=Wu(13,n,t,a)).type=A,e.elementType=A,e.lanes=i,e;case R:return(e=Wu(19,n,t,a)).elementType=R,e.lanes=i,e;case L:return Ku(n,a,i,t);case $:return(e=Wu(24,n,t,a)).elementType=$,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case E:s=9;break e;case _:s=11;break e;case O:s=14;break e;case D:s=16,r=null;break e;case P:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Wu(s,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function qu(e,t,n,r){return(e=Wu(7,e,r,t)).lanes=n,e}function Ku(e,t,n,r){return(e=Wu(23,e,r,t)).elementType=L,e.lanes=n,e}function Xu(e,t,n){return(e=Wu(6,e,null,t)).lanes=n,e}function Ju(e,t,n){return(t=Wu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ut(0),this.expirationTimes=Ut(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ut(0),this.mutableSourceEagerHydrationData=null}function Qu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var a=t.current,i=fu(),s=hu(a);e:if(n){t:{if(Xe(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(ga(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var c=n.type;if(ga(c)){n=xa(n,c,u);break e}}n=u}else n=fa;return null===t.context?t.context=n:t.pendingContext=n,(t=li(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),di(a,t),pu(a,s,i),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ac(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Yu(e,t,null!=n&&!0===n.hydrate),t=Wu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ui(t),e[ea]=n.current,Or(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(t=r[e])._getVersion;a=a(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=n}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i._internalRoot;if("function"===typeof a){var s=a;a=function(){var e=tc(o);s.call(e)}}ec(t,o,e,a)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ac(e,0,t?{hydrate:!0}:void 0)}(n,r),o=i._internalRoot,"function"===typeof a){var u=a;a=function(){var e=tc(o);u.call(e)}}ku((function(){ec(t,o,e,a)}))}return tc(o)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(o(200));return Qu(e,t,null,n)}qs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pa.current)Lo=!0;else{if(0===(n&r)){switch(Lo=!1,t.tag){case 3:Ho(t),Hi();break;case 5:Fi(t);break;case 1:ga(t.type)&&ka(t);break;case 4:Di(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var a=t.type._context;da(Ya,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Yo(e,t,n):(da(Li,1&Li.current),null!==(t=is(e,t,n))?t.sibling:null);da(Li,1&Li.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return as(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),da(Li,Li.current),r)break;return null;case 23:case 24:return t.lanes=0,Uo(e,t,n)}return is(e,t,n)}Lo=0!==(16384&e.flags)}else Lo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=ma(t,ha.current),ii(t,n),a=oo(null,t,r,e,a,n),t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ga(r)){var i=!0;ka(t)}else i=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ui(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&mi(t,r,s,e),a.updater=gi,t.stateNode=a,a._reactInternals=t,ki(t,r,e,n),t=Zo(null,t,r,!0,i,n)}else t.tag=0,$o(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(i=a._init)(a._payload),t.type=a,i=t.tag=function(e){if("function"===typeof e)return Gu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===O)return 14}return 2}(a),e=Ja(a,e),i){case 0:t=Wo(null,t,a,e,n);break e;case 1:t=Go(null,t,a,e,n);break e;case 11:t=jo(null,t,a,e,n);break e;case 14:t=zo(null,t,a,Ja(a.type,e),r,n);break e}throw Error(o(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,Wo(e,t,r,a=t.elementType===r?a:Ja(r,a),n);case 1:return r=t.type,a=t.pendingProps,Go(e,t,r,a=t.elementType===r?a:Ja(r,a),n);case 3:if(Ho(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,ci(e,t),hi(t,r,null,n),(r=t.memoizedState.element)===a)Hi(),t=is(e,t,n);else{if((i=(a=t.stateNode).hydrate)&&(zi=qr(t.stateNode.containerInfo.firstChild),ji=t,i=Bi=!0),i){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(i=e[a])._workInProgressVersionPrimary=e[a+1],qi.push(i);for(n=Ci(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else $o(e,t,r,n),Hi();t=t.child}return t;case 5:return Fi(t),null===e&&Wi(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,Wr(r,a)?s=null:null!==i&&Wr(r,i)&&(t.flags|=16),Vo(e,t),$o(e,t,s,n),t.child;case 6:return null===e&&Wi(t),null;case 13:return Yo(e,t,n);case 4:return Di(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ti(t,null,r,n):$o(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,jo(e,t,r,a=t.elementType===r?a:Ja(r,a),n);case 7:return $o(e,t,t.pendingProps,n),t.child;case 8:case 12:return $o(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,s=t.memoizedProps,i=a.value;var u=t.type._context;if(da(Ya,u._currentValue),u._currentValue=i,null!==s)if(u=s.value,0===(i=lr(u,i)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,i):1073741823))){if(s.children===a.children&&!pa.current){t=is(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&i)){1===u.tag&&((l=li(-1,n&-n)).tag=2,di(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ai(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}$o(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(i=t.pendingProps).children,ii(t,n),r=r(a=oi(a,i.unstable_observedBits)),t.flags|=1,$o(e,t,r,n),t.child;case 14:return i=Ja(a=t.type,t.pendingProps),zo(e,t,a,i=Ja(a.type,i),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ja(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ga(r)?(e=!0,ka(t)):e=!1,ii(t,n),bi(t,r,a),ki(t,r,a,n),Zo(null,t,r,!0,e,n);case 19:return as(e,t,n);case 23:case 24:return Uo(e,t,n)}throw Error(o(156,t.tag))},ac.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ac.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ea]=null}))},tt=function(e){13===e.tag&&(pu(e,4,fu()),rc(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,fu()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=fu(),n=hu(e);pu(e,n,t),rc(e,n)}},at=function(e,t){return t()},Ce=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ia(r);if(!a)throw Error(o(90));J(r),ne(r,a)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},De=xu,Pe=function(e,t,n,r,a){var i=Os;Os|=4;try{return Za(98,e.bind(null,t,n,r,a))}finally{0===(Os=i)&&(Hs(),qa())}},Fe=function(){0===(49&Os)&&(function(){if(null!==au){var e=au;au=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,mu(e,Va())}))}qa()}(),Fu())},Me=function(e,t){var n=Os;Os|=2;try{return e(t)}finally{0===(Os=n)&&(Hs(),qa())}};var uc={Events:[ra,aa,ia,Re,Oe,Fu,{current:!1}]},cc={findFiberByHostInstance:na,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dc.isDisabled&&dc.supportsFiber)try{Sa=dc.inject(lc),Ia=dc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Os;if(0!==(48&n))return e(t);Os|=1;try{if(e)return Za(99,e.bind(null,t))}finally{Os=n,qa()}},t.hydrate=function(e,t,n){if(!ic(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ic(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ic(e))throw Error(o(40));return!!e._reactRootContainer&&(ku((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ea]=null}))})),!0)},t.unstable_batchedUpdates=xu,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ic(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function k(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case d:case i:case s:case o:case h:return e;default:switch(e=e&&e.$$typeof){case c:case f:case m:case v:case u:return e;default:return t}}case a:return t}}}function w(e){return k(e)===d}t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=i,t.Lazy=m,t.Memo=v,t.Portal=a,t.Profiler=s,t.StrictMode=o,t.Suspense=h,t.isAsyncMode=function(e){return w(e)||k(e)===l},t.isConcurrentMode=w,t.isContextConsumer=function(e){return k(e)===c},t.isContextProvider=function(e){return k(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return k(e)===f},t.isFragment=function(e){return k(e)===i},t.isLazy=function(e){return k(e)===m},t.isMemo=function(e){return k(e)===v},t.isPortal=function(e){return k(e)===a},t.isProfiler=function(e){return k(e)===s},t.isStrictMode=function(e){return k(e)===o},t.isSuspense=function(e){return k(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===d||e===s||e===o||e===h||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===y||e.$$typeof===b||e.$$typeof===x||e.$$typeof===g)},t.typeOf=k},7441:function(e,t,n){"use strict";e.exports=n(1372)},6374:function(e,t,n){"use strict";n(1725);var r=n(2791),a=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var i=Symbol.for;a=i("react.element"),t.Fragment=i("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:l,props:i,_owner:o.current}}t.jsx=c,t.jsxs=c},9117:function(e,t,n){"use strict";var r=n(1725),a=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;a=d("react.element"),i=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),o=d("react.provider"),s=d("react.context"),u=d("react.forward_ref"),t.Suspense=d("react.suspense"),c=d("react.memo"),l=d("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function h(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(h(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=y.prototype=new g;b.constructor=y,r(b,m.prototype),b.isPureReactComponent=!0;var x={current:null},k=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,r)&&!w.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:a,type:e,key:o,ref:s,props:i,_owner:x.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var N=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case i:u=!0}}if(u)return o=o(u=e),e=""===r?"."+T(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(N,"$&/")+"/"),C(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(N,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(s=e[c],c);u+=C(s,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=C(s=s.value,t,n,l=r+T(s,c++),o);else if("object"===s)throw t=""+e,Error(h(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function E(e,t,n){if(null==e)return e;var r=[],a=0;return C(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function _(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function R(){var e=A.current;if(null===e)throw Error(h(321));return e}var O={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:E,forEach:function(e,t,n){E(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return E(e,(function(){t++})),t},toArray:function(e){return E(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(h(143));return e}},t.Component=m,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(h(267,e));var i=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=x.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)k.call(t,l)&&!w.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}return{$$typeof:a,type:e.type,key:o,ref:s,props:i,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:_}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";var n,r,a,i;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,d=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(d,0))},r=function(e,t){l=setTimeout(e,t)},a=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,h=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,g=-1,y=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},i=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,k=x.port2;x.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();b=e+y;try{m(!0,e)?k.postMessage(null):(v=!1,m=null)}catch(n){throw k.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,k.postMessage(null))},r=function(e,n){g=f((function(){e(t.unstable_now())}),n)},a=function(){h(g),g=-1}}function w(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<N(a,t)))break e;e[r]=t,e[n]=a,n=r}}function S(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var i=2*(r+1)-1,o=e[i],s=i+1,u=e[s];if(void 0!==o&&0>N(o,n))void 0!==u&&0>N(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[i]=n,r=i);else{if(!(void 0!==u&&0>N(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function N(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],C=[],E=1,_=null,A=3,R=!1,O=!1,D=!1;function P(e){for(var t=S(C);null!==t;){if(null===t.callback)I(C);else{if(!(t.startTime<=e))break;I(C),t.sortIndex=t.expirationTime,w(T,t)}t=S(C)}}function F(e){if(D=!1,P(e),!O)if(null!==S(T))O=!0,n(M);else{var t=S(C);null!==t&&r(F,t.startTime-e)}}function M(e,n){O=!1,D&&(D=!1,a()),R=!0;var i=A;try{for(P(n),_=S(T);null!==_&&(!(_.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=_.callback;if("function"===typeof o){_.callback=null,A=_.priorityLevel;var s=o(_.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?_.callback=s:_===S(T)&&I(T),P(n)}else I(T);_=S(T)}if(null!==_)var u=!0;else{var c=S(C);null!==c&&r(F,c.startTime-n),u=!1}return u}finally{_=null,A=i,R=!1}}var L=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||R||(O=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return S(T)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=L,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:E++,callback:i,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,w(C,e),null===S(T)&&e===S(C)&&(D?a():D=!0,r(F,o-s))):(e.sortIndex=u,w(T,e),O||R||(O=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},6699:function(e,t,n){var r=n(2501),a=n(9112),i=n(2132),o=n(890),s=n(4113),u=n(1350),c=n(3411);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,e.exports=c},2501:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},1350:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},9112:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},4113:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},2132:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},3411:function(e,t,n){var r;!function(a,i,o){var s,u=256,c=o.pow(u,6),l=o.pow(2,52),d=2*l,f=255;function h(e,t,n){var r=[],f=g(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(i)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(u):(e=new Uint8Array(u),(a.crypto||a.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,y(i)]}}():e,3),r),h=new p(r),b=function(){for(var e=h.g(6),t=c,n=0;e<l;)e=(e+n)*u,t*=u,n=h.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|h.g(4)},b.quick=function(){return h.g(4)/4294967296},b.double=b,g(y(h.S),i),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,h),e.state=function(){return v(h,{})}),n?(o.random=e,t):e})(b,f,"global"in t?t.global:this==o,t.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[i=f&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=f&a+1],n=n*u+o[f&(o[a]=o[i=f&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(u)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[f&a]=f&(n^=19*t[f&a])+r.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(g(o.random(),i),e.exports){e.exports=h;try{s=n(5042)}catch(b){}}else void 0===(r=function(){return h}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},6165:function(e,t,n){var r;"undefined"!=typeof self&&self,e.exports=(r=n(2791),function(){var e={7403:function(e,t,n){"use strict";n.d(t,{default:function(){return T}});var r=n(4087),a=n.n(r),i=function(e){return new RegExp(/<[a-z][\s\S]*>/i).test(e)},o=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes},s=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},u="TYPE_CHARACTER",c="REMOVE_CHARACTER",l="REMOVE_ALL",d="REMOVE_LAST_VISIBLE_NODE",f="PAUSE_FOR",h="CALL_FUNCTION",p="ADD_HTML_TAG_ELEMENT",v="CHANGE_DELETE_SPEED",m="CHANGE_DELAY",g="CHANGE_CURSOR",y="PASTE_STRING",b="HTML_TAG";function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(){function e(t,n){var x=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),N(this,"state",{cursorAnimation:null,lastFrameTime:null,pauseUntil:null,eventQueue:[],eventLoop:null,eventLoopPaused:!1,reverseCalledEvents:[],calledEvents:[],visibleNodes:[],initialOptions:null,elements:{container:null,wrapper:document.createElement("span"),cursor:document.createElement("span")}}),N(this,"options",{strings:null,cursor:"|",delay:"natural",pauseFor:1500,deleteSpeed:"natural",loop:!1,autoStart:!1,devMode:!1,skipAddStyles:!1,wrapperClassName:"Typewriter__wrapper",cursorClassName:"Typewriter__cursor",stringSplitter:null,onCreateTextNode:null,onRemoveNode:null}),N(this,"setupWrapperElement",(function(){x.state.elements.container&&(x.state.elements.wrapper.className=x.options.wrapperClassName,x.state.elements.cursor.className=x.options.cursorClassName,x.state.elements.cursor.innerHTML=x.options.cursor,x.state.elements.container.innerHTML="",x.state.elements.container.appendChild(x.state.elements.wrapper),x.state.elements.container.appendChild(x.state.elements.cursor))})),N(this,"start",(function(){return x.state.eventLoopPaused=!1,x.runEventLoop(),x})),N(this,"pause",(function(){return x.state.eventLoopPaused=!0,x})),N(this,"stop",(function(){return x.state.eventLoop&&((0,r.cancel)(x.state.eventLoop),x.state.eventLoop=null),x})),N(this,"pauseFor",(function(e){return x.addEventToQueue(f,{ms:e}),x})),N(this,"typeOutAllStrings",(function(){return"string"==typeof x.options.strings?(x.typeString(x.options.strings).pauseFor(x.options.pauseFor),x):(x.options.strings.forEach((function(e){x.typeString(e).pauseFor(x.options.pauseFor).deleteAll(x.options.deleteSpeed)})),x)})),N(this,"typeString",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(i(e))return x.typeOutHTMLString(e,t);if(e){var n=(x.options||{}).stringSplitter,r="function"==typeof n?n(e):e.split("");x.typeCharacters(r,t)}return x})),N(this,"pasteString",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i(e)?x.typeOutHTMLString(e,t,!0):(e&&x.addEventToQueue(y,{character:e,node:t}),x)})),N(this,"typeOutHTMLString",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=o(e);if(r.length>0)for(var a=0;a<r.length;a++){var i=r[a],s=i.innerHTML;i&&3!==i.nodeType?(i.innerHTML="",x.addEventToQueue(p,{node:i,parentNode:t}),n?x.pasteString(s,i):x.typeString(s,i)):i.textContent&&(n?x.pasteString(i.textContent,t):x.typeString(i.textContent,t))}return x})),N(this,"deleteAll",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"natural";return x.addEventToQueue(l,{speed:e}),x})),N(this,"changeDeleteSpeed",(function(e){if(!e)throw new Error("Must provide new delete speed");return x.addEventToQueue(v,{speed:e}),x})),N(this,"changeDelay",(function(e){if(!e)throw new Error("Must provide new delay");return x.addEventToQueue(m,{delay:e}),x})),N(this,"changeCursor",(function(e){if(!e)throw new Error("Must provide new cursor");return x.addEventToQueue(g,{cursor:e}),x})),N(this,"deleteChars",(function(e){if(!e)throw new Error("Must provide amount of characters to delete");for(var t=0;t<e;t++)x.addEventToQueue(c);return x})),N(this,"callFunction",(function(e,t){if(!e||"function"!=typeof e)throw new Error("Callbak must be a function");return x.addEventToQueue(h,{cb:e,thisArg:t}),x})),N(this,"typeCharacters",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||!Array.isArray(e))throw new Error("Characters must be an array");return e.forEach((function(e){x.addEventToQueue(u,{character:e,node:t})})),x})),N(this,"removeCharacters",(function(e){if(!e||!Array.isArray(e))throw new Error("Characters must be an array");return e.forEach((function(){x.addEventToQueue(c)})),x})),N(this,"addEventToQueue",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return x.addEventToStateProperty(e,t,n,"eventQueue")})),N(this,"addReverseCalledEvent",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return x.options.loop?x.addEventToStateProperty(e,t,n,"reverseCalledEvents"):x})),N(this,"addEventToStateProperty",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a={eventName:e,eventArgs:t||{}};return x.state[r]=n?[a].concat(w(x.state[r])):[].concat(w(x.state[r]),[a]),x})),N(this,"runEventLoop",(function(){x.state.lastFrameTime||(x.state.lastFrameTime=Date.now());var e=Date.now(),t=e-x.state.lastFrameTime;if(!x.state.eventQueue.length){if(!x.options.loop)return;x.state.eventQueue=w(x.state.calledEvents),x.state.calledEvents=[],x.options=k({},x.state.initialOptions)}if(x.state.eventLoop=a()(x.runEventLoop),!x.state.eventLoopPaused){if(x.state.pauseUntil){if(e<x.state.pauseUntil)return;x.state.pauseUntil=null}var n,r=w(x.state.eventQueue),i=r.shift();if(!(t<=(n=i.eventName===d||i.eventName===c?"natural"===x.options.deleteSpeed?s(40,80):x.options.deleteSpeed:"natural"===x.options.delay?s(120,160):x.options.delay))){var o=i.eventName,S=i.eventArgs;switch(x.logInDevMode({currentEvent:i,state:x.state,delay:n}),o){case y:case u:var I=S.character,N=S.node,T=document.createTextNode(I),C=T;x.options.onCreateTextNode&&"function"==typeof x.options.onCreateTextNode&&(C=x.options.onCreateTextNode(I,T)),C&&(N?N.appendChild(C):x.state.elements.wrapper.appendChild(C)),x.state.visibleNodes=[].concat(w(x.state.visibleNodes),[{type:"TEXT_NODE",character:I,node:C}]);break;case c:r.unshift({eventName:d,eventArgs:{removingCharacterNode:!0}});break;case f:var E=i.eventArgs.ms;x.state.pauseUntil=Date.now()+parseInt(E);break;case h:var _=i.eventArgs,A=_.cb,R=_.thisArg;A.call(R,{elements:x.state.elements});break;case p:var O=i.eventArgs,D=O.node,P=O.parentNode;P?P.appendChild(D):x.state.elements.wrapper.appendChild(D),x.state.visibleNodes=[].concat(w(x.state.visibleNodes),[{type:b,node:D,parentNode:P||x.state.elements.wrapper}]);break;case l:var F=x.state.visibleNodes,M=S.speed,L=[];M&&L.push({eventName:v,eventArgs:{speed:M,temp:!0}});for(var $=0,j=F.length;$<j;$++)L.push({eventName:d,eventArgs:{removingCharacterNode:!1}});M&&L.push({eventName:v,eventArgs:{speed:x.options.deleteSpeed,temp:!0}}),r.unshift.apply(r,L);break;case d:var z=i.eventArgs.removingCharacterNode;if(x.state.visibleNodes.length){var B=x.state.visibleNodes.pop(),U=B.type,V=B.node,W=B.character;x.options.onRemoveNode&&"function"==typeof x.options.onRemoveNode&&x.options.onRemoveNode({node:V,character:W}),V&&V.parentNode.removeChild(V),U===b&&z&&r.unshift({eventName:d,eventArgs:{}})}break;case v:x.options.deleteSpeed=i.eventArgs.speed;break;case m:x.options.delay=i.eventArgs.delay;break;case g:x.options.cursor=i.eventArgs.cursor,x.state.elements.cursor.innerHTML=i.eventArgs.cursor}x.options.loop&&(i.eventName===d||i.eventArgs&&i.eventArgs.temp||(x.state.calledEvents=[].concat(w(x.state.calledEvents),[i]))),x.state.eventQueue=r,x.state.lastFrameTime=e}}})),t)if("string"==typeof t){var S=document.querySelector(t);if(!S)throw new Error("Could not find container element");this.state.elements.container=S}else this.state.elements.container=t;n&&(this.options=k(k({},this.options),n)),this.state.initialOptions=k({},this.options),this.init()}var t,n;return t=e,(n=[{key:"init",value:function(){var e,t;this.setupWrapperElement(),this.addEventToQueue(g,{cursor:this.options.cursor},!0),this.addEventToQueue(l,null,!0),!window||window.___TYPEWRITER_JS_STYLES_ADDED___||this.options.skipAddStyles||(e=".Typewriter__cursor{-webkit-animation:Typewriter-cursor 1s infinite;animation:Typewriter-cursor 1s infinite;margin-left:1px}@-webkit-keyframes Typewriter-cursor{0%{opacity:0}50%{opacity:1}100%{opacity:0}}@keyframes Typewriter-cursor{0%{opacity:0}50%{opacity:1}100%{opacity:0}}",(t=document.createElement("style")).appendChild(document.createTextNode(e)),document.head.appendChild(t),window.___TYPEWRITER_JS_STYLES_ADDED___=!0),!0===this.options.autoStart&&this.options.strings&&this.typeOutAllStrings().start()}},{key:"logInDevMode",value:function(e){this.options.devMode&&console.log(e)}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},8552:function(e,t,n){var r=n(852)(n(5639),"DataView");e.exports=r},1989:function(e,t,n){var r=n(1789),a=n(401),i=n(7667),o=n(1327),s=n(1866);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=i,u.prototype.has=o,u.prototype.set=s,e.exports=u},8407:function(e,t,n){var r=n(7040),a=n(4125),i=n(2117),o=n(7518),s=n(4705);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=i,u.prototype.has=o,u.prototype.set=s,e.exports=u},7071:function(e,t,n){var r=n(852)(n(5639),"Map");e.exports=r},3369:function(e,t,n){var r=n(4785),a=n(1285),i=n(6e3),o=n(9916),s=n(5265);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=i,u.prototype.has=o,u.prototype.set=s,e.exports=u},3818:function(e,t,n){var r=n(852)(n(5639),"Promise");e.exports=r},8525:function(e,t,n){var r=n(852)(n(5639),"Set");e.exports=r},8668:function(e,t,n){var r=n(3369),a=n(619),i=n(2385);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=a,o.prototype.has=i,e.exports=o},6384:function(e,t,n){var r=n(8407),a=n(7465),i=n(3779),o=n(7599),s=n(4758),u=n(4309);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=a,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=u,e.exports=c},2705:function(e,t,n){var r=n(5639).Symbol;e.exports=r},1149:function(e,t,n){var r=n(5639).Uint8Array;e.exports=r},577:function(e,t,n){var r=n(852)(n(5639),"WeakMap");e.exports=r},4963:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}},4636:function(e,t,n){var r=n(2545),a=n(5694),i=n(1469),o=n(4144),s=n(5776),u=n(6719),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),l=!n&&a(e),d=!n&&!l&&o(e),f=!n&&!l&&!d&&u(e),h=n||l||d||f,p=h?r(e.length,String):[],v=p.length;for(var m in e)!t&&!c.call(e,m)||h&&("length"==m||d&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,v))||p.push(m);return p}},2488:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}},2908:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},8470:function(e,t,n){var r=n(7813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},8866:function(e,t,n){var r=n(2488),a=n(1469);e.exports=function(e,t,n){var i=t(e);return a(e)?i:r(i,n(e))}},4239:function(e,t,n){var r=n(2705),a=n(9607),i=n(2333),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?a(e):i(e)}},9454:function(e,t,n){var r=n(4239),a=n(7005);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},939:function(e,t,n){var r=n(2492),a=n(7005);e.exports=function e(t,n,i,o,s){return t===n||(null==t||null==n||!a(t)&&!a(n)?t!=t&&n!=n:r(t,n,i,o,e,s))}},2492:function(e,t,n){var r=n(6384),a=n(7114),i=n(8351),o=n(6096),s=n(4160),u=n(1469),c=n(4144),l=n(6719),d="[object Arguments]",f="[object Array]",h="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,m,g){var y=u(e),b=u(t),x=y?f:s(e),k=b?f:s(t),w=(x=x==d?h:x)==h,S=(k=k==d?h:k)==h,I=x==k;if(I&&c(e)){if(!c(t))return!1;y=!0,w=!1}if(I&&!w)return g||(g=new r),y||l(e)?a(e,t,n,v,m,g):i(e,t,x,n,v,m,g);if(!(1&n)){var N=w&&p.call(e,"__wrapped__"),T=S&&p.call(t,"__wrapped__");if(N||T){var C=N?e.value():e,E=T?t.value():t;return g||(g=new r),m(C,E,n,v,g)}}return!!I&&(g||(g=new r),o(e,t,n,v,m,g))}},8458:function(e,t,n){var r=n(3560),a=n(5346),i=n(3218),o=n(346),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,d=c.hasOwnProperty,f=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||a(e))&&(r(e)?f:s).test(o(e))}},8749:function(e,t,n){var r=n(4239),a=n(1780),i=n(7005),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&a(e.length)&&!!o[r(e)]}},280:function(e,t,n){var r=n(5726),a=n(6916),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},2545:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},1717:function(e){e.exports=function(e){return function(t){return e(t)}}},4757:function(e){e.exports=function(e,t){return e.has(t)}},4429:function(e,t,n){var r=n(5639)["__core-js_shared__"];e.exports=r},7114:function(e,t,n){var r=n(8668),a=n(2908),i=n(4757);e.exports=function(e,t,n,o,s,u){var c=1&n,l=e.length,d=t.length;if(l!=d&&!(c&&d>l))return!1;var f=u.get(e),h=u.get(t);if(f&&h)return f==t&&h==e;var p=-1,v=!0,m=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++p<l;){var g=e[p],y=t[p];if(o)var b=c?o(y,g,p,t,e,u):o(g,y,p,e,t,u);if(void 0!==b){if(b)continue;v=!1;break}if(m){if(!a(t,(function(e,t){if(!i(m,t)&&(g===e||s(g,e,n,o,u)))return m.push(t)}))){v=!1;break}}else if(g!==y&&!s(g,y,n,o,u)){v=!1;break}}return u.delete(e),u.delete(t),v}},8351:function(e,t,n){var r=n(2705),a=n(1149),i=n(7813),o=n(7114),s=n(8776),u=n(1814),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,d,f){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=s;case"[object Set]":var p=1&r;if(h||(h=u),e.size!=t.size&&!p)return!1;var v=f.get(e);if(v)return v==t;r|=2,f.set(e,t);var m=o(h(e),h(t),r,c,d,f);return f.delete(e),m;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},6096:function(e,t,n){var r=n(8234),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,o,s){var u=1&n,c=r(e),l=c.length;if(l!=r(t).length&&!u)return!1;for(var d=l;d--;){var f=c[d];if(!(u?f in t:a.call(t,f)))return!1}var h=s.get(e),p=s.get(t);if(h&&p)return h==t&&p==e;var v=!0;s.set(e,t),s.set(t,e);for(var m=u;++d<l;){var g=e[f=c[d]],y=t[f];if(i)var b=u?i(y,g,f,t,e,s):i(g,y,f,e,t,s);if(!(void 0===b?g===y||o(g,y,n,i,s):b)){v=!1;break}m||(m="constructor"==f)}if(v&&!m){var x=e.constructor,k=t.constructor;x==k||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof k&&k instanceof k||(v=!1)}return s.delete(e),s.delete(t),v}},1957:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},8234:function(e,t,n){var r=n(8866),a=n(9551),i=n(3674);e.exports=function(e){return r(e,i,a)}},5050:function(e,t,n){var r=n(7019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},852:function(e,t,n){var r=n(8458),a=n(7801);e.exports=function(e,t){var n=a(e,t);return r(n)?n:void 0}},9607:function(e,t,n){var r=n(2705),a=Object.prototype,i=a.hasOwnProperty,o=a.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var a=o.call(e);return r&&(t?e[s]=n:delete e[s]),a}},9551:function(e,t,n){var r=n(4963),a=n(479),i=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return i.call(e,t)})))}:a;e.exports=s},4160:function(e,t,n){var r=n(8552),a=n(7071),i=n(3818),o=n(8525),s=n(577),u=n(4239),c=n(346),l="[object Map]",d="[object Promise]",f="[object Set]",h="[object WeakMap]",p="[object DataView]",v=c(r),m=c(a),g=c(i),y=c(o),b=c(s),x=u;(r&&x(new r(new ArrayBuffer(1)))!=p||a&&x(new a)!=l||i&&x(i.resolve())!=d||o&&x(new o)!=f||s&&x(new s)!=h)&&(x=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case v:return p;case m:return l;case g:return d;case y:return f;case b:return h}return t}),e.exports=x},7801:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},1789:function(e,t,n){var r=n(4536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},401:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:function(e,t,n){var r=n(4536),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0}},1327:function(e,t,n){var r=n(4536),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},1866:function(e,t,n){var r=n(4536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},5776:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},7019:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:function(e,t,n){var r,a=n(4429),i=(r=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!i&&i in e}},5726:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},7040:function(e){e.exports=function(){this.__data__=[],this.size=0}},4125:function(e,t,n){var r=n(8470),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():a.call(t,n,1),--this.size,0))}},2117:function(e,t,n){var r=n(8470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7518:function(e,t,n){var r=n(8470);e.exports=function(e){return r(this.__data__,e)>-1}},4705:function(e,t,n){var r=n(8470);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}},4785:function(e,t,n){var r=n(1989),a=n(8407),i=n(7071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||a),string:new r}}},1285:function(e,t,n){var r=n(5050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},6e3:function(e,t,n){var r=n(5050);e.exports=function(e){return r(this,e).get(e)}},9916:function(e,t,n){var r=n(5050);e.exports=function(e){return r(this,e).has(e)}},5265:function(e,t,n){var r=n(5050);e.exports=function(e,t){var n=r(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}},8776:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},4536:function(e,t,n){var r=n(852)(Object,"create");e.exports=r},6916:function(e,t,n){var r=n(5569)(Object.keys,Object);e.exports=r},1167:function(e,t,n){e=n.nmd(e);var r=n(1957),a=t&&!t.nodeType&&t,i=a&&e&&!e.nodeType&&e,o=i&&i.exports===a&&r.process,s=function(){try{return i&&i.require&&i.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=s},2333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},5639:function(e,t,n){var r=n(1957),a="object"==typeof self&&self&&self.Object===Object&&self,i=r||a||Function("return this")();e.exports=i},619:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2385:function(e){e.exports=function(e){return this.__data__.has(e)}},1814:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},7465:function(e,t,n){var r=n(8407);e.exports=function(){this.__data__=new r,this.size=0}},3779:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},7599:function(e){e.exports=function(e){return this.__data__.get(e)}},4758:function(e){e.exports=function(e){return this.__data__.has(e)}},4309:function(e,t,n){var r=n(8407),a=n(7071),i=n(3369);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!a||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(o)}return n.set(e,t),this.size=n.size,this}},346:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7813:function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},5694:function(e,t,n){var r=n(9454),a=n(7005),i=Object.prototype,o=i.hasOwnProperty,s=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return a(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},1469:function(e){var t=Array.isArray;e.exports=t},8612:function(e,t,n){var r=n(3560),a=n(1780);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},4144:function(e,t,n){e=n.nmd(e);var r=n(5639),a=n(5062),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||a;e.exports=u},8446:function(e,t,n){var r=n(939);e.exports=function(e,t){return r(e,t)}},3560:function(e,t,n){var r=n(4239),a=n(3218);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},6719:function(e,t,n){var r=n(8749),a=n(1717),i=n(1167),o=i&&i.isTypedArray,s=o?a(o):r;e.exports=s},3674:function(e,t,n){var r=n(4636),a=n(280),i=n(8612);e.exports=function(e){return i(e)?r(e):a(e)}},479:function(e){e.exports=function(){return[]}},5062:function(e){e.exports=function(){return!1}},75:function(e){(function(){var t,n,r,a,i,o;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-i)/1e6},n=process.hrtime,a=(t=function(){var e;return 1e9*(e=n())[0]+e[1]})(),o=1e9*process.uptime(),i=a-o):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)},4087:function(e,t,n){for(var r=n(75),a="undefined"==typeof window?n.g:window,i=["moz","webkit"],o="AnimationFrame",s=a["request"+o],u=a["cancel"+o]||a["cancelRequest"+o],c=0;!s&&c<i.length;c++)s=a[i[c]+"Request"+o],u=a[i[c]+"Cancel"+o]||a[i[c]+"CancelRequest"+o];if(!s||!u){var l=0,d=0,f=[];s=function(e){if(0===f.length){var t=r(),n=Math.max(0,16.666666666666668-(t-l));l=n+t,setTimeout((function(){var e=f.slice(0);f.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(l)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(n))}return f.push({handle:++d,callback:e,cancelled:!1}),d},u=function(e){for(var t=0;t<f.length;t++)f[t].handle===e&&(f[t].cancelled=!0)}}e.exports=function(e){return s.call(a,e)},e.exports.cancel=function(){u.apply(a,arguments)},e.exports.polyfill=function(e){e||(e=a),e.requestAnimationFrame=s,e.cancelAnimationFrame=u}},8156:function(e){"use strict";e.exports=r}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e};var a={};return function(){"use strict";n.d(a,{default:function(){return m}});var e=n(8156),t=n.n(e),r=n(7403),i=n(8446),o=n.n(i);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function d(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(m,e);var n,a,i,s,v=(i=m,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(i);if(s){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function m(){var e;u(this,m);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(f(e=v.call.apply(v,[this].concat(n))),"state",{instance:null}),e}return n=m,(a=[{key:"componentDidMount",value:function(){var e=this,t=new r.default(this.typewriter,this.props.options);this.setState({instance:t},(function(){var n=e.props.onInit;n&&n(t)}))}},{key:"componentDidUpdate",value:function(e){o()(this.props.options,e.options)||this.setState({instance:new r.default(this.typewriter,this.props.options)})}},{key:"componentWillUnmount",value:function(){this.state.instance&&this.state.instance.stop()}},{key:"render",value:function(){var e=this,n=this.props.component;return t().createElement(n,{ref:function(t){return e.typewriter=t},className:"Typewriter","data-testid":"typewriter-wrapper"})}}])&&c(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),m}(e.Component);v.defaultProps={component:"div"};var m=v}(),a.default}())},2391:function(e){"use strict";var t=function(){};e.exports=t},3416:function(e,t,n){"use strict";e.exports=n.p+"static/media/Rice.c3c2b1e8ec31542068c1.jpg"},5410:function(){},8628:function(){},1601:function(){},7792:function(){},4977:function(){},5042:function(){},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},7061:function(e,t,n){var r=n(8698).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(R){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),s=new E(r||[]);return o(i,"_invoke",{value:I(e,n,s)}),i}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}t.wrap=f;var p={};function v(){}function m(){}function g(){}var y={};d(y,u,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(_([])));x&&x!==n&&i.call(x,u)&&(y=x);var k=g.prototype=v.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,o,s,u){var c=h(e[a],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==r(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}})}function I(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return A()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=N(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function N(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,N(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var a=h(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,p;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function _(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:A}}function A(){return{value:void 0,done:!0}}return m.prototype=g,o(k,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=d(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,d(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},w(S.prototype),d(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new S(f(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(k),d(k,l,"Generator"),d(k,u,(function(){return this})),d(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4687:function(e,t,n){var r=n(7061)();e.exports=r;try{regeneratorRuntime=r}catch(a){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9142);function a(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},7462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(3878);var a=n(181),i=n(5267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,a=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(e,t)||(0,a.Z)(e,t)||(0,i.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var a=n(9199),i=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,a.Z)(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1002);function a(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==(0,r.Z)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(i,o),i}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/",function(){"use strict";var e={};n.r(e),n.d(e,{browserFiles:function(){return Ac},browserHTTPRequest:function(){return Uc},concatenateArrayBuffers:function(){return Ws},copyModel:function(){return Pu},decodeWeights:function(){return $s},encodeWeights:function(){return Ms},fromMemory:function(){return Hc},fromMemorySync:function(){return qc},getLoadHandlers:function(){return ru},getModelArtifactsForJSON:function(){return qs},getModelArtifactsForJSONSync:function(){return Hs},getModelArtifactsInfoForJSON:function(){return Xs},getSaveHandlers:function(){return nu},getWeightSpecs:function(){return Js},http:function(){return Bc},isHTTPScheme:function(){return jc},listModels:function(){return Au},loadWeights:function(){return Pc},moveModel:function(){return Mu},registerLoadRouter:function(){return tu},registerSaveRouter:function(){return eu},removeModel:function(){return Ou},weightsLoaderFactory:function(){return Mc},withSaveHandler:function(){return Kc},withSaveHandlerSync:function(){return Xc}});var t={};n.r(t),n.d(t,{conv2d:function(){return kp},depthwiseConv2d:function(){return Ip},matMul:function(){return Np}});var r={};n.r(r),n.d(r,{json:function(){return _I}});var a={};n.r(a),n.d(a,{json:function(){return AI}});var i={};n.r(i),n.d(i,{json:function(){return RI}});var o={};n.r(o),n.d(o,{json:function(){return OI}});var s={};n.r(s),n.d(s,{json:function(){return DI}});var u={};n.r(u),n.d(u,{json:function(){return PI}});var c={};n.r(c),n.d(c,{json:function(){return FI}});var l={};n.r(l),n.d(l,{json:function(){return MI}});var d={};n.r(d),n.d(d,{json:function(){return LI}});var f={};n.r(f),n.d(f,{json:function(){return $I}});var h={};n.r(h),n.d(h,{json:function(){return jI}});var p={};n.r(p),n.d(p,{json:function(){return zI}});var v={};n.r(v),n.d(v,{json:function(){return BI}});var m={};n.r(m),n.d(m,{json:function(){return UI}});var g={};n.r(g),n.d(g,{json:function(){return VI}});var y={};n.r(y),n.d(y,{json:function(){return WI}});var b={};n.r(b),n.d(b,{json:function(){return GI}});var x={};n.r(x),n.d(x,{json:function(){return ZI}});var k={};n.r(k),n.d(k,{json:function(){return HI}});var w={};n.r(w),n.d(w,{OP_SCOPE_SUFFIX:function(){return As},abs:function(){return gc},acos:function(){return sl},acosh:function(){return ul},add:function(){return Yu},addN:function(){return cl},all:function(){return ll},any:function(){return dl},argMax:function(){return fl},argMin:function(){return hl},asin:function(){return pl},asinh:function(){return vl},atan:function(){return ml},atan2:function(){return gl},atanh:function(){return yl},avgPool:function(){return Ll},avgPool3d:function(){return $l},basicLSTMCell:function(){return Wl},batchNorm:function(){return Zl},batchNorm2d:function(){return Hl},batchNorm3d:function(){return ql},batchNorm4d:function(){return Kl},batchToSpaceND:function(){return Gl},bincount:function(){return Xl},booleanMaskAsync:function(){return ap},broadcastArgs:function(){return Jl},broadcastTo:function(){return Yl},buffer:function(){return Uu},cast:function(){return Vu},ceil:function(){return Ql},clipByValue:function(){return ed},clone:function(){return Wu},complex:function(){return Os},concat:function(){return jl},concat1d:function(){return td},concat2d:function(){return nd},concat3d:function(){return rd},concat4d:function(){return ad},conv1d:function(){return od},conv2d:function(){return id},conv2dTranspose:function(){return ud},conv3d:function(){return cd},conv3dTranspose:function(){return dd},cos:function(){return fd},cosh:function(){return hd},cosineWindow:function(){return hp},cumprod:function(){return pd},cumsum:function(){return vd},denseBincount:function(){return md},depthToSpace:function(){return gd},depthwiseConv2d:function(){return yd},diag:function(){return bd},dilation2d:function(){return xd},div:function(){return ec},divNoNan:function(){return Sd},dot:function(){return Id},dropout:function(){return dp},einsum:function(){return Nd},elu:function(){return Td},enclosingPowerOfTwo:function(){return fp},equal:function(){return kd},erf:function(){return Cd},euclideanNorm:function(){return zd},exp:function(){return Bd},expandDims:function(){return Ud},expm1:function(){return Vd},eye:function(){return Gd},fft:function(){return Eh},fill:function(){return fc},floor:function(){return Zd},floorDiv:function(){return Qu},fused:function(){return t},gather:function(){return Hd},gatherND:function(){return lp},greater:function(){return qd},greaterEqual:function(){return Kd},ifft:function(){return _h},imag:function(){return Xd},image:function(){return Fv},inTopKAsync:function(){return vp},irfft:function(){return Ah},isFinite:function(){return Jd},isInf:function(){return Yd},isNaN:function(){return Qd},leakyRelu:function(){return ef},less:function(){return tf},lessEqual:function(){return nf},linalg:function(){return Mv},linspace:function(){return rf},localResponseNormalization:function(){return af},log:function(){return of},log1p:function(){return sf},logSigmoid:function(){return lf},logSoftmax:function(){return df},logSumExp:function(){return ff},logicalAnd:function(){return hf},logicalNot:function(){return pf},logicalOr:function(){return vf},logicalXor:function(){return mf},losses:function(){return Lv},lowerBound:function(){return bf},matMul:function(){return zl},max:function(){return Fd},maxPool:function(){return xf},maxPool3d:function(){return kf},maxPoolWithArgmax:function(){return wf},maximum:function(){return kc},mean:function(){return Sf},meshgrid:function(){return Tf},min:function(){return Md},minimum:function(){return Cf},mirrorPad:function(){return Ef},mod:function(){return _f},moments:function(){return Af},movingAverage:function(){return op},mul:function(){return tc},multiRNNCell:function(){return Rf},multinomial:function(){return Of},neg:function(){return uf},norm:function(){return jd},notEqual:function(){return Df},oneHot:function(){return Pf},ones:function(){return Nf},onesLike:function(){return Ff},op:function(){return Rs},outerProduct:function(){return Mf},pad:function(){return Lf},pad1d:function(){return $f},pad2d:function(){return jf},pad3d:function(){return zf},pad4d:function(){return Bf},pool:function(){return Vf},pow:function(){return pc},prelu:function(){return Wf},print:function(){return Gu},prod:function(){return Gf},raggedGather:function(){return Zf},raggedRange:function(){return Hf},raggedTensorToTensor:function(){return qf},rand:function(){return Kf},randomGamma:function(){return eh},randomNormal:function(){return th},randomStandardNormal:function(){return nh},randomUniform:function(){return rh},range:function(){return ah},real:function(){return ih},reciprocal:function(){return oh},relu:function(){return sh},relu6:function(){return uh},reshape:function(){return Ml},reverse:function(){return ch},reverse1d:function(){return lh},reverse2d:function(){return dh},reverse3d:function(){return fh},reverse4d:function(){return hh},rfft:function(){return Oh},round:function(){return ph},rsqrt:function(){return vh},scalar:function(){return oc},scatterND:function(){return sp},searchSorted:function(){return yf},selu:function(){return mh},separableConv2d:function(){return gh},setdiff1dAsync:function(){return bh},sigmoid:function(){return Bl},sign:function(){return xh},signal:function(){return Pv},sin:function(){return kh},sinh:function(){return wh},slice:function(){return Ul},slice1d:function(){return Sh},slice2d:function(){return Ih},slice3d:function(){return Nh},slice4d:function(){return Th},softmax:function(){return Ch},softplus:function(){return cf},spaceToBatchND:function(){return Uf},sparse:function(){return $v},sparseToDense:function(){return cp},spectral:function(){return Dv},split:function(){return Rh},sqrt:function(){return nc},square:function(){return rc},squaredDifference:function(){return Dh},squeeze:function(){return Ph},stack:function(){return Fh},step:function(){return Mh},stridedSlice:function(){return Lh},string:function(){return jv},sub:function(){return vc},sum:function(){return Ld},tan:function(){return $h},tanh:function(){return Vl},tensor:function(){return Ps},tensor1d:function(){return jh},tensor2d:function(){return zh},tensor3d:function(){return Jc},tensor4d:function(){return Bh},tensor5d:function(){return Uh},tensor6d:function(){return Vh},tensorScatterUpdate:function(){return Zh},tile:function(){return Wd},topk:function(){return Hh},transpose:function(){return ip},truncatedNormal:function(){return qh},unique:function(){return Kh},unsortedSegmentSum:function(){return Xh},unstack:function(){return Jh},upperBound:function(){return Yh},variable:function(){return Qh},where:function(){return wd},whereAsync:function(){return np},zeros:function(){return If},zerosLike:function(){return ac}});var S={};n.r(S),n.d(S,{FirebaseError:function(){return SV},SDK_VERSION:function(){return OW},_DEFAULT_ENTRY_NAME:function(){return bW},_addComponent:function(){return SW},_addOrOverwriteComponent:function(){return IW},_apps:function(){return kW},_clearComponents:function(){return EW},_components:function(){return wW},_getProvider:function(){return TW},_registerComponent:function(){return NW},_removeServiceInstance:function(){return CW},deleteApp:function(){return MW},getApp:function(){return PW},getApps:function(){return FW},initializeApp:function(){return DW},onLog:function(){return jW},registerVersion:function(){return $W},setLogLevel:function(){return zW}});var I,N=n(2791),T=n(4164),C=n(9439),E=n(7462),_=I||(I={});_.Pop="POP",_.Push="PUSH",_.Replace="REPLACE";var A=function(e){return e};function R(e){e.preventDefault(),e.returnValue=""}function O(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function D(){return Math.random().toString(36).substr(2,8)}function P(e){var t=e.pathname;t=void 0===t?"/":t;var n=e.search;return n=void 0===n?"":n,e=void 0===(e=e.hash)?"":e,n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),e&&"#"!==e&&(t+="#"===e.charAt(0)?e:"#"+e),t}function F(e){var t={};if(e){var n=e.indexOf("#");0<=n&&(t.hash=e.substr(n),e=e.substr(0,n)),0<=(n=e.indexOf("?"))&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function M(e,t){if(!e)throw new Error(t)}var L=(0,N.createContext)(null);var $=(0,N.createContext)(null);var j=(0,N.createContext)({outlet:null,matches:[]});function z(e){return function(e){var t=(0,N.useContext)(j).outlet;if(t)return(0,N.createElement)(q.Provider,{value:e},t);return t}(e.context)}function B(e){M(!1)}function U(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,a=void 0===r?null:r,i=e.location,o=e.navigationType,s=void 0===o?I.Pop:o,u=e.navigator,c=e.static,l=void 0!==c&&c;G()&&M(!1);var d=se(n),f=(0,N.useMemo)((function(){return{basename:d,navigator:u,static:l}}),[d,u,l]);"string"===typeof i&&(i=F(i));var h=i,p=h.pathname,v=void 0===p?"/":p,m=h.search,g=void 0===m?"":m,y=h.hash,b=void 0===y?"":y,x=h.state,k=void 0===x?null:x,w=h.key,S=void 0===w?"default":w,T=(0,N.useMemo)((function(){var e=ie(v,d);return null==e?null:{pathname:e,search:g,hash:b,state:k,key:S}}),[d,v,g,b,k,S]);return null==T?null:(0,N.createElement)(L.Provider,{value:f},(0,N.createElement)($.Provider,{children:a,value:{location:T,navigationType:s}}))}function V(e){var t=e.children,n=e.location;return function(e,t){G()||M(!1);var n=(0,N.useContext)(j).matches,r=n[n.length-1],a=r?r.params:{},i=(r&&r.pathname,r?r.pathnameBase:"/");r&&r.route;0;var o,s=Z();if(t){var u,c="string"===typeof t?F(t):t;"/"===i||(null==(u=c.pathname)?void 0:u.startsWith(i))||M(!1),o=c}else o=s;var l=o.pathname||"/",d="/"===i?l:l.slice(i.length)||"/",f=function(e,t,n){void 0===n&&(n="/");var r=ie(("string"===typeof t?F(t):t).pathname||"/",n);if(null==r)return null;var a=J(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var i=null,o=0;null==i&&o<a.length;++o)i=te(a[o],r);return i}(e,{pathname:d});0;return ne(f&&f.map((function(e){return Object.assign({},e,{params:Object.assign({},a,e.params),pathname:oe([i,e.pathname]),pathnameBase:"/"===e.pathnameBase?i:oe([i,e.pathnameBase])})})),n)}(X(t),n)}function W(e){G()||M(!1);var t=(0,N.useContext)(L),n=t.basename,r=t.navigator,a=K(e),i=a.hash,o=a.pathname,s=a.search,u=o;if("/"!==n){var c=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?F(e).pathname:e.pathname}(e),l=null!=c&&c.endsWith("/");u="/"===o?n+(l?"/":""):oe([n,o])}return r.createHref({pathname:u,search:s,hash:i})}function G(){return null!=(0,N.useContext)($)}function Z(){return G()||M(!1),(0,N.useContext)($).location}function H(){G()||M(!1);var e=(0,N.useContext)(L),t=e.basename,n=e.navigator,r=(0,N.useContext)(j).matches,a=Z().pathname,i=JSON.stringify(r.map((function(e){return e.pathnameBase}))),o=(0,N.useRef)(!1);(0,N.useEffect)((function(){o.current=!0}));var s=(0,N.useCallback)((function(e,r){if(void 0===r&&(r={}),o.current)if("number"!==typeof e){var s=ae(e,JSON.parse(i),a);"/"!==t&&(s.pathname=oe([t,s.pathname])),(r.replace?n.replace:n.push)(s,r.state)}else n.go(e)}),[t,n,i,a]);return s}var q=(0,N.createContext)(null);function K(e){var t=(0,N.useContext)(j).matches,n=Z().pathname,r=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,N.useMemo)((function(){return ae(e,JSON.parse(r),n)}),[e,r,n])}function X(e){var t=[];return N.Children.forEach(e,(function(e){if((0,N.isValidElement)(e))if(e.type!==N.Fragment){e.type!==B&&M(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=X(e.props.children)),t.push(n)}else t.push.apply(t,X(e.props.children))})),t}function J(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,a){var i={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(i.relativePath.startsWith(r)||M(!1),i.relativePath=i.relativePath.slice(r.length));var o=oe([r,i.relativePath]),s=n.concat(i);e.children&&e.children.length>0&&(!0===e.index&&M(!1),J(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:ee(o,e.index),routesMeta:s})})),t}var Y=/^:\w+$/,Q=function(e){return"*"===e};function ee(e,t){var n=e.split("/"),r=n.length;return n.some(Q)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!Q(e)})).reduce((function(e,t){return e+(Y.test(t)?3:""===t?1:10)}),r)}function te(e,t){for(var n=e.routesMeta,r={},a="/",i=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===a?t:t.slice(a.length)||"/",l=re({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var d=s.route;i.push({params:r,pathname:oe([a,l.pathname]),pathnameBase:oe([a,l.pathnameBase]),route:d}),"/"!==l.pathnameBase&&(a=oe([a,l.pathnameBase]))}return i}function ne(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,r,a){return(0,N.createElement)(j.Provider,{children:void 0!==r.route.element?r.route.element:(0,N.createElement)(z,null),value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function re(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a+=n?"\\/*$":"(?:\\b|\\/|$)";return[new RegExp(a,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=(0,C.Z)(n,2),a=r[0],i=r[1],o=t.match(a);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:i.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(c[n]||""),e}),{}),pathname:s,pathnameBase:u,pattern:e}}function ae(e,t,n){var r,a="string"===typeof e?F(e):e,i=""===e||""===a.pathname?"/":a.pathname;if(null==i)r=n;else{var o=t.length-1;if(i.startsWith("..")){for(var s=i.split("/");".."===s[0];)s.shift(),o-=1;a.pathname=s.join("/")}r=o>=0?t[o]:"/"}var u=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?F(e):e,r=n.pathname,a=n.search,i=void 0===a?"":a,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:ue(i),hash:ce(s)}}(a,r);return i&&"/"!==i&&i.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function ie(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var oe=function(e){return e.join("/").replace(/\/\/+/g,"/")},se=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ue=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ce=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function le(){return le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},le.apply(this,arguments)}function de(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var fe=["onClick","reloadDocument","replace","state","target","to"];function he(e){var t=e.basename,n=e.children,r=e.window,a=(0,N.useRef)();null==a.current&&(a.current=function(e){function t(){var e=o.location,t=s.state||{};return[t.idx,A({pathname:e.pathname,search:e.search,hash:e.hash,state:t.usr||null,key:t.key||"default"})]}function n(e){return"string"===typeof e?e:P(e)}function r(e,t){return void 0===t&&(t=null),A((0,E.Z)({pathname:d.pathname,hash:"",search:""},"string"===typeof e?F(e):e,{state:t,key:D()}))}function a(e){c=e,e=t(),l=e[0],d=e[1],f.call({action:c,location:d})}function i(e){s.go(e)}void 0===e&&(e={});var o=void 0===(e=e.window)?document.defaultView:e,s=o.history,u=null;o.addEventListener("popstate",(function(){if(u)h.call(u),u=null;else{var e=I.Pop,n=t(),r=n[0];if(n=n[1],h.length){if(null!=r){var o=l-r;o&&(u={action:e,location:n,retry:function(){i(-1*o)}},i(o))}}else a(e)}}));var c=I.Pop,l=(e=t())[0],d=e[1],f=O(),h=O();return null==l&&(l=0,s.replaceState((0,E.Z)({},s.state,{idx:l}),"")),{get action(){return c},get location(){return d},createHref:n,push:function e(t,i){var u=I.Push,c=r(t,i);if(!h.length||(h.call({action:u,location:c,retry:function(){e(t,i)}}),0)){var d=[{usr:c.state,key:c.key,idx:l+1},n(c)];c=d[0],d=d[1];try{s.pushState(c,"",d)}catch(bQ){o.location.assign(d)}a(u)}},replace:function e(t,i){var o=I.Replace,u=r(t,i);h.length&&(h.call({action:o,location:u,retry:function(){e(t,i)}}),1)||(u=[{usr:u.state,key:u.key,idx:l},n(u)],s.replaceState(u[0],"",u[1]),a(o))},go:i,back:function(){i(-1)},forward:function(){i(1)},listen:function(e){return f.push(e)},block:function(e){var t=h.push(e);return 1===h.length&&o.addEventListener("beforeunload",R),function(){t(),h.length||o.removeEventListener("beforeunload",R)}}}}({window:r}));var i=a.current,o=(0,N.useState)({action:i.action,location:i.location}),s=(0,C.Z)(o,2),u=s[0],c=s[1];return(0,N.useLayoutEffect)((function(){return i.listen(c)}),[i]),(0,N.createElement)(U,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:i})}var pe=(0,N.forwardRef)((function(e,t){var n=e.onClick,r=e.reloadDocument,a=e.replace,i=void 0!==a&&a,o=e.state,s=e.target,u=e.to,c=de(e,fe),l=W(u),d=function(e,t){var n=void 0===t?{}:t,r=n.target,a=n.replace,i=n.state,o=H(),s=Z(),u=K(e);return(0,N.useCallback)((function(t){if(0===t.button&&(!r||"_self"===r)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||P(s)===P(u);o(e,{replace:n,state:i})}}),[s,o,u,a,i,r,e])}(u,{replace:i,state:o,target:s});return(0,N.createElement)("a",le({},c,{href:l,onClick:function(e){n&&n(e),e.defaultPrevented||r||d(e)},ref:t,target:s}))}));function ve(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function me(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){ve(i,r,a,o,s,"next",e)}function s(e){ve(i,r,a,o,s,"throw",e)}o(void 0)}))}}var ge=n(4687),ye=n.n(ge),be=n(184);var xe=function(){var e,t,n,r=(0,N.useState)("New York"),a=(0,C.Z)(r,2),i=(a[0],a[1],(0,N.useState)()),o=(0,C.Z)(i,2),s=o[0],u=o[1];(0,N.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(e.coords.latitude,"&lon=").concat(e.coords.longitude,"&appid=1ae67afbcfd2c8ace165befd341a1d70&units=metric")).then((function(e){return e.json()})).then((function(e){u(e),console.log(e)})).catch((function(e){return console.log(e.message)}))})):alert("Geolocation is not supported by this browser.")}),[]);var c=(new Date).toDateString();return(0,be.jsx)(be.Fragment,{children:(0,be.jsxs)("div",{className:"card bg-gray-100 text-black font-bold  grid  grid-cols-2 items-center",children:[(0,be.jsxs)("div",{className:"flex flex-col justify-center pb-3",children:[(0,be.jsx)("img",{src:"http://openweathermap.org/img/w/".concat(null===s||void 0===s||null===(e=s.weather[0])||void 0===e?void 0:e.icon,".png"),alt:"",className:"w-[50px] m-auto"}),(0,be.jsxs)("h2",{className:"text-md font-bold text-center ",children:[null===s||void 0===s||null===(t=s.main)||void 0===t?void 0:t.temp,"\xb0"]}),(0,be.jsx)("p",{className:"text-center",children:null===s||void 0===s||null===(n=s.weather[0])||void 0===n?void 0:n.main})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h4",{className:"text-md text-center",children:null===s||void 0===s?void 0:s.name}),(0,be.jsxs)("div",{className:"text-md text-center",children:[" ",c]})]})]})})},ke=n(3366),we=(n(8457),n(8182)),Se=n(4419),Ie=n(9359),Ne=n(1388),Te=n(5878),Ce=n(1217);function Ee(e){return(0,Ce.Z)("MuiBottomNavigation",e)}(0,Te.Z)("MuiBottomNavigation",["root"]);var _e=["children","className","component","onChange","showLabels","value"],Ae=(0,Ie.ZP)("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){var t=e.theme;return{display:"flex",justifyContent:"center",height:56,backgroundColor:(t.vars||t).palette.background.paper}})),Re=N.forwardRef((function(e,t){var n=(0,Ne.Z)({props:e,name:"MuiBottomNavigation"}),r=n.children,a=n.className,i=n.component,o=void 0===i?"div":i,s=n.onChange,u=n.showLabels,c=void 0!==u&&u,l=n.value,d=(0,ke.Z)(n,_e),f=(0,E.Z)({},n,{component:o,showLabels:c}),h=function(e){var t=e.classes;return(0,Se.Z)({root:["root"]},Ee,t)}(f);return(0,be.jsx)(Ae,(0,E.Z)({as:o,className:(0,we.Z)(h.root,a),ref:t,ownerState:f},d,{children:N.Children.map(r,(function(e,t){if(!N.isValidElement(e))return null;var n=void 0===e.props.value?t:e.props.value;return N.cloneElement(e,{selected:n===l,showLabel:void 0!==e.props.showLabel?e.props.showLabel:c,value:n,onChange:s})}))}))})),Oe=Re,De=n(4942),Pe=n(4843),Fe=n(6868),Me=n(3031),Le=n(3433);function $e(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ze(e,t){return ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ze(e,t)}function Be(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ze(e,t)}var Ue=N.createContext(null);function Ve(e,t){var n=Object.create(null);return e&&N.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,N.isValidElement)(e)?t(e):e}(e)})),n}function We(e,t,n){return null!=n[t]?n[t]:e.props[t]}function Ge(e,t,n){var r=Ve(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,a=Object.create(null),i=[];for(var o in e)o in t?i.length&&(a[o]=i,i=[]):i.push(o);var s={};for(var u in t){if(a[u])for(r=0;r<a[u].length;r++){var c=a[u][r];s[a[u][r]]=n(c)}s[u]=n(u)}for(r=0;r<i.length;r++)s[i[r]]=n(i[r]);return s}(t,r);return Object.keys(a).forEach((function(i){var o=a[i];if((0,N.isValidElement)(o)){var s=i in t,u=i in r,c=t[i],l=(0,N.isValidElement)(c)&&!c.props.in;!u||s&&!l?u||!s||l?u&&s&&(0,N.isValidElement)(c)&&(a[i]=(0,N.cloneElement)(o,{onExited:n.bind(null,o),in:c.props.in,exit:We(o,"exit",e),enter:We(o,"enter",e)})):a[i]=(0,N.cloneElement)(o,{in:!1}):a[i]=(0,N.cloneElement)(o,{onExited:n.bind(null,o),in:!0,exit:We(o,"exit",e),enter:We(o,"enter",e)})}})),a}var Ze=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},He=function(e){function t(t,n){var r,a=(r=e.call(this,t,n)||this).handleExited.bind(je(r));return r.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},r}Be(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,a=t.children,i=t.handleExited;return{children:t.firstRender?(n=e,r=i,Ve(n.children,(function(e){return(0,N.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:We(e,"appear",n),enter:We(e,"enter",n),exit:We(e,"exit",n)})}))):Ge(e,a,i),firstRender:!1}},n.handleExited=function(e,t){var n=Ve(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,E.Z)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,ke.Z)(e,["component","childFactory"]),a=this.state.contextValue,i=Ze(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?N.createElement(Ue.Provider,{value:a},i):N.createElement(Ue.Provider,{value:a},N.createElement(t,r,i))},t}(N.Component);He.propTypes={},He.defaultProps={component:"div",childFactory:function(e){return e}};var qe=He,Ke=(n(3361),n(7711),n(9140));n(2561);function Xe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,Ke.O)(t)}var Je=function(){var e=Xe.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var Ye=function(e){var t=e.className,n=e.classes,r=e.pulsate,a=void 0!==r&&r,i=e.rippleX,o=e.rippleY,s=e.rippleSize,u=e.in,c=e.onExited,l=e.timeout,d=N.useState(!1),f=(0,C.Z)(d,2),h=f[0],p=f[1],v=(0,we.Z)(t,n.ripple,n.rippleVisible,a&&n.ripplePulsate),m={width:s,height:s,top:-s/2+o,left:-s/2+i},g=(0,we.Z)(n.child,h&&n.childLeaving,a&&n.childPulsate);return u||h||p(!0),N.useEffect((function(){if(!u&&null!=c){var e=setTimeout(c,l);return function(){clearTimeout(e)}}}),[c,u,l]),(0,be.jsx)("span",{className:v,style:m,children:(0,be.jsx)("span",{className:g})})};var Qe,et,tt,nt,rt,at,it,ot,st=(0,Te.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ut=["center","classes","className"],ct=Je(rt||(rt=Qe||(Qe=$e(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),lt=Je(at||(at=et||(et=$e(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),dt=Je(it||(it=tt||(tt=$e(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),ft=(0,Ie.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ht=(0,Ie.ZP)(Ye,{name:"MuiTouchRipple",slot:"Ripple"})(ot||(ot=nt||(nt=$e(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),st.rippleVisible,ct,550,(function(e){return e.theme.transitions.easing.easeInOut}),st.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),st.child,st.childLeaving,lt,550,(function(e){return e.theme.transitions.easing.easeInOut}),st.childPulsate,dt,(function(e){return e.theme.transitions.easing.easeInOut})),pt=N.forwardRef((function(e,t){var n=(0,Ne.Z)({props:e,name:"MuiTouchRipple"}),r=n.center,a=void 0!==r&&r,i=n.classes,o=void 0===i?{}:i,s=n.className,u=(0,ke.Z)(n,ut),c=N.useState([]),l=(0,C.Z)(c,2),d=l[0],f=l[1],h=N.useRef(0),p=N.useRef(null);N.useEffect((function(){p.current&&(p.current(),p.current=null)}),[d]);var v=N.useRef(!1),m=N.useRef(null),g=N.useRef(null),y=N.useRef(null);N.useEffect((function(){return function(){clearTimeout(m.current)}}),[]);var b=N.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,a=e.rippleSize,i=e.cb;f((function(e){return[].concat((0,Le.Z)(e),[(0,be.jsx)(ht,{classes:{ripple:(0,we.Z)(o.ripple,st.ripple),rippleVisible:(0,we.Z)(o.rippleVisible,st.rippleVisible),ripplePulsate:(0,we.Z)(o.ripplePulsate,st.ripplePulsate),child:(0,we.Z)(o.child,st.child),childLeaving:(0,we.Z)(o.childLeaving,st.childLeaving),childPulsate:(0,we.Z)(o.childPulsate,st.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:a},h.current)])})),h.current+=1,p.current=i}),[o]),x=N.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=t.pulsate,i=void 0!==r&&r,o=t.center,s=void 0===o?a||t.pulsate:o,u=t.fakeElement,c=void 0!==u&&u;if("mousedown"===(null==e?void 0:e.type)&&v.current)v.current=!1;else{"touchstart"===(null==e?void 0:e.type)&&(v.current=!0);var l,d,f,h=c?null:y.current,p=h?h.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(p.width/2),d=Math.round(p.height/2);else{var x=e.touches&&e.touches.length>0?e.touches[0]:e,k=x.clientX,w=x.clientY;l=Math.round(k-p.left),d=Math.round(w-p.top)}if(s)(f=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2===0&&(f+=1);else{var S=2*Math.max(Math.abs((h?h.clientWidth:0)-l),l)+2,I=2*Math.max(Math.abs((h?h.clientHeight:0)-d),d)+2;f=Math.sqrt(Math.pow(S,2)+Math.pow(I,2))}null!=e&&e.touches?null===g.current&&(g.current=function(){b({pulsate:i,rippleX:l,rippleY:d,rippleSize:f,cb:n})},m.current=setTimeout((function(){g.current&&(g.current(),g.current=null)}),80)):b({pulsate:i,rippleX:l,rippleY:d,rippleSize:f,cb:n})}}),[a,b]),k=N.useCallback((function(){x({},{pulsate:!0})}),[x]),w=N.useCallback((function(e,t){if(clearTimeout(m.current),"touchend"===(null==e?void 0:e.type)&&g.current)return g.current(),g.current=null,void(m.current=setTimeout((function(){w(e,t)})));g.current=null,f((function(e){return e.length>0?e.slice(1):e})),p.current=t}),[]);return N.useImperativeHandle(t,(function(){return{pulsate:k,start:x,stop:w}}),[k,x,w]),(0,be.jsx)(ft,(0,E.Z)({className:(0,we.Z)(st.root,o.root,s),ref:y},u,{children:(0,be.jsx)(qe,{component:null,exit:!0,children:d})}))})),vt=pt;function mt(e){return(0,Ce.Z)("MuiButtonBase",e)}var gt,yt=(0,Te.Z)("MuiButtonBase",["root","disabled","focusVisible"]),bt=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],xt=(0,Ie.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((gt={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,De.Z)(gt,"&.".concat(yt.disabled),{pointerEvents:"none",cursor:"default"}),(0,De.Z)(gt,"@media print",{colorAdjust:"exact"}),gt)),kt=N.forwardRef((function(e,t){var n=(0,Ne.Z)({props:e,name:"MuiButtonBase"}),r=n.action,a=n.centerRipple,i=void 0!==a&&a,o=n.children,s=n.className,u=n.component,c=void 0===u?"button":u,l=n.disabled,d=void 0!==l&&l,f=n.disableRipple,h=void 0!==f&&f,p=n.disableTouchRipple,v=void 0!==p&&p,m=n.focusRipple,g=void 0!==m&&m,y=n.LinkComponent,b=void 0===y?"a":y,x=n.onBlur,k=n.onClick,w=n.onContextMenu,S=n.onDragLeave,I=n.onFocus,T=n.onFocusVisible,_=n.onKeyDown,A=n.onKeyUp,R=n.onMouseDown,O=n.onMouseLeave,D=n.onMouseUp,P=n.onTouchEnd,F=n.onTouchMove,M=n.onTouchStart,L=n.tabIndex,$=void 0===L?0:L,j=n.TouchRippleProps,z=n.touchRippleRef,B=n.type,U=(0,ke.Z)(n,bt),V=N.useRef(null),W=N.useRef(null),G=(0,Pe.Z)(W,z),Z=(0,Me.Z)(),H=Z.isFocusVisibleRef,q=Z.onFocus,K=Z.onBlur,X=Z.ref,J=N.useState(!1),Y=(0,C.Z)(J,2),Q=Y[0],ee=Y[1];d&&Q&&ee(!1),N.useImperativeHandle(r,(function(){return{focusVisible:function(){ee(!0),V.current.focus()}}}),[]);var te=N.useState(!1),ne=(0,C.Z)(te,2),re=ne[0],ae=ne[1];N.useEffect((function(){ae(!0)}),[]);var ie=re&&!h&&!d;function oe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return(0,Fe.Z)((function(r){return t&&t(r),!n&&W.current&&W.current[e](r),!0}))}N.useEffect((function(){Q&&g&&!h&&re&&W.current.pulsate()}),[h,g,Q,re]);var se=oe("start",R),ue=oe("stop",w),ce=oe("stop",S),le=oe("stop",D),de=oe("stop",(function(e){Q&&e.preventDefault(),O&&O(e)})),fe=oe("start",M),he=oe("stop",P),pe=oe("stop",F),ve=oe("stop",(function(e){K(e),!1===H.current&&ee(!1),x&&x(e)}),!1),me=(0,Fe.Z)((function(e){V.current||(V.current=e.currentTarget),q(e),!0===H.current&&(ee(!0),T&&T(e)),I&&I(e)})),ge=function(){var e=V.current;return c&&"button"!==c&&!("A"===e.tagName&&e.href)},ye=N.useRef(!1),xe=(0,Fe.Z)((function(e){g&&!ye.current&&Q&&W.current&&" "===e.key&&(ye.current=!0,W.current.stop(e,(function(){W.current.start(e)}))),e.target===e.currentTarget&&ge()&&" "===e.key&&e.preventDefault(),_&&_(e),e.target===e.currentTarget&&ge()&&"Enter"===e.key&&!d&&(e.preventDefault(),k&&k(e))})),Ie=(0,Fe.Z)((function(e){g&&" "===e.key&&W.current&&Q&&!e.defaultPrevented&&(ye.current=!1,W.current.stop(e,(function(){W.current.pulsate(e)}))),A&&A(e),k&&e.target===e.currentTarget&&ge()&&" "===e.key&&!e.defaultPrevented&&k(e)})),Te=c;"button"===Te&&(U.href||U.to)&&(Te=b);var Ce={};"button"===Te?(Ce.type=void 0===B?"button":B,Ce.disabled=d):(U.href||U.to||(Ce.role="button"),d&&(Ce["aria-disabled"]=d));var Ee=(0,Pe.Z)(t,X,V);var _e=(0,E.Z)({},n,{centerRipple:i,component:c,disabled:d,disableRipple:h,disableTouchRipple:v,focusRipple:g,tabIndex:$,focusVisible:Q}),Ae=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,a=e.classes,i={root:["root",t&&"disabled",n&&"focusVisible"]},o=(0,Se.Z)(i,mt,a);return n&&r&&(o.root+=" ".concat(r)),o}(_e);return(0,be.jsxs)(xt,(0,E.Z)({as:Te,className:(0,we.Z)(Ae.root,s),ownerState:_e,onBlur:ve,onClick:k,onContextMenu:ue,onFocus:me,onKeyDown:xe,onKeyUp:Ie,onMouseDown:se,onMouseLeave:de,onMouseUp:le,onDragLeave:ce,onTouchEnd:he,onTouchMove:pe,onTouchStart:fe,ref:Ee,tabIndex:d?-1:$,type:B},Ce,U,{children:[o,ie?(0,be.jsx)(vt,(0,E.Z)({ref:G,center:i},j)):null]}))})),wt=kt;function St(e){return(0,Ce.Z)("MuiBottomNavigationAction",e)}var It=(0,Te.Z)("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),Nt=["className","icon","label","onChange","onClick","selected","showLabel","value"],Tt=(0,Ie.ZP)(wt,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.showLabel&&!n.selected&&t.iconOnly]}})((function(e){var t=e.theme,n=e.ownerState;return(0,E.Z)({transition:t.transitions.create(["color","padding-top"],{duration:t.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(t.vars||t).palette.text.secondary,flexDirection:"column",flex:"1"},!n.showLabel&&!n.selected&&{paddingTop:14},!n.showLabel&&!n.selected&&!n.label&&{paddingTop:0},(0,De.Z)({},"&.".concat(It.selected),{color:(t.vars||t).palette.primary.main}))})),Ct=(0,Ie.ZP)("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:function(e,t){return t.label}})((function(e){var t=e.theme,n=e.ownerState;return(0,E.Z)({fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s"},!n.showLabel&&!n.selected&&{opacity:0,transitionDelay:"0s"},(0,De.Z)({},"&.".concat(It.selected),{fontSize:t.typography.pxToRem(14)}))})),Et=N.forwardRef((function(e,t){var n=(0,Ne.Z)({props:e,name:"MuiBottomNavigationAction"}),r=n.className,a=n.icon,i=n.label,o=n.onChange,s=n.onClick,u=n.value,c=(0,ke.Z)(n,Nt),l=n,d=function(e){var t=e.classes,n=e.showLabel,r=e.selected,a={root:["root",!n&&!r&&"iconOnly",r&&"selected"],label:["label",!n&&!r&&"iconOnly",r&&"selected"]};return(0,Se.Z)(a,St,t)}(l);return(0,be.jsxs)(Tt,(0,E.Z)({ref:t,className:(0,we.Z)(d.root,r),focusRipple:!0,onClick:function(e){o&&o(e,u),s&&s(e)},ownerState:l},c,{children:[a,(0,be.jsx)(Ct,{className:d.label,ownerState:l,children:i})]}))})),_t=Et,At=n(7541),Rt=n(4694),Ot=n(5545);function Dt(e){e.profile,e.setProfile;var t=Z(),n=N.useState("dashboard"),r=(0,C.Z)(n,2),a=r[0],i=r[1],o=H();return(0,be.jsx)(be.Fragment,{children:"/"!==t.pathname&&"/login"!==t.pathname&&"/GetOtp"!==t.pathname?(0,be.jsx)(be.Fragment,{children:(0,be.jsxs)(Oe,{sx:{width:"100vw",position:"fixed",left:0,bottom:0,backgroundColor:"rgb(198 207 221)"},value:a,onChange:function(e,t){i(t)},children:[(0,be.jsx)(_t,{label:"Dashboard",value:"dashboard",icon:(0,be.jsx)(At.Z,{}),onClick:function(){o("/dashboard")}}),(0,be.jsx)(_t,{label:"Favorites",value:"favorites",icon:(0,be.jsx)(Rt.Z,{}),onClick:function(){o("/dev")}}),(0,be.jsx)(_t,{label:"Profile",value:"profile",icon:(0,be.jsx)(Ot.Z,{}),onClick:function(){o("/profile")}})]})}):(0,be.jsx)(be.Fragment,{})})}var Pt=function(e){var t,n=e.recommended,r=e.host,a=H(),i=null===n||void 0===n||null===(t=n.className)||void 0===t?void 0:t.split(" ")[0];return(0,be.jsxs)("div",{className:" my-7 px-5 md:px-0",children:[(0,be.jsx)("div",{className:"font-bold text-xl pb-4",children:"Recommended Crop"}),(0,be.jsxs)("div",{className:"flex flex-col items-center bg-white border border-gray-200 rounded-lg   hover:bg-gray-100 dark:border-gray-200 dark:bg-gray-200 dark:hover:bg-gray-200  m-auto shadow-lg",children:[(0,be.jsxs)("div",{className:"w-[100%] h-[100px] md:h-[40vh] overflow-clip",children:[" ",(0,be.jsx)("img",{class:"object-cover w-full rounded-t-lg h-[100%]  md:rounded-none md:rounded-l-lg",src:"".concat(r,"/static/").concat(i,".jpg"),alt:""})]}),(0,be.jsxs)("div",{class:"flex w-[100%] items-center gap-4 justify-between  px-3 leading-normal",children:[(0,be.jsxs)("div",{class:"mb-2 ",children:[(0,be.jsx)("div",{className:"text-2xl font-semibold tracking-tight text-gray-900 dark:text-gray-700 text-center",children:null===n||void 0===n?void 0:n.className}),(0,be.jsx)("div",{className:"text-gray-500 font-semibold",children:(100*(null===n||void 0===n?void 0:n.probability)).toFixed(2)})]}),(0,be.jsx)("div",{class:"mb-3 font-normal text-green-300 dark:text-gray-400",children:(0,be.jsx)("div",{children:(0,be.jsx)("button",{onClick:function(){a("/recommended_crop")},type:"submit",className:"px-2 py-1 text-lg  text-white transition-colors duration-300 bg-green-500 rounded-md shadow hover:bg-green-600 focus:outline-none focus:ring-green-200 focus:ring-4",children:"Change"})})})]})]})]})},Ft=n(3416);var Mt=function(){return(0,be.jsx)("div",{className:"my-7 md:px-0",children:(0,be.jsx)("div",{class:"grid rounded-lg",children:(0,be.jsx)("div",{class:"grid-cols-6",children:(0,be.jsx)("div",{style:{backgroundImage:"url(".concat(Ft,")"),backgroundSize:"cover"},className:"object-cover w-full rounded-lg h-[20vh]  md:w-auto md:h-auto  md:rounded-none md:rounded-l-lg",children:(0,be.jsx)("div",{class:"card-overlay rounded-lg h-[20vh]",children:(0,be.jsx)("div",{class:"white-text text-center",children:(0,be.jsx)("div",{class:"card flex items-center",children:(0,be.jsx)("p",{className:"font-semibold flex w-[100%] h-[20vh] justify-center items-center text-white",children:"Disease Predictor"})})})})})})})})};var Lt=function(){return(0,be.jsx)("div",{children:(0,be.jsx)("div",{className:"my-7 md:px-0",children:(0,be.jsx)("div",{class:"grid rounded-lg",children:(0,be.jsx)("div",{class:"grid-cols-6",children:(0,be.jsx)("div",{style:{backgroundImage:"url(".concat(Ft,")"),backgroundSize:"cover"},className:"object-cover w-full rounded-lg h-[20vh] md:w-auto md:h-auto md:rounded-none md:rounded-l-lg",children:(0,be.jsx)("div",{class:"card-overlay rounded-lg h-[20vh]",children:(0,be.jsx)("div",{class:"white-text text-center",children:(0,be.jsx)("div",{class:"card flex items-center",children:(0,be.jsx)("p",{className:"font-semibold flex w-[100%] h-[20vh] justify-center items-center text-white",children:"Drought Predictor Implementing soon"})})})})})})})})})},$t=n(8890),jt=n.n($t),zt=["Rice","Maize","Chick Pea","Kidney Beans","Pigeon Peas","Moth Beans","Mung Bean","Black Gram","Lentil","Pomegranate","Banana","Mango","Grapes","Watermelon","Muskmelon","Apple","Orange","Papaya","Coconut","Cotton","Jute","Coffee"],Bt=n(181);function Ut(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,Bt.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function Vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Wt=n(9142);function Gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,Wt.Z)(r.key),r)}}function Zt(e,t,n){return t&&Gt(e.prototype,t),n&&Gt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Ht=function(){function e(t,n){Vt(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return Zt(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),qt=function(){function e(){Vt(this,e)}return Zt(e,[{key:"refCount",value:function(e){return Kt("refCount")}},{key:"incRef",value:function(e){return Kt("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return Kt("time")}},{key:"read",value:function(e){return Kt("read")}},{key:"readSync",value:function(e){return Kt("readSync")}},{key:"readToGPU",value:function(e,t){return Kt("readToGPU")}},{key:"numDataIds",value:function(){return Kt("numDataIds")}},{key:"disposeData",value:function(e,t){return Kt("disposeData")}},{key:"write",value:function(e,t,n){return Kt("write")}},{key:"move",value:function(e,t,n,r,a){return Kt("move")}},{key:"createTensorFromGPUData",value:function(e,t,n){return Kt("createTensorFromGPUData")}},{key:"memory",value:function(){return Kt("memory")}},{key:"floatPrecision",value:function(){return Kt("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return Kt("dispose")}}]),e}();function Kt(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function Xt(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,Qt(e,--t,n)}function Jt(e,t,n){return Math.max(e,Math.min(t,n))}function Yt(e){return e%2===0?e:e+1}function Qt(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function en(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function tn(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function nn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";tn(on(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function rn(e){tn(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function an(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function on(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function sn(e){return e%1===0}function un(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function cn(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function ln(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise((function(a,i){var o=0;!function s(){if(e())a();else{o++;var u=t(o);null!=n&&o>=n?i():null!=r?r(s,u):setTimeout(s,u)}}()}))}function dn(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function fn(e,t){var n=t.length;return tn((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),tn(e.every((function(e){return sn(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function hn(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:fn(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function pn(e,t){return vn(e,t)}function vn(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function mn(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function gn(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function yn(e){return"string"===typeof e||e instanceof String}function bn(e){return"number"===typeof e}function xn(e){return Array.isArray(e)?xn(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":bn(e)?"float32":yn(e)?"string":"boolean"===typeof e?"bool":"float32"}function kn(e){return!!(e&&e.constructor&&e.call&&e.apply)}function wn(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function Sn(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function In(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],u=t.slice(1),c=u.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=In(e+l*c,u,n,r);return a}function Nn(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return In(0,e,t,n)}function Tn(e,t){for(var n=Cn(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Cn(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function En(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return Nn(e,new Float32Array(n));if("int32"===t)return Nn(e,new Int32Array(n));if("bool"===t)return Nn(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function _n(e){e.forEach((function(t){tn(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function An(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function Rn(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function On(e){return e&&e.then&&"function"===typeof e.then}var Dn="tfjsflags",Pn=function(){function e(t){Vt(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Fn,this.populateURLFlags()}return Zt(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(Ln().getBool("IS_TEST")||Ln().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];Ln().getBool("IS_TEST")||Ln().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(On(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getString",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(Dn in t)t.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=(0,C.Z)(n,2),a=r[0],i=r[1];e.urlFlags[a]=function(e,t){var n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:"".concat(+n)===n?+n:t}(0,i)}))}}}]),e}();function Fn(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return Mn(t,r[0],r[1]),r.join("=")})),t}function Mn(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function Ln(){return jn}var $n,jn=null;function zn(){if(null==$n){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}$n=e}return $n}function Bn(e,t){var n=function(){var e=zn();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var Un="Abs",Vn="Acos",Wn="Acosh",Gn="Add",Zn="AddN",Hn="All",qn="Any",Kn="ArgMax",Xn="ArgMin",Jn="Asin",Yn="Asinh",Qn="Atan",er="Atanh",tr="Atan2",nr="AvgPool",rr="AvgPoolGrad",ar="AvgPool3D",ir="AvgPool3DGrad",or="BatchMatMul",sr="BatchToSpaceND",ur="Bincount",cr="BroadcastArgs",lr="Cast",dr="Ceil",fr="ClipByValue",hr="Complex",pr="ComplexAbs",vr="Concat",mr="Conv2D",gr="Conv2DBackpropFilter",yr="Conv2DBackpropInput",br="Conv3D",xr="Conv3DBackpropFilterV2",kr="Conv3DBackpropInputV2",wr="Cos",Sr="Cosh",Ir="Cumprod",Nr="Cumsum",Tr="CropAndResize",Cr="DenseBincount",Er="DepthToSpace",_r="DepthwiseConv2dNative",Ar="DepthwiseConv2dNativeBackpropFilter",Rr="DepthwiseConv2dNativeBackpropInput",Or="Diag",Dr="Dilation2D",Pr="Dilation2DBackpropInput",Fr="Dilation2DBackpropFilter",Mr="RealDiv",Lr="Einsum",$r="Elu",jr="EluGrad",zr="Erf",Br="Equal",Ur="Exp",Vr="ExpandDims",Wr="Expm1",Gr="FFT",Zr="Fill",Hr="FlipLeftRight",qr="Floor",Kr="FloorDiv",Xr="FusedBatchNorm",Jr="GatherV2",Yr="GatherNd",Qr="Greater",ea="GreaterEqual",ta="Identity",na="IFFT",ra="Imag",aa="IsFinite",ia="IsInf",oa="IsNan",sa="LeakyRelu",ua="Less",ca="LessEqual",la="LinSpace",da="Log",fa="Log1p",ha="LogicalAnd",pa="LogicalNot",va="LogicalOr",ma="LRN",ga="LRNGrad",ya="Max",ba="Maximum",xa="MaxPool",ka="MaxPoolGrad",wa="MaxPool3D",Sa="MaxPool3DGrad",Ia="MaxPoolWithArgmax",Na="Mean",Ta="Min",Ca="Minimum",Ea="MirrorPad",_a="Mod",Aa="Multinomial",Ra="Multiply",Oa="Neg",Da="NotEqual",Pa="NonMaxSuppressionV3",Fa="NonMaxSuppressionV4",Ma="NonMaxSuppressionV5",La="OnesLike",$a="OneHot",ja="Pack",za="PadV2",Ba="Pow",Ua="Prelu",Va="Prod",Wa="RaggedGather",Ga="RaggedRange",Za="RaggedTensorToTensor",Ha="Range",qa="Real",Ka="Reciprocal",Xa="Relu",Ja="Reshape",Ya="ResizeNearestNeighbor",Qa="ResizeNearestNeighborGrad",ei="ResizeBilinear",ti="ResizeBilinearGrad",ni="Relu6",ri="Reverse",ai="Round",ii="Rsqrt",oi="ScatterNd",si="TensorScatterUpdate",ui="SearchSorted",ci="Select",li="Selu",di="Slice",fi="Sin",hi="Sinh",pi="Sign",vi="Sigmoid",mi="Softplus",gi="Sqrt",yi="Sum",bi="SpaceToBatchND",xi="SplitV",ki="Softmax",wi="SparseFillEmptyRows",Si="SparseReshape",Ii="SparseSegmentMean",Ni="SparseSegmentSum",Ti="SparseToDense",Ci="SquaredDifference",Ei="Square",_i="StaticRegexReplace",Ai="StridedSlice",Ri="StringNGrams",Oi="StringSplit",Di="StringToHashBucketFast",Pi="Sub",Fi="Tan",Mi="Tanh",Li="Tile",$i="TopK",ji="Transform",zi="Transpose",Bi="Unique",Ui="Unpack",Vi="UnsortedSegmentSum",Wi="ZerosLike",Gi="Step",Zi="FromPixels",Hi="RotateWithOffset",qi="_FusedMatMul",Ki="FusedConv2D",Xi="FusedDepthwiseConv2D";function Ji(){var e;Ln().getBool("IS_TEST")||Ln().getBool("PROD")||(e=console).warn.apply(e,arguments)}var Yi=Bn("kernelRegistry",(function(){return new Map})),Qi=Bn("gradRegistry",(function(){return new Map}));function eo(e,t){var n=io(e,t);return Yi.get(n)}function to(e){return Qi.get(e)}function no(e){for(var t=Yi.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=(0,C.Z)(i,2),s=o[0],u=o[1],c=s.split("_");(0,C.Z)(c,1)[0]===e&&n.push(u)}return n}function ro(e){var t=e.kernelName,n=e.backendName,r=io(t,n);Yi.has(r)&&Ji("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),Yi.set(r,e)}function ao(e){var t=e.kernelName;Qi.has(t)&&Ln().getBool("DEBUG")&&Ji("Overriding the gradient for '".concat(t,"'")),Qi.set(t,e)}function io(e,t){return"".concat(t,"_").concat(e)}function oo(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var so=n(8987),uo=n.n(so)()||so;function co(e){return uo.fromString(e,!0,16)}var lo=co("c3a5c85c97cb3127"),fo=co("b492b66fbe98f273"),ho=co("9ae16a3b2f90404f");function po(e){return e.xor(e.shru(47))}function vo(e,t,n){var r=e.slice(t,t+n);return uo.fromBytes(Array.from(r),!0,!0)}function mo(e,t){return vo(e,t,8)}function go(e,t){return vo(e,t,4)}function yo(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function bo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:co("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function xo(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=yo(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add(yo(a,44)),[a.add(r),i.add(o)]}(mo(e,t),mo(e,t+8),mo(e,t+16),mo(e,t+24),n,r)}function ko(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=ho.add(2*t),r=mo(e,0).add(ho),a=mo(e,t-8),i=yo(a,37).mul(n).add(r),o=yo(r,25).add(a).mul(n);return bo(i,o,n)}if(t>=4){var s=ho.add(2*t),u=go(e,0);return bo(u.shl(3).add(t),go(e,t-4),s)}if(t>0){var c=e[0],l=e[t>>1],d=e[t-1],f=c+(l<<8),h=t+(d<<2);return po(ho.mul(f).xor(lo.mul(h))).mul(ho)}return ho}function wo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=ho.add(2*t),r=mo(e,0).mul(fo),a=mo(e,8),i=mo(e,t-8).mul(n),o=mo(e,t-16).mul(ho);return bo(yo(r.add(a),43).add(yo(i,30)).add(o),r.add(yo(a.add(ho),18)).add(i),n)}function So(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=ho.add(2*t),r=mo(e,0).mul(ho),a=mo(e,8),i=mo(e,t-8).mul(n),o=mo(e,t-16).mul(ho),s=yo(r.add(a),43).add(yo(i,30)).add(o),u=bo(s,r.add(yo(a.add(ho),18)).add(i),n),c=mo(e,16).mul(n),l=mo(e,24),d=s.add(mo(e,t-32)).mul(n),f=u.add(mo(e,t-24)).mul(n);return bo(yo(c.add(l),43).add(yo(d,30)).add(f),c.add(yo(l.add(r),18)).add(d),n)}function Io(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=uo.fromNumber(81,!0);if(t<=32)return t<=16?ko(e,t):wo(e,t);if(t<=64)return So(e,t);var r=n,a=n.mul(fo).add(113),i=po(a.mul(ho).add(113)).mul(ho),o=[uo.UZERO,uo.UZERO],s=[uo.UZERO,uo.UZERO];r=r.mul(ho).add(mo(e,0));var u=0,c=64*(t-1>>6),l=c+(t-1&63)-63;do{r=yo(r.add(a).add(o[0]).add(mo(e,u+8)),37).mul(fo),a=yo(a.add(o[1]).add(mo(e,u+48)),42).mul(fo),r=r.xor(s[1]),a=a.add(o[0]).add(mo(e,u+40)),i=yo(i.add(s[0]),33).mul(fo),o=xo(e,u,o[1].mul(fo),r.add(s[0])),s=xo(e,u+32,i.add(s[1]),a.add(mo(e,u+16)));var d=[r,i];i=d[0],r=d[1],u+=64}while(u!==c);var f=fo.add(i.and(255).shl(1));u=l,s[0]=s[0].add(t-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=yo(r.add(a).add(o[0]).add(mo(e,u+8)),37).mul(f),a=yo(a.add(o[1]).add(mo(e,u+48)),42).mul(f),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(mo(e,u+40))),i=yo(i.add(s[0]),33).mul(f),o=xo(e,u,o[1].mul(f),r.add(s[0])),s=xo(e,u+32,i.add(s[1]),a.add(mo(e,u+16)));var h=[r,i];return i=h[0],r=h[1],bo(bo(o[0],s[0],f).add(po(a).mul(lo)).add(i),bo(o[1],s[1],f).add(r),f)}function No(e,t){return"string"===t?Eo(e):To([e],t)}function To(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Ro(e)),Ln().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function Co(){return Ln().platform.now()}function Eo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Ln().platform.encode(e,t)}function _o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Ln().platform.decode(e,t)}function Ao(e){return null!=Ln().platform.isTypedArray?Ln().platform.isTypedArray(e):oo(e)}function Ro(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"===typeof e||"number"===typeof e||"string"===typeof e||On(e)||null==e||Ao(e)&&n)t.push(e);else if(Array.isArray(e)||Ao(e))for(var r=0;r<e.length;++r)Ro(e[r],t,n);else{for(var a=-1,i=0,o=Object.keys(e);i<o.length;i++){var s=o[i];/^([1-9]+[0-9]*|0)$/.test(s)&&(a=Math.max(a,Number(s)))}for(var u=0;u<=a;u++)Ro(e[u],t,n)}return t}var Oo=function(){function e(t,n){Vt(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new Do)}return Zt(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=Co();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();var s,u=Ut(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(d){u.e(d)}finally{u.f()}a=Promise.resolve({kernelMs:Co()-o})}if(Ln().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var c=function(t){var n=r[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},l=0;l<r.length;l++)c(l);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var Do=function(){function e(){Vt(this,e)}return Zt(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?cn("".concat(r,"ms"),9):r.error,s=cn(e,25),u=t.rank,c=t.size,l=cn(t.shape.toString(),14),d="";for(var f in a){var h=a[f];if(null!=h){var p=h.shape||t.shape,v=p.length;d+="".concat(f,": ").concat(v,"D ").concat(v>0?p:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(d,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function Po(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var c in u){for(var l=u[c],d=!1,f=0;f<t.length;f++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),d=!0,a[s.id]=!0;break}if(d)break}}var h={};h[n.id]=!0;for(var p={},v=e.length-1;v>=0;v--)for(var m=e[v],g=m.inputs,y=0;y<m.outputs.length;y++)if(h[m.outputs[y].id]){for(var b in g)h[g[b].id]=!0,p[m.id]=!0;break}for(var x=[],k=0;k<e.length;k++){var w=e[k];if(a[w.id]&&p[w.id]){var S={};for(var I in w.inputs){var N=w.inputs[I];r[N.id]&&(S[I]=N)}var T=Object.assign({},w);T.inputs=S,T.outputs=w.outputs,x.push(T)}}return x}function Fo(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var s=i.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!on(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var u=e[o.id];e[o.id]=r(u,a),u.dispose()}};for(var c in i.inputs)u(c)},i=t.length-1;i>=0;i--)a(i)}function Mo(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ze(e,t)}function Lo(e){return Lo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lo(e)}function $o(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var jo=n(1002);function zo(e,t){if(t&&("object"===(0,jo.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return je(e)}function Bo(e){var t=$o();return function(){var n,r=Lo(e);if(t){var a=Lo(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return zo(this,n)}}function Uo(e,t,n,r){var a=Sn(t),i=function(e,t,n,r){var a=an(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?Zo(e):e;if(s>1)for(var c=0;c<a/i;c++)for(var l=c*i,d=0;d<i;d++)o[d]=Math.max(o[d],Vo(u[l+d],0,n).length);return o}(e,t,n,a),o=t.length,s=Go(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function Vo(e,t,n){return cn(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):yn(e)?"'".concat(e,"'"):"bool"===n?Wo(e):parseFloat(e.toFixed(7)).toString(),t)}function Wo(e){return 0===e?"false":"true"}function Go(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){var c=Zo(e);return[Vo(c[0],0,n)]}return"bool"===n?[Wo(e[0])]:[e[0].toString()]}if(1===u){if(s>20){var l=3*o,d=Array.from(e.slice(0,l)),f=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(d=Zo(d),f=Zo(f)),["["+d.map((function(e,t){return Vo(e,a[t],n)})).join(", ")+", ..., "+f.map((function(e,t){return Vo(e,a[s-3+t],n)})).join(", ")+"]"]}var h="complex64"===n?Zo(e):Array.from(e);return["["+h.map((function(e,t){return Vo(e,a[t],n)})).join(", ")+"]"]}var p=t.slice(1),v=r.slice(1),m=r[0]*o,g=[];if(s>20){for(var y=0;y<3;y++){var b=y*m,x=b+m;g.push.apply(g,(0,Le.Z)(Go(e.slice(b,x),p,n,v,a,!1)))}g.push("...");for(var k=s-3;k<s;k++){var w=k*m,S=w+m;g.push.apply(g,(0,Le.Z)(Go(e.slice(w,S),p,n,v,a,k===s-1)))}}else for(var I=0;I<s;I++){var N=I*m,T=N+m;g.push.apply(g,(0,Le.Z)(Go(e.slice(N,T),p,n,v,a,I===s-1)))}var C=2===u?",":"";g[0]="["+(s>0?g[0]+C:"");for(var E=1;E<g.length-1;E++)g[E]=" "+g[E]+C;for(var _=",\n",A=2;A<u;A++)_+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(i?"":_),g}function Zo(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Ho=function(){function e(t,n,r){var a=this;if(Vt(this,e),this.dtype=n,this.shape=t.slice(),this.size=an(t),null!=r){var i=r.length;tn(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||vn(n,this.size),this.strides=Sn(t)}return Zt(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),tn(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return qo().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),qo=null,Ko=null;var Xo=function(){function e(t,n,r,a){Vt(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=an(t),this.strides=Sn(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return Zt(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Ko.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return Ko.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Nn(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return Nn(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=me(ye().mark((function e(){var t,n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=qo().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return _o(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),qo().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=qo().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return _o(e)}))}catch(Kte){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,qo().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(qo().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ko.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),Ko.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return Uo(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),Ko.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),qo().makeVariable(this,e,t,n)}}]),e}();function Jo(){return Bn("Tensor",(function(){return Xo}))}Object.defineProperty(Xo,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),Jo();var Yo,Qo,es,ts,ns,rs=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a,i){var o;return Vt(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return Zt(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!on(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));qo().disposeTensor(this),this.dataId=e.dataId,qo().incRef(this,null)}},{key:"dispose",value:function(){qo().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(Xo);Object.defineProperty(rs,Symbol.hasInstance,{value:function(e){return e instanceof Xo&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Yo||(Yo={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Qo||(Qo={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(es||(es={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(ts||(ts={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(ns||(ns={}));var as={float32:ts,int32:Qo,bool:es,complex64:ns};function is(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return as[e][t]}function os(e){return is(e,"int32")}function ss(e){return null!=e&&"object"===typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function us(e){return"undefined"!==typeof GPUBuffer&&null!=e&&"object"===typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function cs(e,t){if(e.dtype===t.dtype)return[e,t];var n=is(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function ls(e,t){tn(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function ds(e,t){return t.some((function(t){return t.id===e.id}))}function fs(e){var t=[];return hs(e,t,new Set),t}function hs(e,t,n){if(null!=e)if(e instanceof Xo)t.push(e);else if(r=e,Array.isArray(r)||"object"===typeof r){var r,a=e;for(var i in a){var o=a[i];n.has(o)||(n.add(o),hs(o,t,n))}}}function ps(e){return null!=e.kernelName}var vs=function(){function e(){Vt(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return Zt(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),ms=function(){function e(t){Vt(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new vs}return Zt(e,[{key:"ready",value:function(){var e=me(ye().mark((function e(){var t,n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(Ji("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Oo(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;no(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;no(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof qt||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,Ji("Initialization of backend ".concat(e," failed")),Ji(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return Ji("Initialization of backend ".concat(e," failed")),Ji(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=xs.runKernel(ta,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return xs.runKernel(lr,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=eo(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=ps(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(ps(e)){var l=e.kernelName,d=e.inputs,f=e.attrs;null==this.backendName&&this.backend;var h=eo(l,this.backendName);tn(null!=h,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=h.kernelFunc({inputs:d,attrs:f,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){return null!=e.rank?e:a.makeTensorFromTensorInfo(e)}));if(o){var s=a.getTensorsForGradient(l,d,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var p=e.forwardFunc,v=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return p(a.backend,v)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var m,g=e.inputs,y=e.attrs,b=ps(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(m=a.profiler.profileKernel(c,g,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(m),t=m.outputs):t=n()})),o&&this.addTapeNode(c,g,t,b,i,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(g).map((function(e){return null!=g[e]?g[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=to(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(tn(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&yn(e[0])&&(a=e.map((function(e){return Eo(e)})));var i=r.write(a,t,n),o=new Xo(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,i=new Xo(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new rs(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*gn(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof rs||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*gn(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=me(ye().mark((function e(t){var n,r,a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,(0,Le.Z)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=Ut(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((i=a.n()).done){e.next=24;break}return o=i.value,e.next=18,o.kernelTimeMs;case 18:return o.kernelTimeMs=e.sent,e.next=21,o.extraInfo;case 21:o.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=to(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=Cn(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=fs(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(tn(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));tn(i instanceof Xo,(function(){return"The result y returned by f() must be a tensor."}));var o=Po(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?gs(i.shape):n,Fo(e,o,(function(e){return r.tidy(e)}),ks);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=Ut(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return tn(kn(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;tn(r.every((function(e){return e instanceof Xo})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));var s=function(t,n){return tn((i=e.apply(void 0,[].concat(r,[n]))).value instanceof Xo,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),tn(kn(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},u=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];tn(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),tn(a.every((function(e){return e instanceof Xo})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Co(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=Co()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new vs,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function gs(e){var t=Tn(an(e),"float32");return xs.makeTensor(t,e,"float32")}function ys(){var e=zn();if(null==e._tfengine){var t=new Pn(e);e._tfengine=new ms(t)}return function(e){jn=e}(e._tfengine.ENV),function(e){qo=e}((function(){return e._tfengine})),e._tfengine}ms.nextTensorId=0,ms.nextVariableId=0;var bs,xs=ys();function ks(e,t){var n={a:e,b:t};return xs.runKernel(Gn,n)}function ws(e){if(void 0!==bs)return bs;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function Ss(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var Is=Ln();function Ns(e,t){var n=e;if(Ao(e))return"string"===t?[]:[e.length];if(ss(e)){var r=e.channels||"RGBA";return[e.height,e.width*r.length]}if(us(e))return[e.buffer.size/(null==t?4:gn(t))];if(!Array.isArray(e))return[];for(var a=[];Array.isArray(n)||Ao(n)&&"string"!==t;)a.push(n.length),n=n[0];return Array.isArray(e)&&Ln().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Ts(e,a,[]),a}function Ts(e,t,n){if(n=n||[],Array.isArray(e)||Ao(e)){tn(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),tn(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)Ts(e[a],r,n.concat(a))}else tn(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function Cs(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function Es(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof Xo)return Cs(r,e.dtype,t,n),e;var a=xn(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Cs(r,a,t,n),null==e||!Ao(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=Ns(e,a);Ao(e)||Array.isArray(e)||(e=[e]);var s=!0,u="string"!==a?To(e,a):Ro(e,[],s);return xs.makeTensor(u,o,a)}function _s(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return Es(e,"".concat(t,"[").concat(a,"]"),n,r)}))}Is.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Is.registerFlag("IS_BROWSER",(function(){return Ss()})),Is.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),Is.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Is.registerFlag("IS_SAFARI",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)})),Is.registerFlag("PROD",(function(){return!1})),Is.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Is.getBool("DEBUG")})),Is.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Is.registerFlag("IS_TEST",(function(){return!1})),Is.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return Is.getBool("DEBUG")})),Is.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),Is.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",(function(){return!1})),Is.registerFlag("USE_SETTIMEOUTCUSTOM",(function(){return!1}));var As="__op";function Rs(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=As;var a=function(){xs.startScope(n);try{var e=r.apply(void 0,arguments);return On(e)&&console.error("Cannot return a Promise inside of tidy."),xs.endScope(e),e}catch(t){throw xs.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var Os=Rs({complex_:function(e,t){var n=Es(e,"real","complex"),r=Es(t,"imag","complex");nn(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return xs.runKernel(hr,a)}});function Ds(e,t,n,r){if(null==r)r=xn(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(us(e)||ss(e)){if("float32"!==r&&"int32"!==r)throw new Error("Creating tensor from GPU data only supports "+"'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return xs.backend.createTensorFromGPUData(e,t||n,r)}if(!Ao(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){_n(t);var a=an(t),i=an(n);tn(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==an(t.slice(o));tn(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return Ao(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?To(e,r):Ro(e,[],!0),xs.makeTensor(e,t,r)}function Ps(e,t,n){return Ds(e,t,Ns(e,n),n)}var Fs={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function Ms(e,t){return Ls.apply(this,arguments)}function Ls(){return Ls=me(ye().mark((function e(t,n){var r,a,i,o,s,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),o=function(e){var o=i[e],s=Array.isArray(t)?t[e].tensor:t[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(s.dtype));var u={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){var c=new Promise(function(){var e=me(ye().mark((function e(t){var n,r,a,i,o,u,c;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)u=n[o],c=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(c,i),i+=4,a.set(u,i),i+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(c)}else a.push(s.data());null!=n&&(u.group=n),r.push(u)},s=0;s<i.length;++s)o(s);return e.next=7,Promise.all(a);case 7:return u=e.sent,e.abrupt("return",{data:js(u),specs:r});case 9:case"end":return e.stop()}}),e)}))),Ls.apply(this,arguments)}function $s(e,t){var n,r,a={},i=0,o=Ut(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.name,c=s.dtype,l=s.shape,d=an(l),f=void 0;if("quantization"in s){var h=s.quantization;if("uint8"===h.dtype||"uint16"===h.dtype){if(!("min"in h)||!("scale"in h))throw new Error("Weight ".concat(s.name," with quantization ").concat(h.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==h.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(h.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(h.dtype," ")+"which only supports weights of type float32 not ".concat(c,"."))}var p=Fs[h.dtype],v=e.slice(i,i+d*p),m="uint8"===h.dtype?new Uint8Array(v):new Uint16Array(v);if("float32"===c)if("uint8"===h.dtype||"uint16"===h.dtype){f=new Float32Array(m.length);for(var g=0;g<m.length;g++){var y=m[g];f[g]=y*h.scale+h.min}}else{if("float16"!==h.dtype)throw new Error("Unsupported quantization type ".concat(h.dtype," ")+"for weight type float32.");void 0===n&&(n=Ys()),f=n(m)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));if("uint8"!==h.dtype&&"uint16"!==h.dtype)throw new Error("Unsupported quantization type ".concat(h.dtype," ")+"for weight type int32.");f=new Int32Array(m.length);for(var b=0;b<m.length;b++){var x=m[b];f[b]=Math.round(x*h.scale+h.min)}}i+=d*p}else if("string"===c){var k=an(s.shape);f=[];for(var w=0;w<k;w++){var S=new Uint32Array(e.slice(i,i+4))[0];i+=4;var I=new Uint8Array(e.slice(i,i+S));f.push(I),i+=S}}else{var N=Fs[c],T=e.slice(i,i+d*N);if("float32"===c)f=new Float32Array(T);else if("int32"===c)f=new Int32Array(T);else if("bool"===c)f=new Uint8Array(T);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));f=new Float32Array(T);for(var C=new Float32Array(f.length/2),E=new Float32Array(f.length/2),_=0;_<C.length;_++)C[_]=f[2*_],E[_]=f[2*_+1];var A=Ps(C,l,"float32"),R=Ps(E,l,"float32");a[u]=Os(A,R),A.dispose(),R.dispose()}i+=d*N}"complex64"!==c&&(a[u]=Ps(f,l,c))}}catch(O){o.e(O)}finally{o.f()}return a}function js(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var zs="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function Bs(e){return zs?Buffer.byteLength(e):new Blob([e]).size}function Us(e){if(zs)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function Vs(e){if(zs){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function Ws(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Gs(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Zs(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function Hs(e,t,n){var r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}function qs(e,t){return Ks.apply(this,arguments)}function Ks(){return Ks=me(ye().mark((function e(t,n){var r,a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t.weightsManifest){e.next=7;break}return e.next=3,n(t.weightsManifest);case 3:i=e.sent,o=(0,C.Z)(i,2),r=o[0],a=o[1];case 7:return e.abrupt("return",Hs(t,r,a));case 8:case"end":return e.stop()}}),e)}))),Ks.apply(this,arguments)}function Xs(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Bs(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Bs(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function Js(e){var t,n=[],r=Ut(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push.apply(n,(0,Le.Z)(a.weights))}}catch(i){r.e(i)}finally{r.f()}return n}function Ys(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=u}return new Float32Array(a)}}var Qs=function(){function e(){Vt(this,e),this.saveRouters=[],this.loadRouters=[]}return Zt(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),eu=function(e){return Qs.registerSaveRouter(e)},tu=function(e){return Qs.registerLoadRouter(e)},nu=function(e){return Qs.getSaveHandlers(e)},ru=function(e,t){return Qs.getLoadHandlers(e,t)},au="tensorflowjs",iu="models_store",ou="model_info_store";function su(){if(!Ln().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function uu(e){var t=e.result;t.createObjectStore(iu,{keyPath:"modelPath"}),t.createObjectStore(ou,{keyPath:"modelPath"})}var cu=function(){function e(t){if(Vt(this,e),this.indexedDB=su(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return Zt(e,[{key:"save",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(au,1);a.onupgradeneeded=function(){return uu(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(iu,"readonly"),s=o.objectStore(iu).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,c,l=Xs(t),d=i.transaction(ou,"readwrite"),f=d.objectStore(ou);try{u=f.put({modelPath:n.modelPath,modelArtifactsInfo:l})}catch(h){return r(h)}u.onsuccess=function(){var a,o=(c=i.transaction(iu,"readwrite")).objectStore(iu);try{a=o.put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l})}catch(h){return r(h)}a.onsuccess=function(){return e({modelArtifactsInfo:l})},a.onerror=function(e){var t=(f=d.objectStore(ou)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},u.onerror=function(e){return i.close(),r(u.error)},d.oncomplete=function(){null==c?i.close():c.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();cu.URL_SCHEME="indexeddb://";var lu=function(e){return Ln().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(cu.URL_SCHEME)?(t=e.slice(cu.URL_SCHEME.length),new cu(t)):null;var t};Qs.registerSaveRouter(lu),Qs.registerLoadRouter(lu);var du=function(){function e(){Vt(this,e),this.indexedDB=su()}return Zt(e,[{key:"listModels",value:function(){var e=me(ye().mark((function e(){var t=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(au,1);r.onupgradeneeded=function(){return uu(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(ou,"readonly"),i=a.objectStore(ou).getAll();i.onsuccess=function(){var t,n={},r=Ut(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=me(ye().mark((function e(t){var n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(cu.URL_SCHEME)?r.slice(cu.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(au,1);a.onupgradeneeded=function(){return uu(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(ou,"readwrite"),s=o.objectStore(ou),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction(iu,"readwrite")).objectStore(iu).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),fu="/",hu="tensorflowjs_models",pu="info",vu="model_topology",mu="weight_specs",gu="weight_data",yu="model_metadata";function bu(e){return{info:[hu,e,pu].join(fu),topology:[hu,e,vu].join(fu),weightSpecs:[hu,e,mu].join(fu),weightData:[hu,e,gu].join(fu),modelMetadata:[hu,e,yu].join(fu)}}function xu(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function ku(e){var t=e.split(fu);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(fu)}var wu=function(){function e(t){if(Vt(this,e),!Ln().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=bu(this.modelPath)}return Zt(e,[{key:"save",value:function(){var e=me(ye().mark((function e(t){var n,r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=Xs(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Us(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,initializerSignature:null!=t.initializerSignature?t.initializerSignature:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),xu(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=me(ye().mark((function e(){var t,n,r,a,i,o,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.initializerSignature&&(n.initializerSignature=o.initializerSignature),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=Vs(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();wu.URL_SCHEME="localstorage://";var Su=function(e){return Ln().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(wu.URL_SCHEME)?(t=e.slice(wu.URL_SCHEME.length),new wu(t)):null;var t};Qs.registerSaveRouter(Su),Qs.registerLoadRouter(Su);var Iu=function(){function e(){Vt(this,e),tn(Ln().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),tn("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return Zt(e,[{key:"listModels",value:function(){var e=me(ye().mark((function e(){var t,n,r,a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=hu+fu,r=fu+pu,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=ku(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(wu.URL_SCHEME)?a.slice(wu.URL_SCHEME.length):a,n=bu(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),xu(n),e.abrupt("return",r);case 7:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Nu="://",Tu=function(){function e(){Vt(this,e),this.managers={}}return Zt(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){tn(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(Nu)&&(t=t.slice(0,t.indexOf(Nu))),tn(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();tn(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(t){var n=e.getInstance().managers[t];if(null==n)throw new Error("Cannot find model manager for scheme '".concat(t,"'"));return n}},{key:"getSchemes",value:function(){return Object.keys(e.getInstance().managers)}}]),e}();function Cu(e){if(-1===e.indexOf(Nu))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+"".concat(Tu.getSchemes().join(",")));return{scheme:e.split(Nu)[0],path:e.split(Nu)[1]}}function Eu(e,t){return _u.apply(this,arguments)}function _u(){return _u=me(ye().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,h=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>2&&void 0!==h[2]&&h[2],tn(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),tn((a=Qs.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),tn(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"load handlers for source URL ".concat(t,".")})),i=a[0],tn((o=Qs.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination "+"URL ".concat(n,".")})),tn(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") ")+"save handlers for destination URL ".concat(n,".")})),s=o[0],u=Cu(t).scheme,c=Cu(t).path,l=u===Cu(t).scheme,e.next=15,i.load();case 15:if(d=e.sent,!r||!l){e.next=19;break}return e.next=19,Tu.getManager(u).removeModel(c);case 19:return e.next=21,s.save(d);case 21:if(f=e.sent,!r||l){e.next=25;break}return e.next=25,Tu.getManager(u).removeModel(c);case 25:return e.abrupt("return",f.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)}))),_u.apply(this,arguments)}function Au(){return Ru.apply(this,arguments)}function Ru(){return(Ru=me(ye().mark((function e(){var t,n,r,a,i,o,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Tu.getSchemes(),n={},r=Ut(t),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=9,Tu.getManager(i).listModels();case 9:for(s in o=e.sent)n[i+Nu+s]=o[s];case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})))).apply(this,arguments)}function Ou(e){return Du.apply(this,arguments)}function Du(){return(Du=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Cu(t),r=Tu.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pu(e,t){return Fu.apply(this,arguments)}function Fu(){return(Fu=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",Eu(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mu(e,t){return Lu.apply(this,arguments)}function Lu(){return(Lu=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",Eu(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $u=function(){function e(){Vt(this,e),this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}return Zt(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}},{key:"setTimeoutCustom",value:function(e,t){var n=this;"undefined"!==typeof window&&Ln().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout((function(){window.postMessage({name:n.messageName,index:n.functionRefs.length-1},"*")}),t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",(function(e){e.source===window&&e.data.name===n.messageName&&(e.stopPropagation(),(0,n.functionRefs[e.data.index])(),n.handledMessageCount++,n.handledMessageCount===n.functionRefs.length&&(n.functionRefs=[],n.handledMessageCount=0))}),!0))):setTimeout(e,t)}},{key:"isTypedArray",value:function(e){return oo(e)}}]),e}();if(Ln().get("IS_BROWSER")){Ln().setPlatform("browser",new $u);try{Tu.registerManager(wu.URL_SCHEME,new Iu)}catch(Rme){}try{Tu.registerManager(cu.URL_SCHEME,new du)}catch(Rme){}}var ju,zu=function(){return n(5410)};var Bu=function(){function e(){Vt(this,e),this.util=n(8628),this.textEncoder=new this.util.TextEncoder}return Zt(e,[{key:"fetch",value:function(e,t){return null!=Ln().global.fetch?Ln().global.fetch(e,t):(null==ju&&(ju=zu()),ju(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}},{key:"isTypedArray",value:function(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}]),e}();function Uu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",_n(e),new Ho(e,t,n)}Ln().get("IS_NODE")&&!Ln().get("IS_BROWSER")&&Ln().setPlatform("node",new Bu);var Vu=Rs({cast_:function(e,t){var n=Es(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return xs.runKernel(lr,r,a)}});var Wu=Rs({clone_:function(e){var t={x:Es(e,"x","clone","string_or_numeric")};return xs.runKernel(ta,t)}});function Gu(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}function Zu(){return xs}function Hu(){return xs.memory()}function qu(e,t){return xs.tidy(e,t)}function Ku(e){fs(e).forEach((function(e){return e.dispose()}))}function Xu(e){return xs.keep(e)}function Ju(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return xs.registerBackend(e,t,n)}ys(),Ko={buffer:Uu,cast:Vu,clone:Wu,print:Gu},function(e){e}((function(e){Ln().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}));var Yu=Rs({add_:function(e,t){var n=Es(e,"a","add"),r=Es(t,"b","add"),a=cs(n,r),i=(0,C.Z)(a,2),o={a:n=i[0],b:r=i[1]};return xs.runKernel(Gn,o)}});var Qu=Rs({floorDiv_:function(e,t){var n=Es(e,"a","floorDiv"),r=Es(t,"b","floorDiv"),a=cs(n,r),i=(0,C.Z)(a,2),o={a:n=i[0],b:r=i[1]};return xs.runKernel(Kr,o)}});var ec=Rs({div_:function(e,t){var n=Es(e,"a","div"),r=Es(t,"b","div"),a=cs(n,r),i=(0,C.Z)(a,2);if(n=i[0],r=i[1],"int32"===n.dtype&&"int32"===r.dtype)return Qu(n,r);var o={a:n,b:r};return xs.runKernel(Mr,o,{})}});var tc=Rs({mul_:function(e,t){var n=Es(e,"a","mul"),r=Es(t,"b","mul"),a=cs(n,r),i=(0,C.Z)(a,2),o={a:n=i[0],b:r=i[1]};return xs.runKernel(Ra,o)}});var nc=Rs({sqrt_:function(e){var t={x:Es(e,"x","sqrt","float32")};return xs.runKernel(gi,t)}});var rc=Rs({square_:function(e){var t=Es(e,"x","square");return xs.runKernel("Square",{x:t},{})}});var ac=Rs({zerosLike_:function(e){var t={x:Es(e,"x","zerosLike")};return xs.runKernel(Wi,t)}});function ic(e){return xs.customGrad(e)}function oc(e,t){if((Ao(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Ao(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ds(e,[],[],t)}var sc=function(){function e(){Vt(this,e)}return Zt(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),uc=function(){function e(){Vt(this,e),this.classNameMap={}}return Zt(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function cc(e){tn(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),tn("string"===typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),tn(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),uc.register(e)}var lc=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return Ku(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return function(e,t){tn(kn(e),(function(){return"The f passed in variableGrads(f) must be a function"})),tn(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof rs})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],xs.registeredVariables)t.push(xs.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;t=t.filter((function(e){return e.trainable})),tn(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to "+"be trainable, but none of the ".concat(i," variables is ")+"trainable."}));var o=xs.gradients(e,t,null,!0),s=o.value,u=o.grads;tn(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),tn(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it "+"returned a rank-".concat(s.rank," tensor")}));var c={};return t.forEach((function(e,t){null!=u[t]&&(c[e.name]=u[t])})),null!=a&&a.forEach((function(e){return c[e.name]=null})),{value:s,grads:c}}(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&Ku(this.iterations_)}},{key:"saveIterations",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:oc(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+"".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(sc);Object.defineProperty(lc,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var dc=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Vt(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=xs.backend.epsilon()),a}return Zt(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=xs.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:qu((function(){return ac(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:qu((function(){return ac(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;qu((function(){var e=Yu(tc(o,t.rho),tc(rc(i),1-t.rho)),n=tc(ec(nc(Yu(s,t.epsilon)),nc(Yu(o,t.epsilon))),i),r=Yu(tc(s,t.rho),tc(rc(n),1-t.rho));o.assign(e),s.assign(r);var u=Yu(tc(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(Ku(this.accumulatedGrads.map((function(e){return e.variable}))),Ku(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,Le.Z)(this.accumulatedGrads),(0,Le.Z)(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"className",get:function(){return"Adadelta"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(lc);function fc(e,t,n){_n(e);var r={shape:e,value:t,dtype:n=n||xn(t)};return xs.runKernel(Zr,{},r)}var hc=function(e){Mo(n,e);var t=Bo(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return Vt(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return Zt(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=xs.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:qu((function(){return fc(a.shape,t.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;qu((function(){var e=Yu(o,rc(i));o.assign(e);var n=Yu(tc(ec(i,nc(Yu(e,xs.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&Ku(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"className",get:function(){return"Adagrad"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(lc);var pc=Rs({pow_:function(e,t){var n=Es(e,"base","pow"),r=Es(t,"exp","pow"),a=cs(n,r),i=(0,C.Z)(a,2),o={a:n=i[0],b:r=i[1]};return xs.runKernel(Ba,o)}});var vc=Rs({sub_:function(e,t){var n=Es(e,"a","sub"),r=Es(t,"b","sub"),a=cs(n,r),i=(0,C.Z)(a,2),o={a:n=i[0],b:r=i[1]};return xs.runKernel(Pi,o)}}),mc=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Vt(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],qu((function(){i.accBeta1=oc(r).variable(),i.accBeta2=oc(a).variable()})),null==o&&(i.epsilon=xs.backend.epsilon()),i}return Zt(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);qu((function(){var r=vc(1,t.accBeta1),a=vc(1,t.accBeta2);n.forEach((function(n,i){var o=xs.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:qu((function(){return ac(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:qu((function(){return ac(o).variable(false)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,l=Yu(tc(u,t.beta1),tc(s,1-t.beta1)),d=Yu(tc(c,t.beta2),tc(rc(s),1-t.beta2)),f=ec(l,r),h=ec(d,a);u.assign(l),c.assign(d);var p=Yu(tc(ec(f,Yu(nc(h),t.epsilon)),-t.learningRate),o);o.assign(p)}})),t.accBeta1.assign(tc(t.accBeta1,t.beta1)),t.accBeta2.assign(tc(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Ku(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&Ku(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,Le.Z)(this.accumulatedFirstMoment),(0,Le.Z)(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=me(ye().mark((function e(t){var n,r=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,qu((function(){r.accBeta1.assign(pc(r.beta1,r.iterations_+1)),r.accBeta2.assign(pc(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"className",get:function(){return"Adam"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(lc);var gc=Rs({abs_:function(e){var t=Es(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return xs.runKernel(pr,n)}var r={x:t};return xs.runKernel(Un,r)}});function yc(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function bc(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function xc(e,t){for(var n=Math.max(e.length,t.length),r=new Array(n),a=0;a<n;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)r[n-a-1]=o;else if(1===o)r[n-a-1]=i;else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}r[n-a-1]=i}}return r}var kc=Rs({maximum_:function(e,t){var n=Es(e,"a","maximum"),r=Es(t,"b","maximum"),a=cs(n,r),i=(0,C.Z)(a,2);n=i[0],r=i[1],"bool"===n.dtype&&(n=Vu(n,"int32"),r=Vu(r,"int32")),xc(n.shape,r.shape);var o={a:n,b:r};return xs.runKernel(ba,o)}}),wc=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return Vt(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],qu((function(){i.iteration=oc(0).variable(),i.accBeta1=oc(r).variable()})),null==o&&(i.epsilon=xs.backend.epsilon()),i}return Zt(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);qu((function(){var r=vc(1,t.accBeta1),a=ec(-t.learningRate,Yu(tc(t.iteration,t.decay),1));n.forEach((function(n,i){var o=xs.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:ac(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:ac(o).variable(false)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,l=Yu(tc(u,t.beta1),tc(s,1-t.beta1)),d=tc(c,t.beta2),f=gc(s),h=kc(d,f);u.assign(l),c.assign(h);var p=Yu(tc(ec(a,r),ec(l,Yu(h,t.epsilon))),o);o.assign(p)}})),t.iteration.assign(Yu(t.iteration,1)),t.accBeta1.assign(tc(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Ku(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&Ku(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"className",get:function(){return"Adamax"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(lc),Sc=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return Zt(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);n.forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=xs.registeredVariables[n];qu((function(){var e=Yu(tc(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Xu(oc(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"className",get:function(){return"SGD"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(lc),Ic=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Vt(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=oc(a.momentum),a}return Zt(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=xs.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:qu((function(){return ac(a).variable(false)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&qu((function(){var e,n=Yu(tc(t.m,i),o);e=t.useNesterov?Yu(tc(t.c,Yu(o,tc(n,t.m))),a):Yu(tc(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&Ku(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"className",get:function(){return"Momentum"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(Sc),Nc=function(e){Mo(n,e);var t=Bo(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Vt(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=i,r.epsilon=o,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==o&&(r.epsilon=xs.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return r}return Zt(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=xs.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:qu((function(){return ac(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:qu((function(){return ac(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:qu((function(){return ac(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;qu((function(){var e=Yu(tc(s,t.decay),tc(rc(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=Yu(tc(n,t.decay),tc(o,1-t.decay)),c=ec(tc(o,t.learningRate),nc(vc(e,Yu(rc(i),t.epsilon)))),l=Yu(tc(u,t.momentum),c);s.assign(e),n.assign(i),u.assign(l);var d=vc(a,l);a.assign(d)}else{var f=Yu(tc(s,t.decay),tc(rc(o),1-t.decay)),h=Yu(tc(u,t.momentum),ec(tc(o,t.learningRate),nc(Yu(f,t.epsilon))));s.assign(f),u.assign(h);var p=vc(a,h);a.assign(p)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&Ku(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&Ku(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&Ku(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat((0,Le.Z)(this.accumulatedMeanSquares),(0,Le.Z)(this.accumulatedMoments)),this.centered&&t.push.apply(t,(0,Le.Z)(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"className",get:function(){return"RMSProp"}},{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(lc),Tc=[dc,hc,mc,wc,Ic,Nc,Sc];function Cc(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var Ec=function(){function e(t){if(Vt(this,e),!Ln().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return Zt(e,[{key:"save",value:function(){var e=me(ye().mark((function e(t){var n,r,a,i,o,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=Zs(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=15,Cc((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,Cc((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:Xs(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Ec.URL_SCHEME="downloads://";var _c=function(){function e(t){if(Vt(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+"but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return Zt(e,[{key:"load",value:function(){var e=me(ye().mark((function e(){var t=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),i=a.modelTopology;if(null!=i)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var o=qs(a,(function(e){return t.loadWeights(e)}));e(o)}else e({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON "+"from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],i=Ut(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push.apply(r,(0,Le.Z)(o.weights)),a.push.apply(a,(0,Le.Z)(o.paths))}}catch(Rme){i.e(Rme)}finally{i.f()}var s=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(u).then((function(e){return[r,Ws(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return Gs(e.name)})),i={},o=Ut(e);try{for(o.s();!(t=o.n()).done;){t.value.paths.forEach((function(e){var t=Gs(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: "+"'".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));i[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(Rme){o.e(Rme)}finally{o.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest "+"(".concat(r.length,") and the number of weight files provided ")+"(".concat(this.weightsFiles.length,")."));return i}}]),e}();function Ac(e){return new _c(e)}function Rc(e,t,n,r){!function(e){tn(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){tn(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),tn(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),tn(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function Oc(e,t){return Dc.apply(this,arguments)}function Dc(){return(Dc=me(ye().mark((function e(t,n){var r,a,i,o,s,u,c,l,d;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?Ln().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,Rc(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),c=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,Rc(u,n.onProgress,c,l);case 26:e.t1=e.sent;case 27:return d=e.t1,e.abrupt("return",d);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pc(e){return Fc.apply(this,arguments)}function Fc(){return Fc=me(ye().mark((function e(t){var n,r,a,i,o=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2?o[2]:void 0,a=o.length>3?o[3]:void 0,i=Mc((function(e){return Oc(e,{requestInit:a})})),e.abrupt("return",i(t,n,r));case 6:case"end":return e.stop()}}),e)}))),Fc.apply(this,arguments)}function Mc(e){return function(){var t=me(ye().mark((function t(n){var r,a,i,o,s,u,c,l,d,f,h,p,v=arguments;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=v.length>1&&void 0!==v[1]?v[1]:"",a=v.length>2?v[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,c=Fs[r]*an(e.shape),l=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),s[n]=!0)})):l(),u.push(e.name),n+=c}))})),s.every((function(e){return e}))){t.next=10;break}throw c=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+"".concat(c.join(", "),". \n")+"Manifest JSON has weights with names: "+"".concat(u.join(", "),"."));case 10:return l=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),d=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;d.push(t)}))})),t.next=15,e(d);case 15:return f=t.sent,h={},p=0,l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=f[p+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,c=0;c<t;c++){var l=new Uint8Array(f[p+c]);s.set(l,u),u+=l.byteLength}o[e].forEach((function(e){var t=$s(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)h[n]=t[n]})),p+=t})),t.abrupt("return",h);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}Qs.registerSaveRouter((function(e){return Ln().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ec.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new Ec(e)}(e.slice(Ec.URL_SCHEME.length)):null}));var Lc=function(){function e(t,n){if(Vt(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(tn("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=Ln().platform.fetch,tn(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&tn(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return Zt(e,[{key:"save",value:function(){var e=me(ye().mark((function e(t){var n,r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=Zs(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(i=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:Xs(t),responses:[i]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=me(ye().mark((function e(){var t,n,r,a,i,o=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",qs(n,(function(e){return o.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=me(ye().mark((function e(t){var n,r,a,i,o,s,u,c,l,d,f,h,p,v,m,g;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=$c(n),a=(0,C.Z)(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,u=Js(t),c=[],l=[],d=Ut(t);try{for(d.s();!(f=d.n()).done;){h=f.value,p=Ut(h.paths);try{for(p.s();!(v=p.n()).done;)m=v.value,null!=this.weightUrlConverter?l.push(this.weightUrlConverter(m)):c.push(s+m+o)}catch(Rme){p.e(Rme)}finally{p.f()}}}catch(Rme){d.e(Rme)}finally{d.f()}if(!this.weightUrlConverter){e.next=17;break}return e.t0=c.push,e.t1=c,e.t2=Le.Z,e.next=14,Promise.all(l);case 14:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 17:return e.next=19,Oc(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 19:return g=e.sent,e.abrupt("return",[u,Ws(g)]);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function $c(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function jc(e){return null!=e.match(Lc.URL_SCHEME_REGEX)}Lc.URL_SCHEME_REGEX=/^https?:\/\//;var zc=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return jc(e)})):jc(e))?Bc(e,t):null};function Bc(e,t){return new Lc(e,t)}function Uc(e,t){return Bc(e,t)}Qs.registerSaveRouter(zc),Qs.registerLoadRouter(zc);var Vc,Wc=function(){function e(t){Vt(this,e),this.modelArtifacts=t}return Zt(e,[{key:"load",value:function(){return this.modelArtifacts}}]),e}(),Gc=function(){function e(t){Vt(this,e),this.saveHandler=t}return Zt(e,[{key:"save",value:function(e){return this.saveHandler(e)}}]),e}(),Zc=Zt((function e(t){Vt(this,e),t.load&&(this.load=function(){return Promise.resolve(t.load())}),t.save&&(this.save=function(e){return Promise.resolve(t.save(e))})}));function Hc(e,t,n,r){var a=arguments;return new Zc(qc.apply(void 0,(0,Le.Z)(a)))}function qc(e,t,n,r){if(1===arguments.length){var a=null!=e.modelTopology||null!=e.weightSpecs;return a?new Wc(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Wc({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Wc({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function Kc(e){return new Gc(e)}function Xc(e){return new Gc(e)}function Jc(e,t,n){if(rn(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=Ns(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ds(e,t,r,n)}function Yc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}var u=eo(Zi,xs.backendName);if(null!=u){var c={pixels:e},l={numChannels:t};return xs.runKernel(Zi,c,l)}var d,f,h=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],p=(0,C.Z)(h,2),v=p[0],m=p[1];if(o)d=e.getContext("2d").getImageData(0,0,v,m).data;else if(r||n)d=e.data;else if(i||a||s){if(null==Vc)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");Vc=new OffscreenCanvas(1,1).getContext("2d")}else Vc=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Vc.canvas.width=v,Vc.canvas.height=m,Vc.drawImage(e,0,0,v,m),d=Vc.getImageData(0,0,v,m).data}if(4===t)f=new Int32Array(d);else{var g=v*m;f=new Int32Array(g*t);for(var y=0;y<g;y++)for(var b=0;b<t;++b)f[y*t+b]=d[4*y+b]}var x=[m,v,t];return Jc(f,x,"int32")}var Qc=Rs({fromPixels_:Yc});function el(e,t,n){var r=e.shape.length;tn(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),tn(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){tn(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function tl(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function nl(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function rl(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function al(e,t,n){var r,a,i=e.shape.length;return(r="number"===typeof t?[t].concat((0,Le.Z)(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){tn(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"===typeof n?[n].concat((0,Le.Z)(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(tn(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function il(e,t,n,r,a,i,o,s,u){var c;if(null==r?(c=new Array(t.length)).fill(1):c=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var l=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},f=0;f<d.dims;f++)l&&0!==(1<<f&s)&&d.numAddAxisAfterEllipsis++,1<<f&o&&(l=!0);l||(d.ellipsisMask|=1<<d.dims,d.dims++);var h={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,h);for(var p=!0,v=!0,m=!0,g=[],y=[],b=0;b<e.length;++b){if(0===h.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(h.shrinkAxisMask&1<<b),k=e[b];if(-1!==k){var w=[h.beginMask&1<<b,h.endMask&1<<b],S=[h.strides[b]>0?0:-1,h.strides[b]>0?k:k-1];if(x&&h.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===h.strides[b];var I=!!(h.beginMask&1<<b&&h.endMask&1<<b);if(h.beginValid&&h.endValid){if(x){var N=h.begin[b]<0?k+h.begin[b]:h.begin[b];if(h.begin[b]=N,h.end[b]=h.begin[b]+1,N<0||N>=k)throw Error("slice index ".concat(h.begin[b]," of dimension ").concat(b," out of bounds."))}else h.begin[b]=ol(h.begin[b],0,h.strides[b],k,w,S),h.end[b]=ol(h.end[b],1,h.strides[b],k,w,S);var T=1===h.strides[b]&&0===h.begin[b]&&h.end[b]===k;p=p&&T,v=v&&(0===b&&1===h.strides[b]||T)}else p=p&&1===h.strides[b]&&I,v=v&&(0===b&&1===h.strides[b]||I);var C=void 0,E=!1;if(h.beginValid&&h.endValid?(C=h.end[b]-h.begin[b],E=!0):x?(C=1,E=!0):I&&k>=0&&(C=h.strides[b]<0?-k:k,E=!0),E){var _=void 0;_=0===C||C<0!==h.strides[b]<0?0:Math.trunc(C/h.strides[b])+(C%h.strides[b]!==0?1:0),g.push(_)}else g.push(-1)}else g.push(x?1:-1)}for(var A=0;A<h.finalShapeGatherIndices.length;++A){var R=h.finalShapeGatherIndices[A];R>=0?y.push(g[R]):-2===R&&y.push(1)}var O=y.filter((function(e,t){return-2!==h.finalShapeGatherIndices[t]}));return{finalShapeSparse:O,finalShape:y,isIdentity:p,sliceDim0:v,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function ol(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var sl=Rs({acos_:function(e){var t={x:Es(e,"x","acos")};return xs.runKernel(Vn,t)}});var ul=Rs({acosh_:function(e){var t={x:Es(e,"x","acosh")};return xs.runKernel(Wn,t)}});var cl=Rs({addN_:function(e){tn(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),tn(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return Es(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!on(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return xs.runKernel(Zn,r)}});var ll=Rs({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Es(e,"x","all","bool"),a={x:r},i={axis:t,keepDims:n};return xs.runKernel(Hn,a,i)}});var dl=Rs({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Es(e,"x","any","bool"),a={x:r},i={axis:t,keepDims:n};return xs.runKernel(qn,a,i)}});var fl=Rs({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Es(e,"x","argMax"),r={x:n},a={axis:t};return xs.runKernel(Kn,r,a)}});var hl=Rs({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Es(e,"x","argMin"),r={x:n},a={axis:t};return xs.runKernel(Xn,r,a)}});var pl=Rs({asin_:function(e){var t={x:Es(e,"x","asin")};return xs.runKernel(Jn,t)}});var vl=Rs({asinh_:function(e){var t={x:Es(e,"x","asinh")};return xs.runKernel(Yn,t)}});var ml=Rs({atan_:function(e){var t={x:Es(e,"x","atan")};return xs.runKernel(Qn,t)}});var gl=Rs({atan2_:function(e,t){var n=Es(e,"a","atan2"),r=Es(t,"b","atan2"),a=cs(n,r),i=(0,C.Z)(a,2),o={a:n=i[0],b:r=i[1]};return xs.runKernel(tr,o)}});var yl=Rs({atanh_:function(e){var t={x:Es(e,"x","atanh")};return xs.runKernel(er,t)}});function bl(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,o=e[3],s=[].concat((0,Le.Z)(t),[o]),u=Pl(a);return wl(e,s,n,i,r,null,null,u)}function xl(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=Nl(t),c=(0,C.Z)(u,2),l=c[0],d=c[1];if("channelsLast"===s)o=[l,d,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[l,d,e[1],e[1]]}return wl(e,o,n,r,a,i,!1,s)}function kl(e,t,n,r,a,i){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=Tl(t),l=(0,C.Z)(c,3),d=l[0],f=l[1],h=l[2];if("NDHWC"===u)s="channelsLast",o=[d,f,h,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",o=[d,f,h,e[1],e[1]]}return Sl(e,o,n,r,a,!1,s,i)}function wl(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,c=-1,l=-1,d=-1;if("channelsLast"===s){var f=(0,C.Z)(e,4);u=f[0],c=f[1],l=f[2],d=f[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var h=(0,C.Z)(e,4);u=h[0],d=h[1],c=h[2],l=h[3]}var p,v=(0,C.Z)(t,4),m=v[0],g=v[1],y=v[3],b=Nl(n),x=(0,C.Z)(b,2),k=x[0],w=x[1],S=Nl(r),I=(0,C.Z)(S,2),N=I[0],T=I[1],E=Cl(m,N),_=Cl(g,T),A=El(a,c,l,k,w,E,_,i,s),R=A.padInfo,O=A.outHeight,D=A.outWidth,P=o?y*d:y;return"channelsFirst"===s?p=[u,P,O,D]:"channelsLast"===s&&(p=[u,O,D,P]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:d,outHeight:O,outWidth:D,outChannels:P,padInfo:R,strideHeight:k,strideWidth:w,filterHeight:m,filterWidth:g,effectiveFilterHeight:E,effectiveFilterWidth:_,dilationHeight:N,dilationWidth:T,inShape:e,outShape:p,filterShape:t}}function Sl(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,c=-1,l=-1,d=-1,f=-1;if("channelsLast"===o){var h=(0,C.Z)(e,5);u=h[0],c=h[1],l=h[2],d=h[3],f=h[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var p=(0,C.Z)(e,5);u=p[0],f=p[1],c=p[2],l=p[3],d=p[4]}var v,m=(0,C.Z)(t,5),g=m[0],y=m[1],b=m[2],x=m[4],k=Tl(n),w=(0,C.Z)(k,3),S=w[0],I=w[1],N=w[2],T=Tl(r),E=(0,C.Z)(T,3),_=E[0],A=E[1],R=E[2],O=Cl(g,_),D=Cl(y,A),P=Cl(b,R),F=_l(a,c,l,d,S,I,N,O,D,P,s),M=F.padInfo,L=F.outDepth,$=F.outHeight,j=F.outWidth,z=i?x*f:x;return"channelsFirst"===o?v=[u,z,L,$,j]:"channelsLast"===o&&(v=[u,L,$,j,z]),{batchSize:u,dataFormat:o,inDepth:c,inHeight:l,inWidth:d,inChannels:f,outDepth:L,outHeight:$,outWidth:j,outChannels:z,padInfo:M,strideDepth:S,strideHeight:I,strideWidth:N,filterDepth:g,filterHeight:y,filterWidth:b,effectiveFilterDepth:O,effectiveFilterHeight:D,effectiveFilterWidth:P,dilationDepth:_,dilationHeight:A,dilationWidth:R,inShape:e,outShape:v,filterShape:t}}function Il(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=Cl(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function Nl(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function Tl(e){return"number"===typeof e?[e,e,e]:e}function Cl(e,t){return t<=1?e:e+(e-1)*(t-1)}function El(e,t,n,r,a,i,o,s,u){var c,l,d;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,a){null==r&&(r=Il(e,t,n));var i=e[0],o=e[1];return[Al((i-t+2*r)/n+1,a),Al((o-t+2*r)/n+1,a)]}([t,n],i,r,e,s);l=f[0],d=f[1]}else if("same"===e){l=Math.ceil(t/r),d=Math.ceil(n/a);var h=Math.max(0,(l-1)*r+i-t),p=Math.max(0,(d-1)*a+o-n),v=Math.floor(h/2),m=h-v,g=Math.floor(p/2);c={top:v,bottom:m,left:g,right:p-g,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),d=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],k="channelsLast"===u?e[2][1]:e[3][1];c={top:y,bottom:b,left:x,right:k,type:0===y&&0===b&&0===x&&0===k?"VALID":"EXPLICIT"},l=Al((t-i+y+b)/r+1,s),d=Al((n-o+x+k)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:d}}function _l(e,t,n,r,a,i,o,s,u,c,l){var d,f,h,p;if("valid"===e&&(e=0),"number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var v=function(e,t,n,r,a,i){null==a&&(a=Il(e,t[0],r[0]));for(var o=[0,0,0,n],s=0;s<3;s++)e[s]+2*a>=t[s]&&(o[s]=Al((e[s]-t[s]+2*a)/r[s]+1,i));return o}([t,n,r,1],[s,u,c],1,[a,i,o],e,l);f=v[0],h=v[1],p=v[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));var m=((f=Math.ceil(t/a))-1)*a+s-t,g=((h=Math.ceil(n/i))-1)*i+u-n,y=((p=Math.ceil(r/o))-1)*o+c-r,b=Math.floor(m/2),x=m-b,k=Math.floor(g/2),w=g-k,S=Math.floor(y/2);d={top:k,bottom:w,left:S,right:y-S,front:b,back:x,type:"SAME"}}return{padInfo:d,outDepth:f,outHeight:h,outWidth:p}}function Al(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function Rl(e){var t=Nl(e),n=(0,C.Z)(t,3),r=n[0],a=n[1],i=n[2];return 1===r&&1===a&&1===i}function Ol(e,t){return Rl(e)||Rl(t)}function Dl(e){return Nl(e).every((function(e){return e>0}))}function Pl(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function Fl(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)tn(sn(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){tn(sn(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}var Ml=Rs({reshape_:function(e,t){var n={x:Es(e,"x","reshape","string_or_numeric")},r={shape:t};return xs.runKernel(Ja,n,r)}});var Ll=Rs({avgPool_:function(e,t,n,r,a){var i=Es(e,"x","avgPool","float32");tn(Ol(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var o=i,s=!1;3===i.rank&&(s=!0,o=Ml(i,[1,i.shape[0],i.shape[1],i.shape[2]])),tn(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")})),Fl("avgPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=xs.runKernel(nr,u,c);return l=Vu(l,i.dtype),s?Ml(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var $l=Rs({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Es(e,"x","avgPool3d","float32"),s=o,u=!1;4===o.rank&&(u=!0,s=Ml(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),tn(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),tn("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),tn("number"===typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,(function(){return"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")})),Fl("avgPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=xs.runKernel(ar,c,l);return d=Vu(d,s.dtype),u?Ml(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var jl=Rs({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;tn(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=_s(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return Wu(n[0]);var r=n,a={axis:t};return xs.runKernel(vr,r,a)}});var zl=Rs({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Es(e,"a","matMul"),i=Es(t,"b","matMul"),o=cs(a,i),s=(0,C.Z)(o,2),u={a:a=s[0],b:i=s[1]},c={transposeA:n,transposeB:r};return xs.runKernel(or,u,c)}});var Bl=Rs({sigmoid_:function(e){var t={x:Es(e,"x","sigmoid","float32")};return xs.runKernel(vi,t)}});var Ul=Rs({slice_:function(e,t,n){var r=Es(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return xs.runKernel(di,a,i)}});var Vl=Rs({tanh_:function(e){var t={x:Es(e,"x","tanh","float32")};return xs.runKernel(Mi,t)}});var Wl=Rs({basicLSTMCell_:function(e,t,n,r,a,i){var o=Es(e,"forgetBias","basicLSTMCell"),s=Es(t,"lstmKernel","basicLSTMCell"),u=Es(n,"lstmBias","basicLSTMCell"),c=Es(r,"data","basicLSTMCell"),l=Es(a,"c","basicLSTMCell"),d=Es(i,"h","basicLSTMCell"),f=jl([c,d],1),h=zl(f,s),p=Yu(h,u),v=p.shape[0],m=p.shape[1]/4,g=[v,m],y=Ul(p,[0,0],g),b=Ul(p,[0,m],g),x=Ul(p,[0,2*m],g),k=Ul(p,[0,3*m],g),w=Yu(tc(Bl(y),Vl(b)),tc(l,Bl(Yu(o,x))));return[w,tc(Vl(w),Bl(k))]}});var Gl=Rs({batchToSpaceND_:function(e,t,n){var r=Es(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));tn(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),tn(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),tn(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var i={x:r},o={blockShape:t,crops:n};return xs.runKernel(sr,i,o)}});var Zl=Rs({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u=Es(e,"x","batchNorm"),c=Es(t,"mean","batchNorm"),l=Es(n,"variance","batchNorm");null!=a&&(o=Es(a,"scale","batchNorm")),null!=r&&(s=Es(r,"offset","batchNorm")),tn(c.rank===l.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),tn(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),tn(null==o||c.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var d=function(e){return 0===e.rank||1===e.rank?Ml(e,[1,1,1,e.size]):2===e.rank?Ml(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Ml(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),f={x:d,scale:o,offset:s,mean:c,variance:l},h={varianceEpsilon:i},p=xs.runKernel(Xr,f,h);return Ml(p,u.shape)}});var Hl=Rs({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=Es(e,"x","batchNorm"),c=Es(t,"mean","batchNorm"),l=Es(n,"variance","batchNorm");return null!=a&&(o=Es(a,"scale","batchNorm")),null!=r&&(s=Es(r,"offset","batchNorm")),tn(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(u.rank,".")})),tn(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(c.rank,".")})),tn(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&tn(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&tn(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),Zl(u,c,l,s,o,i)}});var ql=Rs({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=Es(e,"x","batchNorm"),c=Es(t,"mean","batchNorm"),l=Es(n,"variance","batchNorm");return null!=a&&(o=Es(a,"scale","batchNorm")),null!=r&&(s=Es(r,"offset","batchNorm")),tn(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),tn(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(c.rank,".")})),tn(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&tn(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&tn(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),Zl(u,c,l,s,o,i)}});var Kl=Rs({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=Es(e,"x","batchNorm"),c=Es(t,"mean","batchNorm"),l=Es(n,"variance","batchNorm");return null!=a&&(o=Es(a,"scale","batchNorm")),null!=r&&(s=Es(r,"offset","batchNorm")),tn(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),tn(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(c.rank,".")})),tn(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&tn(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&tn(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),Zl(u,c,l,s,o,i)}});var Xl=Rs({bincount_:function(e,t,n){var r=Es(e,"x","bincount"),a=Es(t,"weights","bincount");tn("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),tn(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),tn(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return xs.runKernel(ur,i,o)}});var Jl=Rs({broadcastArgs_:function(e,t){var n=Es(e,"s0","broadcastArgs","int32"),r=Es(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));var a={s0:n,s1:r};return xs.runKernel(cr,a)}});var Yl=Rs({broadcastTo_:function(e,t){var n=Es(e,"broadcastTo","x"),r=n.shape;if(_n(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=Ml(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var u=o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===u.length)return Wu(n);var c={x:n},l={reps:o};return xs.runKernel(Li,c,l)}});var Ql=Rs({ceil_:function(e){var t={x:Es(e,"x","ceil","float32")};return xs.runKernel(dr,t)}});var ed=Rs({clipByValue_:function(e,t,n){var r=Es(e,"x","clipByValue");if(tn(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")})),t===n)return fc(r.shape,t,r.dtype);var a={x:r},i={clipValueMin:t,clipValueMax:n};return xs.runKernel(fr,a,i)}});var td=Rs({concat1d_:function(e){return jl(e,0)}});var nd=Rs({concat2d_:function(e,t){return jl(e,t)}});var rd=Rs({concat3d_:function(e,t){return jl(e,t)}});var ad=Rs({concat4d_:function(e,t){return jl(e,t)}});var id=Rs({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Es(e,"x","conv2d","float32"),u=Es(t,"filter","conv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=Ml(s,[1,s.shape[0],s.shape[1],s.shape[2]])),tn(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),tn(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),Fl("conv2d",r,o);var d="NHWC"===a?c.shape[3]:c.shape[1];tn(d===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(d,") must match ")+"input depth for filter ".concat(u.shape[2],".")})),tn(Ol(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),tn(Dl(i),(function(){return"Error in conv2D: Dilated rates should be larger than 0."})),tn(Dl(n),(function(){return"Error in conv2D: Strides should be larger than 0."}));var f={x:c,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},p=xs.runKernel(mr,f,h);return l?Ml(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var od=Rs({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=Es(e,"x","conv1d"),u=Es(t,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=Ml(s,[1,s.shape[0],s.shape[1]])),tn(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")})),tn(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")})),Fl("conv1d",r,o),tn(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")})),tn(Ol(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")})),tn(Dl(i),(function(){return"Error in conv1D: Dilated rates should be larger than 0."})),tn(Dl(n),(function(){return"Error in conv1D: Stride should be larger than 0."})),tn("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var d=Ml(u,[1,u.shape[0],u.shape[1],u.shape[2]]),f=Ml(c,[c.shape[0],1,c.shape[1],c.shape[2]]),h=[1,n],p=[1,i],v="NHWC",m=id(f,d,h,r,v,p,o);return Ml(m,l?[m.shape[2],m.shape[3]]:[m.shape[0],m.shape[2],m.shape[3]])}});var sd=Rs({conv2DBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;tn(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,c=!1;3===t.rank&&(c=!0,u=Ml(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),tn(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),tn(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)})),tn(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var l="NHWC"===i?s[3]:s[1],d="NHWC"===i?u.shape[3]:u.shape[1];tn(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),tn(d===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),Fl("conv2dDerInput",a,o);var f={dy:u,filter:n},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},p=xs.runKernel(yr,f,h);return c?Ml(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var ud=Rs({conv2dTranspose_:function(e,t,n,r,a,i){var o=Es(e,"x","conv2dTranspose"),s=Es(t,"filter","conv2dTranspose");return sd(n,o,s,r,a,"NHWC",i)}});var cd=Rs({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=Es(e,"x","conv3d"),s=Es(t,"filter","conv3d"),u=o,c=!1;4===o.rank&&(c=!0,u=Ml(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),tn(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),tn(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),tn(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),tn(Ol(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),tn("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")})),tn(Dl(i),(function(){return"Error in conv3D: Dilated rates should be larger than 0."})),tn(Dl(n),(function(){return"Error in conv3D: Strides should be larger than 0."}));var l={x:u,filter:s},d={strides:n,pad:r,dataFormat:a,dilations:i},f=xs.runKernel(br,l,d);return c?Ml(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var ld=Rs({conv3DBackpropInput_:function(e,t,n,r,a){tn(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=Ml(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],c=o.shape[4];tn(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")})),tn(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)})),tn(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),tn(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),tn(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var l={dy:o,filter:n},d={pad:a,strides:r,inputShape:i},f=xs.runKernel(kr,l,d);return s?Ml(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var dd=Rs({conv3dTranspose_:function(e,t,n,r,a){var i=Es(e,"x","conv3dTranspose"),o=Es(t,"filter","conv3dTranspose");return ld(n,i,o,r,a)}});var fd=Rs({cos_:function(e){var t={x:Es(e,"x","cos","float32")};return xs.runKernel(wr,t)}});var hd=Rs({cosh_:function(e){var t={x:Es(e,"x","cosh","float32")};return xs.runKernel(Sr,t)}});var pd=Rs({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Es(e,"x","cumprod"),i={x:a},o={axis:t,exclusive:n,reverse:r};return xs.runKernel(Ir,i,o)}});var vd=Rs({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Es(e,"x","cumsum"),i={x:a},o={axis:t,exclusive:n,reverse:r};return xs.runKernel(Nr,i,o)}});var md=Rs({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Es(e,"x","denseBincount"),i=Es(t,"weights","denseBincount");tn("int32"===a.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),tn(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")})),tn(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),tn(i.size===a.size||0===i.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(i.shape,".")}));var o={x:a,weights:i},s={size:n,binaryOutput:r};return xs.runKernel(Cr,o,s)}});var gd=Rs({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=Es(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];tn(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),tn(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),tn(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),tn(o%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return xs.runKernel(Er,s,u)}});var yd=Rs({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Es(e,"x","depthwiseConv2d","float32"),u=Es(t,"filter","depthwiseConv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=Ml(s,[1,s.shape[0],s.shape[1],s.shape[2]])),tn(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")})),tn(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")}));var d="NHWC"===a?c.shape[3]:c.shape[1];tn(d===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(d,") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")})),Fl("depthwiseConv2d",r,o);var f={x:c,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},p=xs.runKernel(_r,f,h);return l?Ml(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var bd=Rs({diag_:function(e){var t={x:Es(e,"x","diag")};return xs.runKernel(Or,t)}});var xd=Rs({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=Es(e,"x","dilation2d"),s=Es(t,"filter","dilation2d");tn(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(o.rank,".")})),tn(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")})),tn("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i)}));var u=o,c=!1;3===o.rank&&(u=Ml(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),tn(u.shape[3]===s.shape[2],(function(){return"Error in dilation2d:  input and filter must have the same depth: ".concat(u.shape[3]," vs ").concat(s.shape[2])}));var l={x:u,filter:s},d={strides:n,pad:r,dilations:a},f=xs.runKernel(Dr,l,d);return c?Ml(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var kd=Rs({equal_:function(e,t){var n=Es(e,"a","equal","string_or_numeric"),r=Es(t,"b","equal","string_or_numeric"),a=cs(n,r),i=(0,C.Z)(a,2);n=i[0],r=i[1],xc(n.shape,r.shape);var o={a:n,b:r};return xs.runKernel(Br,o)}});var wd=Rs({where_:function(e,t,n){var r=Es(t,"a","where"),a=Es(n,"b","where"),i=Es(e,"condition","where","bool"),o=xc(xc(i.shape,r.shape),a.shape),s={condition:Yl(i,o),t:Yl(r,o),e:Yl(a,o)};return xs.runKernel(ci,s)}});var Sd=Rs({divNoNan_:function(e,t){var n=Es(e,"a","div"),r=Es(t,"b","div"),a=cs(n,r),i=(0,C.Z)(a,2);n=i[0],r=i[1];var o=ec(n,r),s=ac(o),u=kd(r,s);return wd(u,s,o)}});var Id=Rs({dot_:function(e,t){var n=Es(e,"t1","dot"),r=Es(t,"t2","dot");tn((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(tn(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=Ml(n,[1,-1]),s=Ml(r,[-1,1]),u=zl(o,s);return Ml(u,[])}if(1===n.rank&&2===r.rank){var c=Ml(n,[1,-1]),l=Ml(r,[r.shape[0],r.shape[1]]),d=zl(c,l);return Ml(d,[d.size])}if(2===n.rank&&1===r.rank){var f=Ml(r,[-1,1]),h=zl(n,f);return Ml(h,[h.size])}var p=Ml(r,[r.shape[0],r.shape[1]]);return zl(n,p)}});var Nd=Rs({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map((function(e,t){return Es(e,"tensors".concat(t),"einsum")})),i={equation:e};return xs.runKernel(Lr,a,i)}});var Td=Rs({elu_:function(e){var t={x:Es(e,"x","elu","float32")};return xs.runKernel($r,t)}});var Cd=Rs({erf_:function(e){var t=Es(e,"x","erf");tn("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=Vu(t,"float32"));var n={x:t};return xs.runKernel(zr,n)}});function Ed(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function _d(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function Ad(e,t){return function(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}(e,t.map((function(e){return 1})),t)}function Rd(e,t,n){tn(Ed(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function Od(e,t){if(Ed(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Dd(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Pd(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var Fd=Rs({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Es(e,"x","max"),a={x:r},i={reductionIndices:t,keepDims:n};return xs.runKernel(ya,a,i)}});var Md=Rs({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Es(e,"x","min"),a={x:r},i={axis:t,keepDims:n};return xs.runKernel(Ta,a,i)}});var Ld=Rs({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Es(e,"x","sum");"bool"===r.dtype&&(r=Vu(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return xs.runKernel(yi,a,i)}});function $d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return gc(e);if(1!==e.rank&&null===n)return $d(Ml(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Ld(gc(e),n);if(t===1/0)return Fd(gc(e),n);if(t===-1/0)return Md(gc(e),n);if("euclidean"===t||2===t)return nc(Ld(pc(gc(e),oc(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Fd(Ld(gc(e),n[0]),n[1]-1);if(t===1/0)return Fd(Ld(gc(e),n[1]),n[0]);if(t===-1/0)return Md(Ld(gc(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return nc(Ld(rc(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var jd=Rs({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=$d(e=Es(e,"x","norm"),t,n),i=a.shape;if(r){var o=fn(n,e.shape);i=Ad(a.shape,o)}return Ml(a,i)}});var zd=Rs({euclideanNorm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return jd(e,"euclidean",t,n)}});var Bd=Rs({exp_:function(e){var t={x:Es(e,"x","exp")};return xs.runKernel(Ur,t)}});var Ud=Rs({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Es(e,"x","expandDims","string_or_numeric");tn(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return xs.runKernel(Vr,r,a)}});var Vd=Rs({expm1_:function(e){var t={x:Es(e,"x","expm1")};return xs.runKernel(Wr,t)}});var Wd=Rs({tile_:function(e,t){var n=Es(e,"x","tile","string_or_numeric");tn(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return xs.runKernel(Li,r,a)}});var Gd=Rs({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=Uu([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=Ml(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return Wd(Ud(s,0),[n[0],1,1]);if(2===n.length)return Wd(Ud(Ud(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Wd(Ud(Ud(Ud(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});var Zd=Rs({floor_:function(e){var t={x:Es(e,"x","floor","float32")};return xs.runKernel(qr,t)}});var Hd=Rs({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=Es(e,"x","gather"),i=Es(t,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return xs.runKernel(Jr,o,s)}});var qd=Rs({greater_:function(e,t){var n=Es(e,"a","greater","string_or_numeric"),r=Es(t,"b","greater","string_or_numeric"),a=cs(n,r),i=(0,C.Z)(a,2);n=i[0],r=i[1],xc(n.shape,r.shape);var o={a:n,b:r};return xs.runKernel(Qr,o)}});var Kd=Rs({greaterEqual_:function(e,t){var n=Es(e,"a","greaterEqual","string_or_numeric"),r=Es(t,"b","greaterEqual","string_or_numeric"),a=cs(n,r),i=(0,C.Z)(a,2);n=i[0],r=i[1],xc(n.shape,r.shape);var o={a:n,b:r};return xs.runKernel(ea,o)}});var Xd=Rs({imag_:function(e){var t={input:Es(e,"input","imag")};return xs.runKernel(ra,t)}});var Jd=Rs({isFinite_:function(e){var t={x:Es(e,"x","isFinite")};return xs.runKernel(aa,t)}});var Yd=Rs({isInf_:function(e){var t={x:Es(e,"x","isInf")};return xs.runKernel(ia,t)}});var Qd=Rs({isNaN_:function(e){var t={x:Es(e,"x","isNaN")};return xs.runKernel(oa,t)}});var ef=Rs({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=Es(e,"x","leakyRelu"),r={x:n},a={alpha:t};return xs.runKernel(sa,r,a)}});var tf=Rs({less_:function(e,t){var n=Es(e,"a","less","string_or_numeric"),r=Es(t,"b","less","string_or_numeric"),a=cs(n,r),i=(0,C.Z)(a,2);n=i[0],r=i[1],xc(n.shape,r.shape);var o={a:n,b:r};return xs.runKernel(ua,o)}});var nf=Rs({lessEqual_:function(e,t){var n=Es(e,"a","lessEqual","string_or_numeric"),r=Es(t,"b","lessEqual","string_or_numeric"),a=cs(n,r),i=(0,C.Z)(a,2);n=i[0],r=i[1],xc(n.shape,r.shape);var o={a:n,b:r};return xs.runKernel(ca,o)}});function rf(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return xs.runKernel(la,{},r)}var af=Rs({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=Es(e,"x","localResponseNormalization");tn(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),tn(sn(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=Ml(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u={x:o},c={depthRadius:t,bias:n,alpha:r,beta:a},l=xs.runKernel(ma,u,c);return s?Ml(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var of=Rs({log_:function(e){var t={x:Es(e,"x","log","float32")};return xs.runKernel(da,t)}});var sf=Rs({log1p_:function(e){var t={x:Es(e,"x","log1p")};return xs.runKernel(fa,t)}});var uf=Rs({neg_:function(e){var t={x:Es(e,"x","neg")};return xs.runKernel(Oa,t)}});var cf=Rs({softplus_:function(e){var t={x:Es(e,"x","softplus")};return xs.runKernel(mi,t)}});var lf=Rs({logSigmoid_:function(e){var t=Es(e,"x","logSigmoid"),n=ic((function(e){return{value:uf(cf(uf(e))),gradFunc:function(t){return tc(t,Bl(uf(e)))}}}));return n(t)}});var df=Rs({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Es(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=ic((function(e,n){var r=Fd(e,t,!0),a=vc(e,r),i=vc(Vu(a,"float32"),of(Ld(Bd(a),t,!0)));n([i]);return{value:i,gradFunc:function(e,n){var r=(0,C.Z)(n,1)[0],a=Bd(r);return vc(e,tc(Ld(e,t,!0),a))}}}));return r(n)}});var ff=Rs({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Es(e,"x","logSumExp"),a=fn(t,r.shape),i=Fd(r,a,!0),o=vc(r,i),s=Bd(o),u=Ld(s,a),c=of(u),l=Yu(Ml(i,c.shape),c);if(n){var d=Ad(l.shape,a);return Ml(l,d)}return l}});var hf=Rs({logicalAnd_:function(e,t){var n=Es(e,"a","logicalAnd","bool"),r=Es(t,"b","logicalAnd","bool");xc(n.shape,r.shape);var a={a:n,b:r};return xs.runKernel(ha,a)}});var pf=Rs({logicalNot_:function(e){var t={x:Es(e,"x","logicalNot","bool")};return xs.runKernel(pa,t)}});var vf=Rs({logicalOr_:function(e,t){var n=Es(e,"a","logicalOr","bool"),r=Es(t,"b","logicalOr","bool");xc(n.shape,r.shape);var a={a:n,b:r};return xs.runKernel(va,a)}});var mf=Rs({logicalXor_:function(e,t){var n=Es(e,"a","logicalXor","bool"),r=Es(t,"b","logicalXor","bool");return xc(n.shape,r.shape),hf(vf(e,t),pf(hf(e,t)))}}),gf=2147483648;var yf=Rs({searchSorted_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=Es(e,"sortedSequence","searchSorted"),a=Es(t,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],s=Ml(r,[-1,i]),u=Ml(a,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(an(u.shape)>=gf)throw new Error("values tensor size must less than ".concat(gf));if(s.shape[1]>=gf)throw new Error("trailing dim_size must less than ".concat(gf," for int32 output type, was ").concat(s.shape[1]));var c={sortedSequence:s,values:u},l={side:n};return xs.runKernel(ui,c,l)}});function bf(e,t){return yf(e,t,"left")}var xf=Rs({maxPool_:function(e,t,n,r,a){var i=Es(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=Ml(i,[1,i.shape[0],i.shape[1],i.shape[2]])),tn(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")})),tn(Ol(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),Fl("maxPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=xs.runKernel(xa,u,c);return s?Ml(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var kf=Rs({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Es(e,"x","maxPool3d"),s=o,u=!1;4===o.rank&&(u=!0,s=Ml(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),tn(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),tn("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),Fl("maxPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=xs.runKernel(wa,c,l);return u?Ml(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var wf=Rs({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=Es(e,"x","maxPoolWithArgmax"),o={x:i},s={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},u=xs.runKernel(Ia,o,s);return{result:u[0],indexes:u[1]}}});var Sf=Rs({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Es(e,"x","mean"),a={x:r},i={axis:t,keepDims:n};return xs.runKernel(Na,a,i)}});function If(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(_n(e),"complex64"===t){var n=If(e,"float32"),r=If(e,"float32");return Os(n,r)}var a=Cn(an(e),t);return xs.makeTensor(a,e,t)}function Nf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(_n(e),"complex64"===t){var n=Nf(e,"float32"),r=If(e,"float32");return Os(n,r)}var a=Tn(an(e),t);return xs.makeTensor(a,e,t)}function Tf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.indexing,a=void 0===r?"xy":r;if("xy"!==a&&"ij"!==a)throw new TypeError("".concat(a," is not a valid third argument to meshgrid"));if(void 0===e)return[];var i=Es(e,"x","meshgrid",e instanceof Xo?e.dtype:"float32");if(void 0===t)return[i];var o=Es(t,"y","meshgrid",t instanceof Xo?t.dtype:"float32"),s=an(i.shape),u=an(o.shape);return"xy"===a?(i=Ml(i,[1,-1]),o=Ml(o,[-1,1]),[zl(Nf([u,1],i.dtype),i),zl(o,Nf([1,s],o.dtype))]):(i=Ml(i,[-1,1]),o=Ml(o,[1,-1]),[zl(i,Nf([1,u],i.dtype)),zl(Nf([s,1],o.dtype),o)])}var Cf=Rs({minimum_:function(e,t){var n=Es(e,"a","minimum"),r=Es(t,"b","minimum"),a=cs(n,r),i=(0,C.Z)(a,2);n=i[0],r=i[1],"bool"===n.dtype&&(n=Vu(n,"int32"),r=Vu(r,"int32")),xc(n.shape,r.shape);var o={a:n,b:r};return xs.runKernel(Ca,o)}});var Ef=Rs({mirrorPad_:function(e,t,n){tn("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=Es(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");tn(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,i=function(e){tn(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),tn(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},u={x:r};return xs.runKernel(Ea,u,s)}});var _f=Rs({mod_:function(e,t){var n=Es(e,"a","mod"),r=Es(t,"b","mod"),a=cs(n,r),i=(0,C.Z)(a,2),o={a:n=i[0],b:r=i[1]};return xs.runKernel(_a,o)}});var Af=Rs({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=fn(t,(e=Es(e,"x","moments")).shape),a=Sf(e,r,n),i=a.shape;n||(i=Ad(a.shape,r));var o=rc(vc(Vu(e,"float32"),Ml(a,i))),s=Sf(o,r,n);return{mean:a,variance:s}}});var Rf=Rs({multiRNNCell_:function(e,t,n,r){for(var a=Es(t,"data","multiRNNCell"),i=_s(n,"c","multiRNNCell"),o=_s(r,"h","multiRNNCell"),s=a,u=[],c=0;c<e.length;c++){var l=e[c](s,i[c],o[c]);u.push(l[0]),u.push(l[1]),s=l[1]}for(var d=[],f=[],h=0;h<u.length;h+=2)d.push(u[h]),f.push(u[h+1]);return[d,f]}});var Of=Rs({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Es(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();var s=1===o?Ml(a,[1,-1]):a,u={logits:s},c={numSamples:t,seed:n,normalized:r},l=xs.runKernel(Aa,u,c);return 1===o?Ml(l,[l.size]):l}});var Df=Rs({notEqual_:function(e,t){var n=Es(e,"a","notEqual","string_or_numeric"),r=Es(t,"b","notEqual","string_or_numeric"),a=cs(n,r),i=(0,C.Z)(a,2);n=i[0],r=i[1],xc(n.shape,r.shape);var o={a:n,b:r};return xs.runKernel(Da,o)}});var Pf=Rs({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var i=Es(e,"indices","oneHot","int32"),o={indices:i},s={dtype:a,depth:t,onValue:n,offValue:r};return xs.runKernel($a,o,s)}});var Ff=Rs({onesLike_:function(e){var t={x:Es(e,"x","onesLike")};return xs.runKernel(La,t)}});var Mf=Rs({outerProduct_:function(e,t){var n=Es(e,"v1","outerProduct"),r=Es(t,"v2","outerProduct");tn(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=Ml(n,[-1,1]),i=Ml(r,[1,-1]);return zl(a,i)}});var Lf=Rs({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Es(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return xs.runKernel(za,i,a)}});var $f=Rs({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return tn(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),Lf(e,[t],n)}});var jf=Rs({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return tn(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Lf(e,t,n)}});var zf=Rs({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return tn(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Lf(e,t,n)}});var Bf=Rs({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return tn(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Lf(e,t,n)}});var Uf=Rs({spaceToBatchND_:function(e,t,n){var r=Es(e,"x","spaceToBatchND");tn(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),tn(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),tn(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},i={blockShape:t,paddings:n};return xs.runKernel(bi,a,i)}});var Vf=Rs({pool_:function(e,t,n,r,a,i,o){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var s=Es(e,"x","maxPool"),u=s,c=!1;3===s.rank&&(c=!0,u=Ml(s,[1,s.shape[0],s.shape[1],s.shape[2]])),tn(Ol(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'")}));var l,d=xl(u.shape,t,i,a,r),f=[d.dilationHeight,d.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([d.filterHeight,d.filterWidth],f):[[0,0],[0,0]];var h=1===f[0]&&1===f[1],p=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),c=t.map((function(e,t){return[0,o[t]]}));return[u,c]}([d.inHeight,d.inWidth],f,l),v=(0,C.Z)(p,2),m=v[0],g=v[1],y=h?r:"valid",b=h?u:Uf(u,f,m),x=("avg"===n?function(){return Ll(b,t,i,y,o)}:function(){return xf(b,t,i,y,o)})(),k=h?x:Gl(x,f,g);return c?Ml(k,[k.shape[1],k.shape[2],k.shape[3]]):k}});var Wf=Rs({prelu_:function(e,t){var n={x:Es(e,"x","prelu"),alpha:Es(t,"alpha","prelu")};return xs.runKernel(Ua,n)}});var Gf=Rs({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Es(e,"x","prod");"bool"===r.dtype&&(r=Vu(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return xs.runKernel(Va,a,i)}});var Zf=Rs({raggedGather_:function(e,t,n,r){var a=e.map((function(e,t){return Es(e,"tensors".concat(t),"raggedGather","int32")})),i={paramsNestedSplits:a,paramsDenseValues:Es(t,"paramsDenseValues","raggedGather"),indices:Es(n,"indices","raggedGather","int32")},o={outputRaggedRank:r},s=xs.runKernel(Wa,i,o);return{outputNestedSplits:s.slice(0,s.length-1),outputDenseValues:s[s.length-1]}}});var Hf=Rs({raggedRange_:function(e,t,n){var r=Es(e,"starts","raggedRange"),a={starts:r,limits:Es(t,"limits","raggedRange",r.dtype),deltas:Es(n,"deltas","raggedRange",r.dtype)},i=xs.runKernel(Ga,a);return{rtNestedSplits:i[0],rtDenseValues:i[1]}}});var qf=Rs({raggedTensorToTensor_:function(e,t,n,r,a){var i=Es(e,"shape","raggedTensorToTensor","int32"),o=Es(t,"values","raggedTensorToTensor"),s=Es(n,"defaultValue","raggedTensorToTensor",o.dtype),u=r.map((function(e,t){return Es(e,"tensors".concat(t),"raggedTensorToTensor","int32")})),c={shape:i,values:o,defaultValue:s,rowPartitionTensors:u},l={rowPartitionTypes:a};return xs.runKernel(Za,c,l)}});var Kf=Rs({rand_:function(e,t,n){_n(e);var r=an(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return xs.makeTensor(a,e,n)}}),Xf=n(6699),Jf=function(){function e(t,n,r,a,i){Vt(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=Xf.alea(o.toString())}return Zt(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),Yf=function(){function e(t,n,r,a){Vt(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=Xf.alea(i.toString()),this.randn=new Jf(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return Zt(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),Qf=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(Vt(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"===typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=Xf.alea(i)}return Zt(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var eh=Rs({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(_n(e),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new Yf(t,n,r,a),o=Uu(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var th=Rs({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(_n(e),null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new Jf(t,n,r,!1,a),o=Uu(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var nh=Rs({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error("Unsupported data type ".concat(t));return th(e,0,1,t,n)}});var rh=Rs({randomUniform_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;_n(e);for(var i=Uu(e,r),o=new Qf(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});function ah(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return xs.runKernel(Ha,{},a)}var ih=Rs({real_:function(e){var t={input:Es(e,"input","real")};return xs.runKernel(qa,t)}});var oh=Rs({reciprocal_:function(e){var t={x:Es(e,"x","reciprocal")};return xs.runKernel(Ka,t)}});var sh=Rs({relu_:function(e){var t={x:Es(e,"x","relu")};return xs.runKernel(Xa,t)}});var uh=Rs({relu6_:function(e){var t={x:Es(e,"x","relu6")};return xs.runKernel(ni,t)}});var ch=Rs({reverse_:function(e,t){var n={x:Es(e,"x","reverse")},r={dims:t};return xs.runKernel(ri,n,r)}});var lh=Rs({reverse1d_:function(e){var t=Es(e,"x","reverse");return tn(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),ch(t,0)}});var dh=Rs({reverse2d_:function(e,t){var n=Es(e,"x","reverse");return tn(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),ch(n,t)}});var fh=Rs({reverse3d_:function(e,t){var n=Es(e,"x","reverse");return tn(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),ch(n,t)}});var hh=Rs({reverse4d_:function(e,t){var n=Es(e,"x","reverse");return tn(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),ch(n,t)}});var ph=Rs({round_:function(e){var t={x:Es(e,"x","round")};return xs.runKernel(ai,t)}});var vh=Rs({rsqrt_:function(e){var t={x:Es(e,"x","rsqrt","float32")};return xs.runKernel(ii,t)}});var mh=Rs({selu_:function(e){var t={x:Es(e,"x","selu")};return xs.runKernel(li,t)}});var gh=Rs({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=Es(e,"x","separableConv2d"),u=Es(t,"depthwiseFilter","separableConv2d"),c=Es(n,"pointwiseFilter","separableConv2d"),l=s,d=!1;if(3===s.rank&&(d=!0,l=Ml(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");tn(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")})),tn(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),tn(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),tn(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],".")})),tn(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],".")}));var f=u.shape[2],h=u.shape[3];tn(c.shape[2]===f*h,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(f*h,", ")+"but got ".concat(c.shape[2],".")}));var p=yd(l,u,r,a,o,i),v=1,m=id(p,c,v,"valid",o);return d?Ml(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});function yh(){return yh=me(ye().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,h;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Es(t,"x","setdiff1d"),a=Es(n,"y","setdiff1d"),tn(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),tn(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),tn(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=7,r.data();case 7:return i=e.sent,e.next=10,a.data();case 10:for(o=e.sent,s=new Set(o),u=0,c=0;c<i.length;c++)s.has(i[c])||u++;for(l=new Ho([u],r.dtype),d=new Ho([u],"int32"),f=0,h=0;f<i.length;f++)s.has(i[f])||(l.values[h]=i[f],d.values[h]=f,h++);return e.abrupt("return",[l.toTensor(),d.toTensor()]);case 18:case"end":return e.stop()}}),e)}))),yh.apply(this,arguments)}var bh=function(e,t){return yh.apply(this,arguments)};var xh=Rs({sign_:function(e){var t={x:Es(e,"x","sign")};return xs.runKernel(pi,t)}});var kh=Rs({sin_:function(e){var t={x:Es(e,"x","sin","float32")};return xs.runKernel(fi,t)}});var wh=Rs({sinh_:function(e){var t={x:Es(e,"x","sinh")};return xs.runKernel(hi,t)}});var Sh=Rs({slice1d_:function(e,t,n){var r=Es(e,"x","slice1d");return tn(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),Ul(r,[t],[n])}});var Ih=Rs({slice2d_:function(e,t,n){var r=Es(e,"x","slice2d");return tn(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),Ul(r,t,n)}});var Nh=Rs({slice3d_:function(e,t,n){var r=Es(e,"x","slice3d");return tn(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),Ul(r,t,n)}});var Th=Rs({slice4d_:function(e,t,n){var r=Es(e,"x","slice4d");return tn(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),Ul(r,t,n)}});var Ch=Rs({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Es(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return xs.runKernel(ki,r,a)}});var Eh=Rs({fft_:function(e){tn("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return xs.runKernel(Gr,t)}});var _h=Rs({ifft_:function(e){tn("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return xs.runKernel(na,t)}});var Ah=Rs({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=Ml(e,[r,n]);t=_h(a)}else{var i=[r,2*(n-1)],o=Ml(ih(e),[r,n]),s=Ml(Xd(e),[r,n]),u=ch(Ul(o,[0,1],[r,n-2]),1),c=tc(ch(Ul(s,[0,1],[r,n-2]),1),oc(-1)),l=jl([o,u],1),d=jl([s,c],1),f=Ml(Os(l,d),[i[0],i[1]]);t=_h(f)}if(t=ih(t),3===e.rank&&0!==e.shape[0]){var h=t,p=e.shape[0];t=Ml(t,[p,t.shape[0]/p,t.shape[1]]),h.dispose()}return t}});var Rh=Rs({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Es(e,"x","split"),a={x:r},i={numOrSizeSplits:t,axis:n};return xs.runKernel(xi,a,i)}});var Oh=Rs({rfft_:function(e,t){tn("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=Ul(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=jl([e,If(s)],e.shape.length-1),r=t}else n=e;var u=ac(n),c=Ml(Os(n,u),[a,r]),l=Eh(c),d=Math.floor(r/2)+1,f=ih(l),h=Xd(l),p=Rh(f,[d,r-d],f.shape.length-1),v=Rh(h,[d,r-d],h.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=d,Ml(Os(p[0],v[0]),m)}});var Dh=Rs({squaredDifference_:function(e,t){var n=Es(e,"a","squaredDifference"),r=Es(t,"b","squaredDifference"),a=cs(n,r),i=(0,C.Z)(a,2);n=i[0],r=i[1],xc(n.shape,r.shape);var o={a:n,b:r};return xs.runKernel(Ci,o,{})}});var Ph=Rs({squeeze_:function(e,t){var n=Es(e,"x","squeeze","string_or_numeric");return Ml(n,hn(n.shape,t).newShape)}});var Fh=Rs({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=_s(e,"tensors","stack","string_or_numeric");tn(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&tn(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return xs.runKernel(ja,r,a)}});var Mh=Rs({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Es(e,"x","step"),r={x:n},a={alpha:t};return xs.runKernel(Gi,r,a)}});var Lh=Rs({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=Es(e,"x","stridedSlice","string_or_numeric"),l={x:c},d={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return xs.runKernel(Ai,l,d)}});var $h=Rs({tan_:function(e){var t={x:Es(e,"x","tan","float32")};return xs.runKernel(Fi,t)}});function jh(e,t){rn(e);var n=Ns(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ds(e,null,n,t)}function zh(e,t,n){if(rn(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Ns(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ds(e,t,r,n)}function Bh(e,t,n){if(rn(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=Ns(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Ds(e,t,r,n)}function Uh(e,t,n){if(rn(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=Ns(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Ds(e,t,r,n)}function Vh(e,t,n){if(rn(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=Ns(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Ds(e,t=t||r,r,n)}function Wh(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}!function(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}(n,t,e)}function Gh(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:an(t.shape)/u,sliceSize:o,strides:[].concat((0,Le.Z)(Sn(n.slice(0,a))),[1]),outputSize:an(n)}}var Zh=Rs({tensorScatterUpdate_:function(e,t,n){var r=Es(e,"tensor","tensorScatterupdate"),a=Es(t,"indices","tensorScatterupdate","int32"),i=Es(n,"updates","tensorScatterupdate");if(Wh(i,a,r.shape),r.dtype!==i.dtype)throw new Error("tensor and updates must have the same dtype, instead they are ".concat(r.dtype," and ").concat(i.dtype,"."));var o={tensor:r,indices:a,updates:i};return xs.runKernel(si,o,{})}});var Hh=Rs({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Es(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var i={x:r},o={k:t,sorted:n},s=xs.runKernel($i,i,o),u=(0,C.Z)(s,2),c=u[0],l=u[1];return{values:c,indices:l}}});var qh=Rs({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(_n(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new Jf(t,n,r,!0,a),o=Uu(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var Kh=Rs({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Es(e,"x","unique","string_or_numeric");tn(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},i=xs.runKernel(Bi,r,a),o=(0,C.Z)(i,2),s=o[0],u=o[1];return{values:s,indices:u}}});var Xh=Rs({unsortedSegmentSum_:function(e,t,n){var r=Es(e,"x","unsortedSegmentSum"),a=Es(t,"segmentIds","unsortedSegmentSum","int32");tn(sn(n),(function(){return"numSegments must be of dtype int"}));var i={x:r,segmentIds:a},o={numSegments:n};return xs.runKernel(Vi,i,o)}});var Jh=Rs({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Es(e,"x","unstack","string_or_numeric");tn(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return xs.runKernel(Ui,r,a)}});function Yh(e,t){return yf(e,t,"right")}function Qh(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return xs.makeVariable(e,t,n,r)}function ep(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=Uu(e,"int32"),i=Uu([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]),u=o*e.length;i.values.set(s,u)}return i.toTensor()}function tp(){return(tp=me(ye().mark((function e(t){var n,r,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Es(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=ep(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var np=function(e){return tp.apply(this,arguments)};function rp(){return(rp=me(ye().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,h,p,v,m;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=Es(t,"tensor","boolMask"),i=Es(n,"mask","boolMask","bool"),o=null==r?0:r,s=i.rank,u=a.shape,tn(s>0,(function(){return"mask cannot be scalar"})),nn(u.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=o;l<o+s;l++)c*=u[l];return d=u.slice(0,o).concat([c],u.slice(o+s)),f=Ml(a,d),h=Ml(i,[-1]),e.next=14,np(h);case 14:return p=e.sent,v=Ph(p,[1]),m=Hd(f,v,o),t!==a&&a.dispose(),n!==i&&i.dispose(),v.dispose(),f.dispose(),h.dispose(),p.dispose(),e.abrupt("return",m);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ap=function(e,t,n){return rp.apply(this,arguments)};var ip=Rs({transpose_:function(e,t,n){var r=Es(e,"x","transpose");if(null==t&&(t=r.shape.map((function(e,t){return t})).reverse()),tn(r.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){tn(e>=0&&e<r.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t)}))})),r.rank<=1)return r.clone();var a={x:r},i={perm:t};return"complex64"===r.dtype?qu((function(){var e=ih(r),t=Xd(r);return e=xs.runKernel(zi,{x:e},i),t=xs.runKernel(zi,{x:t},i),n&&(t=uf(t)),Os(e,t)})):xs.runKernel(zi,a,i)}});var op=Rs({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=Es(e,"v","movingAverage"),o=Es(t,"x","movingAverage"),s=Es(n,"decay","movingAverage");ls(i,o),tn(on(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var u=oc(1),c=vc(u,s),l=tc(vc(o,i),c);if(a){tn(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=Es(r,"step","movingAverage");l=ec(l,vc(u,pc(s,d)))}return Yu(i,l)}});var sp=Rs({scatterND_:function(e,t,n){_n(n);var r=Es(e,"indices","scatterND","int32"),a=Es(t,"updates","scatterND");Wh(a,r,n);var i={indices:r,updates:a},o={shape:n};return xs.runKernel(oi,i,o)}});function up(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var cp=Rs({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;_n(n);var a=Es(e,"sparseIndices","sparseToDense","int32"),i=Es(t,"sparseValues","sparseToDense","string_or_numeric"),o=Es(r,"defaultValue","sparseToDense",i.dtype);up(a,i,n,o);var s={sparseIndices:a,sparseValues:i,defaultValue:o},u={outputShape:n};return xs.runKernel(Ti,s,u)}});var lp=Rs({gatherND_:function(e,t){var n=Es(t,"indices","gatherND","int32"),r={params:Es(e,"x","gatherND","string_or_numeric"),indices:n};return xs.runKernel(Yr,r)}});var dp=Rs({dropout_:function(e,t,n,r){var a=Es(e,"x","dropout");if(tn("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),tn(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof Xo?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(on(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=ec(Zd(Yu(rh(i,0,1,"float32",r),o)),o);return tc(a,s)}});function fp(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function hp(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return jh(a,"float32")}function pp(){return pp=me(ye().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,h,p,v,m,g,y=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>2&&void 0!==y[2]?y[2]:1,a=Es(t,"predictions","inTopK"),i=Es(n,"targets","inTopK"),tn(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),tn(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(i.rank)})),nn(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],tn(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(r)})),e.next=10,a.data();case 10:return s=e.sent,e.next=13,i.data();case 13:u=e.sent,c=s.length/o,l=o,d=pn("bool",c),f=0;case 17:if(!(f<c)){e.next=35;break}for(h=f*l,p=s.subarray(h,h+l),v=[],m=0;m<p.length;m++)v.push({value:p[m],index:m});v.sort((function(e,t){return t.value-e.value})),d[f]=0,g=0;case 25:if(!(g<r)){e.next=32;break}if(v[g].index!==u[f]){e.next=29;break}return d[f]=1,e.abrupt("break",32);case 29:g++,e.next=25;break;case 32:f++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==i&&i.dispose(),e.abrupt("return",Ps(d,i.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),pp.apply(this,arguments)}var vp=function(e,t){return pp.apply(this,arguments)};var mp=Rs({conv2DBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Ml(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=Ml(t,[1,t.shape[0],t.shape[1],t.shape[2]])),tn(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),tn(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")})),tn(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var c="NHWC"===i?s.shape[3]:s.shape[1],l="NHWC"===i?u.shape[3]:u.shape[1];tn(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],".")})),tn(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(l,") must ")+"match output depth for filter (".concat(n[3],").")})),Fl("conv2dDerFilter",a,o);var d={x:s,dy:u},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return xs.runKernel(gr,d,f)}});function gp(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return tc(e,Mh(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function yp(e,t){var n=t,r=bc(e.shape,t.shape);return r.length>0&&(n=Ld(n,r)),Ml(n,e.shape)}function bp(e,t,n,r){if("linear"===t)return e;if("relu"===t)return sh(e);if("elu"===t)return Td(e);if("relu6"===t)return uh(e);if("prelu"===t)return Wf(e,n);if("leakyrelu"===t)return ef(e,r);if("sigmoid"===t)return Bl(e);throw new Error("Unknown fused activation ".concat(t,"."))}var xp=function(e,t){return!(e>0)||"linear"===t};var kp=Rs({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,d=e.activation,f=void 0===d?"linear":d,h=e.preluActivationWeights,p=e.leakyreluAlpha;if(f=f||"linear",!1===xp(xs.state.gradientDepth,f)){tn("NHWC"===o,(function(){return"Error in fused conv2d: got dataFormat of ".concat(o," but ")+"only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."}));var v=id(t,n,r,a,o,u,c);return null!=l&&(v=Yu(v,l)),bp(v,f,h,p)}var m=Es(t,"x","conv2d","float32"),g=Es(n,"filter","conv2d","float32"),y=m,b=!1;3===m.rank&&(b=!0,y=Ml(m,[1,m.shape[0],m.shape[1],m.shape[2]])),tn(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(y.rank,".")})),tn(4===g.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(g.rank,".")})),Fl("fused conv2d",a,c);var x="NHWC"===o?y.shape[3]:y.shape[1];tn(g.shape[2]===x,(function(){return"Error in conv2d: depth of input (".concat(x,") must match ")+"input depth for filter ".concat(g.shape[2],".")})),tn(Ol(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(u,"'")}));var k,w,S=wl(y.shape,g.shape,r,u,a,c);if(null!=l){var I=cs(k=Es(l,"bias","fused conv2d"),m),N=(0,C.Z)(I,1);k=N[0],"NHWC"===o?xc(S.outShape,k.shape):(tn(k.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of "+"rank-".concat(k.shape.length,".")})),tn(0===k.shape.length||k.shape[0]===S.outChannels||1===k.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(k.shape,") is not ")+"compatible with the number of output channels "+"(".concat(S.outChannels,")")})))}if(null!=h){var T=h.shape;if(tn(T.length<=1||3===T.length,(function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of "+"rank-".concat(T.length,".")})),1===T.length)tn(1===T[0]||T[0]===S.outChannels,(function(){return"Error in fused conv2d: PReLU activation weights "+"(".concat(T,") is not compatible with the number of output ")+"channels (".concat(S.outChannels,").")}));else if(3===T.length)try{xc(T,S.outShape)}catch(P){var E="Error in fused conv2d: PReLU activation weights (".concat(T,") ")+"is not compatible with the output shape of the conv2d "+"(".concat(S.outShape,").");throw Error(E)}w=Es(h,"prelu weights","fused conv2d")}var _=function(e,t){tn("NHWC"===o,(function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var n=(0,C.Z)(t,4),i=n[0],s=n[1],c=n[2],l=n[3],d=gp(e,c,f);tn(Rl(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(u,"'")}));var h=[sd(s.shape,d,i,r,a),mp(s,d,i.shape,r,a)];if(null!=l){var p=yp(l,d);h.push(p)}return h},A={x:y,filter:g,bias:k,preluActivationWeights:w},R={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:c,activation:f,leakyreluAlpha:p};if(null==l){var O=ic((function(e,t,n){var r=xs.runKernel(Ki,A,R);return n([t,e,r]),b&&(r=Ml(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:_}}));return O(y,g)}var D=ic((function(e,t,n,r){var a=xs.runKernel(Ki,A,R);return r([t,e,a,n]),b&&(a=Ml(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:_}}));return D(y,g,k)}});var wp=Rs({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Ml(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=Ml(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={x:s,dy:u},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return xs.runKernel(Ar,c,l)}});var Sp=Rs({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=Ml(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={dy:s,filter:n},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},d=xs.runKernel(Rr,c,l);return u?Ml(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var Ip=Rs({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,d=e.activation,f=void 0===d?"linear":d,h=e.preluActivationWeights,p=e.leakyreluAlpha;if(!1===xp(xs.state.gradientDepth,f)){var v=yd(t,n,r,a,o,u,c);return null!=l&&(v=Yu(v,l)),bp(v,f,h,p)}var m=Es(t,"x","depthwiseConv2d","float32"),g=Es(n,"filter","depthwiseConv2d","float32"),y=m,b=!1;3===m.rank&&(b=!0,y=Ml(m,[1,m.shape[0],m.shape[1],m.shape[2]])),tn(4===y.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(y.rank,".")})),tn(4===g.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(g.rank,".")})),tn(y.shape[3]===g.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(y.shape[3],") must match the inChannels dimension in ")+"filter ".concat(g.shape[2],".")})),null==u&&(u=[1,1]),tn(Ol(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(u,"'")})),Fl("fused depthwiseConv2d",a,c);var x,k,w=wl(y.shape,g.shape,r,u,a,c,!0);if(null!=l){var S=cs(x=Es(l,"bias","fused conv2d"),m),I=(0,C.Z)(S,1);x=I[0],xc(w.outShape,x.shape)}null!=h&&(k=Es(h,"prelu weights","fused depthwiseConv2d"));var N=function(e,t){tn(Rl(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var n=(0,C.Z)(t,4),i=n[0],o=n[1],s=n[2],l=n[3],d=gp(e,s,f),h=Sp(o.shape,d,i,r,a,u,c),p=wp(o,d,i.shape,r,a,u,c);return null!=l?[h,p,yp(x,d)]:[h,p]},T={x:y,filter:g,bias:x,preluActivationWeights:k},E={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:c,activation:f,leakyreluAlpha:p};if(null==l){var _=ic((function(e,t,n){var r=xs.runKernel(Xi,T,E);return n([t,e,r]),b&&(r=Ml(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:N}}));return _(y,g)}var A=ic((function(e,t,n,r){var a=xs.runKernel(Xi,T,E);return r([t,e,a,n]),b&&(a=Ml(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:N}}));return A(y,g,x)}});var Np=Rs({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,u=e.activation,c=void 0===u?"linear":u,l=e.preluActivationWeights,d=e.leakyreluAlpha,f=void 0===d?.2:d;if(!1===xp(xs.state.gradientDepth,c)){var h=zl(t,n,a,o);return null!=s&&(h=Yu(h,s)),bp(h,c,l,f)}var p=Es(t,"a","fused matMul"),v=Es(n,"b","fused matMul"),m=cs(p,v),g=(0,C.Z)(m,2);p=g[0],v=g[1];var y=a?p.shape[p.rank-2]:p.shape[p.rank-1],b=o?v.shape[v.rank-1]:v.shape[v.rank-2],x=a?p.shape[p.rank-1]:p.shape[p.rank-2],k=o?v.shape[v.rank-2]:v.shape[v.rank-1],w=p.shape.slice(0,-2),S=v.shape.slice(0,-2),I=an(w),N=an(S);tn(y===b,(function(){return"Error in fused matMul: inner shapes (".concat(y,") and (")+"".concat(b,") of Tensors with shapes ").concat(p.shape," and ")+"".concat(v.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")}));var T,E,_=xc(p.shape.slice(0,-2),v.shape.slice(0,-2)).concat([x,k]),A=Ml(p,a?[I,y,x]:[I,x,y]),R=Ml(v,o?[N,k,b]:[N,b,k]);if(null!=s){var O=cs(T=Es(s,"bias","fused matMul"),p);T=(0,C.Z)(O,1)[0],xc(_,T.shape)}null!=l&&(E=Es(l,"prelu weights","fused matMul"));var D=function(e,t){var n,r,i=(0,C.Z)(t,4),u=i[0],l=i[1],d=i[2],f=i[3],h=gp(Ml(e,d.shape),d,c);return a||o?!a&&o?(n=zl(h,l,!1,!1),r=zl(h,u,!0,!1)):a&&!o?(n=zl(l,h,!1,!0),r=zl(u,h,!1,!1)):(n=zl(l,h,!0,!0),r=zl(h,u,!0,!0)):(n=zl(h,l,!1,!0),r=zl(u,h,!0,!1)),null!=s?[n,r,yp(f,h)]:[n,r]},P={a:A,b:R,bias:T,preluActivationWeights:E},F={transposeA:a,transposeB:o,activation:c,leakyreluAlpha:f};if(null==s){var M=ic((function(e,t,n){var r=xs.runKernel(qi,P,F);return n([e,t,r]),{value:Ml(r,_),gradFunc:D}}));return M(A,R)}var L=ic((function(e,t,n,r){var a=xs.runKernel(qi,P,F);return r([e,t,a,n]),{value:Ml(a,_),gradFunc:D}}));return L(A,R,T)}});var Tp=Rs({hammingWindow_:function(e){return hp(e,.54,.46)}});var Cp=Rs({hannWindow_:function(e){return hp(e,.5,.5)}});var Ep=Rs({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(Ul(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=jl([Ul(e,i,t-s),fc([s],a)]);o.push(u),i+=n}return 0===o.length?zh([],[0,t]):Ml(jl(o),[o.length,t])}});var _p=Rs({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Cp;null==r&&(r=fp(t));var i=Ep(e,t,n),o=tc(i,a(t));return Oh(o,r)}});var Ap=Rs({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Es(e,"image","cropAndResize"),s=Es(t,"boxes","cropAndResize","float32"),u=Es(n,"boxInd","cropAndResize","int32"),c=s.shape[0];tn(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),tn(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,".")})),tn(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,".")})),tn(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),tn(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),tn("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:o,boxes:s,boxInd:u},d={method:a,extrapolationValue:i,cropSize:r},f=xs.runKernel(Tr,l,d);return f}});var Rp=Rs({flipLeftRight_:function(e){var t=Es(e,"image","flipLeftRight","float32");tn(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return xs.runKernel(Hr,n,{})}});var Op=Rs({grayscaleToRGB_:function(e){var t=Es(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];tn(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),tn(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,Wd(t,a)}});var Dp=Rs({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=Es(e,"image","rotateWithOffset","float32");tn(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r},s=xs.runKernel(Hi,i,o);return s}});function Pp(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),tn(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),tn(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),tn(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),tn(1===t.rank,(function(){return"scores must be a 1D tensor"})),tn(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),tn(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var Fp=Rs({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=Es(e,"boxes","nonMaxSuppression","float32"),o=Es(t,"scores","nonMaxSuppression","float32"),s=Pp(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return xs.runKernel(Pa,{boxes:i,scores:o},u)}});function Mp(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||Lp)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function Lp(e,t){return e>t?1:e<t?-1:0}function $p(e,t,n,r,a){return Bp(e,t,n,r,a,0)}function jp(e,t,n,r,a,i){return Bp(e,t,n,r,a,0,!1,i,!0)}function zp(e,t,n,r,a,i){return Bp(e,t,n,r,a,i,!0)}function Bp(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[],l=0;l<t.length;l++)t[l]>a&&c.push({score:t[l],boxIndex:l,suppressBeginIndex:0});c.sort(Wp);for(var d=i>0?-.5/i:0,f=[],h=[];f.length<n&&c.length>0;){var p=c.pop(),v=p.score,m=p.boxIndex,g=p.suppressBeginIndex;if(v<a)break;for(var y=!1,b=f.length-1;b>=g;--b){var x=Up(e,m,f[b]);if(x>=r){y=!0;break}if(p.score=p.score*Vp(r,d,x),p.score<=a)break}p.suppressBeginIndex=f.length,y||(p.score===v?(f.push(m),h.push(p.score)):p.score>a&&Mp(c,p,Wp))}var k=f.length,w=n-k;s&&w>0&&(f.push.apply(f,(0,Le.Z)(new Array(w).fill(0))),h.push.apply(h,(0,Le.Z)(new Array(w).fill(0))));var S={selectedIndices:f};return o&&(S.selectedScores=h),u&&(S.validOutputs=k),S}function Up(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),h=(s-i)*(u-o),p=(d-c)*(f-l);if(h<=0||p<=0)return 0;var v=Math.max(i,c),m=Math.max(o,l),g=Math.min(s,d),y=Math.min(u,f),b=Math.max(g-v,0)*Math.max(y-m,0);return b/(h+p-b)}function Vp(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function Wp(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function Gp(){return Gp=me(ye().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,h,p=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:.5,i=p.length>4&&void 0!==p[4]?p[4]:Number.NEGATIVE_INFINITY,o=Es(t,"boxes","nonMaxSuppressionAsync"),s=Es(n,"scores","nonMaxSuppressionAsync"),u=Pp(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,e.next=10,Promise.all([o.data(),s.data()]);case 10:return c=e.sent,l=c[0],d=c[1],f=$p(l,d,r,a,i),h=f.selectedIndices,o!==t&&o.dispose(),s!==n&&s.dispose(),e.abrupt("return",jh(h,"int32"));case 17:case"end":return e.stop()}}),e)}))),Gp.apply(this,arguments)}var Zp=function(e,t,n){return Gp.apply(this,arguments)};var Hp=Rs({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Es(e,"boxes","nonMaxSuppression"),s=Es(t,"scores","nonMaxSuppression"),u=Pp(o,s,n,r,a,i),c={boxes:o,scores:s},l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},d=xs.runKernel(Ma,c,l);return{selectedIndices:d[0],selectedScores:d[1]}}});function qp(){return qp=me(ye().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,h,p,v,m=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>3&&void 0!==m[3]?m[3]:.5,i=m.length>4&&void 0!==m[4]?m[4]:Number.NEGATIVE_INFINITY,o=m.length>5&&void 0!==m[5]?m[5]:0,s=Es(t,"boxes","nonMaxSuppressionAsync"),u=Es(n,"scores","nonMaxSuppressionAsync"),c=Pp(s,u,r,a,i,o),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,e.next=12,Promise.all([s.data(),u.data()]);case 12:return l=e.sent,d=l[0],f=l[1],h=zp(d,f,r,a,i,o),p=h.selectedIndices,v=h.selectedScores,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:jh(p,"int32"),selectedScores:jh(v)});case 19:case"end":return e.stop()}}),e)}))),qp.apply(this,arguments)}var Kp=function(e,t,n){return qp.apply(this,arguments)};var Xp=Rs({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Es(e,"boxes","nonMaxSuppression"),s=Es(t,"scores","nonMaxSuppression"),u=Pp(o,s,n,r,a,null),c=u.maxOutputSize,l=u.iouThreshold,d=u.scoreThreshold,f={boxes:o,scores:s},h={maxOutputSize:c,iouThreshold:l,scoreThreshold:d,padToMaxOutputSize:i},p=xs.runKernel(Fa,f,h);return{selectedIndices:p[0],validOutputs:p[1]}}});function Jp(){return Jp=me(ye().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,x=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.length>3&&void 0!==x[3]?x[3]:.5,i=x.length>4&&void 0!==x[4]?x[4]:Number.NEGATIVE_INFINITY,o=x.length>5&&void 0!==x[5]&&x[5],s=Es(t,"boxes","nonMaxSuppressionAsync"),u=Es(n,"scores","nonMaxSuppressionAsync"),c=Pp(s,u,r,a,i,null),l=c.maxOutputSize,d=c.iouThreshold,f=c.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return h=e.sent,p=(0,C.Z)(h,2),v=p[0],m=p[1],g=jp(v,m,l,d,f,o),y=g.selectedIndices,b=g.validOutputs,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:jh(y,"int32"),validOutputs:oc(b,"int32")});case 19:case"end":return e.stop()}}),e)}))),Jp.apply(this,arguments)}var Yp=function(e,t,n){return Jp.apply(this,arguments)},Qp=n(3878),ev=n(9199),tv=n(5267);function nv(e){return(0,Qp.Z)(e)||(0,ev.Z)(e)||(0,Bt.Z)(e)||(0,tv.Z)()}var rv=Rs({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Es(e,"images","resizeBilinear");tn(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),tn(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),tn(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Ml(a,[1,a.shape[0],a.shape[1],a.shape[2]])),nv(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=xs.runKernel(ei,s,u);return o?Ml(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var av=Rs({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Es(e,"images","resizeNearestNeighbor");tn(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),tn(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),tn("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),tn(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Ml(a,[1,a.shape[0],a.shape[1],a.shape[2]])),nv(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=xs.runKernel(Ya,s,u);return o?Ml(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});function iv(e,t){for(var n,r,a,i,o,s,u=jh([-1]),c=jh([0]),l=jh([0]),d=0;d<e.size-1;d++){n=Ul(e,0,d+1),r=Ul(e,d+1),o=ec(Ld(n),t),s=ec(Ld(r),t);var f=Ld(tc(n,ah(0,n.size)));a=ec(f,Ld(n));var h=fc(r.shape,n.size),p=Yu(ah(0,r.size),h),v=tc(r,p);i=ec(Ld(v),Ld(r));var m=vc(a,i),g=vc(a,i),y=tc(o,s);l=tc(tc(y,m),g);var b=qd(l,c);c=wd(b,l,c),u=wd(b,jh([d]),u)}return u}var ov=Rs({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,u=Es(e,"image","threshold"),c=.2989,l=.587,d=.114,f=u.shape[0]*u.shape[1],h=tc(jh([s]),255);if(tn(3===u.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(u.rank,".")})),tn(3===u.shape[2]||1===u.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(u.shape[2],".")})),tn("int32"===u.dtype||"float32"===u.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(u.dtype,".")})),tn("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===u.shape[2]){var p=Rh(u,[1,1,1],-1),v=(0,C.Z)(p,3);t=v[0],n=v[1],r=v[2];var m=tc(t,c),g=tc(n,l),y=tc(r,d);a=Yu(Yu(m,g),y)}else a=e;if("otsu"===i){var b=Xl(Vu(ph(a),"int32"),Ps([]),256);h=iv(b,f)}var x=o?nf(a,h):qd(a,h),k=Vu(tc(x,255),"int32");return k}});var sv=Rs({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=Es(e,"image","transform","float32"),s=Es(t,"transforms","transform","float32");tn(4===o.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),tn(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),tn(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")}));var u={image:o,transforms:s},c={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return xs.runKernel(ji,u,c)}});var uv=Rs({bandPart_:function(e,t,n){var r=Es(e,"a","bandPart");tn(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a,i,o=r.shape,s=r.shape.slice(-2),u=(0,C.Z)(s,2),c=u[0],l=u[1];"number"===typeof t?(tn(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),tn(t<=c,(function(){return"bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(c,").")})),a=Es(t<0?c:t,"numLower","bandPart")):(tn("int32"===t.dtype,(function(){return"bandPart(): numLower's dtype must be an int32."})),a=wd(tf(t,0),c,Cf(t,c))),"number"===typeof n?(tn(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")})),tn(n<=l,(function(){return"bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(l,").")})),i=Es(n<0?l:n,"numUpper","bandPart")):(tn("int32"===n.dtype,(function(){return"bandPart(): numUpper's dtype must be an int32."})),i=wd(tf(n,0),l,Cf(n,l)));var d=Ml(ah(0,c,1,"int32"),[-1,1]),f=ah(0,l,1,"int32"),h=vc(d,f),p=hf(nf(h,a),Kd(h,uf(i))),v=If([c,l],r.dtype);return Ml(Fh(Jh(Ml(r,[-1,c,l])).map((function(e){return wd(p,e,v)}))),o)}});var cv=Rs({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,tn(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){tn(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=Rh(e,e.shape[0],0).map((function(e){return Ph(e,[0])}))),tn(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(xs.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=tc(Ld(tc(n[a],t)),n[a]);t=vc(t,i)}return ec(t,jd(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?Fh(n,0):n}});function lv(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return xs.tidy((function(){tn(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=Gd(n),i=Wu(e),o=zh([[1]],[1,1]),s=Wu(o),u=n>=r?r:n,c=function(e){var t=i,u=s,c=a,l=xs.tidy((function(){var t=Ul(i,[e,e],[n-e,1]),u=jd(t),c=Ul(i,[e,e],[1,1]),l=wd(qd(c,0),zh([[-1]]),zh([[1]])),d=vc(c,tc(l,u)),f=ec(t,d);s=1===f.shape[0]?Wu(o):jl([o,Ul(f,[1,0],[f.shape[0]-1,f.shape[1]])],0);var h=uf(ec(zl(l,d),u)),p=Ul(i,[e,0],[n-e,r]),v=tc(h,s),m=ip(s);if(0===e)i=vc(p,zl(v,zl(m,p)));else{var g=vc(p,zl(v,zl(m,p)));i=jl([Ul(i,[0,0],[e,r]),g],0)}var y=ip(v),b=Ul(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=vc(b,zl(zl(b,s),y));else{var x=vc(b,zl(zl(b,s),y));a=jl([Ul(a,[0,0],[n,e]),x],1)}return[s,i,a]})),d=(0,C.Z)(l,3);s=d[0],i=d[1],a=d[2],Ku([t,u,c])},l=0;l<u;++l)c(l);return!t&&n>r&&(a=Ul(a,[0,0],[n,r]),i=Ul(i,[0,0],[r,r])),[a,i]}))}var dv,fv=Rs({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(tn(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return lv(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=Jh(Ml(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=lv(e,t),r=(0,C.Z)(n,2),o=r[0],s=r[1];a.push(o),i.push(s)}));var o=Ml(Fh(a,0),e.shape),s=Ml(Fh(i,0),e.shape);return[o,s]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(dv||(dv={}));var hv=Rs({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dv.SUM_BY_NONZERO_WEIGHTS,r=Es(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=Es(t,"weights","computeWeightedLoss"));var i=null==a?r:tc(r,a);if(n===dv.NONE)return i;if(n===dv.SUM)return Ld(i);if(n===dv.MEAN){if(null==a)return Sf(i);var o=r.size/a.size,s=ec(Ld(i),Ld(a));return o>1?ec(s,oc(o)):s}if(n===dv.SUM_BY_NONZERO_WEIGHTS){if(null==a)return ec(Ld(i),oc(r.size));var u=tc(a,Nf(r.shape)),c=Vu(Ld(Df(u,oc(0))),"float32");return ec(Ld(i),c)}throw Error("Unknown reduction: ".concat(n))}});var pv=Rs({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dv.SUM_BY_NONZERO_WEIGHTS,a=Es(e,"labels","absoluteDifference"),i=Es(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=Es(n,"weights","absoluteDifference")),nn(a.shape,i.shape,"Error in absoluteDifference: ");var s=gc(vc(a,i));return hv(s,o,r)}});var vv=Rs({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:dv.SUM_BY_NONZERO_WEIGHTS,i=Es(e,"labels","cosineDistance"),o=Es(t,"predictions","cosineDistance"),s=null;null!=r&&(s=Es(r,"weights","cosineDistance")),nn(i.shape,o.shape,"Error in cosineDistance: ");var u=oc(1),c=vc(u,Ld(tc(i,o),n,!0));return hv(c,s,a)}});var mv=Rs({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dv.SUM_BY_NONZERO_WEIGHTS,a=Es(e,"labels","hingeLoss"),i=Es(t,"predictions","hingeLoss"),o=null;null!=n&&(o=Es(n,"weights","hingeLoss")),nn(a.shape,i.shape,"Error in hingeLoss: ");var s=oc(1);a=vc(tc(oc(2),a),s);var u=sh(vc(s,tc(a,i)));return hv(u,o,r)}});var gv=Rs({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:dv.SUM_BY_NONZERO_WEIGHTS,i=Es(e,"labels","huberLoss"),o=Es(t,"predictions","huberLoss"),s=null;null!=n&&(s=Es(n,"weights","huberLoss")),nn(i.shape,o.shape,"Error in huberLoss: ");var u=oc(r),c=gc(vc(o,i)),l=Cf(c,u),d=vc(c,l),f=Yu(tc(oc(.5),rc(l)),tc(u,d));return hv(f,s,a)}});var yv=Rs({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:dv.SUM_BY_NONZERO_WEIGHTS,i=Es(e,"labels","logLoss"),o=Es(t,"predictions","logLoss"),s=null;null!=n&&(s=Es(n,"weights","logLoss")),nn(i.shape,o.shape,"Error in logLoss: ");var u=oc(1),c=oc(r),l=uf(tc(i,of(Yu(o,c)))),d=tc(vc(u,i),of(Yu(vc(u,o),c))),f=vc(l,d);return hv(f,s,a)}});var bv=Rs({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dv.SUM_BY_NONZERO_WEIGHTS,a=Es(e,"labels","meanSquaredError"),i=Es(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=Es(n,"weights","meanSquaredError")),nn(a.shape,i.shape,"Error in meanSquaredError: ");var s=Dh(a,i);return hv(s,o,r)}});function xv(e,t){var n=Es(e,"labels","sigmoidCrossEntropyWithLogits"),r=Es(t,"logits","sigmoidCrossEntropyWithLogits");nn(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=sh(r),i=tc(r,n),o=sf(Bd(uf(gc(r))));return Yu(vc(a,i),o)}var kv=Rs({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:dv.SUM_BY_NONZERO_WEIGHTS,i=Es(e,"multiClassLabels","sigmoidCrossEntropy"),o=Es(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Es(n,"weights","sigmoidCrossEntropy")),nn(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=oc(r),c=oc(1),l=oc(.5);i=Yu(tc(i,vc(c,u)),tc(l,u))}var d=xv(i,o);return hv(d,s,a)}});function wv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=ic((function(e,t,r){var a=ff(t,[n],!0),i=vc(Vu(t,"float32"),a);r([e,i]);var o=uf(tc(i,e));return{value:Ld(o,[n]),gradFunc:function(e,t){var r=(0,C.Z)(t,2),a=r[0],i=r[1],o=Ad(e.shape,[n]);return[tc(Ml(e,o),vc(Vu(a,"float32"),Bd(i))),tc(Ml(e,o),vc(Bd(i),Vu(a,"float32")))]}}}));return r(e,t)}var Sv=Rs({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:dv.SUM_BY_NONZERO_WEIGHTS,i=Es(e,"onehotLabels","softmaxCrossEntropy"),o=Es(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Es(n,"weights","softmaxCrossEntropy")),nn(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=oc(r),c=oc(1),l=oc(i.shape[1]);i=Yu(tc(i,vc(c,u)),ec(u,l))}var d=wv(i,o);return hv(d,s,a)}});var Iv=Rs({sparseFillEmptyRows_:function(e,t,n,r){var a=Es(e,"indices","sparseFillEmptyRows","int32"),i=Es(t,"values","sparseFillEmptyRows"),o=Es(n,"denseShape","sparseFillEmptyRows","int32"),s=Es(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},c=xs.runKernel(wi,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});var Nv=Rs({sparseReshape_:function(e,t,n){var r=Es(e,"inputIndices","sparseReshape","int32"),a=Es(t,"inputShape","sparseReshape","int32"),i=Es(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=xs.runKernel(Si,o);return{outputIndices:s[0],outputShape:s[1]}}});var Tv=Rs({sparseSegmentMean_:function(e,t,n){var r=Es(e,"data","sparseSegmentMean"),a=Es(t,"indices","sparseSegmentMean","int32"),i=Es(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return xs.runKernel(Ii,o)}});var Cv=Rs({sparseSegmentSum_:function(e,t,n){var r=Es(e,"data","sparseSegmentSum"),a=Es(t,"indices","sparseSegmentSum","int32"),i=Es(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return xs.runKernel(Ni,o)}});var Ev=Rs({stringNGrams_:function(e,t,n,r,a,i,o,s){var u=Es(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var c=Es(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");var l={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},d={data:u,dataSplits:c},f=xs.runKernel(Ri,d,l);return{nGrams:f[0],nGramsSplits:f[1]}}});var _v=Rs({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Es(e,"input","stringSplit","string"),a=Es(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=xs.runKernel(Oi,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});var Av=Rs({stringToHashBucketFast_:function(e,t){var n=Es(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return xs.runKernel(Di,a,r)}});var Rv,Ov=Rs({staticRegexReplace_:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=Es(e,"input","staticRegexReplace","string"),i={pattern:t,rewrite:n,replaceGlobal:r};return xs.runKernel(_i,{x:a},i)}}),Dv={fft:Eh,ifft:_h,rfft:Oh,irfft:Ah},Pv={hammingWindow:Tp,hannWindow:Cp,frame:Ep,stft:_p},Fv={flipLeftRight:Rp,grayscaleToRGB:Op,resizeNearestNeighbor:av,resizeBilinear:rv,rotateWithOffset:Dp,cropAndResize:Ap,nonMaxSuppression:Fp,nonMaxSuppressionAsync:Zp,nonMaxSuppressionWithScore:Hp,nonMaxSuppressionWithScoreAsync:Kp,nonMaxSuppressionPadded:Xp,nonMaxSuppressionPaddedAsync:Yp,threshold:ov,transform:sv},Mv={bandPart:uv,gramSchmidt:cv,qr:fv},Lv={absoluteDifference:pv,computeWeightedLoss:hv,cosineDistance:vv,hingeLoss:mv,huberLoss:gv,logLoss:yv,meanSquaredError:bv,sigmoidCrossEntropy:kv,softmaxCrossEntropy:Sv},$v={sparseFillEmptyRows:Iv,sparseReshape:Nv,sparseSegmentMean:Tv,sparseSegmentSum:Cv},jv={stringNGrams:Ev,stringSplit:_v,stringToHashBucketFast:Av,staticRegexReplace:Ov},zv=function(){function e(){Vt(this,e)}return Zt(e,null,[{key:"sgd",value:function(e){return new Sc(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Ic(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Nc(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new mc(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new dc(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new wc(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new hc(e,t)}}]),e}(),Bv=zv,Uv="undefined"!==typeof requestAnimationFrame?requestAnimationFrame:"undefined"!==typeof setImmediate?setImmediate:function(e){return e()};function Vv(){return new Promise((function(e){return Uv((function(){return e()}))}))}function Wv(e,t){var n=e[0].length;e.forEach((function(e,t){tn(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),tn(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)tn(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function Gv(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}!function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(Rv||(Rv={}));function Zv(e){return e<=30?e:wn(e,Math.floor(Math.sqrt(e)))}function Hv(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function qv(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function Kv(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2===1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function Xv(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function Jv(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Yv(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function Qv(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===an(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,d=i;d<n;++d)l*=u[d],c.push(u[d]);var f=[].concat((0,Le.Z)(Sn(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[c,o,l,f]}var em=1.7580993408473768,tm=1.0507009873554805,nm=.3275911,rm=.254829592,am=-.284496736,im=1.421413741,om=-1.453152027,sm=1.061405429;function um(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function cm(e,t){return{real:e[2*t],imag:e[2*t+1]}}function lm(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function dm(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var fm="->",hm=/->/g;function pm(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(hm,"").length)/fm.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(fm,'").'));var r=e.split(fm),a=(0,C.Z)(r,2),i=a[0],o=a[1];tn(-1===i.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var s=i.split(","),u=s.length;if(t!==u)throw new Error("Expected ".concat(u," input tensors, received ").concat(t));if(u>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var c=[],l=function(e){var t=o[e];if(!s.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===c.indexOf(t)&&c.push(t)},d=0;d<o.length;++d)l(d);for(var f=0;f<i.length;++f){var h=i[f];-1===c.indexOf(h)&&","!==h&&c.push(h)}for(var p=new Array(s.length),v=0;v<u;++v){if(new Set(s[v].split("")).size!==s[v].length)throw new Error("Found duplicate axes in input component ".concat(s[v],". ")+"Support for duplicate axes in input is not implemented yet.");p[v]=[];for(var m=0;m<s[v].length;++m)p[v].push(c.indexOf(s[v][m]))}for(var g=c.length,y=[],b=o.length;b<g;++b)y.push(b);return{allDims:c,summedDims:y,idDims:p}}function vm(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function mm(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:tn(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}function gm(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],s=0;s<r.length;++s){var u,c=Ut(bm(t,r[s]));try{for(c.s();!(u=c.n()).done;){var l=u.value;-1===o.indexOf(l)&&(a[s].push(l),o.push(l))}}catch(Rme){c.e(Rme)}finally{c.f()}}return{path:r,steps:a}}function ym(e){return e.every((function(e,t){return e===t}))}function bm(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function xm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)tn(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);tn(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}tn(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function km(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function wm(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function Sm(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function Im(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],c=1,l=1,d=1,f=0;f<r;++f)u.push(e.shape[f]),c*=e.shape[f];for(var h=r;h<n;h++)u.push(e.shape[h]),l*=e.shape[h];for(var p=r;p<a;p++)u.push(t.shape[p]);for(var v=n+1;v<i;v++)u.push(e.shape[v]),d*=e.shape[v];return{batchSize:c,sliceSize:d,outerSize:l,dimSize:s,outputShape:u}}function Nm(e){try{return e.map((function(e){return _o(e)}))}catch(Rme){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(Rme))}}!function(){var e,t=Ut(Tc);try{for(t.s();!(e=t.n()).done;){cc(e.value)}}catch(Rme){t.e(Rme)}finally{t.f()}}();var Tm={kernelName:Un,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return tc(e,Mh(Vu(n,"float32"),-1))}}}},Cm={kernelName:Vn,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){var t=rc(Vu(n,"float32")),r=nc(vc(oc(1),t));return uf(ec(e,r))}}}},Em={kernelName:Wn,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){var t=nc(vc(rc(Vu(n,"float32")),1));return ec(e,t)}}}},_m={kernelName:Gn,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=xc(r.shape,a.shape);return{a:function(){var t=e,n=bc(r.shape,i);return n.length>0&&(t=Ld(t,n)),Ml(t,r.shape)},b:function(){var t=e,n=bc(a.shape,i);return n.length>0&&(t=Ld(t,n)),Ml(t,a.shape)}}}},Am={kernelName:Zn,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},Rm={kernelName:Kn,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return ac(n)}}}},Om={kernelName:Xn,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return ac(n)}}}},Dm={kernelName:Jn,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return ec(e,nc(vc(oc(1),rc(Vu(n,"float32")))))}}}},Pm={kernelName:Yn,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){var t=nc(Yu(oc(1),rc(Vu(n,"float32"))));return ec(e,t)}}}},Fm={kernelName:tr,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=xc(r.shape,a.shape);return{a:function(){var t=Yu(rc(r),rc(a)),n=tc(e,ec(a,t)),o=bc(r.shape,i);return o.length>0&&(n=Ld(n,o)),Ml(n,r.shape)},b:function(){var t=Yu(rc(r),rc(a)),n=uf(tc(e,ec(r,t))),o=bc(a.shape,i);return o.length>0&&(n=Ld(n,o)),Ml(n,a.shape)}}}},Mm={kernelName:Qn,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return ec(e,Yu(rc(Vu(n,"float32")),1))}}}},Lm={kernelName:er,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return ec(e,vc(oc(1),rc(Vu(n,"float32"))))}}}};var $m=Rs({avgPool3dGrad_:function(e,t,n,r,a,i){var o=Es(e,"dy","avgPool3dGrad"),s=Es(t,"input","avgPool3dGrad"),u=o,c=s,l=!1;4===s.rank&&(l=!0,u=Ml(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=Ml(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),tn(5===u.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+"".concat(u.rank,".")})),tn(5===c.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+"".concat(c.rank,".")})),Fl("avgPool3dGrad",a,i);var d={dy:u,input:c},f={filterSize:n,strides:r,pad:a,dimRoundingMode:i},h=xs.runKernel(ir,d,f);return l?Ml(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),jm={kernelName:ar,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad,s=n.dimRoundingMode;return{x:function(){return $m(e,r,a,i,o,s)}}}};var zm=Rs({avgPoolGrad_:function(e,t,n,r,a){var i=Es(e,"dy","avgPoolGrad"),o=Es(t,"input","avgPoolGrad");tn(o.rank===i.rank,(function(){return"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")")}));var s=o,u=i,c=!1;3===o.rank&&(c=!0,s=Ml(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=Ml(i,[1,i.shape[0],i.shape[1],i.shape[2]])),tn(4===u.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+"".concat(u.rank,".")})),tn(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+"".concat(s.rank,".")}));var l={dy:u,input:s},d={filterSize:n,strides:r,pad:a},f=xs.runKernel(rr,l,d);return c?Ml(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),Bm={kernelName:nr,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad;return{x:function(){return zm(e,r,a,i,o)}}}},Um={kernelName:or,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,2),a=r[0],i=r[1],o=n.transposeA,s=n.transposeB;return o||s?!o&&s?{a:function(){return zl(e,i,!1,!1)},b:function(){return zl(e,a,!0,!1)}}:o&&!s?{a:function(){return zl(i,e,!1,!0)},b:function(){return zl(a,e,!1,!1)}}:{a:function(){return zl(i,e,!0,!0)},b:function(){return zl(e,a,!0,!0)}}:{a:function(){return zl(e,i,!1,!0)},b:function(){return zl(a,e,!0,!1)}}}},Vm={kernelName:sr,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return Uf(e,r,a)}}}},Wm={kernelName:"BroadcastTo",gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),s=a.length-1;s>=0;s--)if(a[s]===i[s])o[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));for(var u=[],c=0;c<o.length;c++)o[c]>1&&u.push(c);return{x:function(){return Ld(e,u,!0)}}}},Gm={kernelName:lr,gradFunc:function(e){return{x:function(){return e.clone()}}}},Zm={kernelName:dr,gradFunc:function(e){return{x:function(){return ac(e)}}}},Hm={kernelName:fr,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.clipValueMin,i=n.clipValueMax;return{x:function(){return wd(hf(Kd(r,a),nf(r,i)),e,ac(e))}}}},qm={kernelName:pr,inputsToSave:["x"],gradFunc:Tm.gradFunc},Km={kernelName:vr,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=fn(n.axis,t[0].shape)[0],i=r.map((function(e){return e[a]}));return Rh(e,i,a).map((function(e){return function(){return e}}))}},Xm={kernelName:mr,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,2),a=r[0],i=r[1],o=n.dilations,s=n.strides,u=n.pad,c=n.dataFormat;return tn(Rl(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(o,"'")})),{x:function(){return sd(a.shape,e,i,s,u,c)},filter:function(){return mp(a,e,i.shape,s,u,c)}}}},Jm={kernelName:yr,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,2),a=r[0],i=r[1],o=n.strides,s=n.pad,u=n.dataFormat,c=n.dimRoundingMode;return{dy:function(){return id(e,i,o,s,u,1,c)},filter:function(){return mp(e,a,i.shape,o,s,u,c)}}}};var Ym=Rs({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=Ml(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;4===o.rank&&(o=Ml(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),tn(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+"".concat(i.shape,".")})),tn(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+"".concat(o.shape,".")})),tn(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+"".concat(n,".")})),tn(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must ")+"match input depth in filter (".concat(n[3],".")})),tn(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must ")+"match output depth for filter (".concat(n[4],").")}));var s={x:i,dy:o},u={strides:r,pad:a,filterShape:n};return xs.runKernel(xr,s,u)}}),Qm={kernelName:br,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;tn(Rl(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are "+"not yet supported in gradients. Got dilations '".concat(r,"'")}));var o=(0,C.Z)(t,2),s=o[0],u=o[1];return{x:function(){return ld(s.shape,e,u,a,i)},filter:function(){return Ym(s,e,u.shape,a,i)}}}},eg={kernelName:wr,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return tc(uf(kh(Vu(n,"float32"))),e)}}}},tg={kernelName:Sr,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return tc(wh(Vu(n,"float32")),e)}}}},ng={kernelName:Nr,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.axis,i=n.exclusive,o=n.reverse;return{x:function(){var t=Od([a],r.rank),n=vd(e,a,i,!o);return null!=t&&(n=ip(n,t)),n}}}},rg={kernelName:_r,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,s=null==r?[1,1]:r;tn(Rl(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(s,"'")}));var u=(0,C.Z)(t,2),c=u[0],l=u[1];return tn(4===c.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be "+"rank 4, but got rank ".concat(c.rank,".")})),tn(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be "+"rank 4, but got rank ".concat(l.rank,".")})),tn(c.shape[3]===l.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input "+"channels (".concat(c.shape[3],") must match the inChannels dimension ")+"in filter ".concat(l.shape[2],".")})),tn(Ol(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or "+"dilations must be  1. Got strides ".concat(a," and dilations ")+"'".concat(s,"'.")})),Fl("depthwiseConv2d",i,o),{x:function(){return Sp(c.shape,e,l,a,i,s,o)},filter:function(){return wp(c,e,l.shape,a,i,s,o)}}}},ag={kernelName:Dr,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,2),a=r[0],i=r[1],o={x:a,filter:i,dy:e},s={x:a,filter:i,dy:e};return{x:function(){return xs.runKernel(Pr,o,n)},filter:function(){return xs.runKernel(Fr,s,n)}}}},ig={kernelName:$r,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:(0,C.Z)(t,1)[0]};return{x:function(){return xs.runKernel(jr,n)}}}},og={kernelName:zr,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0],r=tc(Bd(uf(rc(n))),2/Math.sqrt(Math.PI));return{x:function(){return tc(e,r)}}}},sg={kernelName:Ur,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return tc(e,n)}}}},ug={kernelName:Vr,inputsToSave:["input"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{input:function(){return Ml(e,n.shape)}}}},cg={kernelName:Wr,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return tc(e,Bd(n))}}}},lg={kernelName:qr,gradFunc:function(e){return{x:function(){return ac(e)}}}},dg={kernelName:Kr,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=xc(r.shape,a.shape);return{a:function(){var t=ec(e,Vu(a,"float32")),n=bc(r.shape,i);return n.length>0?Ml(Ld(t,n),r.shape):t},b:function(){var t=tc(e,Vu(r,"float32")),n=bc(a.shape,i);n.length>0&&(t=Ml(Ld(t,n),a.shape));var o=rc(a);return uf(ec(t,Vu(o,"float32")))}}}},fg={kernelName:Xr,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=(0,C.Z)(t,4),i=a[0],o=a[1],s=a[2],u=a[3],c=null==u?oc(1):u,l=bc(o.shape,i.shape),d=[];if(1===o.rank){for(var f=0;f<i.shape.length-1;++f)d.push(i.shape[f]);d.push(1)}var h=vc(i,o),p=tc(e,c),v=vh(Yu(s,oc(r))),m=tc(tc(tc(v,v),v),oc(-.5));return{x:function(){return 1===o.rank?Ml(tc(tc(e,Wd(Ml(v,[1,1,1,o.shape[0]]),d)),c),i.shape):Ml(tc(tc(e,v),c),i.shape)},mean:function(){var e=tc(tc(v,oc(-1)),p);return 1===o.rank&&(e=Ld(e,l)),Ml(e,o.shape)},variance:function(){var e=tc(tc(m,h),p);return 1===o.rank&&(e=Ld(e,l)),Ml(e,o.shape)},scale:function(){var t=tc(h,v),n=tc(e,t);return 1===o.rank&&(n=Ld(n,l)),Ml(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=Ld(t,l)),Ml(t,o.shape)}}}},hg={kernelName:Jr,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,2),a=r[0],i=r[1],o=n.axis,s=fn(o,a.shape)[0];return{x:function(){var t=a.shape,n=i.size,r=t.slice(0,s),u=r.length,c=t.slice(o,t.length).slice(1),l=c.length,d=pg(0,u),f=pg(u+1,u+1+l),h=vg([r,[n],c]),p=Ml(e,h),v=Ml(i,[n]),m=vg([[u],d,f]),g=ip(p,m),y=Xh(g,v,a.shape[s]),b=Dd(m);return y=ip(y,b)},indices:function(){return i}}}};function pg(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function vg(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var mg={kernelName:ea,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1];return{a:function(){return ac(r)},b:function(){return ac(a)}}}},gg={kernelName:ta,gradFunc:function(e){return{x:function(){return Vu(e,"float32")}}}},yg={kernelName:aa,gradFunc:function(e){return{x:function(){return ac(e)}}}},bg={kernelName:ia,gradFunc:function(e){return{x:function(){return ac(e)}}}},xg={kernelName:oa,gradFunc:function(e){return{x:function(){return ac(e)}}}},kg={kernelName:sa,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.alpha,i=qd(r,0);return{x:function(){return wd(i,e,tc(e,a))}}}},wg={kernelName:fa,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return ec(e,Yu(n,1))}}}},Sg={kernelName:da,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return ec(e,Vu(n,"float32"))}}}},Ig={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.axis;return{logits:function(){var t=Bd(r);return vc(e,tc(Ld(e,a,!0),t))}}}};var Ng=Rs({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,s={x:e,y:t,dy:n},u={depthRadius:r,bias:a,alpha:i,beta:o};return xs.runKernel(ga,s,u)}}),Tg={kernelName:ma,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,C.Z)(t,2),a=r[0],i=r[1],o=n.depthRadius,s=n.bias,u=n.alpha,c=n.beta;return{x:function(){return Ng(a,i,e,o,s,u,c)}}}};function Cg(e,t,n,r){return t.rank<n.rank&&(t=Ml(t,Ad(t.shape,r))),e.rank<n.rank&&(e=Ml(e,Ad(e.shape,r))),{x:function(){return tc(e,Vu(kd(n,t),e.dtype))}}}var Eg={kernelName:ya,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=Cg(e,t[1],a,fn(r,a.shape));return{x:function(){return i.x()}}}},_g={kernelName:ba,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1];return{a:function(){return tc(e,Vu(Kd(r,a),"float32"))},b:function(){return tc(e,Vu(tf(r,a),"float32"))}}}};var Ag=Rs({maxPool3dGrad_:function(e,t,n,r,a,i,o){var s=Es(e,"dy","maxPool3dGrad"),u=Es(t,"input","maxPool3dGrad"),c=Es(n,"output","maxPool3dGrad"),l=s,d=u,f=c,h=!1;4===u.rank&&(h=!0,l=Ml(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=Ml(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),f=Ml(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),tn(5===l.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+"".concat(l.rank,".")})),tn(5===d.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+"".concat(d.rank,".")})),tn(5===f.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+"".concat(f.rank,".")})),Fl("maxPool3dGrad",i,o);var p={dy:l,input:d,output:f},v={filterSize:r,strides:a,pad:i,dimRoundingMode:o},m=xs.runKernel(Sa,p,v);return h?Ml(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}}),Rg={kernelName:wa,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,C.Z)(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode;return{x:function(){return Ag(e,a,i,o,s,u,c)}}}};var Og=Rs({maxPoolGrad_:function(e,t,n,r,a,i,o){var s=Es(e,"dy","maxPoolGrad"),u=Es(t,"input","maxPoolGrad"),c=Es(n,"output","maxPoolGrad");tn(u.rank===s.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy ")+"(".concat(s.rank,")")})),tn(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+"".concat(s.rank,".")})),tn(4===u.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+"".concat(u.rank,".")})),Fl("maxPoolGrad",i,o);var l={dy:s,input:u,output:c},d={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return xs.runKernel(ka,l,d)}}),Dg={kernelName:xa,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,C.Z)(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,u=n.pad;return{x:function(){return Og(e,a,i,o,s,u)}}}},Pg={kernelName:Na,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=fn(n.axis,r.shape),i=an(_d(r.shape,a)[1]);return{x:function(){var t=r.shape.slice();a.forEach((function(e){t[e]=1}));var n=Ml(e,t);return ec(tc(n,Nf(r.shape,"float32")),i)}}}},Fg={kernelName:Ta,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=(0,C.Z)(t,2),i=a[0],o=Cg(e,a[1],i,fn(r,i.shape));return{x:function(){return o.x()}}}},Mg={kernelName:Ca,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1];return{a:function(){return tc(e,Vu(nf(r,a),"float32"))},b:function(){return tc(e,Vu(qd(r,a),"float32"))}}}},Lg={kernelName:Ea,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Ul(e,a,r.shape)}}}},$g={kernelName:_a,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=xc(r.shape,a.shape);return{a:function(){var t=bc(r.shape,i);return t.length>0?Ml(Ld(e,t),r.shape):e},b:function(){var t=tc(e,uf(Zd(ec(r,a)))),n=bc(a.shape,i);return n.length>0?Ml(Ld(t,n),a.shape):t}}}},jg={kernelName:Ra,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=xc(r.shape,a.shape);return{a:function(){var t=tc(e,Vu(a,"float32")),n=bc(r.shape,i);return n.length>0?Ml(Ld(t,n),r.shape):t},b:function(){var t=tc(e,Vu(r,"float32")),n=bc(a.shape,i);return n.length>0?Ml(Ld(t,n),a.shape):t}}}},zg={kernelName:ja,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return Jh(e,r).map((function(e){return function(){return e}}))}},Bg={kernelName:za,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Ul(e,a,r.shape)}}}},Ug={kernelName:Ba,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=(0,C.Z)(t,3),r=n[0],a=n[1],i=n[2],o=r,s=a,u=xc(o.shape,s.shape);return{a:function(){var t=Vu(s,"float32"),n=tc(e,tc(t,pc(o,vc(t,oc(1))))),r=bc(o.shape,u);return r.length>0&&(n=Ld(n,r)),Ml(n,o.shape)},b:function(){var t=qd(o,0),n=wd(t,of(o),ac(o)),r=tc(e,tc(i,n)),a=bc(s.shape,u);return a.length>0&&(r=Ld(r,a)),Ml(r,s.shape)}}}},Vg={kernelName:Ua,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=qd(r,0);return{x:function(){return wd(i,e,tc(e,a))},alpha:function(){var t=wd(i,ac(e),tc(e,r)),n=bc(a.shape,e.shape);return n.length>0&&(t=Ld(t,n)),Ml(t,a.shape)}}}};function Wg(e,t,n){var r=e.shape.length,a=r-n.length,i=Od(n,r),o=e;null!=i&&(o=ip(e,i));var s=o.shape.slice(),u=s.splice(r-n.length,n.length).reduce((function(e,t){return e*t}),1);s.push(u);var c=function(e,t,n){var r=e.shape.slice();r[n]=1;var a=Ml(t,r),i=pd(e,n,!0,!1),o=pd(e,n,!0,!0),s=tc(i,o);return tc(a,s)}(o.reshape(s),t,a);if(c=c.reshape(o.shape),null!=i){var l=Dd(i);c=ip(c,l)}return c}var Gg={kernelName:Mr,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=xc(r.shape,a.shape);return{a:function(){var t=ec(e,Vu(a,"float32")),n=bc(r.shape,i);return n.length>0?Ml(Ld(t,n),r.shape):t},b:function(){var t=tc(e,Vu(r,"float32")),n=bc(a.shape,i);n.length>0&&(t=Ml(Ld(t,n),a.shape));var o=rc(a);return uf(ec(t,Vu(o,"float32")))}}}},Zg={kernelName:ni,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0],r=tc(nf(n,6),Mh(n));return{x:function(){return tc(e,Vu(r,"float32"))}}}},Hg={kernelName:li,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){var t=qd(n,oc(0)),r=oc(em),a=oc(tm),i=tc(e,a),o=tc(tc(e,r),Bd(Vu(n,"float32")));return wd(t,i,o)}}}},qg={kernelName:vi,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return tc(e,tc(n,vc(oc(1),n)))}}}},Kg={kernelName:di,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=(0,C.Z)(t,1)[0],a=n.begin,i=n.size,o=r.shape,s=al(r,a,i),u=(0,C.Z)(s,2),c=u[0],l=u[1],d=[],f=0;f<e.rank;f++)d.push([c[f],o[f]-c[f]-l[f]]);return{x:function(){return Lf(e,d)}}}},Xg={kernelName:ki,outputsToSave:[!0],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.dim,i=tc(e,r);return{logits:function(){return vc(i,tc(Ld(i,[a],true),r))}}}},Jg={kernelName:bi,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return Gl(e,r,a)}}}},Yg={kernelName:xi,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return jl(e,r)}}}},Qg={kernelName:Ci,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=oc(2);return{a:function(){return tc(e,tc(i,vc(r,a)))},b:function(){return tc(e,tc(i,vc(a,r)))}}}},ey={kernelName:Pi,inputsToSave:["a","b"],gradFunc:function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1],i=xc(r.shape,a.shape);return{a:function(){var t=e,n=bc(r.shape,i);return n.length>0&&(t=Ld(t,n)),Ml(t,r.shape)},b:function(){var t=e,n=bc(a.shape,i);return n.length>0&&(t=Ld(t,n)),Ml(uf(t),a.shape)}}}},ty={kernelName:yi,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=r.shape.slice();fn(n.axis,r.shape).forEach((function(e){a[e]=1}));var i=Ml(e,a),o=tc(i,Nf(r.shape,"float32"));return{x:function(){return o}}}},ny={kernelName:Mi,outputsToSave:[!0],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return tc(vc(oc(1),rc(n)),e)}}}},ry={kernelName:Li,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.reps;return{x:function(){var t=ac(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=Yu(t,Ul(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=Yu(t,Ul(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var u=0;u<a[1];++u)for(var c=0;c<a[2];++c)t=Yu(t,Ul(e,[s*r.shape[0],u*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+"".concat(r.rank," tensors yet."));for(var l=0;l<a[0];++l)for(var d=0;d<a[1];++d)for(var f=0;f<a[2];++f)for(var h=0;h<a[3];++h)t=Yu(t,Ul(e,[l*r.shape[0],d*r.shape[1],f*r.shape[2],h*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},ay={kernelName:Vi,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return function(e,t){for(var n=kc(t,ac(t)),r=Hd(e,n),a=Kd(t,oc(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=Ud(a,o+1);a=hf(a,Nf(r.shape,"bool"));var s=ac(r);return wd(a,r,s)}(e,n)}}}};for(var iy=0,oy=[Tm,Cm,Em,_m,Am,Rm,Om,Dm,Pm,Fm,Mm,Lm,jm,Bm,Um,Vm,Wm,Gm,Zm,Hm,qm,Km,Jm,Xm,Qm,eg,tg,ng,rg,ag,Gg,ig,og,sg,ug,cg,dg,lg,fg,hg,mg,gg,yg,bg,xg,kg,wg,Sg,Ig,Tg,Eg,Eg,_g,Rg,Dg,Pg,Fg,Mg,Lg,$g,jg,{kernelName:Oa,gradFunc:function(e){return{x:function(){return uf(e)}}}},{kernelName:$a,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return If(n.shape,"float32")}}}},{kernelName:La,gradFunc:function(e){return{x:function(){return ac(e)}}}},zg,Bg,Bg,Ug,Vg,{kernelName:Va,inputsToSave:["x"],gradFunc:function(e,t,n){var r=(0,C.Z)(t,1)[0],a=n.axis,i=[];return i=void 0===a||null===a?r.shape.map((function(e,t){return t})):"number"===typeof a?[a]:a,{x:function(){return Wg(r,e,i)}}}},{kernelName:Ka,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return ec(e,uf(rc(n)))}}}},Zg,{kernelName:Xa,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return tc(e,Vu(Mh(n),"float32"))}}}},{kernelName:Ja,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return Ml(e,n.shape)}}}},{kernelName:ei,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,C.Z)(t,1)[0]};return{images:function(){return xs.runKernel(ti,r,n)}}}},{kernelName:Ya,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:(0,C.Z)(t,1)[0]};return{images:function(){return xs.runKernel(Qa,r,n)}}}},{kernelName:ri,gradFunc:function(e,t,n){var r=fn(n.dims,e.shape);return{x:function(){return ch(e,r)}}}},{kernelName:ai,gradFunc:function(e){return{x:function(){return ac(e)}}}},{kernelName:ii,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return uf(ec(e,tc(pc(n,1.5),2)))}}}},{kernelName:ci,inputsToSave:["condition"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{condition:function(){return Vu(ac(n),"float32")},t:function(){return tc(e,Vu(n,e.dtype))},e:function(){return tc(e,Vu(pf(n),e.dtype))}}}},Hg,qg,{kernelName:pi,gradFunc:function(e){return{x:function(){return ac(e)}}}},{kernelName:fi,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return tc(fd(Vu(n,"float32")),e)}}}},{kernelName:hi,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return tc(hd(Vu(n,"float32")),e)}}}},Kg,Xg,{kernelName:mi,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return tc(e,Bl(n))}}}},Jg,Jg,Yg,Yg,{kernelName:gi,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return ec(e,tc(nc(Vu(n,"float32")),2))}}}},Qg,{kernelName:Ei,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return tc(e,tc(Vu(n,"float32"),2))}}}},{kernelName:Gi,gradFunc:function(e){return{x:function(){return ac(e)}}}},ey,ty,{kernelName:Fi,inputsToSave:["x"],gradFunc:function(e,t){var n=(0,C.Z)(t,1)[0];return{x:function(){return ec(e,rc(fd(n)))}}}},ny,ry,{kernelName:zi,gradFunc:function(e,t,n){var r=Dd(n.perm);return{x:function(){return ip(e,r)}}}},{kernelName:Ui,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return Fh(e,r)}}}},ay,{kernelName:Wi,gradFunc:function(e){return{x:function(){return ac(e)}}}}];iy<oy.length;iy++){ao(oy[iy])}function sy(e,t,n){return sy=$o()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&ze(a,n.prototype),a},sy.apply(null,arguments)}function uy(e){var t="function"===typeof Map?new Map:void 0;return uy=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return sy(e,arguments,Lo(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ze(n,e)},uy(e)}Jo().prototype.abs=function(){return this.throwIfDisposed(),gc(this)},Jo().prototype.acos=function(){return this.throwIfDisposed(),sl(this)},Jo().prototype.acosh=function(){return this.throwIfDisposed(),ul(this)},Jo().prototype.add=function(e){return this.throwIfDisposed(),Yu(this,e)},Jo().prototype.all=function(e,t){return this.throwIfDisposed(),ll(this,e,t)},Jo().prototype.any=function(e,t){return this.throwIfDisposed(),dl(this,e,t)},Jo().prototype.argMax=function(e){return this.throwIfDisposed(),fl(this,e)},Jo().prototype.argMin=function(e){return this.throwIfDisposed(),hl(this,e)},Jo().prototype.asScalar=function(){return this.throwIfDisposed(),tn(1===this.size,(function(){return"The array must have only 1 element."})),Ml(this,[])},Jo().prototype.asType=function(e){return this.throwIfDisposed(),Vu(this,e)},Jo().prototype.as1D=function(){return this.throwIfDisposed(),Ml(this,[this.size])},Jo().prototype.as2D=function(e,t){return this.throwIfDisposed(),Ml(this,[e,t])},Jo().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Ml(this,[e,t,n])},Jo().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),Ml(this,[e,t,n,r])},Jo().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),Ml(this,[e,t,n,r,a])},Jo().prototype.asin=function(){return this.throwIfDisposed(),pl(this)},Jo().prototype.asinh=function(){return this.throwIfDisposed(),vl(this)},Jo().prototype.atan=function(){return this.throwIfDisposed(),ml(this)},Jo().prototype.atan2=function(e){return this.throwIfDisposed(),gl(this,e)},Jo().prototype.atanh=function(){return this.throwIfDisposed(),yl(this)},Jo().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Ll(this,e,t,n,r)},Jo().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Gl(this,e,t)},Jo().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),Zl(this,e,t,n,r,a)},Jo().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Yl(this,e)},Jo().prototype.cast=function(e){return this.throwIfDisposed(),Vu(this,e)},Jo().prototype.ceil=function(){return this.throwIfDisposed(),Ql(this)},Jo().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),ed(this,e,t)},Jo().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Xo&&(e=[e]),jl([this].concat((0,Le.Z)(e)),t)},Jo().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),od(this,e,t,n,r,a,i)},Jo().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),ud(this,e,t,n,r,a)},Jo().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),id(this,e,t,n,r,a,i)},Jo().prototype.cos=function(){return this.throwIfDisposed(),fd(this)},Jo().prototype.cosh=function(){return this.throwIfDisposed(),hd(this)},Jo().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),pd(this,e,t,n)},Jo().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),vd(this,e,t,n)},Jo().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),gd(this,e,t)},Jo().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),yd(this,e,t,n,r,a,i)},Jo().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),xd(this,e,t,n,r,a)},Jo().prototype.divNoNan=function(e){return this.throwIfDisposed(),Sd(this,e)},Jo().prototype.div=function(e){return this.throwIfDisposed(),ec(this,e)},Jo().prototype.dot=function(e){return this.throwIfDisposed(),Id(this,e)},Jo().prototype.elu=function(){return this.throwIfDisposed(),Td(this)},Jo().prototype.equal=function(e){return this.throwIfDisposed(),kd(this,e)},Jo().prototype.erf=function(){return this.throwIfDisposed(),Cd(this)},Jo().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),zd(this,e,t)},Jo().prototype.exp=function(){return this.throwIfDisposed(),Bd(this)},Jo().prototype.expandDims=function(e){return this.throwIfDisposed(),Ud(this,e)},Jo().prototype.expm1=function(){return this.throwIfDisposed(),Vd(this)},Jo().prototype.fft=function(){return this.throwIfDisposed(),Eh(this)},Jo().prototype.flatten=function(){return this.throwIfDisposed(),Ml(this,[this.size])},Jo().prototype.floor=function(){return this.throwIfDisposed(),Zd(this)},Jo().prototype.floorDiv=function(e){return this.throwIfDisposed(),Qu(this,e)},Jo().prototype.gather=function(e,t,n){return this.throwIfDisposed(),Hd(this,e,t,n)},Jo().prototype.greaterEqual=function(e){return this.throwIfDisposed(),Kd(this,e)},Jo().prototype.greater=function(e){return this.throwIfDisposed(),qd(this,e)},Jo().prototype.ifft=function(){return this.throwIfDisposed(),_h(this)},Jo().prototype.irfft=function(){return this.throwIfDisposed(),Ah(this)},Jo().prototype.isFinite=function(){return this.throwIfDisposed(),Jd(this)},Jo().prototype.isInf=function(){return this.throwIfDisposed(),Yd(this)},Jo().prototype.isNaN=function(){return this.throwIfDisposed(),Qd(this)},Jo().prototype.leakyRelu=function(e){return this.throwIfDisposed(),ef(this,e)},Jo().prototype.lessEqual=function(e){return this.throwIfDisposed(),nf(this,e)},Jo().prototype.less=function(e){return this.throwIfDisposed(),tf(this,e)},Jo().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),af(this,e,t,n,r)},Jo().prototype.logSigmoid=function(){return this.throwIfDisposed(),lf(this)},Jo().prototype.logSoftmax=function(e){return this.throwIfDisposed(),df(this,e)},Jo().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),ff(this,e,t)},Jo().prototype.log=function(){return this.throwIfDisposed(),of(this)},Jo().prototype.log1p=function(){return this.throwIfDisposed(),sf(this)},Jo().prototype.logicalAnd=function(e){return this.throwIfDisposed(),hf(this,e)},Jo().prototype.logicalNot=function(){return this.throwIfDisposed(),pf(this)},Jo().prototype.logicalOr=function(e){return this.throwIfDisposed(),vf(this,e)},Jo().prototype.logicalXor=function(e){return this.throwIfDisposed(),mf(this,e)},Jo().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),zl(this,e,t,n)},Jo().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),xf(this,e,t,n,r)},Jo().prototype.max=function(e,t){return this.throwIfDisposed(),Fd(this,e,t)},Jo().prototype.maximum=function(e){return this.throwIfDisposed(),kc(this,e)},Jo().prototype.mean=function(e,t){return this.throwIfDisposed(),Sf(this,e,t)},Jo().prototype.min=function(e,t){return this.throwIfDisposed(),Md(this,e,t)},Jo().prototype.minimum=function(e){return this.throwIfDisposed(),Cf(this,e)},Jo().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),Ef(this,e,t)},Jo().prototype.mod=function(e){return this.throwIfDisposed(),_f(this,e)},Jo().prototype.mul=function(e){return this.throwIfDisposed(),tc(this,e)},Jo().prototype.neg=function(){return this.throwIfDisposed(),uf(this)},Jo().prototype.norm=function(e,t,n){return this.throwIfDisposed(),jd(this,e,t,n)},Jo().prototype.notEqual=function(e){return this.throwIfDisposed(),Df(this,e)},Jo().prototype.oneHot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),Pf(this,e,t,n)},Jo().prototype.onesLike=function(){return this.throwIfDisposed(),Ff(this)},Jo().prototype.pad=function(e,t){return this.throwIfDisposed(),Lf(this,e,t)},Jo().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),Vf(this,e,t,n,r,a,i)},Jo().prototype.pow=function(e){return this.throwIfDisposed(),pc(this,e)},Jo().prototype.prelu=function(e){return this.throwIfDisposed(),Wf(this,e)},Jo().prototype.prod=function(e,t){return this.throwIfDisposed(),Gf(this,e,t)},Jo().prototype.reciprocal=function(){return this.throwIfDisposed(),oh(this)},Jo().prototype.relu=function(){return this.throwIfDisposed(),sh(this)},Jo().prototype.relu6=function(){return this.throwIfDisposed(),uh(this)},Jo().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Ml(this,e.shape)},Jo().prototype.reshape=function(e){return this.throwIfDisposed(),Ml(this,e)},Jo().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),rv(this,e,t,n)},Jo().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),av(this,e,t,n)},Jo().prototype.reverse=function(e){return this.throwIfDisposed(),ch(this,e)},Jo().prototype.rfft=function(){return this.throwIfDisposed(),Oh(this)},Jo().prototype.round=function(){return this.throwIfDisposed(),ph(this)},Jo().prototype.rsqrt=function(){return this.throwIfDisposed(),vh(this)},Jo().prototype.selu=function(){return this.throwIfDisposed(),mh(this)},Jo().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),gh(this,e,t,n,r,a,i)},Jo().prototype.sigmoid=function(){return this.throwIfDisposed(),Bl(this)},Jo().prototype.sign=function(){return this.throwIfDisposed(),xh(this)},Jo().prototype.sin=function(){return this.throwIfDisposed(),kh(this)},Jo().prototype.sinh=function(){return this.throwIfDisposed(),wh(this)},Jo().prototype.slice=function(e,t){return this.throwIfDisposed(),Ul(this,e,t)},Jo().prototype.softmax=function(e){return this.throwIfDisposed(),Ch(this,e)},Jo().prototype.softplus=function(){return this.throwIfDisposed(),cf(this)},Jo().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Uf(this,e,t)},Jo().prototype.split=function(e,t){return this.throwIfDisposed(),Rh(this,e,t)},Jo().prototype.sqrt=function(){return this.throwIfDisposed(),nc(this)},Jo().prototype.square=function(){return this.throwIfDisposed(),rc(this)},Jo().prototype.squaredDifference=function(e){return this.throwIfDisposed(),Dh(this,e)},Jo().prototype.squeeze=function(e){return this.throwIfDisposed(),Ph(this,e)},Jo().prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof Xo?[this,e]:[this].concat((0,Le.Z)(e));return Fh(n,t)},Jo().prototype.step=function(e){return this.throwIfDisposed(),Mh(this,e)},Jo().prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return this.throwIfDisposed(),Lh(this,e,t,n,r,a,i,o,s)},Jo().prototype.sub=function(e){return this.throwIfDisposed(),vc(this,e)},Jo().prototype.sum=function(e,t){return this.throwIfDisposed(),Ld(this,e,t)},Jo().prototype.tan=function(){return this.throwIfDisposed(),$h(this)},Jo().prototype.tanh=function(){return this.throwIfDisposed(),Vl(this)},Jo().prototype.tile=function(e){return this.throwIfDisposed(),Wd(this,e)},Jo().prototype.toBool=function(){return this.throwIfDisposed(),Vu(this,"bool")},Jo().prototype.toFloat=function(){return this.throwIfDisposed(),Vu(this,"float32")},Jo().prototype.toInt=function(){return this.throwIfDisposed(),Vu(this,"int32")},Jo().prototype.topk=function(e,t){return this.throwIfDisposed(),Hh(this,e,t)},Jo().prototype.transpose=function(e){return this.throwIfDisposed(),ip(this,e)},Jo().prototype.unique=function(e){return this.throwIfDisposed(),Kh(this,e)},Jo().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Xh(this,e,t)},Jo().prototype.unstack=function(e){return this.throwIfDisposed(),Jh(this,e)},Jo().prototype.where=function(e,t){return this.throwIfDisposed(),wd(e,this,t)},Jo().prototype.zerosLike=function(){return this.throwIfDisposed(),ac(this)};var cy=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),r=t.call(this,e),Object.setPrototypeOf(je(r),n.prototype),r}return Zt(n)}(uy(Error)),ly=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),r=t.call(this,e),Object.setPrototypeOf(je(r),n.prototype),r}return Zt(n)}(uy(Error)),dy=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),r=t.call(this,e),Object.setPrototypeOf(je(r),n.prototype),r}return Zt(n)}(uy(Error)),fy=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),r=t.call(this,e),Object.setPrototypeOf(je(r),n.prototype),r}return Zt(n)}(uy(Error)),hy=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),r=t.call(this,e),Object.setPrototypeOf(je(r),n.prototype),r}return Zt(n)}(uy(Error)),py=(Error,function(){function e(t){Vt(this,e),this.maxEntries=t||100,this.cache=new Map}return Zt(e,[{key:"get",value:function(e){var t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}},{key:"put",value:function(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}},{key:"getMaxEntries",value:function(){return this.maxEntries}},{key:"setMaxEntries",value:function(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(var t=0;t<this.maxEntries-e;t++){var n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}}]),e}());function vy(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function my(e,t){if(!e)throw new hy(t)}function gy(e,t){var n,r=0,a=Ut(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(Rme){a.e(Rme)}finally{a.f()}return r}function yy(e){return 1===e.length?e[0]:e}function by(e){return Array.isArray(e)?e:[e]}function xy(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function ky(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var wy={};function Sy(e){if(null===e||void 0===e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function Iy(e){if(null!=e&&"object"===typeof e)if(Array.isArray(e))e.forEach((function(e){return Iy(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"===typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!==typeof a.value?Iy(a):e[r]=a.value)}}function Ny(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"===typeof e){var i,o=e;if(o in n)i=n[o];else if(o in wy)i=wy[o];else if(null==(i=t[o]))throw new dy("Unknown ".concat(r,": ").concat(e,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return i}var s=e;if(null==s.className||null==s.config)throw new dy("".concat(r,": Improper config format: ")+"".concat(JSON.stringify(s),".\n")+"'className' and 'config' must set.");var u,c,l=s.className;if(l in n){var d=(0,C.Z)(n[l],2);u=d[0],c=d[1]}else if(l in wy){var f=(0,C.Z)(wy.className,2);u=f[0],c=f[1]}else if(l in t){var h=(0,C.Z)(t[l],2);u=h[0],c=h[1]}if(null==u)throw new dy("Unknown ".concat(r,": ").concat(l,". ")+"This may be due to one of the following reasons:\n"+"1. The ".concat(r," is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+"2. The custom ".concat(r," is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=c){for(var p={},v=0,m=Object.keys(wy);v<m.length;v++){var g=m[v];p[g]=wy[g]}for(var y=0,b=Object.keys(n);y<b.length;y++){var x=b[y];p[x]=n[x]}var k=s.config;k.customObjects=p;for(var w=Object.assign({},wy),S=0,I=Object.keys(n);S<I.length;S++){var N=I[S];wy[N]=n[N]}Iy(s.config);var T=c(u,s.config,n,a);return wy=Object.assign({},w),T}for(var E=Object.assign({},wy),_=0,A=Object.keys(n);_<A.length;_++){var R=A[_];wy[R]=n[R]}var O=new u(s.config);return wy=Object.assign({},E),O}function Ty(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function Cy(e){if(null==e)return e;var t,n=[],r=Ut(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(Rme){r.e(Rme)}finally{r.f()}return n}function Ey(e){if(null==e)throw new dy("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function _y(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new dy("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function Ay(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return my(n>=0),my(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function Ry(e,t){Array.isArray(e)?(tn(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return Ry(e,"element ".concat(n+1," of ").concat(t))}))):tn(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ")+"".concat(Oy(e),".")}))}function Oy(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return Oy(e)})).join(",")+"]":"string"===typeof e?'"'.concat(e,'"'):"".concat(e)}function Dy(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}var Py=0;function Fy(){return Py++}var My={};function Ly(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in My||(My[e]=0),My[e]+=1,e+My[e].toString()}var $y=["channelsFirst","channelsLast"],jy=["nearest","bilinear"],zy=["valid","same","causal"],By=["max","avg"],Uy=["sum","mul","concat","ave"],Vy=new Map;function Wy(e){_y($y,"DataFormat",e)}function Gy(e){_y(zy,"PaddingMode",e)}function Zy(e){_y(By,"PoolMode",e)}var Hy=[];function qy(e,t){Hy.push(e);try{var n=t();return Hy.pop(),n}catch(r){throw Hy.pop(),r}}function Ky(e){if(!Qy(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Hy.length?"":Hy.join("/")+"/")+e}function Xy(e){if(!Qy(e))throw new Error("Not a valid tensor name: '"+e+"'");Vy.has(e)||Vy.set(e,0);var t=Vy.get(e);if(Vy.set(e,Vy.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return Vy.set(n,1),n}return e}var Jy,Yy=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Qy(e){return!!e.match(Yy)}function eb(e){return e===parseInt(e.toString(),10)}function tb(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function nb(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function rb(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function ab(e,t){if(t<e)throw new dy("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function ib(){return null==Jy&&(Jy=xs.backend.epsilon()),Jy}function ob(e,t){return Vu(e,t)}function sb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),Ml(e,n)}function ub(e){var t=[tb(e.shape)];return Ml(e,t)}function cb(e,t,n){return qu((function(){switch(e.rank){case 1:return Sh(e,t,n);case 2:return Ih(e,[t,0],[n,e.shape[1]]);case 3:return Nh(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return Th(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Ul(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Ul(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new dy("sliceAlongFirstAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function lb(e,t,n){return qu((function(){switch(e.rank){case 1:return Sh(e,t,n);case 2:return Ih(e,[0,t],[e.shape[0],n]);case 3:return Nh(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return Th(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new dy("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function db(e,t,n,r){return qu((function(){switch(e.rank){case 1:return Sh(e,t,n);case 2:switch(r){case 1:return cb(e,t,n);case 2:return lb(e,t,n);default:throw new dy("The axis is not within the rank of the tensor "+"".concat(r))}case 3:switch(r){case 1:return cb(e,t,n);case 2:return Nh(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return lb(e,t,n);default:throw new dy("The axis is not within the rank of the tensor "+"".concat(r))}case 4:switch(r){case 1:return cb(e,t,n);case 2:return Th(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return Th(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return lb(e,t,n);default:throw new dy("The axis is not within the rank of the tensor "+"".concat(r))}default:throw new dy("sliceAlongLastAxis() received an unsupported tensor rank: "+"".concat(e.rank))}}))}function fb(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),jl(e,n)}function hb(e,t){switch(e.rank){case 1:return td([e,t]);case 2:return nd([e,t],0);case 3:return rd([e,t],0);case 4:return ad([e,t],0);default:throw new dy("concatAlongFirstAxis() received an unsupported "+"tensor rank: ".concat(e.rank))}}function pb(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new dy("The length of input n (".concat(t.length,") does not match ")+"the number of dimensions in input x (".concat(e.rank,")"));return Wd(e,t)}function vb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return th(e,t,n,r,a)}function mb(e,t,n,r){if(e.rank<2||t.rank<2)throw new fy("dot requires both inputs to be rank >= 2"+" but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new fy("If rank y >= 3, then the second last dim"+" of y must equal the last dim of x but got x shape = ".concat(e.shape," and ")+" y shape = ".concat(t.shape));if(2===e.rank&&2===t.rank){return Np({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?bb(e.rank,r,"channelsLast"):null,activation:n})}var a=e.shape.slice(),i=a.pop();e=Ml(e,[-1,i]);var o=t.shape.slice(),s=o.pop(),u=o.pop(),c=[].concat((0,Le.Z)(o),[s]),l=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=Ml(ip(t,l),[u,-1]);var d=[].concat((0,Le.Z)(a),(0,Le.Z)(c));return Ml(Np({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?bb(e.rank,r,"channelsLast"):null,activation:n}),d)}function gb(e,t,n){return qu((function(){return t=Array.isArray(t)?jh(t,"int32"):Vu(t,"int32"),Hd(e,t,n)}))}function yb(e){return tc(e,e)}function bb(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new dy("Unexpected bias dimensions: ".concat(t.rank)+"; expected it to be 1 or ".concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?Ml(t,[1,r[0],1,1,1]):Ml(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?Ml(t,[1,1,1,1,r[0]]):Ml(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?Ml(t,[1,r[0],1,1]):Ml(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?Ml(t,[1,1,1,r[0]]):Ml(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?Ml(t,[1,r[0],1]):Ml(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?Ml(t,[1,1,r[0]]):Ml(t,[1].concat(r))}else if(e<3)return t;throw new dy("Unsupported input rank by biasAdd: ".concat(t.rank))}function xb(e,t,n){return qu((function(){return null==n&&(n="channelsLast"),Wy(n),Yu(e,bb(e.rank,t,n))}))}function kb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new fy("Support for alpha values other than 1 (".concat(t,") is not implemented ")+"yet.");return Td(e)}function wb(e,t,n,r){return qu((function(){return dp(e,t,n,r)}))}function Sb(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var Ib=["fanIn","fanOut","fanAvg"],Nb=["normal","uniform","truncatedNormal"];var Tb=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(sc),Cb=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e,t){return If(e,t)}}]),n}(Tb);Cb.className="Zeros",cc(Cb);var Eb=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e,t){return Nf(e,t)}}]),n}(Tb);Eb.className="Ones",cc(Eb);var _b=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),r=t.call(this),"object"!==typeof e)throw new dy("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new dy("config must have value set but got ".concat(e));return r.value=e.value,r}return Zt(n,[{key:"apply",value:function(e,t){var n=this;return qu((function(){return tc(oc(n.value),Nf(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(Tb);_b.className="Constant",cc(_b);var Ab=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return Zt(n,[{key:"apply",value:function(e,t){return rh(e,this.minval,this.maxval,t,this.seed)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(Tb);Ab.className="RandomUniform",cc(Ab);var Rb=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return Zt(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new fy("randomNormal does not support dType ".concat(t,"."));return vb(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(Tb);Rb.className="RandomNormal",cc(Rb);var Ob=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return Zt(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new fy("truncatedNormal does not support dType ".concat(t,"."));return qh(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(Tb);Ob.className="TruncatedNormal",cc(Ob);var Db=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return Zt(n,[{key:"apply",value:function(e,t){var n=this;return qu((function(){if(2!==e.length||e[0]!==e[1])throw new dy("Identity matrix initializer can only be used for 2D square matrices.");return tc(n.gain,Gd(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(Tb);Db.className="Identity",cc(Db);var Pb=function(e){Mo(n,e);var t=Bo(n);function n(e){var r,a;if(Vt(this,n),r=t.call(this),e.scale<0)throw new dy("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,a=r.mode,_y(Ib,"FanMode",a),r.distribution=null==e.distribution?"normal":e.distribution,function(e){_y(Nb,"Distribution",e)}(r.distribution),r.seed=e.seed,r}return Zt(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(Wy(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=tb(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=tb(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=tb(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new fy("".concat(this.getClassName()," does not support dType ").concat(t,"."));return qh(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return rh(e,-s,s,t,this.seed)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(Tb);Pb.className="VarianceScaling",cc(Pb);var Fb=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return Zt(n,[{key:"getClassName",value:function(){return Pb.className}}]),n}(Pb);Fb.className="GlorotUniform",cc(Fb);var Mb=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return Zt(n,[{key:"getClassName",value:function(){return Pb.className}}]),n}(Pb);Mb.className="GlorotNormal",cc(Mb);var Lb=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return Zt(n,[{key:"getClassName",value:function(){return Pb.className}}]),n}(Pb);Lb.className="HeNormal",cc(Lb);var $b=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return Zt(n,[{key:"getClassName",value:function(){return Pb.className}}]),n}(Pb);$b.className="HeUniform",cc($b);var jb=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return Zt(n,[{key:"getClassName",value:function(){return Pb.className}}]),n}(Pb);jb.className="LeCunNormal",cc(jb);var zb=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return Zt(n,[{key:"getClassName",value:function(){return Pb.className}}]),n}(Pb);zb.className="LeCunUniform",cc(zb);var Bb=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.ELEMENTS_WARN_SLOW=2e3,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,r}return Zt(n,[{key:"apply",value:function(e,t){var n=this;return qu((function(){if(e.length<2)throw new fy("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError("Unsupported data type ".concat(t,"."));t=t;var r=an(e.slice(0,-1)),a=e[e.length-1],i=r*a;i>n.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more "+"than ".concat(n.ELEMENTS_WARN_SLOW," (").concat(i,") elements: ")+"Slowness may result.");var o=vb([Math.max(a,r),Math.min(a,r)],0,1,t,n.seed),s=Mv.qr(o,!1),u=s[0],c=s[1].flatten().stridedSlice([0],[Math.min(a,r)*Math.min(a,r)],[Math.min(a,r)+1]);return u=tc(u,c.sign()),r<a&&(u=u.transpose()),tc(oc(n.gain),u.reshape(e))}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(Tb);Bb.className="Orthogonal",cc(Bb);var Ub={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Vb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ny(e,uc.getMap().classNameMap,t,"initializer")}function Wb(e){return Sy(e)}function Gb(e){if("string"===typeof e){var t=e in Ub?Ub[e]:e;if("GlorotNormal"===t)return new Mb;if("GlorotUniform"===t)return new Fb;if("HeNormal"===t)return new Lb;if("HeUniform"===t)return new $b;if("LeCunNormal"===t)return new jb;if("LeCunUniform"===t)return new zb;var n={};return n.className=t,n.config={},Vb(n)}return e instanceof Tb?e:Vb(e)}function Zb(e){return Array.isArray(e)&&Array.isArray(e[0])}function Hb(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function qb(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new dy("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function Kb(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new dy("Expected exactly 1 Shape; got ".concat(e.length))}return e}function Xb(e){var t,n=0,r=Ut(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(Rme){r.e(Rme)}finally{r.f()}return n}var Jb="Variable",Yb=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jb,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Vt(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=Fy(),r=null==r?Jb:r,this.originalName=Ky(r),this.name=Xy(this.originalName),this.trainable_=a,this.constraint=i,this.val=Qh(t,this.trainable_,this.name,this.dtype)}return Zt(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function Qb(e){return e.map((function(e){return e.read()}))}function ex(e){e.forEach((function(e){e[0].write(e[1])}))}var tx=Zt((function e(t){Vt(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),nx=Zt((function e(t,n,r,a,i,o,s){Vt(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=s,this.id=Fy(),null!=o&&(this.originalName=Ky(o),this.name=Xy(this.originalName)),this.rank=n.length})),rx=0,ax=function(){function e(t,n){Vt(this,e),this.callArgs=n,this.id=rx++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=Ut(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(Rme){a.e(Rme)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return Zt(e,[{key:"getConfig",value:function(){var e,t=[],n=Ut(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(Rme){n.e(Rme)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),ix=0,ox=function(e){Mo(n,e);var t=Bo(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Vt(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=ix++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=xy(i)+"_"+Ly(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),o=[s].concat(r.inputShape)}e.batchInputShape=o;var u=r.dtype;null==u&&(u=r.inputDType),null==u&&(u="float32"),e.dtype=u}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return Zt(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new ly("The layer has never been called "+"and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new dy("Asked to get ".concat(t," at node ").concat(e,", ")+"but the layer has only ".concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return yy(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return yy(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new cy("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new cy("Layer ".concat(this.name)+" is not connected, no input to return.");return yy(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new cy("Layer ".concat(this.name)+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new cy("Layer ".concat(this.name)+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return yy(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=by(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=by(this.inputSpec);if(e.length!==t.length)throw new dy("Layer ".concat(this.name," expects ").concat(t.length," inputs, ")+"but it received ".concat(e.length," input tensors. ")+"Input received: ".concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new dy("Input ".concat(n," is incompatible with layer ").concat(this.name,": ")+"expected ndim=".concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new dy("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected max_ndim=".concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new dy("Input ".concat(n," is incompatible with layer ").concat(this.name)+": expected min_ndim=".concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new dy("Input ".concat(n," is incompatible with layer ").concat(this.name," ")+": expected dtype=".concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var o=r.shape;for(var s in a.axes){var u=Number(s),c=a.axes[s],l=u>=0?o[u]:o[o.length+u];if(null!=c&&-1===[c,null].indexOf(l))throw new dy("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected axis ").concat(u," of input shape to ")+"have value ".concat(c," but got shape ").concat(o,"."))}}if(null!=a.shape)for(var d=0;d<a.shape.length;++d){var f=a.shape[d],h=r.shape[d];if(null!=f&&null!=h&&f!==h)throw new dy("Input ".concat(n," is incompatible with layer ")+"".concat(this.name,": expected shape=").concat(a.shape,", ")+"found shape=".concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=by(e),i=!0,o=Ut(a);try{for(o.s();!(r=o.n()).done;){if(!(r.value instanceof nx)){i=!1;break}}}catch(Rme){o.e(Rme)}finally{o.f()}var s,u=!0,c=Ut(a);try{for(c.s();!(s=c.n()).done;){if(s.value instanceof nx){u=!1;break}}}catch(Rme){c.e(Rme)}finally{c.f()}if(i===u)throw new dy("Arguments to apply() must be all SymbolicTensors or all Tensors");return qy(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,i=[],o=Ut(by(e));try{for(o.s();!(r=o.n()).done;){var s=r.value;i.push(s.shape)}}catch(Rme){o.e(Rme)}finally{o.f()}n.build(yy(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){var c,l=n.call(e,t),d=[],f=Ut(by(l));try{for(f.s();!(c=f.n()).done;){var h=c.value;-1!==a.indexOf(h)&&(h=h.clone()),d.push(h)}}catch(Rme){f.e(Rme)}finally{f.f()}if(l=yy(d),null!=n.activityRegularizer)throw new fy("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}var p,v=function(e){e=by(e);var t,n=[],r=Ut(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(Rme){r.e(Rme)}finally{r.f()}return yy(n)}(e),m=n.computeOutputShape(v),g="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?v[0]:v),p=null!=m&&m.length>0&&Array.isArray(m[0])?m.map((function(r,a){return new nx(g,r,n,by(e),t,n.name,a)})):new nx(g,m,n,by(e),t,n.name),n.addInboundNode(e,p,null,null,v,m,t),n._refCount++,null!=n.activityRegularizer)throw new fy("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return p}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+"".concat(JSON.stringify(e),") does not match that of the ")+"batchInputShape (".concat(JSON.stringify(this.batchInputShape),") ")+"of the layer ".concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor "+"(".concat(JSON.stringify(e),") does not ")+"match the expectation of layer ".concat(this.name,": ")+"".concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new cy("The layer ".concat(this.name," has never been called and thus has no ")+"defined output shape.");var e,t=[],n=Ut(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(Rme){n.e(Rme)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new cy("The layer ".concat(this.name," has multiple inbound nodes with different ")+'output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}},{key:"countParams",value:function(){if(!this.built)throw new ly("You tried to call countParams() on ".concat(this.name,", ")+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return Xb(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Qb(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;qu((function(){var n=t.weights;if(n.length!==e.length)throw new dy('You called setWeights(weights) on layer "'.concat(t.name,'" ')+"with a weight list of length ".concat(e.length,", ")+"but the layer was expecting ".concat(n.length," weights. ")+"Provided weights: ".concat(e,"..."));if(0!==n.length){for(var r=[],a=Qb(n),i=0;i<a.length;++i){var o=a[i],s=n[i],u=e[i];if(!on(o.shape,u.shape))throw new dy("Layer weight shape ".concat(o.shape," ")+"not compatible with provided weight shape ".concat(u.shape));r.push([s,u])}ex(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o,s){if(-1!==this._addedWeightNames.indexOf(e))throw new dy("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():Gb("zeros"));var u=r.apply(t,n),c=new Yb(u,n,e,i,o);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(c.read())})),null==i&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=by(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,(0,Le.Z)(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, ")+"but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, ")+"but was passed an inputMask.")}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=by(e);t=by(t),n=by(n),r=by(r),a=Hb(a),i=Hb(i);var u,c=[],l=[],d=[],f=Ut(s);try{for(f.s();!(u=f.n()).done;){var h=u.value;c.push(h.sourceLayer),l.push(h.nodeIndex),d.push(h.tensorIndex)}}catch(Rme){f.e(Rme)}finally{f.f()}new ax({outboundLayer:this,inboundLayers:c,nodeIndices:l,tensorIndices:d,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var p=0;p<t.length;p++)t[p].sourceLayer=this,t[p].nodeIndex=this.inboundNodes.length-1,t[p].tensorIndex=p}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been ")+"built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used ")+"yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(sc);function sx(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++){var o,s=Ut(sx(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]));try{for(s.s();!(o=s.n()).done;){var u=o.value;-1===a.indexOf(u)&&a.push(u)}}catch(Rme){s.e(Rme)}finally{s.f()}}return a}var ux=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:Ly("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new dy("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new dy("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new dy("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new nx(r.dtype,r.batchInputShape,je(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new ax({outboundLayer:je(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),r}return Zt(n,[{key:"apply",value:function(e,t){throw new dy("Cannot pass any input to an "+"InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(ox);ux.className="InputLayer",cc(ux);var cx=function(){function e(t){if(Vt(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=Ut(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(Rme){a.e(Rme)}finally{a.f()}}}return Zt(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new dy("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return Vu(t,e.dtype)}catch(Rme){throw new dy("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype ")+"of the key '".concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof nx){if(null==this.id2Value[e.id])throw new dy("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new dy("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof nx){if(null==this.id2Value[e.id])throw new dy("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new dy("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&Ku(this.id2Mask)}}]),e}(),lx=new py,dx=new py;function fx(e,t,n,r){var a,i=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],u=s.map((function(e){return e.name})),c=[],l=t.names(),d=Ut(u);try{for(d.s();!(a=d.n()).done;){var f=a.value;-1!==l.indexOf(f)?c.push(t.getValue(f)):c.push(null)}}catch(Rme){d.e(Rme)}finally{d.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var h,p=u.join(",")+"|"+t.names().sort().join(","),v=lx.get(p);if(null==v){var m=function(e,t){tn(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=px(e[0],t);n=a.sorted,r=a.recipientMap}else{var i,o=new Set,s=Ut(e);try{for(s.s();!(i=s.n()).done;){var u,c=px(i.value,t),l=c.sorted,d=c.recipientMap,f=Ut(l);try{for(f.s();!(u=f.n()).done;){var h=u.value;o.has(h.name)||(n.push(h),o.add(h.name))}}catch(Rme){f.e(Rme)}finally{f.f()}var p=function(e){null==r[e]&&(r[e]=new Set),d[e].forEach((function(t){return r[e].add(t)}))};for(var v in d)p(v)}}catch(Rme){s.e(Rme)}finally{s.f()}}return{sorted:n,recipientCounts:hx(r)}}(s,t);v=m.sorted,h=m.recipientCounts,lx.put(p,v),dx.put(p,h)}h={},i||Object.assign(h,dx.get(p));for(var g=new cx(t),y=0;y<v.length;++y){if(null!=r){var b=Hu().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var x=v[y],k=x.sourceLayer;if(!(k instanceof ux)){var w,S=[],I=[],N=[],T=!1,C=Ut(x.inputs);try{for(C.s();!(w=C.n()).done;){var E=w.value,_=g.getValue(E),A=g.getMask(E);S.push(_),I.push(A),null!=A&&(T=!0),i||(h[E.name]--,0!==h[E.name]||t.hasKey(E)||-1!==u.indexOf(E.name)||_.isDisposed||!0===E.sourceLayer.stateful||N.push(_))}}catch(Rme){C.e(Rme)}finally{C.f()}T&&((n=n||{}).mask=I[0]);var R=by(k.apply(S,n)),O=null;k.supportsMasking&&(O=k.computeMask(S,I));for(var D=vx(x),P=Array.isArray(D)?D:[D],F=0;F<P.length;++F){g.hasKey(P[F])||g.add(P[F],R[F],Array.isArray(O)?O[0]:O);var M=u.indexOf(P[F].name);-1!==M&&(c[M]=R[F])}i||Ku(N)}}return g.disposeMasks(),o?c:c[0]}function hx(e){var t={};for(var n in e)t[n]=e[n].size;return t}function px(e,t){var n,r=new Set,a=[],i={},o=Ut(t.names());try{for(o.s();!(n=o.n()).done;){var s=n.value;r.add(s)}}catch(Rme){o.e(Rme)}finally{o.f()}var u=[],c=[];for(u.push(e);u.length>0;){var l=u[u.length-1];if(r.has(l.name))u.pop();else{var d=c[c.length-1]===u.length-1;if(0===l.inputs.length||d)u.pop(),a.push(l),r.add(l.name),d&&c.pop();else{c.push(u.length-1);var f,h=Ut(l.inputs);try{for(h.s();!(f=h.n()).done;){var p=f.value;null==i[p.name]&&(i[p.name]=new Set),i[p.name].add(l.name),r.has(p.name)||u.push(p)}}catch(Rme){h.e(Rme)}finally{h.f()}}}}return{sorted:a,recipientMap:i}}function vx(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=Ut(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(Rme){i.e(Rme)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}function mx(e,t){return qu((function(){return nc(Ld(tc(e,e),t,!0))}))}Ln().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(function(){return 100}),(function(e){null!=lx&&lx.setMaxEntries(e),null!=dx&&dx.setMaxEntries(e)}));var gx=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"getConfig",value:function(){return{}}}]),n}(sc),yx=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Zt(n,[{key:"apply",value:function(e){var t=this;return qu((function(){var n=mx(e,t.axis),r=ed(n,0,t.maxValue);return tc(e,ec(r,Yu(ib(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(gx);yx.className="MaxNorm",cc(yx);var bx=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Zt(n,[{key:"apply",value:function(e){var t=this;return qu((function(){return ec(e,Yu(ib(),mx(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(gx);bx.className="UnitNorm",cc(bx);var xx=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e){return sh(e)}}]),n}(gx);xx.className="NonNeg",cc(xx);var kx=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Zt(n,[{key:"apply",value:function(e){var t=this;return qu((function(){var n=mx(e,t.axis),r=Yu(tc(t.rate,ed(n,t.minValue,t.maxValue)),tc(1-t.rate,n));return tc(e,ec(r,Yu(ib(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(gx);kx.className="MinMaxNorm",cc(kx);var wx,Sx={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Ix(e){return Sy(e)}function Nx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ny(e,uc.getMap().classNameMap,t,"constraint")}function Tx(e){return null==e?null:"string"===typeof e?Nx({className:e in Sx?Sx[e]:e,config:{}}):e instanceof gx?e:Nx(e)}function Cx(e){return Ex.apply(this,arguments)}function Ex(){return Ex=me(ye().mark((function e(t){var n,r,a,i,o,s,u,c;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],r=[],a=[],t)"number"!==typeof(o=t[i])&&(s=o,n.push(s.data()),r.push(i),a.push(s));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(u=e.sent,c=0;c<u.length;++c)t[r[c]]=u[c][0];Ku(a);case 12:case"end":return e.stop()}}),e)}))),Ex.apply(this,arguments)}function _x(e){if(null!=e)for(var t in e){var n=e[t];"number"!==typeof n&&n.dispose()}}!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(wx||(wx={}));var Ax=function(){function e(){Vt(this,e),this.validationData=null}return Zt(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),Rx=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;Vt(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return Zt(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=Ut(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(Rme){n.e(Rme)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=Ut(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(Rme){n.e(Rme)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=me(ye().mark((function e(t,n){var r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Ut(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=me(ye().mark((function e(t,n){var r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Ut(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=me(ye().mark((function e(t,n){var r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Ut(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=me(ye().mark((function e(t,n){var r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Ut(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=me(ye().mark((function e(t){var n,r,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=Ut(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=me(ye().mark((function e(t){var n,r,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=Ut(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ox=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.call(this)}return Zt(n,[{key:"onEpochBegin",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=me(ye().mark((function e(t,n){var r,a,i,o=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=function(e){var t=n[e];if("number"===typeof t)o.totals.hasOwnProperty(e)||(o.totals[e]=0),o.totals[e]=o.totals[e]+t*r;else{var a;e in o.totals?a=o.totals[e]:o.totals[e]=0;var i=qu((function(){return Yu(o.totals[e],tc(t,r))}));o.totals[e]=i,null!=a&&a.dispose()}},n)a(i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=me(ye().mark((function e(t,n){var r,a,i,o=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=19;break}r=Ut(this.params.metrics),e.prev=2,i=function(){var e=a.value;if(null==o.totals[e])return"continue";"number"===typeof o.totals[e]?n[e]=o.totals[e]/o.seen:qu((function(){var t=tc(ec(1,o.seen),o.totals[e]);n[e]=t,o.totals[e].dispose(),Xu(n[e])}))},r.s();case 5:if((a=r.n()).done){e.next=11;break}if("continue"!==i()){e.next=9;break}return e.abrupt("continue",9);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(Ax),Dx=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"onTrainBegin",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=me(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=me(ye().mark((function e(){var t,n,r,a,i,o,s,u,c;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!==typeof i[o]&&(s=i[o],t.push(s.data()),n.push(a),r.push(o));return e.next=6,Promise.all(t);case 6:for(u=e.sent,c=0;c<u.length;++c)this.history[n[c]][r[c]].dispose(),this.history[n[c]][r[c]]=u[c][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Ax),Px=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;if(Vt(this,n),(a=t.call(this)).currentEpoch=0,a.nowFunc=e.nowFunc,a.nextFrameFunc=e.nextFrameFunc||Vv,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return bn(a.yieldEvery)&&(a.maybeWait=function(e,t,n){var r,a=null!=n?n():Co();return function(){var i=null!=n?n():Co();return i-a<t?r:(a=i,r=e.apply(void 0,arguments))}}(a.maybeWait.bind(je(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,a}return Zt(n,[{key:"maybeWait",value:function(){var e=me(ye().mark((function e(t,n,r){var a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.yield){e.next=5;break}return e.next=4,Cx(r);case 4:a.push(this.yield(t,n,r));case 5:return a.push(this.nextFrameFunc()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,Cx(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=me(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,Cx(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,Cx(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=me(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,Cx(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):bn(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,Cx(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,Cx(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ax);function Fx(e,t){return null==e&&(e={}),e instanceof Ax?[e]:Array.isArray(e)&&e[0]instanceof Ax?e:by(e).map((function(e){return new Px(e,t)}))}var Mx=function(){function e(){Vt(this,e)}return Zt(e,null,[{key:"registerCallbackConstructor",value:function(t,n){tn(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, "+"but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new dy("Duplicate callback constructor.")}))}}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,(0,Le.Z)(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}();function Lx(e,t,n,r,a,i,o,s,u){var c=new Dx,l=[new Ox].concat((0,Le.Z)(Mx.createCallbacks(t)));null!=e&&l.push.apply(l,(0,Le.Z)(e)),l.push(c);var d=new Rx(l);return d.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:u}),{callbackList:d,history:c}}function $x(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lo(e)););return e}function jx(){return jx="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=$x(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},jx.apply(this,arguments)}function zx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ny(e,uc.getMap().classNameMap,t,"layer",n)}function Bx(e,t){return qu((function(){"float32"!==e.dtype&&(e=Vu(e,"float32"));var n=Ld(yb(e),t,!0),r=fc(n.shape,ib()),a=nc(kc(n,r));return ec(e,a)}))}function Ux(e,t){return qu((function(){return Sf(yb(vc(t,e)),-1)}))}function Vx(e,t){return qu((function(){return Sf(gc(vc(t,e)),-1)}))}function Wx(e,t){return qu((function(){var n=vc(e,t),r=ed(gc(e),ib(),Number.MAX_VALUE),a=gc(ec(n,r));return tc(100,Sf(a,-1))}))}function Gx(e,t){return qu((function(){var n=ed(t,ib(),Number.MAX_VALUE),r=of(Yu(1,n)),a=ed(e,ib(),Number.MAX_VALUE),i=of(Yu(1,a));return Sf(yb(vc(r,i)),-1)}))}function Zx(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return qu((function(){if(n)t=Ch(t);else{var r=Ld(t,t.shape.length-1,!0);t=ec(t,r)}return t=ed(t,ib(),1-ib()),uf(Ld(tc(Vu(e,"float32"),of(t)),t.shape.length-1))}))}function Hx(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return qu((function(){var r=Vu(Zd(ub(e)),"int32"),a=(t=ed(t,ib(),1-ib())).shape;return Zx(Ml(Pf(r,a[a.length-1]),a),t,n)}))}function qx(e,t){return qu((function(){var n;return n=ed(t,ib(),1-ib()),n=of(ec(n,vc(1,n))),Sf(function(e,t){if(!on(e.shape,t.shape))throw new dy("logits and labels must have the same shape, but got shapes "+"".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return qu((function(){var n=sh(t),r=uf(gc(t));return Yu(vc(n,tc(t,e)),sf(Bd(r)))}))}(e,n),-1)}))}function Kx(e,t){return qu((function(){var n=ed(e,ib(),1),r=ed(t,ib(),1);return Ld(tc(e,of(ec(n,r))),-1)}))}function Xx(e,t){return qu((function(){var n=Bx(e,-1),r=Bx(t,-1),a=tc(n,r);return uf(Ld(a,-1))}))}Mx.constructors={};var Jx={meanSquaredError:Ux,meanAbsoluteError:Vx,meanAbsolutePercentageError:Wx,meanSquaredLogarithmicError:Gx,squaredHinge:function(e,t){return qu((function(){var n=kc(0,vc(1,tc(e,t)));return Sf(yb(n),-1)}))},hinge:function(e,t){return qu((function(){var n=kc(0,vc(1,tc(e,t)));return Sf(n,-1)}))},categoricalHinge:function(e,t){return qu((function(){var n=Ld(tc(e,t),-1),r=Fd(tc(vc(1,e),t),-1);return kc(0,Yu(1,vc(r,n)))}))},logcosh:function(e,t){return qu((function(){var n=Math.log(2),r=vc(t,e),a=vc(Yu(r,cf(tc(-2,r))),n);return Sf(a,-1)}))},categoricalCrossentropy:Zx,sparseCategoricalCrossentropy:Hx,binaryCrossentropy:qx,kullbackLeiblerDivergence:Kx,poisson:function(e,t){return qu((function(){var n=of(Yu(ib(),t));return Sf(vc(t,tc(e,n)),-1)}))},cosineProximity:Xx};function Yx(e){if("string"===typeof e){if(e in Jx)return Jx[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,". ")+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new dy(t)}return e}function Qx(e,t){return qu((function(){var n=tc(.5,Ff(t)),r=ob(qd(t,n),e.dtype);return Sf(kd(e,r),-1)}))}function ek(e,t){return qu((function(){return ob(kd(fl(e,-1),fl(t,-1)),"float32")}))}function tk(e,t){return qu((function(){return Vu(Ld(hf(kd(e,1),kd(t,1))),"float32")}))}function nk(e,t){return qx(e,t)}function rk(e,t){return e.rank===t.rank&&(e=Ph(e,[e.rank-1])),(t=fl(t,-1)).dtype!==e.dtype&&(t=Vu(t,e.dtype)),Vu(kd(e,t),"float32")}var ak=Zx,ik=Hx,ok={binaryAccuracy:Qx,categoricalAccuracy:ek,precision:function(e,t){return qu((function(){var n=tk(e,t),r=function(e,t){return qu((function(){return Vu(Ld(hf(kd(e,0),kd(t,1))),"float32")}))}(e,t),a=Yu(n,r);return Vu(wd(qd(a,0),ec(n,a),0),"float32")}))},categoricalCrossentropy:ak,sparseCategoricalCrossentropy:ik,mse:Ux,MSE:Ux,mae:Vx,MAE:Vx,mape:Wx,MAPE:Wx,cosine:Xx};function sk(e){if("string"===typeof e&&e in ok)return ok[e];if("string"!==typeof e&&null!=e)return e;throw new dy("Unknown metric ".concat(e))}function uk(e){if(my(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"===typeof e)return e;for(var t,n=0,r=Object.keys(Jx);n<r.length;n++){var a=r[n];if(Jx[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(ok);i<o.length;i++){var s=o[i];if(ok[s]===e){t=s;break}}return void 0!==t?t:e.name}var ck=1048576;function lk(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!==typeof e||Object.getPrototypeOf(e)!==Object.prototype||!dk(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>ck&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in ')+"size (length=".concat(r.length," when serialized). It is not ")+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+"".concat(ck,"."))}}function dk(e){if(null===e)return!0;if("object"===typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!==typeof r)return!1;if(!dk(e[r]))return!1}return!0}if(Array.isArray(e)){var a,i=Ut(e);try{for(i.s();!(a=i.n()).done;){if(!dk(a.value))return!1}}catch(Rme){i.e(Rme)}finally{i.f()}return!0}return!1}var o=typeof e;return"string"===o||"number"===o||"boolean"===o}function fk(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=pk(e),o=["Layer (type)","Input Shape","Output shape","Param #"];if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),r=[],e.nodesByDepth){var u;(u=r).push.apply(u,(0,Le.Z)(e.nodesByDepth[s]))}a("_".repeat(t)),vk(o,n,a),a("=".repeat(t));for(var c=e.layers,l=0;l<c.length;++l)i?mk(c[l],n,a):gk(c[l],n,r,a),a((l===c.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var d=hk(e),f=Xb(e.nonTrainableWeights);a("Total params: ".concat(d+f)),a("Trainable params: ".concat(d)),a("Non-trainable params: ".concat(f)),a("_".repeat(t))}function hk(e){return null!=e.collectedTrainableWeights?Xb(e.collectedTrainableWeights):Xb(e.trainableWeights)}function pk(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,(0,Le.Z)(s))}if(t){var u,c=Ut(e.layers);try{for(c.s();!(u=c.n()).done;){var l,d=u.value,f=!1,h=Ut(d.inboundNodes);try{for(h.s();!(l=h.n()).done;){var p=l.value;if(-1!==r.indexOf(p)){if(f){t=!1;break}f=!0}}}catch(Rme){h.e(Rme)}finally{h.f()}if(!t)break}}catch(Rme){c.e(Rme)}finally{c.f()}}return t}function vk(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function mk(e,t,n){var r,a;try{a=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(Rme){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(Rme){r="multiple"}var i=e.name,o=e.getClassName();vk(["".concat(i," (").concat(o,")"),a,r,e.countParams().toString()],t,n)}function gk(e,t,n,r){var a,i;try{i=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(Rme){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(Rme){a="multiple"}var o,s=[],u=Ut(e.inboundNodes);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(c)))for(var l=0;l<c.inboundLayers.length;++l){var d=c.inboundLayers[l].name,f=c.nodeIndices[l],h=c.tensorIndices[l];s.push("".concat(d,"[").concat(f,"][").concat(h,"]"))}}}catch(Rme){u.e(Rme)}finally{u.f()}var p=e.name,v=e.getClassName(),m=0===s.length?"":s[0];vk(["".concat(p," (").concat(v,")"),i,a,e.countParams().toString(),m],t,r);for(var g=1;g<s.length;++g)vk(["","","","",s[g]],t,r)}function yk(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"===typeof n}function bk(e,t){if(null===e)return null;if("string"===typeof e)return ky(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];yk(t,a,i)?n.push(i):n.push(bk(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c];if("name"===c&&"string"===typeof l)o[c]=l;else{var d=ky(c);o[d]=bk(l,d)}}return o}function xk(e,t){if(null===e||void 0===e)return null;if("string"===typeof e)return xy(e);if("number"===typeof e||"boolean"===typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];yk(t,a,i)?n.push(i):n.push(xk(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c],d=xy(c);o[d]="name"!==c&&"className"!==c||"string"!==typeof l?xk(l,c):l}return o}var kk="4.4.0",wk=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=Ly(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],Cy(r.inputs).length!==r.inputs.length)throw new dy("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+"".concat(r.inputs.map((function(e){return e.name}))));Cy(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+"".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=Ut(r.outputs);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.sourceLayer,c=s.nodeIndex,l=s.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(c),r.outputLayersTensorIndices.push(l)}}catch(Rme){o.e(Rme)}finally{o.f()}var d,f=Ut(r.inputs);try{for(f.s();!(d=f.n()).done;){var h=d.value,p=h.sourceLayer,v=h.nodeIndex,m=h.tensorIndex;my(0===v,"input layer has >1 nodes"),my(0===m,"input layer has >1 tensors"),r.inputLayers.push(p),r.inputLayersNodeIndices.push(v),r.inputLayersTensorIndices.push(m)}}catch(Rme){f.e(Rme)}finally{f.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var g=0;g<r.inputLayers.length;g++){var y=r.inputLayers[g];if(!(y instanceof ux))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+"Received inputs: ".concat(e.inputs,". ")+"Input ".concat(g," (0-based) originates ")+"from layer type ".concat(y.getClassName(),"."));r.inputNames.push(y.name),r.feedInputShapes.push(y.batchInputShape),r.feedInputNames.push(y.name)}var b,x=Ut(r.outputLayers);try{for(x.s();!(b=x.n()).done;){var k=b.value;r.outputNames.push(k.name)}}catch(Rme){x.e(Rme)}finally{x.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var w,S={},I={},N={},T={},C={},E=[],_=function e(t,a,i,o,s,u){null!=o&&null!=s&&null!=u||(o=t.sourceLayer,s=t.nodeIndex,u=t.tensorIndex);var c=o.inboundNodes[s];if(-1!==i.indexOf(c))throw new ly("The tensor ".concat(t.name,' at layer "').concat(o.name,'" ')+"is part of a cycle.");if(-1===a.indexOf(c)){r.containerNodes.add(n.nodeKey(o,s)),o.id in C||(C[o.id]=Object.keys(C).length),-1===i.indexOf(c)&&i.push(c);for(var l=c.inboundLayers.length,d=0;d<l;d++){e(c.inputTensors[d],a,i,c.inboundLayers[d],c.nodeIndices[d],c.tensorIndices[d])}for(a.push(c);i.indexOf(c)>=0;)i.splice(i.indexOf(c),1);E.push(c)}},A=[],R=[],O=Ut(r.outputs);try{for(O.s();!(w=O.n()).done;){_(w.value,A,R)}}catch(Rme){O.e(Rme)}finally{O.f()}var D,P=Ut(E.slice().reverse());try{for(P.s();!(D=P.n()).done;){var F=D.value;I[F.id]=F,F.id in S||(S[F.id]=0);var M=S[F.id],L=null==N[F.outboundLayer.id]?0:N[F.outboundLayer.id];M=Math.max(M,L),N[F.outboundLayer.id]=M,T[F.outboundLayer.id]=F.outboundLayer,S[F.id]=M;for(var $=0;$<F.inboundLayers.length;$++){var j=F.inboundLayers[$],z=F.nodeIndices[$],B=j.inboundNodes[z],U=null==S[B.id]?0:S[B.id];S[B.id]=Math.max(M+1,U),I[B.id]=B}}}catch(Rme){P.e(Rme)}finally{P.f()}var V={};for(var W in S){var G=S[W];G in V||(V[G]=[]),V[G].push(I[W])}var Z={};for(var H in N){var q=N[H];q in Z||(Z[q]=[]),Z[q].push(T[H])}var K=Object.keys(Z).map((function(e){return parseInt(e,10)})).sort(Ty);r.layers=[];var X,J=Ut(K);try{for(J.s();!(X=J.n()).done;){var Y=Z[X.value];Y.sort((function(e,t){var n=C[e.id],r=C[t.id];return n<r?-1:n>r?1:0}));var Q,ee=Ut(Y);try{for(ee.s();!(Q=ee.n()).done;){var te=Q.value;te instanceof n&&r.internalContainerRefs.push(te),r.layers.push(te)}}catch(Rme){ee.e(Rme)}finally{ee.f()}}}catch(Rme){J.e(Rme)}finally{J.f()}r.layersByDepth=Z,K=Object.keys(V).map((function(e){return parseInt(e,10)})).sort(Ty);var ne,re=r.inputs.slice(),ae=[],ie=Ut(K);try{for(ie.s();!(ne=ie.n()).done;){var oe,se=Ut(V[ne.value]);try{for(se.s();!(oe=se.n()).done;){var ue=oe.value,ce=ue.outboundLayer;if(null!=ce){var le,de=Ut(ue.inputTensors);try{for(de.s();!(le=de.n()).done;){var fe=le.value;if(-1===re.indexOf(fe))throw new ly("Graph disconnected: cannot obtain value for tensor ".concat(fe)+' at layer "'.concat(ce.name,'". ')+"The following previous layers were accessed without "+"issue: ".concat(ae))}}catch(Rme){de.e(Rme)}finally{de.f()}var he,pe=Ut(ue.outputTensors);try{for(pe.s();!(he=pe.n()).done;){var ve=he.value;re.push(ve)}}catch(Rme){pe.e(Rme)}finally{pe.f()}ae.push(ce.name)}}}catch(Rme){se.e(Rme)}finally{se.f()}}}catch(Rme){ie.e(Rme)}finally{ie.f()}r.nodesByDepth=V;var me,ge=r.layers.map((function(e){return e.name})),ye=Ut(ge);try{var be=function(){var e=me.value,t=ge.filter((function(t){return t===e})).length;if(1!==t)throw new ly('The name "'.concat(e,'" is used ').concat(t," times ")+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(ge))};for(ye.s();!(me=ye.n()).done;)be()}catch(Rme){ye.e(Rme)}finally{ye.f()}return r.outboundNodes=[],r.inboundNodes=[],new ax({outboundLayer:je(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}return Zt(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=Ut(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(Rme){n.e(Rme)}finally{n.f()}var a,i=Ut(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(Rme){i.e(Rme)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new dy("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=Ut(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(Rme){n.e(Rme)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=Ut(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,Le.Z)(r.nonTrainableWeights))}}catch(Rme){n.e(Rme)}finally{n.f()}if(!this.trainable){var a,i=[],o=Ut(this.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,(0,Le.Z)(s.trainableWeights))}}catch(Rme){o.e(Rme)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,i=Ut(this.layers);try{for(i.s();!(t=i.n()).done;){var o,s=t.value,u=Ut(s.weights);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(null!=r[c.originalName])throw new dy("Duplicate weight name: ".concat(c.originalName));r[c.originalName]=c,a++}}catch(Rme){u.e(Rme)}finally{u.f()}}}catch(Rme){i.e(Rme)}finally{i.f()}var l=[];for(var d in e){var f=d;if(null==r[d]){var h=d.split("/"),p=h.slice(0,-2).concat([h[h.length-1]]);f=p.join("/")}if(null!=r[f])l.push([r[f],e[d]]);else if(n)throw new dy("Provided weight data has no target variable: ".concat(d));delete r[f]}if(n){var v=[];for(var m in r)v.push(m);if(v.length>0)throw new dy("".concat(v.length," of ").concat(a," weights are not set: ")+"".concat(v))}ex(l)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(kk),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=xk(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return qu((function(){e=by(e);for(var r=new cx,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return fx(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return qu((function(){var r;return e=by(e),r=null==t?vy(null,e.length):by(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=Hb(e);if(t.length!==this.inputLayers.length)throw new dy("Invalid inputShape argument ".concat(e,": ")+"model has ".concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(Ty);if(o.length>1){var s,u=Ut(o);try{for(u.s();!(s=u.n()).done;){var c,l=s.value,d=Ut(this.nodesByDepth[l]);try{for(d.s();!(c=d.n()).done;){var f=c.value,h=f.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(h.id)){for(var p=[],v=0;v<f.inboundLayers.length;v++){var m=f.inboundLayers[v],g=f.nodeIndices[v],y=f.tensorIndices[v],b=n["".concat(m.name,"_").concat(g,"_").concat(y)];p.push(b)}for(var x=Hb(h.computeOutputShape(yy(p))),k=h.inboundNodes.indexOf(f),w=0;w<x.length;w++){n["".concat(h.name,"_").concat(k,"_").concat(w)]=x[w]}}}}catch(Rme){d.e(Rme)}finally{d.f()}}}catch(Rme){u.e(Rme)}finally{u.f()}}for(var S=[],I=[],N=0;N<this.outputLayers.length;N++){var T=this.outputLayers[N],C=this.outputLayersNodeIndices[N],E=this.outputLayersTensorIndices[N],_="".concat(T.name,"_").concat(C,"_").concat(E);I.push(_)}for(var A=0;A<I.length;A++){var R=I[A];my(R in n),S.push(n[R])}return yy(S)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=vy(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],i=e[r],o=t[r];n[a.id]=[i,o]}var s,u=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(Ty),c=Ut(u);try{for(c.s();!(s=c.n()).done;){var l,d=s.value,f=Ut(this.nodesByDepth[d]);try{for(f.s();!(l=f.n()).done;){var h,p=l.value,v=p.outboundLayer,m=p.inputTensors,g=p.outputTensors,y=new Array,b=Ut(m);try{for(b.s();!(h=b.n()).done;){var x=h.value;x.id in n&&y.push(n[x.id])}}catch(Rme){b.e(Rme)}finally{b.f()}if(y.length===m.length){var k={},w=void 0,S=void 0,I=void 0,N=void 0;if(null!=p.callArgs&&(k=p.callArgs),1===y.length){var T=(0,C.Z)(y[0],2),E=T[0],_=T[1];null==k.mask&&(k.mask=_),I=by(v.call(E,k)),N=by(v.computeMask(E,_)),w=[E],S=[_]}else w=y.map((function(e){return e[0]})),S=y.map((function(e){return e[1]})),null==k.mask&&(k.mask=S),I=by(v.call(w,k)),N=by(v.computeMask(w,S));if(v.activityRegularizer)throw new fy("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var A=0;A<g.length;++A){var R=g[A],O=I[A],D=N[A];n[R.id]=[O,D]}}}}catch(Rme){f.e(Rme)}finally{f.f()}}}catch(Rme){c.e(Rme)}finally{c.f()}var P,F=[],M=[],L=[],$=Ut(this.outputs);try{for($.s();!(P=$.n()).done;){var j=P.value;my(j.id in n,"Could not compute output ".concat(j.name," : ").concat(j.id));var z=(0,C.Z)(n[j.id],2),B=z[0],U=z[1];L.push(B.shape),F.push(B),M.push(U)}}catch(Rme){$.e(Rme)}finally{$.f()}return[F,M,L]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=Ut(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var s=0;s<o.inboundNodes.length;s++){var u=n.nodeKey(o,s);this.containerNodes.has(u)&&(a[u]=t,t+=1)}}}catch(Rme){i.e(Rme)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new dy("Was asked to retrieve layer at index ".concat(t,", but model only ")+"has ".concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new dy("Provide either a layer name or layer index");var n,r=Ut(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(Rme){r.e(Rme)}finally{r.f()}throw new dy("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return qu((function(){var t,r=[],a=Ut(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var s=n.nodeKey(i,o);e.containerNodes.has(s)&&r.push.apply(r,(0,Le.Z)(i.calculateLosses()))}}catch(Rme){a.e(Rme)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=Ut(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,s=o.getClassName(),u=o.getConfig(),c=[],l=0;l<o.inboundNodes.length;l++){var d=o.inboundNodes[l],f=n.nodeKey(o,l),h={};if(this.containerNodes.has(f)){if(d.callArgs)try{JSON.stringify(d.callArgs),h=d.callArgs}catch(Rme){console.warn("Layer ".concat(o.name," was passed ")+"non-serializable keyword arguments: "+"".concat(d.callArgs,". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),h={}}if(d.inboundLayers.length>0){for(var p=[],v=0;v<d.inboundLayers.length;v++){var m=d.inboundLayers[v],g=d.nodeIndices[v],y=d.tensorIndices[v],b=r[n.nodeKey(m,g)];null==b&&(b=0),p.push([m.name,b,y,h])}c.push(p)}}}var x={};x.name=o.name,x.className=s,x.config=u,x.inboundNodes=c,a.push(x)}}catch(Rme){i.e(Rme)}finally{i.f()}t.layers=a;for(var k=[],w=0;w<this.inputLayers.length;w++){var S=this.inputLayers[w],I=this.inputLayersNodeIndices[w],N=n.nodeKey(S,I);if(this.containerNodes.has(N)){var T=r[N];null!==T&&void 0!==T||(T=0);var C=this.inputLayersTensorIndices[w];k.push([S.name,T,C])}}t.inputLayers=k;for(var E=[],_=0;_<this.outputLayers.length;_++){var A=this.outputLayers[_],R=this.outputLayersNodeIndices[_],O=n.nodeKey(A,R);if(this.containerNodes.has(O)){var D=r[O];null!==D&&void 0!==D||(D=0);var P=this.outputLayersTensorIndices[_];E.push([A.name,D,P])}}return t.outputLayers=E,t}},{key:"stateful",get:function(){if(this._stateful)throw new dy("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=Ut(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(Rme){t.e(Rme)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;qu((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],s=Ut(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=u[0],l=u[1],d=u[2];if(n=null==u[3]?{}:u[3],!(c in r))return void i(e,t);var f=r[c];if(f.inboundNodes.length<=l)return void i(e,t);var h=f.inboundNodes[l];o.push(h.outputTensors[d])}}catch(Rme){s.e(Rme)}finally{s.f()}o.length>0&&e.apply(yy(o),n)}function s(e){var a=e.name,o=zx(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new dy("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var u,c=t.name,l=t.layers,d=Ut(l);try{for(d.s();!(u=d.n()).done;){var f=u.value;s(f)}}catch(Rme){d.e(Rme)}finally{d.f()}for(;!Ey(a);){var h,p=Ut(l);try{for(p.s();!(h=p.n()).done;){var v=h.value,m=r[v.name];if(m.name in a){var g=a[m.name];delete a[m.name];var y,b=Ut(g);try{for(b.s();!(y=b.n()).done;){var x=y.value;o(m,x)}}catch(Rme){b.e(Rme)}finally{b.f()}}}}catch(Rme){p.e(Rme)}finally{p.f()}}var k,w=[],S=[],I=t.inputLayers,N=Ut(I);try{for(N.s();!(k=N.n()).done;){var T=k.value,C=T[0],E=T[1],_=T[2];my(C in r);var A=r[C],R=A.inboundNodes[E].outputTensors;w.push(R[_])}}catch(Rme){N.e(Rme)}finally{N.f()}var O,D=t.outputLayers,P=Ut(D);try{for(P.s();!(O=P.n()).done;){var F=O.value,M=F[0],L=F[1],$=F[2];my(M in r);var j=r[M],z=j.inboundNodes[L].outputTensors;S.push(z[$])}}catch(Rme){P.e(Rme)}finally{P.f()}return new e({inputs:w,outputs:S,name:c})}}]),n}(ox);function Sk(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"===typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," ")+"element(s), but the model has ".concat(r," outputs. ")+"Make sure a set of weights is provided for each model output.");return e}if("object"===typeof e&&Object.keys(e).length>0&&"object"===typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, ")+"so ".concat(n," must be either an array with ")+"".concat(r," elements or an object with ").concat(t," keys. ")+"Provided ".concat(n," not understood: ").concat(JSON.stringify(e)))}function Ik(e,t){return Sk(e,t,"classWeight")}function Nk(e,t,n,r){return Tk.apply(this,arguments)}function Tk(){return Tk=me(ye().mark((function e(t,n,r,a){var i,o,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return i=qu((function(){if(1===t.shape.length)return Wu(t);if(2===t.shape.length){if(t.shape[1]>1){return fl(t,1)}if(1===t.shape[1])return Ml(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") ")+"during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during ")+"handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,o=e.t0.from.call(e.t0,e.t1),Ku(i),s=[],o.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. "+"The class ".concat(e," exists in the data but not in ")+"classWeight");s.push(r[e])})),e.abrupt("return",jh(s,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)}))),Tk.apply(this,arguments)}function Ck(e,t){return tc(e,t)}function Ek(e,t){var n,r,a=t;n=a.xs,r=a.ys,tn(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+"".concat(t)}));var i=_k("input",e.inputNames,n),o=_k("output",e.outputNames,r),s=i[0].shape[0];tn(i.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset ")+"provides ".concat(i.length," inputs.  (Expected input keys: ")+"".concat(JSON.stringify(e.inputNames),")")})),tn(o.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset ")+"provides ".concat(o.length," outputs.  (Expected output keys: ")+"".concat(JSON.stringify(e.outputNames),")")}));for(var u=function(t){tn(i[t].shape[0]===s,(function(){return"Batch size mismatch: input "+"".concat(e.inputNames[t]," has ").concat(i[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},c=0;c<i.length;c++)u(c);for(var l=function(t){tn(o[t].shape[0]===s,(function(){return"Batch size mismatch: output "+"".concat(e.outputNames[t]," has ").concat(o[t].shape[0],"; ")+"expected  ".concat(s," based on input ").concat(e.inputNames[0],".")}))},d=0;d<o.length;d++)l(d);return{xs:i,ys:o}}function _k(e,t,n){if(n instanceof Xo)return[n];if(Array.isArray(n))return tn(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],i=Ut(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(null==n[o])throw new dy("The feature data generated by the dataset lacks the required "+"".concat(e," key '").concat(o,"'."));a.push(n[o])}}catch(Rme){i.e(Rme)}finally{i.f()}return a}function Ak(e){if(3===e.length)throw new fy("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function Rk(e,t,n){return Ok.apply(this,arguments)}function Ok(){return Ok=me(ye().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,x,k,w,S,I,N,T,C,E,_,A,R,O,D,P,F,M;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,tn(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),tn(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),tn(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive "+"integer, but got ".concat(r.epochs)})),tn(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a "+"positive integer if specified, but got ".concat(r.batchesPerEpoch)})),tn(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(i=null!=r.validationData)&&(Pk(r.validationData)?tn(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+"but got ".concat(r.validationBatches)})):(u=Ak(r.validationData),o=u.xs,s=u.ys)),c=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),d=i?l.slice().concat(l.map((function(e){return"val_"+e}))):l.slice(),f=Fx(r.callbacks,r.yieldEvery),h=null==r.verbose?1:r.verbose,p=Lx(f,h,r.epochs,null,null,Dk(n,r),null,i,d),v=p.callbackList,m=p.history,v.setModel(t),t.history=m,e.next=22,v.onTrainBegin();case 22:return t.stopTraining_=!1,g=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:y=e.sent;case 27:if(!(g<r.epochs)){e.next=98;break}return b={},e.next=31,v.onEpochBegin(g);case 31:if(x=0,k=0,a){e.next=37;break}return e.next=36,n.iterator();case 36:y=e.sent;case 37:if(a&&!(x<r.batchesPerEpoch)){e.next=91;break}return e.next=40,y.next();case 40:if(w=e.sent,!a||!w.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+"".concat(r.batchesPerEpoch,", ")+"but your dataset iterator ran out of data after "+"".concat(x," batches; ")+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+"".concat(r.batchesPerEpoch*r.epochs," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==w.value){e.next=73;break}return S=Ek(t,w.value),I=S.xs,N=S.ys,(T={}).batch=k,T.size=I[0].shape[0],e.next=51,v.onBatchBegin(k,T);case 51:if(C=[],null==r.classWeight){e.next=64;break}E=Ik(r.classWeight,t.outputNames),_=0;case 55:if(!(_<E.length)){e.next=64;break}return e.t0=C,e.next=59,Nk(N[_],null,E[_]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++_,e.next=55;break;case 64:for(A=I.concat(N).concat(C),R=c(A),Ku(A),O=0;O<l.length;++O)D=l[O],P=R[O],T[D]=P,Xu(P);return e.next=70,v.onBatchEnd(k,T);case 70:_x(T),k++,x++;case 73:if(!(a?x>=r.batchesPerEpoch:w.done)){e.next=87;break}if(!i){e.next=86;break}if(F=void 0,!Pk(r.validationData)){e.next=84;break}return e.t2=by,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,F=(0,e.t2)(e.t3),e.next=85;break;case 84:F=by(t.evaluate(o,s,{batchSize:null==r.validationBatchSize?32:r.validationBatchSize,verbose:0}));case 85:for(M=0;M<t.metricsNames.length;++M)b["val_".concat(t.metricsNames[M])]=F[M];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,v.onEpochEnd(g,b);case 93:if(g++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,v.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])}))),Ok.apply(this,arguments)}function Dk(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function Pk(e){return"function"===typeof e.iterator}function Fk(e){return"function"===typeof e.next}function Mk(e,t,n){return Lk.apply(this,arguments)}function Lk(){return Lk=me(ye().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,i=t.testFunction,o=[],!(r.verbose>0)){e.next=6;break}throw new fy("Verbose mode is not implemented yet.");case 6:if(tn(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but "+"received ".concat(JSON.stringify(r.batches))})),!Fk(n)){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:s=e.t0,u=0,c=0,l=ye().mark((function e(){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,o=qu((function(){return n.value&&function(){var e=Ek(t,n.value),r=e.xs,a=e.ys,s=r.concat(a),l=qu((function(){return i(s)}));if(Ku(s),0===c)for(var d=0;d<l.length;++d)o.push(oc(0));for(var f=s[0].shape[0],h=function(e){var t=l[e],n=o[e];o[e]=qu((function(){return Yu(o[e],tc(f,t))})),c>0&&Ku(n)},p=0;p<l.length;++p)h(p);Ku(l),u+=f,++c}(),o})),!n.done){e.next=7;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+"batches (in this case, ".concat(r.batches," batches). ")+"You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(a&&!(c<r.batches)){e.next=25;break}return e.delegateYield(l(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(d=0;d<o.length;++d)f=o[d],o[d]=ec(o[d],u),Ku(f);return e.abrupt("return",yy(o));case 27:case"end":return e.stop()}}),e)}))),Lk.apply(this,arguments)}function $k(e){tn(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function jk(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return cb(e,t,n-t)})):cb(e,t,n-t)}function zk(e,t){return qu((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return zk(e,t)})):gb(e,"int32"===t.dtype?t:Vu(t,"int32"))}))}function Bk(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function Uk(e){var t=[];e instanceof Xo&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(sb(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function Vk(e,t){if(null!=e){var n=[];if(t instanceof Xo)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var i=[];if(e instanceof Xo)-1===n.indexOf(e.id)&&i.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&i.push(e)}));else if(null!=e)for(var o in e){var s=e[o];-1===n.indexOf(s.id)&&i.push(s)}i.forEach((function(e){e.isDisposed||e.dispose()}))}}function Wk(e){return Array.isArray(e)}function Gk(e){return!function(e){return e instanceof Xo}(e)&&!Wk(e)}function Zk(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(Wk(e)&&e.length>0)o=!0;else if(Gk(e)){for(var s in e)if(e.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new dy("Error when checking model ".concat(i," expected no data, ")+"but got ".concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(Gk(e)){e=e,r=[];var u,c=Ut(t);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(null==e[l])throw new dy('No data provided for "'.concat(l,'". Need data for each key in: ')+"".concat(t));r.push(e[l])}}catch(Rme){c.e(Rme)}finally{c.f()}}else if(Wk(e)){if((e=e).length!==t.length)throw new dy("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"model expected. Expected to see ".concat(t.length," Tensor(s), but ")+"instead got the following list of Tensor(s): ".concat(e));r=e}else{if(e=e,t.length>1)throw new dy("The model ".concat(i," expects ").concat(t.length," Tensor(s), ")+"but only received one Tensor. Found: Tensor with shape ".concat(e.shape));r=[e]}if(r=Uk(r),null!=n)for(var d=0;d<t.length;++d)if(null!=n[d]){var f=r[d];if(f.shape.length!==n[d].length)throw new dy("Error when checking ".concat(i,": expected ").concat(t[d]," ")+"to have ".concat(n[d].length," dimension(s). but got array with ")+"shape ".concat(f.shape));for(var h=0;h<n[d].length;++h)if(0!==h||a){var p=f.shape[h],v=n[d][h];if(null!=v&&v>=0&&p!==v)throw new dy("".concat(i," expected a batch of elements where each ")+"example has shape [".concat(n[d].slice(1,n[d].length),"] ")+"(i.e.,tensor shape [*,".concat(n[d].slice(1,n[d].length),"])")+" but the ".concat(i," received an input with ").concat(f.shape[0])+" examples, each with shape [".concat(f.shape.slice(1,f.shape.length),"]")+" (tensor shape [".concat(f.shape,"])"))}}return r}function Hk(e,t,n){var r=Cy(e.map((function(e){return e.shape[0]})));r.sort();var a=Cy(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new dy("All input Tensors (x) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new dy("All target Tensors (y) should have the same number of samples. Got array shapes: "+"".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!on(r,a))throw new dy("Input Tensors should have the same number of samples as target "+"Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target ")+"sample(s).")}function qk(e,t,n){for(var r=[Ux,qx,Zx],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(null!=o){if(o===Zx&&1===i.shape[i.shape.length-1])throw new dy("You are passing a target array of shape ".concat(i.shape," while using ")+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var u=i.shape.slice(1),c=s.slice(1),l=0;l<u.length;++l){var d=u[l],f=c[l];if(null!=f&&d!==f)throw new dy("A target Tensor with shape ".concat(i.shape," was passed for an ")+"output of shape ".concat(s,", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}function Kk(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new dy("Error when checking model ".concat(i,": the Array of ")+"Tensors that you are passing to your model is not the size the "+"the model expected. Expected to see ".concat(t.length," Tensor(s),")+" but instead got ".concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new dy("The model expects ".concat(t.length," ").concat(i," Tensors, ")+"but only received one Tensor. Found: array with shape "+"".concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=r[o];if(s.shape.length!==n[o].length)throw new dy("Error when checking ".concat(i,": expected ").concat(t[o]," ")+"to have ".concat(n[o].length," dimension(s), but got array with ")+"shape ".concat(JSON.stringify(s.shape)));for(var u=0;u<n[o].length;++u)if(0!==u||a){var c=s.shape[u],l=n[o][u];if(null!=l&&l!==c)throw new dy("Error when checking ".concat(i,": expected ")+"".concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but ")+"got array with shape ".concat(JSON.stringify(s.shape),"."))}}}var Xk=function(t){Mo(r,t);var n=Bo(r);function r(e){var t;return Vt(this,r),(t=n.call(this,e)).isTraining=!1,t}return Zt(r,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new dy("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");fk(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"===typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return Bv.adagrad(.01)},Adadelta:function(){return Bv.adadelta(1,.95,ib())},Adam:function(){return Bv.adam(.001,.9,.999,ib())},Adamax:function(){return Bv.adamax(.002,.9,.999,ib(),0)},RMSProp:function(){return Bv.rmsprop(.001,.9,0,ib())},SGD:function(){return Bv.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new dy("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof lc))throw new dy("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"===typeof e.loss||"function"===typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new dy("When passing an Array as loss, it should have one entry per "+"model output. The model has ".concat(this.outputs.length," output(s), ")+"but you passed loss=".concat(e.loss,"."));var r=e.loss;n=r.map((function(e){return Yx(e)}))}else{var a=Yx(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var i in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(i))throw new dy('Unknown entry in loss dictionary: "'.concat(i,'". ')+"Only expected the following keys: ".concat(this.outputNames));var o,s=Ut(this.outputNames);try{for(s.s();!(o=s.n()).done;){var u=o.value;null==e.loss[u]&&console.warn('Output "'.concat(u,'" is missing from loss dictionary. We assume ')+"this was done on purpose, and we will not be expecting data "+"to be passed to ".concat(u," during training")),n.push(Yx(e.loss[u]))}}catch(Rme){s.e(Rme)}finally{s.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var c=0;c<this.outputs.length;++c){var l=this.internalOutputShapes[c],d=this.outputNames[c];this.feedOutputNames.push(d),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[c])}var f=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],qy("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===f.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var h=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"===typeof e||"function"===typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!==typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,"+"function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=Ut(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(Rme){i.e(Rme)}finally{i.f()}return a}(e.metrics,this.outputNames),p=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};qy("metric",(function(){for(var e=function(e){if(-1!==f.indexOf(e))return"continue";!function(n){var r,a,i,o,s=Ut(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;if("string"===typeof u&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(u)){var c=t.internalOutputShapes[e];1===c[c.length-1]||t.lossFunctions[e]===qx?-1!==["accuracy","acc"].indexOf(u)?a=Qx:-1!==["crossentropy","ce"].indexOf(u)&&(a=nk):t.lossFunctions[e]===Hx?-1!==["accuracy","acc"].indexOf(u)?a=rk:-1!==["crossentropy","ce"].indexOf(u)&&(a=ik):-1!==["accuracy","acc"].indexOf(u)?a=ek:-1!==["crossentropy","ce"].indexOf(u)&&(a=ak);var l=void 0;-1!==["accuracy","acc"].indexOf(u)?l="acc":-1!==["crossentropy","ce"].indexOf(u)&&(l="ce"),i=a,r=""+l}else{var d=sk(u);i=d,r=""+uk(u)}var f=void 0;qy(r,(function(){f=i})),p(e,r,f)}}catch(Rme){s.e(Rme)}finally{s.f()}}(h[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;$k(r);var a=!0,i=this.standardizeUserDataXY(e,t,a,r);try{var o=i[0].concat(i[1]);this.makeTestFunction();var s=this.testFunction,u=this.testLoop(s,o,r,n.verbose,n.steps);return yy(u)}finally{Vk(i[0],e),Vk(i[1],t)}}},{key:"evaluateDataset",value:function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",Mk(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new dy("If ".concat(a," is set, batchSize must be null or undefined.")+"Got batchSize = ".concat(t))}else{if(null==e)throw new dy("Either the input data should have a defined shape, or "+"".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new dy("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new cx;if(e instanceof Xo&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new dy("The number of inputs provided (".concat(e.length,") ")+"does not match the number of inputs of this model "+"(".concat(this.inputs.length,")."));for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else{var s,u=Ut(this.inputs);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=e[c.name];if(null==l)throw new dy("No value is provided for the model's input ".concat(c.name));i.add(c,l)}}catch(Rme){u.e(Rme)}finally{u.f()}}var d=fx(a,i);return n?d:d[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=vy(null,e.length),r=e.length,a=Ut(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),u=0;u<e.length;++u){var c=s.indexOf(e[u]);if(-1!==c&&(n[u]=o[c],r--),0===r)break}if(0===r)break}}catch(Rme){a.e(Rme)}finally{a.f()}if(r>0){var l=[];throw n.forEach((function(t,n){null==t&&l.push(e[n])})),new dy("Cannot find SymbolicTensors for output name(s): "+"".concat(JSON.stringify(l)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return qu((function(){var a=t.checkNumSamples(e);if(r)throw new fy("Verbose predictLoop() is not implemented yet.");for(var i=Bk(a,n),o=t.outputs.map((function(e){return[]})),s=function(n){qu((function(){var r=i[n][0],a=i[n][1],o=jk(e,r,a),s=[];if(Array.isArray(o))for(var u=0;u<o.length;++u)s.push({key:t.inputs[u],value:o[u]});else s.push({key:t.inputs[0],value:o});var c=new cx(s);return fx(t.outputs,c)})).forEach((function(e,t){return o[t].push(e)}))},u=0;u<i.length;++u)s(u);return yy(o.map((function(e){return jl(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Uk(e);Kk(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return $k(r),this.predictLoop(n,r)}finally{Vk(n,e)}}},{key:"predictOnBatch",value:function(e){Kk(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new ly("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var i=this.feedOutputShapes[a],o=this.feedLossFns[a];o===Hx?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(Hk(e=Zk(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=Zk(t,this.feedOutputNames,r,!1,"target")),qk(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new dy("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+"".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=me(ye().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,h,p=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(p.length>4&&void 0!==p[4])||p[4],o=p.length>5?p[5]:void 0,s=this.standardizeUserDataXY(t,n,i,o),u=(0,C.Z)(s,2),c=u[0],l=u[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(d=null,null==a){e.next=19;break}f=Ik(a,this.outputNames),d=[],h=0;case 10:if(!(h<f.length)){e.next=19;break}return e.t0=d,e.next=14,Nk(l[h],null,f[h]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++h,e.next=10;break;case 19:return e.abrupt("return",[c,l,d]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return qu((function(){var o=r.checkNumSamples(t,n,i,"steps"),s=[];if(a>0)throw new fy("Verbose mode is not implemented yet.");if(null!=i)throw new fy("steps mode in testLoop() is not implemented yet");for(var u=Bk(o,n),c=jh(ab(0,o)),l=0;l<u.length;++l){var d=u[l][0],f=u[l][1],h=cb(c,d,f-d),p=zk(t,h),v=e(p);if(0===l)for(var m=0;m<v.length;++m)s.push(oc(0));for(var g=0;g<v.length;++g){var y=v[g];s[g]=Yu(s[g],tc(f-d,y))}}for(var b=0;b<s.length;++b)s[b]=ec(s[b],o);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(gy(e,r)>1){var i=gy(e.slice(0,n),r);a+="_".concat(i)}t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var u,c=new cx(t),l=fx(e.outputs,c,{training:!0}),d=0;d<e.lossFunctions.length;++d){var f=(0,e.lossFunctions[d])(a[d],l[d]);null!=i[d]&&(f=Ck(f,i[d]));var h=Sf(f);n.push(h),u=0===d?f:Yu(u,f)}for(var p=0;p<e.metricsTensors.length;++p){var v=void 0;if(e.outputs.length>1&&p<e.outputs.length)v=n[p];else{var m=e.metricsTensors[p][0],g=e.metricsTensors[p][1];v=Sf(m(a[g],l[g]))}Xu(v),o.push(v)}return u=Sf(u),e.calculateLosses().forEach((function(e){u=Yu(u,e)})),u}),!0,s)].concat(o)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return qu((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:a[s]});for(var u=new cx(o),c=fx(e.outputs,u),l=0;l<e.lossFunctions.length;++l){var d=e.lossFunctions[l],f=Sf(d(i[l],c[l]));n=0===l?f:Yu(n,f),r.push(n)}for(var h=0;h<e.metricsTensors.length;++h){var p=e.metricsTensors[h][0],v=e.metricsTensors[h][1],m=Sf(p(i[v],c[v]));r.push(m)}return r}))}}},{key:"fit",value:function(){var e=me(ye().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,x,k,w,S,I,N,T,C,E,_=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_.length>2&&void 0!==_[2]?_[2]:{},!this.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return this.isTraining=!0,e.prev=4,$k(h=null==r.batchSize?32:r.batchSize),p=!1,e.next=10,this.standardizeUserData(t,n,r.sampleWeight,r.classWeight,p,h);case 10:if(v=e.sent,a=v[0],i=v[1],f=v[2],m=!1,!(null!=r.validationData&&r.validationData.length>0)){e.next=36;break}if(m=!0,2!==r.validationData.length){e.next=22;break}u=r.validationData[0],c=r.validationData[1],e.next=27;break;case 22:if(3!==r.validationData.length){e.next=26;break}throw new fy("validationData including sample weights is not supported yet.");case 26:throw new dy("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+"".concat(r.validationData," is invalid."));case 27:return y=!0,e.next=30,this.standardizeUserData(u,c,null,null,y,h);case 30:b=e.sent,l=b[0],d=b[1],g=l.concat(d),e.next=37;break;case 36:null!=r.validationSplit&&r.validationSplit>0&&r.validationSplit<1?(m=!0,x=Math.floor(a[0].shape[0]*(1-r.validationSplit)),k=a[0].shape[0],l=jk(a,x,k),o=a,a=jk(a,0,x),d=jk(i,x,k),s=i,i=jk(i,0,x),g=l.concat(d)):null!=r.validationSteps&&(m=!0);case 37:return w=a.concat(i).concat(f),this.checkTrainableWeightsConsistency(),S=this.makeTrainFunction(),I=this.getDedupedMetricsNames(),m?(this.makeTestFunction(),N=this.testFunction,T=I.slice().concat(I.map((function(e){return"val_"+e})))):(N=null,g=[],T=I.slice()),C=Fx(r.callbacks,r.yieldEvery),e.next=45,this.fitLoop(S,w,I,h,r.epochs,r.verbose,C,N,g,r.shuffle,T,r.initialEpoch,null,null);case 45:return E=e.sent,e.abrupt("return",E);case 47:return e.prev=47,this.isTraining=!1,Vk(a,t),Vk(i,n),Vk(o,t),Vk(s,n),Vk(l,u),Vk(d,c),null!=f&&Ku(f),e.finish(47);case 57:case"end":return e.stop()}}),e,this,[[4,,47,57]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitLoop",value:function(){var e=me(ye().mark((function e(t,n,r,a,i,o,s,u,c,l,d,f,h,p){var v,m,g,y,b,x,k,w,S=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==a&&(a=32),null==i&&(i=1),null==l&&(l=!0),null==f&&(f=0),v=!1,null!=u&&null!=c&&(v=!0),null==p){e.next=10;break}if(v=!0,null!=h){e.next=10;break}throw new dy("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(m=this.checkNumSamples(n,a,h,"steps_per_epoch"))&&(g=ab(0,m)),null==o&&(o=1),y=Lx(s,o,i,f,m,h,a,v,d),b=y.callbackList,x=y.history,b.setModel(this),this.history=x,e.next=18,b.onTrainBegin();case 18:this.stopTraining_=!1,k=ye().mark((function e(i){var o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.onEpochBegin(i);case 2:if(o={},null==h){e.next=7;break}throw new fy("stepsPerEpoch mode is not implemented yet.");case 7:return e.delegateYield(ye().mark((function e(){var i,s,d,f;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==l){e.next=4;break}throw new fy("batch shuffling is not implemneted yet");case 4:l&&Xt(g);case 5:i=jh(g),s=Bk(m,a),d=ye().mark((function e(l){var d;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d={},e.next=3,b.onBatchBegin(l,d);case 3:return qu((function(){var e=s[l][0],f=s[l][1],h=cb(i,e,f-e);d.batch=l,d.size=f-e;for(var p=zk(n,h),m=t(p),g=0;g<r.length;++g){var y=r[g],b=m[g];d[y]=b,Xu(b)}if(l===s.length-1&&v)for(var x=S.testLoop(u,c,a),k=0;k<r.length;++k){var w=r[k],I=x[k];Xu(I),o["val_"+w]=I}})),e.next=6,b.onBatchEnd(l,d);case 6:if(_x(d),!S.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),f=0;case 9:if(!(f<s.length)){e.next=17;break}return e.delegateYield(d(f),"t0",11);case 11:if("break"!==e.t0){e.next=14;break}return e.abrupt("break",17);case 14:++f,e.next=9;break;case 17:i.dispose();case 18:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:return e.next=10,b.onEpochEnd(i,o);case 10:if(!S.stopTraining_){e.next=12;break}return e.abrupt("return","break");case 12:case"end":return e.stop()}}),e)})),w=f;case 21:if(!(w<i)){e.next=29;break}return e.delegateYield(k(w),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++w,e.next=21;break;case 29:return e.next=31,b.onTrainEnd();case 31:return e.next=33,this.history.syncData();case 33:return e.abrupt("return",this.history);case 34:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i,o,s,u,c,l,d,f,h,p){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rk(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=me(ye().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],i=r[1],o=this.makeTrainFunction(),s=o(a.concat(i)),u=[],c=Ut(s),e.prev=9,c.s();case 11:if((l=c.n()).done){e.next=19;break}return d=l.value,e.next=15,d.data();case 15:f=e.sent,u.push(f[0]);case 17:e.next=11;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:return Ku(s),Vk(r[0],t),Vk(r[1],n),e.abrupt("return",yy(u));case 31:case"end":return e.stop()}}),e,this,[[9,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=jx(Lo(r.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=Hu().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-Hu().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"===typeof this.loss)e=xy(this.loss);else if(Array.isArray(this.loss)){var t,n=Ut(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!==typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(Rme){n.e(Rme)}finally{n.f()}e=this.loss.map((function(e){return xy(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var s=o[i];if("string"!==typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=xy(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"===typeof this.metrics||"function"===typeof this.metrics)return[xy(uk(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return xy(uk(e))}));var e={};for(var t in this.metrics)e[t]=xy(uk(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=zx(bk(e.optimizer_config));if("string"===typeof e.loss)t=ky(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return ky(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=ky(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return ky(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=ky(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var t=me(ye().mark((function t(n,r){var a,i,o,s,u,c,l,d,f;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof n){t.next=9;break}if(0!==(a=nu(n)).length){t.next=6;break}throw new dy("Cannot find any save handlers for URL '".concat(n,"'"));case 6:if(!(a.length>1)){t.next=8;break}throw new dy("Found more than one (".concat(a.length,") save handlers for ")+"URL '".concat(n,"'"));case 8:n=a[0];case 9:if(null!=n.save){t.next=11;break}throw new dy("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return t.next=13,Ms(this.getNamedWeights(r));case 13:if(i=t.sent,!1,null,o=this.toJSON(null,false),s={modelTopology:o,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(kk),convertedBy:null},!(null!=r&&r.includeOptimizer)||null==this.optimizer){t.next=34;break}return s.trainingConfig=this.getTrainingConfig(),c="optimizer",t.t0=e,t.next=25,this.optimizer.getWeights();case 25:return t.t1=t.sent,t.t2=c,t.next=29,t.t0.encodeWeights.call(t.t0,t.t1,t.t2);case 29:l=t.sent,d=l.data,f=l.specs,(u=i.specs).push.apply(u,(0,Le.Z)(f)),i.data=Ws([i.data,d]);case 34:return null!=this.userDefinedMetadata&&(!0,lk(this.userDefinedMetadata,this.name,true),s.userDefinedMetadata=this.userDefinedMetadata),s.weightData=i.data,s.weightSpecs=i.specs,t.abrupt("return",n.save(s));case 38:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){lk(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),r}(wk);Xk.className="Model",cc(Xk);var Jk=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n)}(Xk);Jk.className="Functional",cc(Jk);var Yk=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:Ly("sequential_"),null!=e.layers){var a,i=Ut(e.layers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.add(o)}}catch(Rme){i.e(Rme)}finally{i.f()}}return r}return Zt(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new dy("Negative dimension size caused by adding layer "+"".concat(e.name," with input shape [")+"".concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof Xk;if(r){if(1!==(t=e).outputs.length)throw new dy("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new dy("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new dy("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new dy("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new ux({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new dy("A layer added to a Sequential model must not already be "+"connected somewhere else. LayersModel received layer ".concat(e.name," ")+"which has ".concat(e.inboundNodes.length," pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new dy("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=sx(this.outputs[0])}this.inboundNodes=[],new ax({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:vy(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(Kb(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Xk({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),jx(Lo(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),jx(Lo(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new ly("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new ly("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=me(ye().mark((function e(t,n){var r,a=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new ly("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new ly("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new dy("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new dy("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=Ut(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(Rme){n.e(Rme)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new dy("Legacy serialization format not supported yet.");r=t}else tn(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,i=t;var o=new e(i);if(!(o instanceof n))throw new fy("Sequential.fromConfig called on non-Sequential input: ".concat(o));var s,u=Ut(r);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=void 0,d=zx(c,l,a);a&&d.setFastWeightInitDuringBuild(!0),o.add(d)}}catch(Rme){u.e(Rme)}finally{u.f()}return o}}]),n}(Xk);Yk.className="Sequential",cc(Yk);var Qk=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"getConfig",value:function(){return{}}}]),n}(sc),ew=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return kb(e,t)}}]),n}(Qk);ew.className="elu",cc(ew);var tw=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e){return mh(e)}}]),n}(Qk);tw.className="selu",cc(tw);var nw=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e){return sh(e)}}]),n}(Qk);nw.className="relu",cc(nw);var rw=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e){return qu((function(){return Cf(6,sh(e))}))}}]),n}(Qk);rw.className="relu6",cc(rw);var aw=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e){return e}}]),n}(Qk);aw.className="linear",cc(aw);var iw=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e){return Bl(e)}}]),n}(Qk);iw.className="sigmoid",cc(iw);var ow=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e){return function(e){return qu((function(){var t=Yu(.5,tc(.2,e));return ed(t,0,1)}))}(e)}}]),n}(Qk);ow.className="hardSigmoid",cc(ow);var sw=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e){return cf(e)}}]),n}(Qk);sw.className="softplus",cc(sw);var uw=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e){return function(e){return qu((function(){return ec(e,Yu(gc(e),1))}))}(e)}}]),n}(Qk);uw.className="softsign",cc(uw);var cw=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e){return Vl(e)}}]),n}(Qk);cw.className="tanh",cc(cw);var lw=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return Ch(e,t)}}]),n}(Qk);lw.className="softmax",cc(lw);var dw=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return df(e,t)}}]),n}(Qk);dw.className="logSoftmax",cc(dw);var fw=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return qu((function(){return tc(Bl(tc(e,t)),e)}))}}]),n}(Qk);fw.className="swish",cc(fw);var hw=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e){return qu((function(){return tc(e,Vl(cf(e)))}))}}]),n}(Qk);function pw(e){return e.getClassName()}function vw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ny(e,uc.getMap().classNameMap,t,"activation")}function mw(e){if(null==e){var t={className:"linear",config:{}};return vw(t)}if("string"===typeof e){var n={};return n.className=e,n.config={},vw(n)}return e instanceof Qk?e:vw(e)}function gw(e){if(null!=e&&"object"!==typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+"object, but received: ".concat(e))}hw.className="mish",cc(hw);var yw=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n)}(sc),bw=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),r=t.call(this),gw(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return Zt(n,[{key:"apply",value:function(e){var t=this;return qu((function(){var n=If([1]);return t.hasL1&&(n=Yu(n,Ld(tc(t.l1,gc(e))))),t.hasL2&&(n=Yu(n,Ld(tc(t.l2,yb(e))))),Ml(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(yw);bw.className="L1L2",cc(bw);var xw={l1l2:"L1L2"};function kw(e){return Sy(e)}function ww(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ny(e,uc.getMap().classNameMap,t,"regularizer")}function Sw(e){return null==e?null:"string"===typeof e?ww({className:e in xw?xw[e]:e,config:{}}):e instanceof yw?e:ww(e)}var Iw=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return Zt(n,[{key:"call",value:function(e,t){e=qb(e);var n=sh(e);return null!=this.maxValue&&(n=ed(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);Iw.className="ReLU",cc(Iw);var Nw=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return Zt(n,[{key:"call",value:function(e,t){var n=qb(e);return ef(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);Nw.className="LeakyReLU",cc(Nw);var Tw=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=Gb(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=Sw(e.alphaRegularizer),r.alphaConstraint=Tx(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!==typeof e.sharedAxes)throw new dy("Expected sharedAxes to be a number or an array of numbers, "+"but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return r}return Zt(n,[{key:"build",value:function(e){var t=(e=Kb(e)).slice(1);if(null!=this.sharedAxes){var n,r=Ut(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(Rme){r.e(Rme)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new tx({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=qb(e),Wf(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:Wb(this.alphaInitializer),alphaRegularizer:kw(this.alphaRegularizer),alphaConstraint:Ix(this.alphaConstraint),sharedAxes:this.sharedAxes},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);Tw.className="PReLU",cc(Tw);var Cw=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new fy("Non-default alpha value (".concat(e.alpha,") is not supported by the ")+"ELU layer yet.");return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return Zt(n,[{key:"call",value:function(e,t){var n=qb(e);return Td(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);Cw.className="ELU",cc(Cw);var Ew=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return Zt(n,[{key:"call",value:function(e,t){var n=qb(e);return tc(n,Vu(qd(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);Ew.className="ThresholdedReLU",cc(Ew);var _w=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new lw).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return Zt(n,[{key:"call",value:function(e,t){var n=qb(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);function Aw(e,t,n){if("number"===typeof e)return vy(e,t);if(e.length!==t)throw new dy("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers.")+" Received: ".concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if(!eb(a))throw new dy("The ".concat(n," argument must be an integer or tuple of ").concat(t)+" integers. Received: ".concat(JSON.stringify(e)," including a")+" non-integer number ".concat(a))}return e}function Rw(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null==e)return e;var i,o=t+(t-1)*(a-1);return i="same"===n?e:e-o+1,Math.floor((i+r-1)/r)}function Ow(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+rb([n-t,0]);else{if("same"!==r)throw new dy("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function Dw(e,t){return qu((function(){return Wy(t),"channelsFirst"===t?ip(e,[0,2,3,1]):e}))}function Pw(e,t){return qu((function(){return Wy(t),"channelsFirst"===t?ip(e,[0,2,3,4,1]):e}))}function Fw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return qu((function(){if(null==i&&(i="channelsLast"),Wy(i),3!==e.shape.length)throw new dy("The input of a conv1dWithBias operation should be 3, but is "+"".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new dy("The kernel for a conv1dWithBias operation should be 3, but is "+"".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new dy("The bias for a conv1dWithBias operation should be 1, but is "+"".concat(t.shape.length," instead"));if("channelsFirst"===i&&(e=ip(e,[0,2,1])),"causal"===a)throw new fy("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=od(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=xb(s,n)),s}))}function Mw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return qu((function(){if(null==i&&(i="channelsLast"),Wy(i),3!==e.rank&&4!==e.rank)throw new dy("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new dy("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+"but received ".concat(e.rank,"."));var u=Dw(e,i);if("causal"===a)throw new fy("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=kp({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(u=ip(u,[0,3,1,2])),u}))}function Lw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return qu((function(){if(null==i&&(i="channelsLast"),Wy(i),4!==e.rank&&5!==e.rank)throw new dy("conv3dWithBias expects input to be of rank 4 or 5, but received "+"".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new dy("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+"".concat(e.rank,"."));var s=Pw(e,i);if("causal"===a)throw new fy("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=cd(s,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=xb(s,n)),"channelsFirst"===i&&(s=ip(s,[0,4,1,2,3])),s}))}_w.className="Softmax",cc(_w);var $w=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;if(Vt(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,Ry(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new fy("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is ")+"not implemented yet.");if(a.kernelSize=Aw(r.kernelSize,e,"kernelSize"),a.strides=Aw(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,Gy(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,Wy(a.dataFormat),a.activation=mw(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=Gb(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=Tx(r.biasConstraint),a.biasRegularizer=Sw(r.biasRegularizer),a.activityRegularizer=Sw(r.activityRegularizer),a.dilationRate=Aw(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new dy("dilationRate must be a number or an array of a single number for 1D convolution, but received "+"".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new dy("dilationRate must be a number or array of two numbers for 2D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"===typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new dy("dilationRate must be a number or array of three numbers for 3D "+"convolution, but received ".concat(JSON.stringify(a.dilationRate)));return a}return Zt(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:pw(this.activation),useBias:this.useBias,biasInitializer:Wb(this.biasInitializer),biasRegularizer:kw(this.biasRegularizer),activityRegularizer:kw(this.activityRegularizer),biasConstraint:Ix(this.biasConstraint)},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(my("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!==typeof e.kernelSize&&!Ay(e.kernelSize,"number",1,3))throw new dy("BaseConv expects config.kernelSize to be number or number[] with "+"length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(ox),jw=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,Ry(a.filters,"filters"),a.kernelInitializer=Gb(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=Tx(r.kernelConstraint),a.kernelRegularizer=Sw(r.kernelRegularizer),a}return Zt(n,[{key:"build",value:function(e){e=Kb(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new dy("The channel dimension of the input should be defined. "+"Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(0,De.Z)({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return qu((function(){var t;e=qb(e);var r=null==n.bias?null:n.bias.read(),a=Dy(n.activation.getClassName());if(null!=a&&2===n.rank)t=Mw(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=Fw(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=Mw(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new fy("convolutions greater than 3D are not implemented yet.");t=Lw(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=Kb(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=Rw(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"===typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:Wb(this.kernelInitializer),kernelRegularizer:kw(this.kernelRegularizer),kernelConstraint:Ix(this.kernelConstraint)},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!==typeof e.filters||e.filters<1)throw new dy("Convolution layer expected config.filters to be a 'number' > 0 "+"but got ".concat(JSON.stringify(e.filters)))}}]),n}($w),zw=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return Zt(n,[{key:"getConfig",value:function(){var e=jx(Lo(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!Ay(e.kernelSize,"number",1,2))throw new dy("Conv2D expects config.kernelSize to be number or number[] with "+"length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(jw);zw.className="Conv2D",cc(zw);var Bw=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return Zt(n,[{key:"getConfig",value:function(){var e=jx(Lo(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new dy("Conv3D expects config.kernelSize to be number or"+" [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(jw);Bw.className="Conv3D",cc(Bw);var Uw=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),(r=t.call(this,e)).inputSpec=[new tx({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new dy("Conv2DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return Zt(n,[{key:"build",value:function(e){if(4!==(e=Kb(e)).length)throw new dy("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new dy("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new tx({ndim:4,axes:(0,De.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return qu((function(){var t=qb(e);if(4!==t.shape.length)throw new dy("Conv2DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i=t.shape,o=i[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=i[r],u=i[a],c=n.kernelSize[0],l=n.kernelSize[1],d=n.strides[0],f=n.strides[1],h=[o,Ow(s,d,c,n.padding),Ow(u,f,l,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=ip(t,[0,2,3,1]));var p=ud(t,n.kernel.read(),h,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(p=ip(p,[0,3,1,2])),null!=n.bias&&(p=xb(p,n.bias.read(),n.dataFormat)),null!=n.activation&&(p=n.activation.apply(p)),p}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=Kb(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=Ow(a[n],s,i,this.padding),a[r]=Ow(a[r],u,o,this.padding),a}},{key:"getConfig",value:function(){var e=jx(Lo(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(zw);Uw.className="Conv2DTranspose",cc(Uw);var Vw=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),(r=t.call(this,e)).inputSpec=[new tx({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new dy("Conv3DTranspose currently supports only padding modes 'same' "+"and 'valid', but received padding mode ".concat(r.padding));return r}return Zt(n,[{key:"build",value:function(e){if(5!==(e=Kb(e)).length)throw new dy("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new dy("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new tx({ndim:5,axes:(0,De.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return qu((function(){var t=qb(e);if(5!==t.shape.length)throw new dy("Conv3DTranspose.call() expects input tensor to be rank-4, but "+"received a tensor of rank-".concat(t.shape.length));var r,a,i,o=t.shape,s=o[0];"channelsFirst"===n.dataFormat?(i=2,r=3,a=4):(i=1,r=2,a=3);var u=o[i],c=o[r],l=o[a],d=n.kernelSize[0],f=n.kernelSize[1],h=n.kernelSize[2],p=n.strides[0],v=n.strides[1],m=n.strides[2],g=[s,Ow(u,p,d,n.padding),Ow(c,v,f,n.padding),Ow(l,m,h,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=ip(t,[0,2,3,4,1]));var y=dd(t,n.kernel.read(),g,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(y=ip(y,[0,4,1,2,3])),null!==n.bias&&(y=xb(y,n.bias.read(),n.dataFormat)),null!==n.activation&&(y=n.activation.apply(y)),y}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,i=(e=Kb(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var o=this.kernelSize[0],s=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],l=this.strides[1],d=this.strides[2];return i[t]=this.filters,i[n]=Ow(i[n],c,o,this.padding),i[r]=Ow(i[r],l,s,this.padding),i[a]=Ow(i[a],d,u,this.padding),i}},{key:"getConfig",value:function(){var e=jx(Lo(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(Bw);Vw.className="Conv3DTranspose",cc(Vw);var Ww=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;if(Vt(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new dy("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new dy("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new dy("SeparableConv".concat(a.rank,"D supports only padding modes: ")+"'same' and 'valid', but received ".concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=Gb(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=Sw(r.depthwiseRegularizer),a.depthwiseConstraint=Tx(r.depthwiseConstraint),a.pointwiseInitializer=Gb(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=Sw(r.pointwiseRegularizer),a.pointwiseConstraint=Tx(r.pointwiseConstraint),a}return Zt(n,[{key:"build",value:function(e){if((e=Kb(e)).length<this.rank+2)throw new dy("Inputs to SeparableConv".concat(this.rank,"D should have rank ")+"".concat(this.rank+2,", but received input shape: ")+"".concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new dy("The channel dimension of the inputs should be defined, "+"but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);var o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new tx({ndim:this.rank+2,axes:(0,De.Z)({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return qu((function(){var t;if(e=qb(e),1===n.rank)throw new fy("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=ip(e,[0,2,3,1])),t=gh(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=xb(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=ip(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=jx(Lo(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Wb(this.depthwiseInitializer),e.pointwiseInitializer=Wb(this.pointwiseInitializer),e.depthwiseRegularizer=kw(this.depthwiseRegularizer),e.pointwiseRegularizer=kw(this.pointwiseRegularizer),e.depthwiseConstraint=Ix(this.depthwiseConstraint),e.pointwiseConstraint=Ix(this.pointwiseConstraint),e}}]),n}(jw);Ww.className="SeparableConv";var Gw=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,2,e)}return Zt(n)}(Ww);Gw.className="SeparableConv2D",cc(Gw);var Zw=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return Zt(n,[{key:"getConfig",value:function(){var e=jx(Lo(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!==typeof e.kernelSize&&!Ay(e.kernelSize,"number",1,1))throw new dy("Conv1D expects config.kernelSize to be number or number[] with "+"length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(jw);Zw.className="Conv1D",cc(Zw);var Hw=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),r=t.call(this,e),"number"===typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"===typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return Zt(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return qu((function(){if(e=qb(e),"channelsLast"===n.dataFormat){var t=db(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return db(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=db(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return db(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);Hw.className="Cropping2D",cc(Hw);var qw=function(e){Mo(n,e);var t=Bo(n);function n(e){var r,a;return Vt(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Wy(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,a=r.interpolation,_y(jy,"InterpolationFormat",a),r}return Zt(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return qu((function(){var t=qb(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=ip(t,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o="nearest"===n.interpolation?Fv.resizeNearestNeighbor(t,[a,i]):Fv.resizeBilinear(t,[a,i]);return ip(o,[0,3,1,2])}var s=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?Fv.resizeNearestNeighbor(t,[s,u]):Fv.resizeBilinear(t,[s,u])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);qw.className="UpSampling2D",cc(qw);var Kw=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=Gb(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=Tx(e.depthwiseConstraint),r.depthwiseRegularizer=Sw(e.depthwiseRegularizer),r}return Zt(n,[{key:"build",value:function(e){if((e=Kb(e)).length<4)throw new dy("Inputs to DepthwiseConv2D should have rank 4. "+"Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new dy("The channel dimension of the inputs to DepthwiseConv2D should "+"be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return qu((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return qu((function(){null==a&&(a="channelsLast"),Wy(a);var o=Dw(e,a);if(4!==e.rank)throw new dy("Input for depthwiseConv2d is required to be 4-D, but is instead "+"".concat(e.rank,"-D"));if(4!==t.rank)throw new dy("depthwiseKernel is required to be 4-D, but is instead "+"".concat(t.rank,"-D"));return o=yd(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=ip(o,[0,3,1,2])),o}))}(e=qb(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=xb(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=Kb(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=Rw(t,this.kernelSize[0],this.padding,this.strides[0]),i=Rw(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}},{key:"getConfig",value:function(){var e=jx(Lo(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Wb(this.depthwiseInitializer),e.depthwiseRegularizer=kw(this.depthwiseRegularizer),e.depthwiseConstraint=Ix(this.depthwiseRegularizer),e}}]),n}($w);function Xw(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new dy("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function Jw(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return qu((function(){var u=t.shape.length;if(u<3)throw new dy("Input should be at least 3D, but is ".concat(u,"D."));var c=[1,0].concat(ab(2,u));if(t=ip(t,c),null!=i)throw new fy("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=Vu(Vu(a,"bool"),"float32")).rank===u-1&&(a=Ud(a,-1)),a=ip(a,c)),r&&(t=ch(t,0),null!=a&&(a=ch(a,0)));var l,d,f=[],h=n,p=t.shape[0],v=Jh(t);null!=a&&(d=Jh(a));for(var m,g=function(t){var n=v[t],r=qu((function(){return e(n,h)}));if(null==a)l=r[0],h=r[1];else{var i=qu((function(){var e=d[t],n=vc(Ff(e),e);return{output:Yu(tc(r[0],e),tc(h[0],n)),newStates:h.map((function(t,a){return Yu(tc(r[1][a],e),tc(t,n))}))}}));l=i.output,h=i.newStates}s&&f.push(l)},y=0;y<p;++y)g(y);if(s){m=Fh(f,1)}return[l,m,h]}))}Kw.className="DepthwiseConv2D",cc(Kw);var Yw=function(e){Mo(n,e);var t=Bo(n);function n(e){var r,a;if(Vt(this,n),r=t.call(this,e),null==e.cell)throw new dy("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new oS({cells:e.cell}):e.cell).stateSize)throw new dy("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new tx({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return Zt(n,[{key:"getStates",value:function(){return null==this.states_?ab(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){Zb(e)&&(e=e[0]),e=e;var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=Ut(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push([e[0],s])}}catch(Rme){o.e(Rme)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return qu((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new fy("Constants support is not implemented in RNN yet.");Zb(e)&&(e=e[0]),e=e;var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new tx({shape:[t,null].concat((0,Le.Z)(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!on(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new dy("An initialState was passed that is not compatible with "+"cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; ")+"However cell.stateSize is ".concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new tx({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];qu((function(){if(!t.stateful)throw new cy("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new dy("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return If([r,e])})):t.states_=[If([r,t.cell.stateSize])];else if(null==e)Ku(t.states_),null!=t.keptStates&&(Ku(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return If([r,e])})):t.states_[0]=If([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new dy("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));!0===n?t.keptStates.push(t.states_.slice()):Ku(t.states_);for(var a=0;a<t.states_.length;++a){var i=e[a],o=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,s=[r,o];if(!on(i.shape,s))throw new dy("State ".concat(a," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(s,", received shape=").concat(i.shape));t.states_[a]=i}}t.states_=t.states_.map((function(e){return Xu(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=Xw(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],s=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var u,c=Ut(r);try{for(c.s();!(u=c.n()).done;){var l=u.value;this.stateSpec.push(new tx({shape:l.shape}))}}catch(Rme){c.e(Rme)}finally{c.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof nx){var d=[e].concat(o),f=this.inputSpec.concat(s),h=this.inputSpec;this.inputSpec=f;var p=jx(Lo(n.prototype),"apply",this).call(this,d,t);return this.inputSpec=h,p}return jx(Lo(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return qu((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=qb(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new dy("RNN Layer has ".concat(o," state(s) but was passed ")+"".concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=Jw((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),c=u[0],l=u[1],d=u[2];n.stateful&&n.resetStates(d,a);var f=n.returnSequences?l:c;return n.returnState?[f].concat(d):f}))}},{key:"getInitialState",value:function(e){var t=this;return qu((function(){var n=If(e.shape);return n=sb(n=Ld(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?pb(n,[1,e]):n})):t.cell.stateSize>1?[pb(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){jx(Lo(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=jx(Lo(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.cell,a=zx(r,n);return new e(Object.assign(t,{cell:a}))}}]),n}(ox);Yw.className="RNN",cc(Yw);var Qw=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n)}(ox),eS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,Ry(r.units,"units"),r.activation=mw(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=Gb(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Gb(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Gb(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Sw(e.kernelRegularizer),r.recurrentRegularizer=Sw(e.recurrentRegularizer),r.biasRegularizer=Sw(e.biasRegularizer),r.kernelConstraint=Tx(e.kernelConstraint),r.recurrentConstraint=Tx(e.recurrentConstraint),r.biasConstraint=Tx(e.biasConstraint),r.dropout=nb([1,rb([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=nb([1,rb([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return Zt(n,[{key:"build",value:function(e){e=Kb(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return qu((function(){if(2!==(e=e).length)throw new dy("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a,i=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=sS({ones:function(){return Ff(e)},rate:n.dropout,training:i,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=sS({ones:function(){return Ff(r)},rate:n.recurrentDropout,training:i,dropoutFunc:n.dropoutFunc}));var o=n.dropoutMask,s=n.recurrentDropoutMask;a=mb(null!=o?tc(e,o):e,n.kernel.read()),null!=n.bias&&(a=xb(a,n.bias.read())),null!=s&&(r=tc(r,s));var u=Yu(a,mb(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var e=jx(Lo(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:pw(this.activation),useBias:this.useBias,kernelInitializer:Wb(this.kernelInitializer),recurrentInitializer:Wb(this.recurrentInitializer),biasInitializer:Wb(this.biasInitializer),kernelRegularizer:kw(this.kernelRegularizer),recurrentRegularizer:kw(this.recurrentRegularizer),biasRegularizer:kw(this.biasRegularizer),activityRegularizer:kw(this.activityRegularizer),kernelConstraint:Ix(this.kernelConstraint),recurrentConstraint:Ix(this.recurrentConstraint),biasConstraint:Ix(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}}]),n}(Qw);eS.className="SimpleRNNCell",cc(eS);var tS=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),e.cell=new eS(e),t.call(this,e)}return Zt(n,[{key:"call",value:function(e,t){var r=this;return qu((function(){null!=r.cell.dropoutMask&&(Ku(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Ku(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return jx(Lo(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(Yw);tS.className="SimpleRNN",cc(tS);var nS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new dy("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,Ry(r.units,"units"),r.activation=mw(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=mw(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=Gb(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Gb(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Gb(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=Sw(e.kernelRegularizer),r.recurrentRegularizer=Sw(e.recurrentRegularizer),r.biasRegularizer=Sw(e.biasRegularizer),r.kernelConstraint=Tx(e.kernelConstraint),r.recurrentConstraint=Tx(e.recurrentConstraint),r.biasConstraint=Tx(e.biasConstraint),r.dropout=nb([1,rb([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=nb([1,rb([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return Zt(n,[{key:"build",value:function(e){var t=(e=Kb(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return qu((function(){if(2!==(e=e).length)throw new dy("GRUCell expects 2 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=sS({ones:function(){return Ff(e)},rate:n.dropout,training:r,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=sS({ones:function(){return Ff(a)},rate:n.recurrentDropout,training:r,count:3,dropoutFunc:n.dropoutFunc}));var i,o,s,u=n.dropoutMask,c=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=tc(e,u[0]));var l=mb(e,n.kernel.read());n.useBias&&(l=xb(l,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=tc(a,c[0]));var d=n.recurrentKernel.read(),f=Rh(d,[2*n.units,n.units],d.rank-1),h=(0,C.Z)(f,2),p=h[0],v=h[1],m=mb(a,p),g=Rh(l,3,l.rank-1),y=(0,C.Z)(g,3),b=y[0],x=y[1],k=y[2],w=Rh(m,2,m.rank-1),S=(0,C.Z)(w,2),I=S[0],N=S[1];i=n.recurrentActivation.apply(Yu(b,I)),o=n.recurrentActivation.apply(Yu(x,N));var T=mb(tc(o,a),v);s=n.activation.apply(Yu(k,T));var E=Yu(tc(i,a),tc(Yu(1,uf(i)),s));return[E,E]}))}},{key:"getConfig",value:function(){var e=jx(Lo(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:pw(this.activation),recurrentActivation:pw(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Wb(this.kernelInitializer),recurrentInitializer:Wb(this.recurrentInitializer),biasInitializer:Wb(this.biasInitializer),kernelRegularizer:kw(this.kernelRegularizer),recurrentRegularizer:kw(this.recurrentRegularizer),biasRegularizer:kw(this.biasRegularizer),activityRegularizer:kw(this.activityRegularizer),kernelConstraint:Ix(this.kernelConstraint),recurrentConstraint:Ix(this.recurrentConstraint),biasConstraint:Ix(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}}]),n}(Qw);nS.className="GRUCell",cc(nS);var rS=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new nS(e),t.call(this,e)}return Zt(n,[{key:"call",value:function(e,t){var r=this;return qu((function(){null!=r.cell.dropoutMask&&(Ku(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Ku(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return jx(Lo(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(Yw);rS.className="GRU",cc(rS);var aS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,Ry(r.units,"units"),r.activation=mw(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=mw(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=Gb(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Gb(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Gb(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=Sw(e.kernelRegularizer),r.recurrentRegularizer=Sw(e.recurrentRegularizer),r.biasRegularizer=Sw(e.biasRegularizer),r.kernelConstraint=Tx(e.kernelConstraint),r.recurrentConstraint=Tx(e.recurrentConstraint),r.biasConstraint=Tx(e.biasConstraint),r.dropout=nb([1,rb([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=nb([1,rb([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return Zt(n,[{key:"build",value:function(e){var t,n,r=(e=Kb(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new(t=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e,t){var n=a.apply([i]),r=(new Eb).apply([i]),o=a.apply([2*i]);return hb(hb(n,r),o)}}]),n}(Tb),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return qu((function(){var r=null!=t.training&&t.training;if(3!==(e=e).length)throw new dy("LSTMCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=sS({ones:function(){return Ff(e)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=sS({ones:function(){return Ff(a)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var o,s,u,c,l=n.dropoutMask,d=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=tc(e,l[0]));var f=mb(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=tc(a,d[0])),f=Yu(f,mb(a,n.recurrentKernel.read())),n.useBias&&(f=xb(f,n.bias.read()));var h=Rh(f,4,f.rank-1),p=(0,C.Z)(h,4),v=p[0],m=p[1],g=p[2],y=p[3];o=n.recurrentActivation.apply(v),s=n.recurrentActivation.apply(m),u=Yu(tc(s,i),tc(o,n.activation.apply(g))),c=n.recurrentActivation.apply(y);var b=tc(c,n.activation.apply(u));return[b,b,u]}))}},{key:"getConfig",value:function(){var e=jx(Lo(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:pw(this.activation),recurrentActivation:pw(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Wb(this.kernelInitializer),recurrentInitializer:Wb(this.recurrentInitializer),biasInitializer:Wb(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:kw(this.kernelRegularizer),recurrentRegularizer:kw(this.recurrentRegularizer),biasRegularizer:kw(this.biasRegularizer),activityRegularizer:kw(this.activityRegularizer),kernelConstraint:Ix(this.kernelConstraint),recurrentConstraint:Ix(this.recurrentConstraint),biasConstraint:Ix(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}}]),n}(Qw);aS.className="LSTMCell",cc(aS);var iS=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new aS(e),t.call(this,e)}return Zt(n,[{key:"call",value:function(e,t){var r=this;return qu((function(){null!=r.cell.dropoutMask&&(Ku(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Ku(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return jx(Lo(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(Yw);iS.className="LSTM",cc(iS);var oS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).cells=e.cells,r}return Zt(n,[{key:"stateSize",get:function(){var e,t=[],n=Ut(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,(0,Le.Z)(r.stateSize)):t.push(r.stateSize)}}catch(Rme){n.e(Rme)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return qu((function(){var r,a=(e=e).slice(1),i=[],o=Ut(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var s=r.value;Array.isArray(s.stateSize)?i.push(a.splice(0,s.stateSize.length)):i.push(a.splice(0,1))}}catch(Rme){o.e(Rme)}finally{o.f()}i.reverse();for(var u,c=[],l=0;l<n.cells.length;++l){var d=n.cells[l];a=i[l],u=0===l?[e[0]].concat(a):[u[0]].concat(a),u=d.call(u,t),c.push(u.slice(1))}a=[];var f,h=Ut(c.slice().reverse());try{for(h.s();!(f=h.n()).done;){var p,v=f.value;(p=a).push.apply(p,(0,Le.Z)(v))}}catch(Rme){h.e(Rme)}finally{h.f()}return[u[0]].concat(a)}))}},{key:"build",value:function(e){var t;Zb(e)&&(e=e[0]),e=e,this.cells.forEach((function(n,r){qy("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=jx(Lo(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign(Object.assign({},e),t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=Ut(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,Le.Z)(r.trainableWeights))}}catch(Rme){n.e(Rme)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=Ut(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,Le.Z)(r.nonTrainableWeights))}}catch(Rme){n.e(Rme)}finally{n.f()}if(!this.trainable){var a,i=[],o=Ut(this.cells);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,(0,Le.Z)(s.trainableWeights))}}catch(Rme){o.e(Rme)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=Ut(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,(0,Le.Z)(r.weights))}}catch(Rme){n.e(Rme)}finally{n.f()}return Qb(t)}},{key:"setWeights",value:function(e){var t,n=[],r=Ut(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=a.weights.length,o=e.splice(i),s=0;s<a.weights.length;++s)n.push([a.weights[s],o[s]])}catch(Rme){r.e(Rme)}finally{r.f()}ex(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=Ut(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(zx(o,r))}}catch(Rme){i.e(Rme)}finally{i.f()}return new e({cells:a})}}]),n}(Qw);function sS(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,i=e.count,o=void 0===i?1:i,s=e.dropoutFunc,u=function(){return null!=s?s(t(),n):wb(t(),n)},c=function(){return Sb(u,t,a)};return!o||o<=1?Xu(c().clone()):Array(o).fill(void 0).map(c).map((function(e){return Xu(e.clone())}))}oS.className="StackedRNNCells",cc(oS);var uS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},cS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),e.unroll)throw new fy("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new fy("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new tx({ndim:5})],r}return Zt(n,[{key:"call",value:function(e,t){var r=this;return qu((function(){if(null!=r.cell.dropoutMask&&(Ku(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Ku(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new dy("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return jx(Lo(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat((0,Le.Z)(t.slice(2)))),this.returnState&&(t=[t].concat((0,Le.Z)(Array(2).fill([e[0]].concat((0,Le.Z)(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return qu((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),i=If([a[0]].concat((0,Le.Z)(a.slice(2))));return Array.isArray(n)?Array(n.length).fill(i):[i]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];qu((function(){if(!t.stateful)throw new cy("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),i=[a[0]].concat((0,Le.Z)(a.slice(2)));if(null==r[0])throw new dy("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return If(i)})):t.states_=[If(i)];else if(null==e)Ku(t.states_),null!=t.keptStates&&(Ku(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return If(i)})):t.states_[0]=If(i);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new dy("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), ")+"but it received ".concat(e.length," state value(s). Input ")+"received: ".concat(e));n?t.keptStates.push(t.states_.slice()):Ku(t.states_);for(var o=0;o<t.states_.length;++o){var s=e[o],u=i;if(!on(s.shape,u))throw new dy("State ".concat(o," is incompatible with layer ").concat(t.name,": ")+"expected shape=".concat(u,", received shape=").concat(s.shape));t.states_[o]=s}}t.states_=t.states_.map((function(e){return Xu(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,s=t.dilationRate,u="channelsFirst"===n,c=e[u?3:2],l=e[u?4:3],d=Rw(c,a[0],i,o[0],s[0]),f=Rw(l,a[1],i,o[1],s[1]);return[].concat((0,Le.Z)(e.slice(0,2)),(0,Le.Z)(u?[r,d,f]:[d,f,r]))}}]),n}(Yw);cS.className="ConvRNN2D";var lS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;Vt(this,n);var a=e.filters,i=e.kernelSize,o=e.strides,s=e.padding,u=e.dataFormat,c=e.dilationRate;return(r=t.call(this,Object.assign(Object.assign({},e),{units:a}))).filters=a,Ry(r.filters,"filters"),r.kernelSize=Aw(i,2,"kernelSize"),r.kernelSize.forEach((function(e){return Ry(e,"kernelSize")})),r.strides=Aw(o||1,2,"strides"),r.strides.forEach((function(e){return Ry(e,"strides")})),r.padding=s||"valid",Gy(r.padding),r.dataFormat=u||"channelsLast",Wy(r.dataFormat),r.dilationRate=Aw(c||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return Ry(e,"dilationRate")})),r}return Zt(n,[{key:"build",value:function(e){var t;e=Kb(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new dy("The channel dimension of the input should be defined. "+"Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var o;if(this.unitForgetBias){var s=this.biasInitializer,u=this.filters;o=new(t=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"apply",value:function(e,t){return fb([s.apply([u]),Nf([u]),s.apply([2*u])])}}]),n}(Tb),t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return qu((function(){if(3!==e.length)throw new dy("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+"".concat(e.length,"."));var r=t.training||!1,a=e[0],i=e[1],o=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=sS({ones:function(){return Ff(a)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var s=n.dropoutMask,u=function(e,t,n){return t&&t[n]?tc(t[n],e):e},c=u(a,s,0),l=u(a,s,1),d=u(a,s,2),f=u(a,s,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=sS({ones:function(){return Ff(i)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var h=n.recurrentDropoutMask,p=u(i,h,0),v=u(i,h,1),m=u(i,h,2),g=u(i,h,3),y=Rh(n.kernel.read(),4,3),b=(0,C.Z)(y,4),x=b[0],k=b[1],w=b[2],S=b[3],I=n.useBias?Rh(n.bias.read(),4):[null,null,null,null],N=(0,C.Z)(I,4),T=N[0],E=N[1],_=N[2],A=N[3];c=n.inputConv(c,x,T,n.padding),l=n.inputConv(l,k,E,n.padding),d=n.inputConv(d,w,_,n.padding),f=n.inputConv(f,S,A,n.padding);var R=Rh(n.recurrentKernel.read(),4,3),O=(0,C.Z)(R,4),D=O[0],P=O[1],F=O[2],M=O[3];p=n.recurrentConv(p,D),v=n.recurrentConv(v,P),m=n.recurrentConv(m,F),g=n.recurrentConv(g,M);var L=n.recurrentActivation.apply(Yu(c,p)),$=n.recurrentActivation.apply(Yu(l,v)),j=Yu(tc($,o),tc(L,n.activation.apply(Yu(d,m)))),z=tc(n.recurrentActivation.apply(Yu(f,g)),n.activation.apply(j));return[z,z,j]}))}},{key:"getConfig",value:function(){var e=jx(Lo(n.prototype),"getConfig",this).call(this),t=(e.units,uS(e,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},t),r)}},{key:"inputConv",value:function(e,t,n,r){var a=id(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?xb(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return id(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(aS);lS.className="ConvLSTM2DCell",cc(lS);var dS=function(e){Mo(n,e);var t=Bo(n);function n(e){Vt(this,n);var r=new lS(e);return t.call(this,Object.assign(Object.assign({},e),{cell:r}))}return Zt(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(cS);dS.className="ConvLSTM2D",cc(dS);var fS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return Zt(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return qu((function(){n.invokeCallHook(e,t);var r=qb(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return Sb((function(){return wb(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return jx(Lo(n.prototype),"dispose",this).call(this)}}]),n}(ox);fS.className="Dropout",cc(fS);var hS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return Zt(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(fS);hS.className="SpatialDropout1D",cc(hS);var pS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,Ry(r.units,"units"),r.activation=mw(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=Gb(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=Gb(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=Tx(e.kernelConstraint),r.biasConstraint=Tx(e.biasConstraint),r.kernelRegularizer=Sw(e.kernelRegularizer),r.biasRegularizer=Sw(e.biasRegularizer),r.activityRegularizer=Sw(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],r}return Zt(n,[{key:"build",value:function(e){var t=(e=Kb(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(0,De.Z)({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=Kb(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return qu((function(){n.invokeCallHook(e,t);var r,a=qb(e),i=Dy(n.activation.getClassName());return null!=i?r=mb(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=mb(a,n.kernel.read()),null!=n.bias&&(r=xb(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:pw(this.activation),useBias:this.useBias,kernelInitializer:Wb(this.kernelInitializer),biasInitializer:Wb(this.biasInitializer),kernelRegularizer:kw(this.kernelRegularizer),biasRegularizer:kw(this.biasRegularizer),activityRegularizer:kw(this.activityRegularizer),kernelConstraint:Ix(this.kernelConstraint),biasConstraint:Ix(this.biasConstraint)},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);pS.className="Dense",cc(pS);var vS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return Zt(n,[{key:"computeOutputShape",value:function(e){var t,n=Ut((e=Kb(e)).slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new dy('The shape of the input to "Flatten" is not fully defined '+"(got ".concat(e.slice(1),"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}}catch(Rme){n.e(Rme)}finally{n.f()}return[e[0],tb(e,1)]}},{key:"call",value:function(e,t){var n=this;return qu((function(){n.invokeCallHook(e,t);var r=qb(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=ip(r,a)}return function(e){if(e.rank<=1)throw new dy("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],tb(e.shape,1)];return Ml(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);vS.className="Flatten",cc(vS);var mS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=mw(e.activation),r}return Zt(n,[{key:"call",value:function(e,t){var n=this;return qu((function(){n.invokeCallHook(e,t);var r=qb(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:pw(this.activation)},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);mS.className="Activation",cc(mS);var gS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return Zt(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return qu((function(){return function(e,t){return qu((function(){if(2!==e.shape.length)throw new dy("repeat() expects a rank-2 tensor, but received a "+"rank-".concat(e.shape.length," tensor."));return pb(sb(e,1),[1,t,1])}))}(e=qb(e),n.n)}))}},{key:"getConfig",value:function(){var e={n:this.n},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);gS.className="RepeatVector",cc(gS);var yS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;Vt(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return Zt(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new dy("Can only specifiy one unknown dimension.");i=o}else a*=s}var u=tb(e);if(null!==i){if(0===a||u%a!==0)throw new dy(n);r[i]=u/a}else if(u!==a)throw new dy(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return qu((function(){n.invokeCallHook(e,t);var r=qb(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return Ml(r,i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);yS.className="Reshape",cc(yS);var bS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+"".concat(e.dims," instead."));var a=ab(1,e.dims.length+1);if(!on(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new tx({ndim:r.dims.length+1})],r}return Zt(n,[{key:"computeOutputShape",value:function(e){var t=(e=Kb(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return ip(qb(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);bS.className="Permute",cc(bS);var xS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return Zt(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=jx(Lo(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=qb(e);return dl(Df(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return qu((function(){n.invokeCallHook(e,t);var r=qb(e),a=dl(Df(r,n.maskValue),-1,!0);return tc(r,Vu(a,r.dtype))}))}}]),n}(ox);xS.className="Masking",cc(xS);var kS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(by(e.inputLength))}return r.inputDim=e.inputDim,Ry(r.inputDim,"inputDim"),r.outputDim=e.outputDim,Ry(r.outputDim,"outputDim"),r.embeddingsInitializer=Gb(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=Sw(e.embeddingsRegularizer),r.activityRegularizer=Sw(e.activityRegularizer),r.embeddingsConstraint=Tx(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,r}return Zt(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return qu((function(){return n.maskZero?(e=qb(e),Df(e,ac(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=Kb(e),null==this.inputLength)return[].concat((0,Le.Z)(e),[this.outputDim]);var t=by(this.inputLength);if(t.length!==e.length-1)throw new dy('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new dy('"inputLength" is '.concat(this.inputLength,", but received ")+"input shape has shape ".concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat((0,Le.Z)(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return qu((function(){n.invokeCallHook(e,t);var r=qb(e);"int32"!==r.dtype&&(r=ob(r,"int32"));var a=gb(n.embeddings.read(),Ml(r,[r.size]));return Ml(a,Kb(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Wb(this.embeddingsInitializer),embeddingsRegularizer:kw(this.embeddingsRegularizer),activityRegularizer:kw(this.activityRegularizer),embeddingsConstraint:Ix(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);kS.className="Embedding",cc(kS);var wS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return Zt(n,[{key:"mergeFunction",value:function(e){throw new fy}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new dy("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Kb(e)]),(e=e).length<2)throw new dy("A merge layer should be called on an Array of at least 2 inputs."+" Got ".concat(e.length," input(s)."));var t,n=[],r=Ut(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(Rme){r.e(Rme)}finally{r.f()}if((n=Cy(n)).length>1)throw new dy("Can not merge tensors with different batch sizes. "+"Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var s=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var u=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===Cy(u).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return qu((function(){if(e=e,n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,i=rb(r),o=Ut(e);try{for(o.s();!(a=o.n()).done;){for(var s=a.value,u=s.rank,c=0;c<i-u;++c)s=sb(s,1);t.push(s)}}catch(Rme){o.e(Rme)}finally{o.f()}return n.mergeFunction(t)}var l,d=!1,f=Ut(e);try{for(f.s();!(l=f.n()).done;){var h=l.value,p=h.rank;if(null==p){var v=h.shape,m=v[0],g=v.slice(1).concat([m]),y=Ml(h,[m].concat(tb(v.slice(1))));y=ip(y,[1,0]),y=Ml(y,g),t.push(y),d=!0}else if(p>1){var b=ab(1,p).concat([0]);t.push(ip(h,b)),d=!0}else t.push(h)}}catch(Rme){f.e(Rme)}finally{f.f()}var x=n.mergeFunction(t),k=x.rank;if(d)if(null==k){var w=x.shape,S=w[w.length-1],I=[S].concat(w.slice(0,w.length-1));x=Ml(ip(Ml(x,[-1,S]),[1,0]),I)}else if(k>1){var N=[k-1].concat(ab(0,k-1));x=ip(x,N)}return x}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==(e=e)[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=Ut(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;null!=s&&null!==s[0]&&i.push(s[0])}}catch(Rme){o.e(Rme)}finally{o.f()}return t=1===(i=Cy(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return qu((function(){if(null==t)return null;if(!Array.isArray(t))throw new dy("`mask` should be an Array");if(!Array.isArray(e))throw new dy("`inputs` should be an Array");if(t.length!==e.length)throw new dy("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+"(".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:Ud(e,0)})))[0],r=1;r<t.length-1;++r)n=hf(n,t[r]);return n}))}}]),n}(ox),SS=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,e)}return Zt(n,[{key:"mergeFunction",value:function(e){return qu((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Yu(t,e[n]);return t}))}}]),n}(wS);SS.className="Add",cc(SS);var IS=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,e)}return Zt(n,[{key:"mergeFunction",value:function(e){return qu((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=tc(t,e[n]);return t}))}}]),n}(wS);IS.className="Multiply",cc(IS);var NS=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,e)}return Zt(n,[{key:"mergeFunction",value:function(e){return qu((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=Yu(t,e[n]);return tc(1/e.length,t)}))}}]),n}(wS);NS.className="Average",cc(NS);var TS=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,e)}return Zt(n,[{key:"mergeFunction",value:function(e){return qu((function(){for(var t=e[0],n=1;n<e.length;++n)t=kc(t,e[n]);return t}))}}]),n}(wS);TS.className="Maximum",cc(TS);var CS=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,e)}return Zt(n,[{key:"mergeFunction",value:function(e){return qu((function(){for(var t=e[0],n=1;n<e.length;++n)t=Cf(t,e[n]);return t}))}}]),n}(wS);CS.className="Minimum",cc(CS);var ES=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return Zt(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new dy("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,r=Ut(e=e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(Rme){r.e(Rme)}finally{r.f()}if(!n){for(var a=[],i=0;i<e.length;++i){var o=e[i].slice();o.splice(this.axis,1);var s,u=!1,c=Ut(a);try{for(c.s();!(s=c.n()).done;){if(on(s.value,o)){u=!0;break}}}catch(Rme){c.e(Rme)}finally{c.f()}u||a.push(o)}if(a.length>1)throw new dy("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return qu((function(){return fb(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new dy("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=Ut(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(Rme){i.e(Rme)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new dy("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new dy("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new dy("Mismatch in the length of mask (".concat(t.length,") ")+"and the legnth of inputs (".concat(e.length,")"));return qu((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],i=0;i<e.length;++i)null==t[i]?a.push(Vu(Ff(e[i]),"bool")):t[i].rank<e[i].rank?a.push(Ud(t[i],-1)):a.push(t[i]);var o=jl(a,n.axis);return ll(o,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wS);function _S(e,t){for(;e<0;)e+=t;return e}ES.className="Concatenate",cc(ES);var AS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return Zt(n,[{key:"build",value:function(e){tn(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new fy("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new dy("Dimension incompatibility: "+"".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new dy("A `Dot` layer must be called on exactly 2 inputs, "+"but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return _S(t,e[n].shape.length)})):[_S(this.axes,n.shape.length),_S(this.axes,r.shape.length)],this.normalize&&(n=Bx(n,t[0]),r=Bx(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new fy("batchDot is not implemented for tensors of 4D or higher rank yet");if(tn(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, "+"but got ".concat(e.shape.length)})),tn(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, "+"but got ".concat(t.shape.length)})),"number"===typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new fy("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var i=n;return qu((function(){var n,o;if(r>a){n=r-a;for(var s=[],u=0;u<n;++u)s.push(1);t=Ml(t,t.shape.concat(s))}else if(a>r){n=a-r;for(var c=[],l=0;l<n;++l)c.push(1);e=Ml(e,e.shape.concat(c))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?Ld(tc(e,t),i[0]):Ld(tc(ip(e,[1,0]),t),i[1]);else{var d=i[0]!==e.shape.length-1,f=i[1]===t.shape.length-1;o=zl(e,t,d,f)}if(n>0){for(var h,p=[],v=h=r>a?r+a-3:r-1;v<h+n;++v)p.push(v);o=Ph(o,p)}return 1===o.shape.length&&(o=Ud(o,1)),o}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[_S(this.axes,e.length),_S(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){tn(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new fy("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(wS);AS.className="Dot",cc(AS);var RS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return Zt(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=jx(Lo(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return qu((function(){n.invokeCallHook(e,t);var r=qb(e);return Sb((function(){return Yu(vb(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(ox);RS.className="GaussianNoise",cc(RS);var OS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return Zt(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=jx(Lo(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return qu((function(){n.invokeCallHook(e,t);var r=qb(e);if(n.rate>0&&n.rate<1){return Sb((function(){var e=Math.sqrt(n.rate/(1-n.rate));return tc(r,vb(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))}}]),n}(ox);OS.className="GaussianDropout",cc(OS);var DS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return Zt(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||qb(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=jx(Lo(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return qu((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return Sb((function(){var t=qb(e),a=-1.7580993408473766,i=Kd(rh(r),n.rate);i=ob(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-o*a*n.rate,u=Yu(tc(t,i),tc(Yu(i,-1),a));return Yu(tc(u,o),s)}),(function(){return qb(e)}),t.training||!1)}return e}))}}]),n}(ox);function PS(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=Hl(e,t,n,r,a,o);else if(3===e.rank)i=ql(e,t,n,r,a,o);else{if(4!==e.rank)throw new fy("batchNormalization is not implemented for array of rank ".concat(e.rank," ")+"yet");i=Kl(e,t,n,r,a,o)}return i}function FS(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return qu((function(){var i=Af(e,r),o=i.mean,s=i.variance;return[PS(e,o,s,n,t,a),o,s]}))}function MS(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return qu((function(){var i,o=Af(e,r),s=o.mean,u=o.variance,c=[],l=Ut(ab(0,e.rank));try{for(l.s();!(i=l.n()).done;){var d=i.value;-1!==r.indexOf(d)?c.push(1):c.push(e.shape[d])}}catch(Rme){l.e(Rme)}finally{l.f()}var f=Ml(s,c),h=Ml(u,c),p=null==t?null:Ml(t,c),v=null==n?null:Ml(n,c);return[PS(e,f,h,v,p,a),s,u]}))}DS.className="AlphaDropout",cc(DS);var LS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=Gb(e.betaInitializer||"zeros"),r.gammaInitializer=Gb(e.gammaInitializer||"ones"),r.movingMeanInitializer=Gb(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=Gb(e.movingVarianceInitializer||"ones"),r.betaConstraint=Tx(e.betaConstraint),r.gammaConstraint=Tx(e.gammaConstraint),r.betaRegularizer=Sw(e.betaRegularizer),r.gammaRegularizer=Sw(e.gammaRegularizer),r}return Zt(n,[{key:"build",value:function(e){e=Kb(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new dy("Axis ".concat(t," of input tensor should have a defined dimension but ")+"the layer received an input with shape "+"".concat(JSON.stringify(e),"."));this.inputSpec=[new tx({ndim:e.length,axes:(0,De.Z)({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return qu((function(){var r=null!=t.training&&t.training,a=qb(e),i=a.shape,o=i.length,s=ab(0,o),u=n.axis>=0?n.axis:n.axis+o;s.splice(u,1);var c=vy(1,o);c[u]=i[u];var l=s.slice();l.sort();var d=!on(l,ab(0,o).slice(0,o-1));if(!r)return function(){if(d){var e=Ml(n.movingMean.read(),c),t=Ml(n.movingVariance.read(),c),r=n.center?Ml(n.beta.read(),c):null,i=n.scale?Ml(n.gamma.read(),c):null;return PS(a,e,t,r,i,n.epsilon)}return PS(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var f=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return on(r.slice().sort(),ab(0,e.rank-1))?FS(e,t,n,r,a):MS(e,t,n,r,a)}(a,n.gamma.read(),n.beta.read(),s,n.epsilon),h=(0,C.Z)(f,3),p=h[0],v=h[1],m=h[2],g=function(e,t,n){qu((function(){var r=1-n,a=e.read(),i=tc(vc(a,t),r);e.write(vc(a,i))}))};return g(n.movingMean,v,n.momentum),g(n.movingVariance,m,n.momentum),p}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Wb(this.betaInitializer),gammaInitializer:Wb(this.gammaInitializer),movingMeanInitializer:Wb(this.movingMeanInitializer),movingVarianceInitializer:Wb(this.movingVarianceInitializer),betaRegularizer:kw(this.betaRegularizer),gammaRegularizer:kw(this.gammaRegularizer),betaConstraint:Ix(this.betaConstraint),gammaConstraint:Ix(this.gammaConstraint)},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);LS.className="BatchNormalization",cc(LS);var $S=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"===typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, "+"but received ".concat(JSON.stringify(r.axis)));var a,i=Ut(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, "+"but received ".concat(JSON.stringify(r.axis)))}}catch(Rme){i.e(Rme)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=Gb(e.betaInitializer||"zeros"),r.gammaInitializer=Gb(e.gammaInitializer||"ones"),r.betaRegularizer=Sw(e.betaRegularizer),r.gammaRegularizer=Sw(e.gammaRegularizer),r.supportsMasking=!0,r}return Zt(n,[{key:"build",value:function(e){var t=(e=Kb(e)).length;"number"===typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=Ut(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(Rme){a.e(Rme)}finally{a.f()}if(this.axis.length!==Cy(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=qb(e),a=r.shape,i=a.length;return qu((function(){var e,t=Af(r,n.axis,!0),o=t.mean,s=t.variance,u=vy(1,i),c=Ut(n.axis);try{for(c.s();!(e=c.n()).done;){var l=e.value;u[l]=a[l]}}catch(Rme){c.e(Rme)}finally{c.f()}for(var d=function(e){return null!=e&&e.shape.length!==i?Ml(e,u):e},f=n.scale?d(n.gamma.read()):null,h=n.center?d(n.beta.read()):null,p=[],v=[],m=0;m<i;++m)-1!==n.axis.indexOf(m)?(p.push(a[m]),v.push(1)):(p.push(1),v.push(a[m]));return o=Wd(o,p),s=Wd(s,p),null!=f&&(f=Wd(f,v)),null!=h&&(h=Wd(h,v)),PS(r,o,s,h,f,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Wb(this.betaInitializer),gammaInitializer:Wb(this.gammaInitializer),betaRegularizer:kw(this.betaRegularizer),gammaRegularizer:kw(this.gammaRegularizer)},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);$S.className="LayerNormalization",cc($S);var jS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"===typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new dy("ZeroPadding2D expects padding to be a length-2 array, but "+"received a length-".concat(e.padding.length," array."));var a,i;if("number"===typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new dy("ZeroPadding2D expects height padding to be a length-2 array, "+"but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new dy("ZeroPadding2D expects width padding to be a length-2 array, "+"but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new tx({ndim:4})],r}return Zt(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=Kb(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return qu((function(){return function(e,t,n){return qu((function(){if(4!==e.rank)throw new dy("temporalPadding expects input tensor to be 4-D, but received a "+"".concat(e.rank,"-D tensor."));if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new dy("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new dy("Unknown data format: ".concat(n,". ")+"Supported data formats are 'channelsLast' and 'channelsFirst.");var r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],Lf(e,r)}))}(qb(e),n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);function zS(e,t,n,r,a,i){return qu((function(){var o;Wy(a),Zy(i),Gy(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=Dw(e,a);var s="same"===r?"same":"valid";return o="max"===i?xf(e,t,n,s):Ll(e,t,n,s),"channelsFirst"===a&&(o=ip(o,[0,3,1,2])),o}))}function BS(e,t,n,r,a,i){return qu((function(){var o;Wy(a),Zy(i),Gy(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=Pw(e,a);var s="same"===r?"same":"valid";return o="max"===i?kf(e,t,n,s):$l(e,t,n,s),"channelsFirst"===a&&(o=ip(o,[0,4,1,2,3])),o}))}jS.className="ZeroPadding2D",cc(jS);var US=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"===typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!==typeof e.poolSize[0])throw new dy("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(Ry(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"===typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!==typeof e.strides[0])throw new dy("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+"".concat(JSON.stringify(e.strides)));r.strides=e.strides}return Ry(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,Gy(r.padding),r.inputSpec=[new tx({ndim:3})],r}return Zt(n,[{key:"computeOutputShape",value:function(e){var t=Rw((e=Kb(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return qu((function(){n.invokeCallHook(e,t),e=sb(qb(e),2);var r=n.poolingFunction(qb(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return Ph(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox),VS=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,e)}return Zt(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Wy(a),Gy(r),zS(e,t,n,r,a,"max")}}]),n}(US);VS.className="MaxPooling1D",cc(VS);var WS=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,e)}return Zt(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Wy(a),Gy(r),zS(e,t,n,r,a,"avg")}}]),n}(US);WS.className="AveragePooling1D",cc(WS);var GS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new dy("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return Ry(r.poolSize,"poolSize"),Ry(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Wy(r.dataFormat),Gy(r.padding),r.inputSpec=[new tx({ndim:4})],r}return Zt(n,[{key:"computeOutputShape",value:function(e){e=Kb(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=Rw(t,this.poolSize[0],this.padding,this.strides[0]),n=Rw(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return qu((function(){return n.invokeCallHook(e,t),n.poolingFunction(qb(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox),ZS=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,e)}return Zt(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Wy(a),Gy(r),zS(e,t,n,r,a,"max")}}]),n}(GS);ZS.className="MaxPooling2D",cc(ZS);var HS=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,e)}return Zt(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Wy(a),Gy(r),zS(e,t,n,r,a,"avg")}}]),n}(GS);HS.className="AveragePooling2D",cc(HS);var qS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new dy("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+"".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return Ry(r.poolSize,"poolSize"),Ry(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Wy(r.dataFormat),Gy(r.padding),r.inputSpec=[new tx({ndim:5})],r}return Zt(n,[{key:"computeOutputShape",value:function(e){e=Kb(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=Rw(t,this.poolSize[0],this.padding,this.strides[0]),n=Rw(n,this.poolSize[1],this.padding,this.strides[1]),r=Rw(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return qu((function(){return n.invokeCallHook(e,t),n.poolingFunction(qb(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox),KS=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,e)}return Zt(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Wy(a),Gy(r),BS(e,t,n,r,a,"max")}}]),n}(qS);KS.className="MaxPooling3D",cc(KS);var XS=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,e)}return Zt(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return Wy(a),Gy(r),BS(e,t,n,r,a,"avg")}}]),n}(qS);XS.className="AveragePooling3D",cc(XS);var JS=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).inputSpec=[new tx({ndim:3})],r}return Zt(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new fy}}]),n}(ox),YS=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,e||{})}return Zt(n,[{key:"call",value:function(e,t){return qu((function(){var t=qb(e);return Sf(t,1)}))}}]),n}(JS);YS.className="GlobalAveragePooling1D",cc(YS);var QS=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,e||{})}return Zt(n,[{key:"call",value:function(e,t){return qu((function(){var t=qb(e);return Fd(t,1)}))}}]),n}(JS);QS.className="GlobalMaxPooling1D",cc(QS);var eI=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Wy(r.dataFormat),r.inputSpec=[new tx({ndim:4})],r}return Zt(n,[{key:"computeOutputShape",value:function(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new fy}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox),tI=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"call",value:function(e,t){var n=this;return qu((function(){var t=qb(e);return"channelsLast"===n.dataFormat?Sf(t,[1,2]):Sf(t,[2,3])}))}}]),n}(eI);tI.className="GlobalAveragePooling2D",cc(tI);var nI=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"call",value:function(e,t){var n=this;return qu((function(){var t=qb(e);return"channelsLast"===n.dataFormat?Fd(t,[1,2]):Fd(t,[2,3])}))}}]),n}(eI);nI.className="GlobalMaxPooling2D",cc(nI);var rI=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).layer=e.layer,r}return Zt(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){jx(Lo(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.layer,a=zx(r,n);delete t.layer;var i={layer:a};return Object.assign(i,t),new e(i)}}]),n}(ox),aI=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return Zt(n,[{key:"build",value:function(e){if((e=Kb(e)).length<3)throw new dy("TimeDistributed layer expects an input shape >= 3D, but received "+"input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),jx(Lo(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=Kb(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return qu((function(){return Jw((function(e,r){return[qb(n.layer.call(e,t)),[]]}),e=qb(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(rI);aI.className="TimeDistributed",cc(aI);var iI=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;Vt(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=zx(i),a.goBackwards=!0!==a.goBackwards;var o,s={};if(s.className=e.layer.getClassName(),s.config=a,r.backwardLayer=zx(s),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,o=r.mergeMode,_y(Uy,"BidirectionalMergeMode",o),e.weights)throw new fy("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return Zt(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),a=a,this.returnState?(r=a.slice(1),t=a[0]):t=a[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):yy(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=Xw(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return jx(Lo(n.prototype),"apply",this).call(this,e,t);var o=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new dy("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,(0,Le.Z)(r));var c=r.map((function(e){return new tx({shape:e.shape})}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),s.push.apply(s,(0,Le.Z)(c))}if(null!=a)throw new fy("Support for constants in Bidirectional layers is not implemented yet.");for(var l=o[0]instanceof nx,d=0,f=o;d<f.length;d++){if(f[d]instanceof nx!==l)throw new dy("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(l){var h=[e].concat(o),p=this.inputSpec.concat(s),v=this.inputSpec;this.inputSpec=p;var m=jx(Lo(n.prototype),"apply",this).call(this,h,t);return this.inputSpec=v,m}return jx(Lo(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return qu((function(){var r,a,i,o,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),c=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:c}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=ch(a,1)),"concat"===n.mergeMode?o=fb([r,a]):"sum"===n.mergeMode?o=Yu(r,a):"ave"===n.mergeMode?o=tc(.5,Yu(r,a)):"mul"===n.mergeMode?o=tc(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;qy(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),qy(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){jx(Lo(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=zx(t.layer);if(delete t.layer,null!=t.numConstants)throw new fy("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(rI);iI.className="Bidirectional",cc(iI);var oI=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).scale=e.scale,e.offset?r.offset=e.offset:r.offset=0,r}return Zt(n,[{key:"getConfig",value:function(){var e={scale:this.scale,offset:this.offset},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"call",value:function(e,t){var n=this;return qu((function(){return"float32"!==(e=qb(e)).dtype&&(e=ob(e,"float32")),Yu(tc(e,n.scale),n.offset)}))}}]),n}(ox);oI.className="Rescaling",cc(oI);var sI=Fv.resizeBilinear,uI=Fv.cropAndResize,cI=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).height=e.height,r.width=e.width,r}return Zt(n,[{key:"centerCrop",value:function(e,t,n,r,a,i,o,s){return qu((function(){var u,c=!1,l=[t/i,n/o,(r+t)/i,(a+n)/o],d=[];3===e.rank?(c=!0,u=Fh([e])):u=e;for(var f=0;f<u.shape[0];f++)d.push(l);var h=Ps(d,[d.length,4]),p=ah(0,d.length,1,"int32"),v=uI(u,h,p,[r,a],"nearest");return ob(c?qb(Jh(v)):v,s)}))}},{key:"upsize",value:function(e,t,n,r){return qu((function(){return ob(sI(e,[t,n]),r)}))}},{key:"call",value:function(e,t){var n=this;return qu((function(){var t=qb(e),r=t.dtype,a=t.shape,i=a[a.length-3],o=a[a.length-2],s=0;i!==n.height&&(s=Math.floor((i-n.height)/2));var u=0;return o!==n.width&&0===(u=Math.floor((o-n.width)/2))&&(u=1),s>=0&&u>=0?n.centerCrop(t,s,u,n.height,n.width,i,o,r):n.upsize(e,n.height,n.width,r)}))}},{key:"getConfig",value:function(){var e={height:this.height,width:this.width},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){var t=(e=Kb(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}}]),n}(ox);cI.className="CenterCrop",cc(cI);var lI=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).numTokens=e.numTokens,e.outputMode?r.outputMode=e.outputMode:r.outputMode="multiHot",r}return Zt(n,[{key:"getConfig",value:function(){var e={numTokens:this.numTokens,outputMode:this.outputMode},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){return null==(e=Kb(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}},{key:"call",value:function(e,t){var n=this;return qu((function(){var r;if("int32"!==(e=qb(e)).dtype&&(e=ob(e,"int32")),"undefined"!==typeof t.countWeights){if("count"!==n.outputMode)throw new dy("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));r=qb(t.countWeights)}var a=Fd(e),i=Md(e),o=qd(n.numTokens,a).bufferSync().get(0),s=Kd(i,0).bufferSync().get(0);if(!o||!s)throw new dy("Input values must be between 0 < values <="+" numTokens with numTokens=".concat(n.numTokens));return function(e,t,n,r){var a=qb(e);if("int32"!==a.dtype&&(a=ob(a,"int32")),"int"===t)return a;var i=a.shape;if(0===a.rank&&(a=Ud(a,-1)),"oneHot"===t&&1!==a.shape[a.shape.length-1]&&(a=Ud(a,-1)),a.rank>2)throw new dy("When outputMode is not int, maximum output rank is 2"+" Received outputMode ".concat(t," and input shape ").concat(i)+" which would result in output rank ".concat(a.rank,"."));var o,s=["multiHot","oneHot"].includes(t);if(o=md(a,"undefined"!==typeof r&&"count"===t?r:[],n,s),"tfIdf"!==t)return o;if(r)return tc(o,r);throw new dy("When outputMode is 'tfIdf', weights must be provided.")}(e,n.outputMode,n.numTokens,r)}))}}]),n}(ox);lI.className="CategoryEncoding",cc(lI);var dI=new Set(["bilinear","nearest"]),fI=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;if(Vt(this,n),(r=t.call(this,e)).height=e.height,r.width=e.width,e.interpolation){if(!dI.has(e.interpolation))throw new dy("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));r.interpolation=e.interpolation}else r.interpolation="bilinear";return r.cropToAspectRatio=Boolean(e.cropToAspectRatio),r}return Zt(n,[{key:"computeOutputShape",value:function(e){var t=(e=Kb(e))[2];return[this.height,this.width,t]}},{key:"getConfig",value:function(){var e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"call",value:function(e,t){var n=this;return qu((function(){var t=[n.height,n.width];if("bilinear"===n.interpolation)return Fv.resizeBilinear(e,t,!n.cropToAspectRatio);if("nearest"===n.interpolation)return Fv.resizeNearestNeighbor(e,t,!n.cropToAspectRatio);throw new Error("Interpolation is ".concat(n.interpolation," but only ").concat((0,Le.Z)(dI)," are supported"))}))}}]),n}(ox);fI.className="Resizing",cc(fI);var hI=function(){function e(t){Vt(this,e),this.seed=t}return Zt(e,[{key:"next",value:function(){if(void 0!==this.seed)return this.seed++}}]),e}();hI.className="RandomSeed";var pI=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).randomGenerator=new hI(e.seed),r}return Zt(n,[{key:"getConfig",value:function(){var e={seed:this.randomGenerator.seed},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(ox);pI.className="BaseRandomLayer";var vI=new Set(["bilinear","nearest"]),mI=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;Vt(this,n),r=t.call(this,e);var a=e.factor,i=e.interpolation,o=void 0===i?"bilinear":i;if(r.factor=a,Array.isArray(r.factor)&&2===r.factor.length)r.widthLower=r.factor[0],r.widthUpper=r.factor[1];else{if(Array.isArray(r.factor)||!(r.factor>0))throw new dy("Invalid factor: ".concat(r.factor,". Must be positive number or tuple of 2 numbers"));r.widthLower=-r.factor,r.widthUpper=r.factor}if(r.widthLower<-1||r.widthUpper<-1)throw new dy("factor must have values larger than -1. Got: ".concat(r.factor));if(r.widthUpper<r.widthLower)throw new dy("factor cannot have upper bound less than lower bound.\n        Got upper bound: ".concat(r.widthUpper,".\n        Got lower bound: ").concat(r.widthLower,"\n      "));if(o){if(!vI.has(o))throw new dy("Invalid interpolation parameter: ".concat(o," is not implemented"));r.interpolation=o}return r}return Zt(n,[{key:"getConfig",value:function(){var e={factor:this.factor,interpolation:this.interpolation},t=jx(Lo(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"computeOutputShape",value:function(e){var t=(e=Kb(e))[2];return[this.imgHeight,-1,t]}},{key:"call",value:function(e,t){var n=this;return qu((function(){var t=qb(e);n.imgHeight=t.shape[t.shape.length-3];var r=t.shape[t.shape.length-2];n.widthFactor=rh([1],1+n.widthLower,1+n.widthUpper,"float32",n.randomGenerator.next());var a=n.widthFactor.dataSync()[0]*r;a=Math.round(a);var i=[n.imgHeight,a];switch(n.interpolation){case"bilinear":return Fv.resizeBilinear(e,i);case"nearest":return Fv.resizeNearestNeighbor(e,i);default:throw new Error("Interpolation is ".concat(n.interpolation,"\n          but only ").concat((0,Le.Z)(vI)," are supported"))}}))}}]),n}(pI);mI.className="RandomWidth",cc(mI);var gI,yI;Ln().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(gI||(gI={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(yI||(yI={}));var bI={};function xI(e){return bI[e]}function kI(e,t,n,r,a){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var o=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?o+1:i.inputIndexEnd,u=o<0?t.inputNames.length+o:o;if("tensor"===i.type)return wI(t.inputNames[u],n,r,a);if("tensors"===i.type){var c=t.inputs.slice(o,s),l=t.inputNames.slice(o,s).filter((function(e,t){var n;return"NoOp"!==(null===(n=c[t])||void 0===n?void 0:n.op)}));return l.map((function(e){return wI(e,n,r,a)}))}var d=wI(t.inputNames[u],n,r,a),f=d.dataSync();return"number"===i.type?f[0]:Nn(d.shape,f)}var h=t.attrParams[e];return h&&h.value}function wI(e,t,n,r){var a=TI(e,n),i=(0,C.Z)(a,2),o=i[0],s=i[1];if(null!=r){var u=r.getHashTableHandleByName(o);if(null!=u)return u}var c=n.currentContextIds.find((function(e){return!!t[NI(o,e)]}));return void 0!==c?t[NI(o,c)][s]:void 0}function SI(e,t,n){return t[NI(e,n.currentContextId)]}function II(e,t){var n=TI(e,t),r=(0,C.Z)(n,3),a=r[0],i=r[1],o=r[2];return[NI(a,t&&t.currentContextId),i,o]}function NI(e,t){return t?"".concat(e,"-").concat(t):e}function TI(e,t){if(""===e)return["",0,void 0];var n=null!=t&&null!=t.parseNodeNameCache;if(n){var r=t.parseNodeNameCache.get(e);if(null!=r)return r}var a,i=e.split(":");if(1===i.length)a=[e,0,void 0];else{var o=i[0],s=3===i.length?i[1]:void 0;a=[o,Number(i[i.length-1]),s]}return n&&t.parseNodeNameCache.set(e,a),a}function CI(e,t,n){var r=kI("pad",e,t,n);if("explicit"===r){r=kI("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[2*i],a[i][1]=r[2*i+1];return a}return r}function EI(e){return e.kept?e:Wu(e)}var _I=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],AI=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],RI=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],OI=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],DI=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],PI=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],FI=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],MI=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],LI=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],$I=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],jI=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],zI=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],BI=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],UI=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],VI=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],WI=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],GI=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],ZI=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],HI=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],qI=function(){function e(){var t;Vt(this,e);var n=[r,a,i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,x,k],w=(t=[]).concat.apply(t,(0,Le.Z)(n.map((function(e){return e.json}))));this.opMappers=w.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return Zt(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],i=[],o=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?i.push(e[n.name]):null!=n.input&&0!==n.input.length||o.push(e[n.name]),e}),{}),u=[],c=[],l={},d={};null!=n&&(l=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));var f=Object.keys(s);f.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=II(e),a=(0,C.Z)(r,3),i=a[0],o=a[2],u=s[i];if(null!=u.outputs){var c=u.outputs.indexOf(o);if(-1!==c){var l="".concat(i,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))})),0===Object.keys(d).length?f.forEach((function(e){var t=s[e];0===t.children.length&&c.push(t)})):Object.keys(d).forEach((function(e){var t=II(e),n=(0,C.Z)(t,1)[0],r=s[n];null!=r&&(r.signatureKey=d[e],c.push(r))})),Object.keys(l).length>0?Object.keys(l).forEach((function(e){var t=II(e),n=(0,C.Z)(t,1)[0],r=s[n];r&&(r.signatureKey=l[e],u.push(r))})):u=a;var h={};null!=e.library&&null!=e.library.function&&(h=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var p={nodes:s,inputs:u,outputs:c,weights:i,placeholders:a,signature:n,functions:h};return o.length>0&&(p.initNodes=o),p}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=xI(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.slice(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=XI(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=XI(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=oN(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=oN(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=YI(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=YI(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=iN(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=iN(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=JI(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=JI(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=uN(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=uN(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=aN(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=aN(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=sN(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=sN(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=tN(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=tN(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=nN(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=nN(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=eN(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=eN(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var i=[],o=[];e.signature.inputArg.forEach((function(e){var t=II(e.name),n=(0,C.Z)(t,1)[0],r={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:QI(e.type),type:"dtype"}},children:[]};r.signatureKey=e.name,i.push(r),a[n]=r})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=II(e),i=(0,C.Z)(r,3),o=i[0],s=i[2],u=a[o];if(null!=u.outputs){var c=u.outputs.indexOf(s);if(-1!==c){var l="".concat(o,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=II(s[e.name]),n=(0,C.Z)(t,2),r=n[0],i=n[1],u=a[r];null!=u&&(u.defaultOutput=i,o.push(u))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function KI(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=Ln().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function XI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?KI(a.s,r):n}function JI(e,t,n){var r=e[t];return r?r.b:n}function YI(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function QI(e){switch("string"===typeof e&&(e=gI[e]),e){case gI.DT_FLOAT:case gI.DT_HALF:return"float32";case gI.DT_INT32:case gI.DT_INT64:case gI.DT_INT8:case gI.DT_UINT8:return"int32";case gI.DT_BOOL:return"bool";case gI.DT_DOUBLE:return"float32";case gI.DT_STRING:return"string";default:return null}}function eN(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function tN(e,t,n){var r=e[t];return r&&r.type?QI(r.type):n}function nN(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return QI(e)})):n}function rN(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function aN(e,t,n){var r=e[t];return r&&r.shape?rN(r.shape):n}function iN(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function oN(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return KI(e,r)})):n}function sN(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return rN(e)})):n}function uN(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var cN=function(){function e(t,n,r){var a=this;Vt(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return Zt(e,[{key:"getInput",value:function(e){return wI(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return wI(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return YI(this.node.rawAttrs,e,t);if(null!=n.s)return XI(this.node.rawAttrs,e,t);if(null!=n.b)return JI(this.node.rawAttrs,e,t);if(null!=n.shape)return aN(this.node.rawAttrs,e,t);if(null!=n.type)return tN(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return iN(this.node.rawAttrs,e,t);if(null!=n.list.s)return oN(this.node.rawAttrs,e,t);if(null!=n.list.shape)return sN(this.node.rawAttrs,e,t);if(null!=n.list.b)return uN(this.node.rawAttrs,e,t);if(null!=n.list.type)return nN(this.node.rawAttrs,e,t)}return t}}]),e}(),lN=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(kI("a",e,t,n),kI("b",e,t,n))];case"AddN":return[r.addN(kI("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(kI("a",e,t,n),kI("b",e,t,n))];case"Mul":return[r.mul(kI("a",e,t,n),kI("b",e,t,n))];case"RealDiv":case"Div":return[r.div(kI("a",e,t,n),kI("b",e,t,n))];case"DivNoNan":return[r.divNoNan(kI("a",e,t,n),kI("b",e,t,n))];case"FloorDiv":return[r.floorDiv(kI("a",e,t,n),kI("b",e,t,n))];case"Sub":return[r.sub(kI("a",e,t,n),kI("b",e,t,n))];case"Minimum":return[r.minimum(kI("a",e,t,n),kI("b",e,t,n))];case"Maximum":return[r.maximum(kI("a",e,t,n),kI("b",e,t,n))];case"Pow":return[r.pow(kI("a",e,t,n),kI("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(kI("a",e,t,n),kI("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},dN=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(kI("x",e,t,n))];case"Acos":return[r.acos(kI("x",e,t,n))];case"Acosh":return[r.acosh(kI("x",e,t,n))];case"Asin":return[r.asin(kI("x",e,t,n))];case"Asinh":return[r.asinh(kI("x",e,t,n))];case"Atan":return[r.atan(kI("x",e,t,n))];case"Atan2":return[r.atan2(kI("x",e,t,n),kI("y",e,t,n))];case"Atanh":return[r.atanh(kI("x",e,t,n))];case"Ceil":return[r.ceil(kI("x",e,t,n))];case"Complex":return[r.complex(kI("real",e,t,n),kI("imag",e,t,n))];case"Cos":return[r.cos(kI("x",e,t,n))];case"Cosh":return[r.cosh(kI("x",e,t,n))];case"Elu":return[r.elu(kI("x",e,t,n))];case"Erf":return[r.erf(kI("x",e,t,n))];case"Exp":return[r.exp(kI("x",e,t,n))];case"Expm1":return[r.expm1(kI("x",e,t,n))];case"Floor":return[r.floor(kI("x",e,t,n))];case"Log":return[r.log(kI("x",e,t,n))];case"Log1p":return[r.log1p(kI("x",e,t,n))];case"Imag":return[r.imag(kI("x",e,t,n))];case"Neg":return[r.neg(kI("x",e,t,n))];case"Reciprocal":return[r.reciprocal(kI("x",e,t,n))];case"Real":return[r.real(kI("x",e,t,n))];case"Relu":return[r.relu(kI("x",e,t,n))];case"Round":return[r.round(kI("x",e,t,n))];case"Selu":return[r.selu(kI("x",e,t,n))];case"Sigmoid":return[r.sigmoid(kI("x",e,t,n))];case"Sin":return[r.sin(kI("x",e,t,n))];case"Sign":return[r.sign(kI("x",e,t,n))];case"Sinh":return[r.sinh(kI("x",e,t,n))];case"Softplus":return[r.softplus(kI("x",e,t,n))];case"Sqrt":return[r.sqrt(kI("x",e,t,n))];case"Square":return[r.square(kI("x",e,t,n))];case"Tanh":return[r.tanh(kI("x",e,t,n))];case"Tan":return[r.tan(kI("x",e,t,n))];case"ClipByValue":return[r.clipByValue(kI("x",e,t,n),kI("clipValueMin",e,t,n),kI("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(kI("x",e,t,n))];case"Rsqrt":return[r.rsqrt(wI(e.inputNames[0],t,n))];case"Prod":return[r.prod(kI("x",e,t,n),kI("axes",e,t,n))];case"LeakyRelu":return[r.leakyRelu(kI("x",e,t,n),kI("alpha",e,t,n))];case"Prelu":return[r.prelu(kI("x",e,t,n),kI("alpha",e,t,n))];case"IsNan":return[r.isNaN(wI(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(wI(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(wI(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function fN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){tn(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],i=t[r];tn(a<0||i<0||a===i,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function hN(e){return"number"!==typeof e&&!e.some((function(e){return e<0}))}function pN(e,t,n){var r=vN(e,n),a=!hN(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=vN(e.shape,r)})),!hN(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function vN(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var mN=function(){function e(t,n,r,a,i,o,s){Vt(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=oc(0),Xu(this.idTensor)}return Zt(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),fN(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,Xu(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return Ps([],[0].concat(this.elementShape));var r=this.readMany(e);return fN(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Fh(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return Ps([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return fN(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),jl(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,(0,Le.Z)(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,Jh(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,o=[];qu((function(){t=Ml(t,[1,r,i]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,e[s],i];o[s]=Ml(Ul(t,u,c),n.elementShape)}return o}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)}}]),e}(),gN=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;Vt(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));fN(n,e.shape,"TensorList shape mismatch: "),Xu(e)})),this.idTensor=oc(0),this.maxNumElements=a,Xu(this.idTensor)}return Zt(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e((0,Le.Z)(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));fN(e,this.elementShape,"TensorList shape mismatch: ");var a=pN(this.elementShape,this.tensors,e);return qu((function(){var e=n.tensors.map((function(e){return Ml(e,a)}));return Fh(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=pN(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,fN(r.shape,e,"TensorList shape mismatch: "),Ml(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(fN(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Xu(e),this.tensors.push(e)}},{key:"resize",value:function(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(t));if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error("TensorListResize input size ".concat(t," is greater maxNumElement ").concat(this.maxNumElements,"."));var n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(var r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));fN(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=pN(this.elementShape,this.tensors,t);return Ml(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));fN(this.elementShape,t.shape,"TensorList shape mismatch: "),Xu(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));fN(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=pN(this.elementShape,this.tensors,n);return 0===e.length?Ps([],[0].concat(a)):qu((function(){var t=e.map((function(e){return Ml(r.tensors[e],a)}));return Fh(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));fN(this.elementShape,t,"TensorList shape mismatch: ");var r=pN(this.elementShape,this.tensors,t);return 0===this.size()?Ps([],[0].concat(r)):qu((function(){var e=n.tensors.map((function(e){return Ml(e,r)}));return jl(e,0)}))}}]),e}();function yN(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));fN(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=Jh(e);return new gN(a,t,r)}function bN(e,t,n,r){return new gN([],e,t,r)}function xN(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,(0,Le.Z)(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new gN([],n,e.dtype,r),o=Jh(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}function kN(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=vN(e.shape.slice(1),n),o=0===r?0:e.size/r,s=qu((function(){var n=[];e=Ml(e,[1,r,o]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,t[s],o];n[s]=Ml(Ul(e,u,c),i)}return e.dispose(),n})),u=new gN([],n,e.dtype,t.length),c=0;c<s.length;c++)u.setItem(c,s[c]);return u}var wN=function(){var e=me(ye().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,x,k,w,S,I,N,T,C,E,_,A,R,O,D,P,F,M,L,$,j,z,B,U,V,W,G,Z,H,q,K,X,J,Y,Q,ee,te,ne,re,ae,ie,oe,se,ue,ce,le,de,fe,he,pe,ve,me,ge,be,xe,ke,we,Se,Ie,Ne,Te,Ce,Ee,_e,Ae,Re,Oe,De,Pe,Fe,Me,Le,$e,je,ze,Be,Ue,Ve,We,Ge,Ze,He,qe,Ke,Xe,Je,Ye,Qe;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?19:"Switch"===e.t0?21:"Merge"===e.t0?32:"Enter"===e.t0?37:"Exit"===e.t0?41:"NextIteration"===e.t0?44:"TensorArrayV3"===e.t0?47:"TensorArrayWriteV3"===e.t0?57:"TensorArrayReadV3"===e.t0?63:"TensorArrayGatherV3"===e.t0?67:"TensorArrayScatterV3"===e.t0?72:"TensorArrayConcatV3"===e.t0?78:"TensorArraySplitV3"===e.t0?82:"TensorArraySizeV3"===e.t0?88:"TensorArrayCloseV3"===e.t0?91:"TensorListSetItem"===e.t0?95:"TensorListGetItem"===e.t0?101:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?107:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?114:"TensorListGather"===e.t0?122:"TensorListStack"===e.t0?128:"TensorListFromTensor"===e.t0?134:"TensorListConcat"===e.t0||"TensorListConcatV2"===e.t0?140:"TensorListPushBack"===e.t0?145:"TensorListPopBack"===e.t0?150:"TensorListSplit"===e.t0?155:"TensorListLength"===e.t0?161:"TensorListResize"===e.t0?164:170;break;case 3:return a=kI("thenBranch",t,n,r),i=kI("elseBranch",t,n,r),o=kI("cond",t,n,r),s=kI("args",t,n,r),e.next=9,o.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[i].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 15:return e.delegateYield(ye().mark((function e(){var a,i,o,s,u,c,l,d;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=kI("body",t,n,r),i=kI("cond",t,n,r),o=kI("args",t,n,r),e.next=5,r.functionMap[i].executeFunctionAsync(o,r.tensorArrayMap,r.tensorListMap);case 5:return s=e.sent,u=o.map((function(e){return e.id})),e.next=9,s[0].data();case 9:c=e.sent,s.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||e.dispose()})),l=o,d=ye().mark((function e(){var t,n,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l,e.next=3,r.functionMap[a].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 3:return l=e.sent,n=l.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[i].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 8:return o=e.sent,e.next=11,o[0].data();case 11:c=e.sent,o.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!c[0]){e.next=17;break}return e.delegateYield(d(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:l});case 18:case"end":return e.stop()}}),e)}))(),"t1",16);case 16:if("object"!==typeof(u=e.t1)){e.next=19;break}return e.abrupt("return",u.v);case 19:return c=kI("pred",t,n,r),e.abrupt("return",[EI(c)]);case 21:return l=kI("pred",t,n,r),(d=kI("data",t,n,r)).kept||(d=EI(d)),e.next=26,l.data();case 26:if(!e.sent[0]){e.next=30;break}e.t2=[void 0,d],e.next=31;break;case 30:e.t2=[d,void 0];case 31:return e.abrupt("return",e.t2);case 32:if(f=t.inputNames.find((function(e){return void 0!==wI(e,n,r)})),!f){e.next=36;break}return h=wI(f,n,r),e.abrupt("return",[EI(h)]);case 36:return e.abrupt("return",void 0);case 37:return p=kI("frameName",t,n,r),v=kI("tensor",t,n,r),r.enterFrame(p),e.abrupt("return",[EI(v)]);case 41:return m=kI("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[EI(m)]);case 44:return g=kI("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[EI(g)]);case 47:return y=kI("size",t,n,r),b=kI("dtype",t,n,r),x=kI("elementShape",t,n,r),k=kI("dynamicSize",t,n,r),w=kI("clearAfterRead",t,n,r),S=kI("identicalElementShapes",t,n,r),I=kI("name",t,n,r),N=new mN(I,b,y,x,S,k,w),r.addTensorArray(N),e.abrupt("return",[N.idTensor,oc(1)]);case 57:return T=kI("tensorArrayId",t,n,r),C=kI("index",t,n,r),E=kI("tensor",t,n,r),(_=r.getTensorArray(T.id)).write(C,E),e.abrupt("return",[_.idTensor]);case 63:return A=kI("tensorArrayId",t,n,r),R=kI("index",t,n,r),O=r.getTensorArray(A.id),e.abrupt("return",[O.read(R)]);case 67:return D=kI("tensorArrayId",t,n,r),P=kI("indices",t,n,r),F=kI("dtype",t,n,r),M=r.getTensorArray(D.id),e.abrupt("return",[M.gather(P,F)]);case 72:return L=kI("tensorArrayId",t,n,r),$=kI("indices",t,n,r),j=kI("tensor",t,n,r),(z=r.getTensorArray(L.id)).scatter($,j),e.abrupt("return",[z.idTensor]);case 78:return B=kI("tensorArrayId",t,n,r),U=r.getTensorArray(B.id),V=kI("dtype",t,n,r),e.abrupt("return",[U.concat(V)]);case 82:return W=kI("tensorArrayId",t,n,r),G=kI("tensor",t,n,r),Z=kI("lengths",t,n,r),(H=r.getTensorArray(W.id)).split(Z,G),e.abrupt("return",[H.idTensor]);case 88:return q=kI("tensorArrayId",t,n,r),K=r.getTensorArray(q.id),e.abrupt("return",[oc(K.size(),"int32")]);case 91:return X=kI("tensorArrayId",t,n,r),(J=r.getTensorArray(X.id)).clearAndClose(),e.abrupt("return",[J.idTensor]);case 95:return Y=kI("tensorListId",t,n,r),Q=kI("index",t,n,r),ee=kI("tensor",t,n,r),(te=r.getTensorList(Y.id)).setItem(Q,ee),e.abrupt("return",[te.idTensor]);case 101:return ne=kI("tensorListId",t,n,r),re=kI("index",t,n,r),ae=kI("elementShape",t,n,r),ie=kI("elementDType",t,n,r),oe=r.getTensorList(ne.id),e.abrupt("return",[oe.getItem(re,ae,ie)]);case 107:return se=kI("indices",t,n,r),ue=kI("tensor",t,n,r),ce=kI("elementShape",t,n,r),le=kI("numElements",t,n,r),de=xN(ue,se,ce,le),r.addTensorList(de),e.abrupt("return",[de.idTensor]);case 114:return fe=kI("elementShape",t,n,r),he=kI("elementDType",t,n,r),pe="TensorListReserve"===t.op?"numElements":"maxNumElements",ve=kI(pe,t,n,r),me="TensorListReserve"===t.op?-1:ve,ge=bN(fe,he,0,me),r.addTensorList(ge),e.abrupt("return",[ge.idTensor]);case 122:return be=kI("tensorListId",t,n,r),xe=kI("indices",t,n,r),ke=kI("elementShape",t,n,r),we=kI("elementDType",t,n,r),Se=r.getTensorList(be.id),e.abrupt("return",[Se.gather(xe,we,ke)]);case 128:return Ie=kI("tensorListId",t,n,r),Ne=kI("elementShape",t,n,r),Te=kI("elementDType",t,n,r),Ce=kI("numElements",t,n,r),Ee=r.getTensorList(Ie.id),e.abrupt("return",[Ee.stack(Ne,Te,Ce)]);case 134:return _e=kI("tensor",t,n,r),Ae=kI("elementShape",t,n,r),Re=kI("elementDType",t,n,r),Oe=yN(_e,Ae,Re),r.addTensorList(Oe),e.abrupt("return",[Oe.idTensor]);case 140:return De=kI("tensorListId",t,n,r),Pe=r.getTensorList(De.id),Fe=kI("dtype",t,n,r),Me=kI("elementShape",t,n,r),e.abrupt("return",[Pe.concat(Fe,Me)]);case 145:return Le=kI("tensorListId",t,n,r),$e=kI("tensor",t,n,r),(je=r.getTensorList(Le.id)).pushBack($e),e.abrupt("return",[je.idTensor]);case 150:return ze=kI("tensorListId",t,n,r),Be=kI("elementShape",t,n,r),Ue=kI("elementDType",t,n,r),Ve=r.getTensorList(ze.id),e.abrupt("return",[Ve.popBack(Be,Ue)]);case 155:return We=kI("tensor",t,n,r),Ge=kI("elementShape",t,n,r),Ze=kI("lengths",t,n,r),He=kN(We,Ze,Ge),r.addTensorList(He),e.abrupt("return",[He.idTensor]);case 161:return qe=kI("tensorListId",t,n,r),Ke=r.getTensorList(qe.id),e.abrupt("return",[oc(Ke.size(),"int32")]);case 164:return Xe=kI("tensorListId",t,n,r),Je=kI("size",t,n,r),Ye=r.getTensorList(Xe.id),Qe=Ye.resize(Je),r.addTensorList(Qe),e.abrupt("return",[Qe.idTensor]);case 170:throw TypeError("Node type ".concat(t.op," is not implemented"));case 171:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function SN(e,t,n){var r=kI("fusedOps",e,t,n),a=(0,C.Z)(r,2),i=a[0],o=a[1],s="biasadd"===i,u=!s,c="prelu"===o,l="fusedbatchnorm"===i,d=kI("numArgs",e,t,n);if(s){if(c&&2!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&s&&1!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var f=kI("strides",e,t,n),h=CI(e,t,n),p=kI("dataFormat",e,t,n).toUpperCase(),v=kI("dilations",e,t,n),m=kI("args",e,t,n),g=(0,C.Z)(m,2),y=g[0],b=g[1];return u&&(b=y,y=void 0),{stride:f,pad:h,dataFormat:p,dilations:v,biasArg:y,preluArg:b,activationFunc:o,leakyreluAlpha:kI("leakyreluAlpha",e,t,n)}}var IN=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Conv1D":var a=kI("stride",e,t,n),i=kI("pad",e,t,n),o=kI("dataFormat",e,t,n).toUpperCase(),s=kI("dilation",e,t,n);return[r.conv1d(kI("x",e,t,n),kI("filter",e,t,n),a,i,o,s)];case"Conv2D":var u=kI("strides",e,t,n),c=CI(e,t,n),l=kI("dataFormat",e,t,n).toUpperCase(),d=kI("dilations",e,t,n);return[r.conv2d(kI("x",e,t,n),kI("filter",e,t,n),[u[1],u[2]],c,l,[d[1],d[2]])];case"_FusedConv2D":var f=SN(e,t,n),h=f.stride,p=f.pad,v=f.dataFormat,m=f.dilations,g=f.biasArg,y=f.preluArg,b=f.activationFunc,x=f.leakyreluAlpha;return[r.fused.conv2d({x:kI("x",e,t,n),filter:kI("filter",e,t,n),strides:[h[1],h[2]],pad:p,dataFormat:v,dilations:[m[1],m[2]],bias:g,activation:b,preluActivationWeights:y,leakyreluAlpha:x})];case"FusedDepthwiseConv2dNative":var k=SN(e,t,n),S=k.stride,I=k.pad,N=k.dataFormat,T=k.dilations,C=k.biasArg,E=k.preluArg,_=k.activationFunc,A=k.leakyreluAlpha;return[r.fused.depthwiseConv2d({x:kI("x",e,t,n),filter:kI("filter",e,t,n),strides:[S[1],S[2]],pad:I,dataFormat:N,dilations:[T[1],T[2]],bias:C,activation:_,preluActivationWeights:E,leakyreluAlpha:A})];case"Conv2DBackpropInput":case"Conv2dTranspose":var R=kI("outputShape",e,t,n),O=kI("strides",e,t,n),D=CI(e,t,n);return[r.conv2dTranspose(kI("x",e,t,n),kI("filter",e,t,n),R,[O[1],O[2]],D)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var P=kI("strides",e,t,n),F=CI(e,t,n),M=kI("dilations",e,t,n),L=kI("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(kI("input",e,t,n),kI("filter",e,t,n),[P[1],P[2]],F,L,[M[1],M[2]])];case"Conv3D":var $=kI("strides",e,t,n),j=kI("pad",e,t,n),z=kI("dataFormat",e,t,n).toUpperCase(),B=kI("dilations",e,t,n);return[r.conv3d(kI("x",e,t,n),kI("filter",e,t,n),[$[1],$[2],$[3]],j,z,[B[1],B[2],B[3]])];case"AvgPool":var U=kI("strides",e,t,n),V=kI("pad",e,t,n),W=kI("kernelSize",e,t,n);return[r.avgPool(kI("x",e,t,n),[W[1],W[2]],[U[1],U[2]],V)];case"MaxPool":var G=kI("strides",e,t,n),Z=kI("pad",e,t,n),H=kI("kernelSize",e,t,n);return[r.maxPool(kI("x",e,t,n),[H[1],H[2]],[G[1],G[2]],Z)];case"MaxPoolWithArgmax":var q=kI("strides",e,t,n),K=kI("pad",e,t,n),X=kI("kernelSize",e,t,n),J=kI("includeBatchInIndex",e,t,n),Y=r.maxPoolWithArgmax(kI("x",e,t,n),[X[1],X[2]],[q[1],q[2]],K,J),Q=Y.result,ee=Y.indexes;return[Q,ee];case"AvgPool3D":var te=kI("strides",e,t,n),ne=kI("pad",e,t,n),re=kI("kernelSize",e,t,n);return[r.avgPool3d(kI("x",e,t,n),[re[1],re[2],re[3]],[te[1],te[2],te[3]],ne)];case"MaxPool3D":var ae=kI("strides",e,t,n),ie=kI("pad",e,t,n),oe=kI("kernelSize",e,t,n);return[r.maxPool3d(kI("x",e,t,n),[oe[1],oe[2],oe[3]],[ae[1],ae[2],ae[3]],ie)];case"Dilation2D":var se=kI("strides",e,t,n),ue=kI("pad",e,t,n),ce=kI("dilations",e,t,n),le=se[1],de=se[2],fe=ce[1],he=ce[2];return[r.dilation2d(kI("x",e,t,n),kI("filter",e,t,n),[le,de],ue,[fe,he],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},NN=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Fill":var a=kI("shape",e,t,n),i=kI("dtype",e,t,n),o=kI("value",e,t,n);return[r.fill(a,o,i)];case"LinSpace":var s=kI("start",e,t,n),u=kI("stop",e,t,n),c=kI("num",e,t,n);return[r.linspace(s,u,c)];case"Multinomial":var l=kI("logits",e,t,n),d=kI("numSamples",e,t,n),f=kI("seed",e,t,n);return[r.multinomial(l,d,f)];case"OneHot":var h=kI("indices",e,t,n),p=kI("depth",e,t,n),v=kI("onValue",e,t,n),m=kI("offValue",e,t,n),g=kI("dtype",e,t,n);return[r.oneHot(h,p,v,m,g)];case"Ones":return[r.ones(kI("shape",e,t,n),kI("dtype",e,t,n))];case"OnesLike":return[r.onesLike(kI("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(kI("shape",e,t,n),kI("dtype",e,t,n),kI("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(kI("shape",e,t,n),kI("minval",e,t,n),kI("maxval",e,t,n),kI("dtype",e,t,n))];case"Range":var y=kI("start",e,t,n),b=kI("stop",e,t,n),x=kI("step",e,t,n);return[r.range(y,b,x,kI("dtype",e,t,n))];case"TruncatedNormal":var k=kI("shape",e,t,n),S=kI("mean",e,t,n),I=kI("stdDev",e,t,n),N=kI("seed",e,t,n);return[r.truncatedNormal(k,S,I,kI("dtype",e,t,n),N)];case"Zeros":return[r.zeros(kI("shape",e,t,n),kI("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(kI("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function TN(e,t,n){return{boxes:kI("boxes",e,t,n),scores:kI("scores",e,t,n),maxOutputSize:kI("maxOutputSize",e,t,n),iouThreshold:kI("iouThreshold",e,t,n),scoreThreshold:kI("scoreThreshold",e,t,n),softNmsSigma:kI("softNmsSigma",e,t,n)}}var CN=function(){var e=me(ye().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,x,k,S,I,N,T,C,E,_,A,R=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=R.length>4&&void 0!==R[4]?R[4]:w,e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?4:"NonMaxSuppressionV4"===e.t0?9:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?15:"Where"===e.t0?20:"ListDiff"===e.t0?27:28;break;case 4:return o=TN(t,n,r),s=o.boxes,u=o.scores,c=o.maxOutputSize,l=o.iouThreshold,d=o.scoreThreshold,f=o.softNmsSigma,e.next=7,i.image.nonMaxSuppressionWithScoreAsync(s,u,c,l,d,f);case 7:return h=e.sent,e.abrupt("return",[h.selectedIndices,h.selectedScores]);case 9:return p=TN(t,n,r),v=p.boxes,m=p.scores,g=p.maxOutputSize,y=p.iouThreshold,b=p.scoreThreshold,x=kI("padToMaxOutputSize",t,n,r),e.next=13,i.image.nonMaxSuppressionPaddedAsync(v,m,g,y,b,x);case 13:return k=e.sent,e.abrupt("return",[k.selectedIndices,k.validOutputs]);case 15:return S=TN(t,n,r),I=S.boxes,N=S.scores,T=S.maxOutputSize,C=S.iouThreshold,E=S.scoreThreshold,e.next=18,i.image.nonMaxSuppressionAsync(I,N,T,C,E);case 18:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 20:return _=i.cast(kI("condition",t,n,r),"bool"),e.next=23,i.whereAsync(_);case 23:return e.t2=e.sent,A=[e.t2],_.dispose(),e.abrupt("return",A);case 27:return e.abrupt("return",i.setdiff1dAsync(kI("x",t,n,r),kI("y",t,n,r)));case 28:throw TypeError("Node type ".concat(t.op," is not implemented"));case 29:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),EN=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"LowerBound":var a=kI("sortedSequence",e,t,n),i=kI("values",e,t,n);return[r.lowerBound(a,i)];case"TopKV2":var o=kI("x",e,t,n),s=kI("k",e,t,n),u=kI("sorted",e,t,n),c=r.topk(o,s,u);return[c.values,c.indices];case"UpperBound":var l=kI("sortedSequence",e,t,n),d=kI("values",e,t,n);return[r.upperBound(l,d)];case"Unique":var f=kI("x",e,t,n),h=r.unique(f);return[h.values,h.indices];case"UniqueV2":var p=kI("x",e,t,n),v=kI("axis",e,t,n),m=r.unique(p,v);return[m.values,m.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},_N=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var a=kI("default",e,t,n);return[wI(e.name,t,n)||a];case"Placeholder":return[wI(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":var i=kI("x",e,t,n);return[EI(i)];case"IdentityN":return kI("x",e,t,n).map((function(e){return EI(e)}));case"Snapshot":var o=kI("x",e,t,n);return[EI(o)];case"Shape":return[r.tensor1d(kI("x",e,t,n).shape,"int32")];case"ShapeN":return kI("x",e,t,n).map((function(e){return r.tensor1d(e.shape)}));case"Size":return[r.scalar(kI("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(kI("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":var s=kI("x",e,t,n),u=kI("data",e,t,n),c=kI("message",e,t,n),l=kI("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(c);for(var d=0;d<u.length;d++)console.log(Array.prototype.slice.call(u[d].dataSync()).slice(0,l));return[s];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},AN=function(){function e(t,n){Vt(this,e),this.keyDType=t,this.valueDType=n,this.handle=oc(0),this.tensorMap=new Map,Xu(this.handle)}return Zt(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return oc(this.size(),"int32")}},{key:"import",value:function(){var e=me(ye().mark((function e(t,n){var r,a=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",qu((function(){var e=Jh(n),t=r.length,i=e.length;tn(t===i,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(i," ")+"elements."}));for(var o=0;o<t;o++){var s=r[o],u=e[o];Xu(u),a.tensorMap.set(s,u)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=me(ye().mark((function e(t,n){var r,a=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",qu((function(){for(var e=[],t=0;t<r.length;t++){var i=r[t],o=a.findWithDefault(i,n);e.push(o)}return Fh(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}(),RN=function(){var e=me(ye().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,h,p,v,m,g,y;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"InitializeTable"===e.t0||"InitializeTableV2"===e.t0||"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?13:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?21:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?29:32;break;case 3:if(null==(i=a.getHashTableHandleByName(t.name))){e.next=8;break}return e.abrupt("return",[i]);case 8:return o=kI("keyDType",t,n,r),s=kI("valueDType",t,n,r),u=new AN(o,s),a.addHashTable(t.name,u),e.abrupt("return",[u.handle]);case 13:return c=kI("tableHandle",t,n,r,a),l=kI("keys",t,n,r),d=kI("values",t,n,r),f=a.getHashTableById(c.id),e.next=19,f.import(l,d);case 19:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 21:return h=kI("tableHandle",t,n,r,a),p=kI("keys",t,n,r),v=kI("defaultValue",t,n,r),m=a.getHashTableById(h.id),e.next=27,m.find(p,v);case 27:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 29:return g=kI("tableHandle",t,n,r,a),y=a.getHashTableById(g.id),e.abrupt("return",[y.tensorSize()]);case 32:throw TypeError("Node type ".concat(t.op," is not implemented"));case 33:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),ON=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"ResizeBilinear":var a=kI("images",e,t,n),i=kI("size",e,t,n),o=kI("alignCorners",e,t,n),s=kI("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(a,[i[0],i[1]],o,s)];case"ResizeNearestNeighbor":var u=kI("images",e,t,n),c=kI("size",e,t,n),l=kI("alignCorners",e,t,n),d=kI("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(u,[c[0],c[1]],l,d)];case"CropAndResize":var f=kI("image",e,t,n),h=kI("boxes",e,t,n),p=kI("boxInd",e,t,n),v=kI("cropSize",e,t,n),m=kI("method",e,t,n),g=kI("extrapolationValue",e,t,n);return[r.image.cropAndResize(f,h,p,v,m,g)];case"ImageProjectiveTransformV3":var y=kI("images",e,t,n),b=kI("transforms",e,t,n),x=kI("outputShape",e,t,n),k=kI("fillValue",e,t,n),S=kI("interpolation",e,t,n),I=kI("fillMode",e,t,n);return[r.image.transform(y,b,S.toLowerCase(),I.toLowerCase(),k,x)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},DN=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Equal":return[r.equal(kI("a",e,t,n),kI("b",e,t,n))];case"NotEqual":return[r.notEqual(kI("a",e,t,n),kI("b",e,t,n))];case"Greater":return[r.greater(kI("a",e,t,n),kI("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(kI("a",e,t,n),kI("b",e,t,n))];case"Less":return[r.less(kI("a",e,t,n),kI("b",e,t,n))];case"LessEqual":return[r.lessEqual(kI("a",e,t,n),kI("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(kI("a",e,t,n),kI("b",e,t,n))];case"LogicalNot":return[r.logicalNot(kI("a",e,t,n))];case"LogicalOr":return[r.logicalOr(kI("a",e,t,n),kI("b",e,t,n))];case"Select":case"SelectV2":return[r.where(kI("condition",e,t,n),kI("a",e,t,n),kI("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},PN=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(kI("a",e,t,n),kI("b",e,t,n),kI("transposeA",e,t,n),kI("transposeB",e,t,n))];case"Einsum":return[r.einsum.apply(r,[kI("equation",e,t,n)].concat((0,Le.Z)(kI("tensors",e,t,n))))];case"Transpose":return[r.transpose(kI("x",e,t,n),kI("perm",e,t,n))];case"_FusedMatMul":var a=kI("fusedOps",e,t,n),i=(0,C.Z)(a,2),o=i[0],s=i[1],u="biasadd"===o,c="prelu"===s,l=kI("numArgs",e,t,n),d=kI("leakyreluAlpha",e,t,n);if(u){if(c&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var f=kI("args",e,t,n),h=(0,C.Z)(f,2),p=h[0],v=h[1];return[r.fused.matMul({a:kI("a",e,t,n),b:kI("b",e,t,n),transposeA:kI("transposeA",e,t,n),transposeB:kI("transposeB",e,t,n),bias:p,activation:s,preluActivationWeights:v,leakyreluAlpha:d})];case"MatrixBandPart":return[r.linalg.bandPart(kI("a",e,t,n),kI("numLower",e,t,n),kI("numUpper",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},FN=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(kI("x",e,t,n),kI("axis",e,t,n),kI("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(kI("x",e,t,n),kI("mean",e,t,n),kI("variance",e,t,n),kI("offset",e,t,n),kI("scale",e,t,n),kI("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(kI("x",e,t,n),kI("radius",e,t,n),kI("bias",e,t,n),kI("alpha",e,t,n),kI("beta",e,t,n))];case"Softmax":return[r.softmax(kI("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(kI("x",e,t,n))];case"SparseToDense":return[r.sparseToDense(kI("sparseIndices",e,t,n),kI("outputShape",e,t,n),kI("sparseValues",e,t,n),kI("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},MN=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"RaggedGather":var a=r.raggedGather(kI("paramsNestedSplits",e,t,n),kI("paramsDenseValues",e,t,n),kI("indices",e,t,n),kI("outputRaggedRank",e,t,n)),i=a.outputNestedSplits,o=a.outputDenseValues;return i.concat(o);case"RaggedRange":var s=r.raggedRange(kI("starts",e,t,n),kI("limits",e,t,n),kI("splits",e,t,n)),u=s.rtNestedSplits,c=s.rtDenseValues;return[u,c];case"RaggedTensorToTensor":return[r.raggedTensorToTensor(kI("shape",e,t,n),kI("values",e,t,n),kI("defaultValue",e,t,n),kI("rowPartitionTensors",e,t,n),kI("rowPartitionTypes",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},LN=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Max":var a=kI("axis",e,t,n),i=kI("keepDims",e,t,n);return[r.max(kI("x",e,t,n),a,i)];case"Mean":var o=kI("axis",e,t,n),s=kI("keepDims",e,t,n);return[r.mean(kI("x",e,t,n),o,s)];case"Min":var u=kI("axis",e,t,n),c=kI("keepDims",e,t,n);return[r.min(kI("x",e,t,n),u,c)];case"Sum":var l=kI("axis",e,t,n),d=kI("keepDims",e,t,n);return[r.sum(kI("x",e,t,n),l,d)];case"All":var f=kI("axis",e,t,n),h=kI("keepDims",e,t,n);return[r.all(kI("x",e,t,n),f,h)];case"Any":var p=kI("axis",e,t,n),v=kI("keepDims",e,t,n);return[r.any(kI("x",e,t,n),p,v)];case"ArgMax":var m=kI("axis",e,t,n);return[r.argMax(kI("x",e,t,n),m)];case"ArgMin":var g=kI("axis",e,t,n);return[r.argMin(kI("x",e,t,n),g)];case"Prod":var y=kI("axis",e,t,n),b=kI("keepDims",e,t,n);return[r.prod(kI("x",e,t,n),y,b)];case"Cumprod":var x=kI("axis",e,t,n),k=kI("exclusive",e,t,n),S=kI("reverse",e,t,n);return[r.cumprod(kI("x",e,t,n),x,k,S)];case"Cumsum":var I=kI("axis",e,t,n),N=kI("exclusive",e,t,n),T=kI("reverse",e,t,n);return[r.cumsum(kI("x",e,t,n),I,N,T)];case"Bincount":var C=kI("x",e,t,n),E=kI("weights",e,t,n),_=kI("size",e,t,n);return[r.bincount(C,E,_)];case"DenseBincount":var A=kI("x",e,t,n),R=kI("weights",e,t,n),O=kI("size",e,t,n),D=kI("binaryOutput",e,t,n);return[r.denseBincount(A,R,O,D)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},$N=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"ConcatV2":case"Concat":var a=kI("n",e,t,n),i=kI("axis",e,t,n),o=kI("tensors",e,t,n);return o=o.slice(0,a),[r.concat(o,i)];case"Gather":var s=kI("x",e,t,n),u=kI("indices",e,t,n);return[r.gather(s,r.cast(u,"int32"),0)];case"GatherV2":var c=kI("axis",e,t,n),l=kI("batchDims",e,t,n),d=kI("x",e,t,n),f=kI("indices",e,t,n);return[r.gather(d,r.cast(f,"int32"),c,l)];case"Reverse":for(var h=kI("dims",e,t,n),p=[],v=0;v<h.length;v++)h[v]&&p.push(v);var m=kI("x",e,t,n);return[r.reverse(m,p)];case"ReverseV2":var g=kI("axis",e,t,n),y=kI("x",e,t,n);return[r.reverse(y,g)];case"Slice":var b=kI("begin",e,t,n),x=kI("size",e,t,n);return[r.slice(kI("x",e,t,n),b,x)];case"StridedSlice":var k=kI("begin",e,t,n),S=kI("end",e,t,n),I=kI("strides",e,t,n),N=kI("beginMask",e,t,n),T=kI("endMask",e,t,n),C=kI("ellipsisMask",e,t,n),E=kI("newAxisMask",e,t,n),_=kI("shrinkAxisMask",e,t,n),A=kI("x",e,t,n);return[r.stridedSlice(A,k,S,I,N,T,C,E,_)];case"Pack":return qu((function(){var a=kI("axis",e,t,n),i=kI("tensors",e,t,n),o=i[0].shape,s=r.squeeze(i[0]).shape,u=i.map((function(e){var t=on(e.shape,o);if(!t&&!on(r.squeeze(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,o)}));return[r.stack(u,a)]}));case"Unpack":var R=kI("axis",e,t,n),O=kI("tensor",e,t,n);return r.unstack(O,R);case"Tile":var D=kI("reps",e,t,n);return[r.tile(kI("x",e,t,n),D)];case"Split":case"SplitV":var P=kI("axis",e,t,n),F=kI("numOrSizeSplits",e,t,n),M=kI("x",e,t,n);return r.split(M,F,P);case"ScatterNd":var L=kI("indices",e,t,n),$=kI("values",e,t,n),j=kI("shape",e,t,n);return[r.scatterND(L,$,j)];case"GatherNd":var z=kI("x",e,t,n),B=kI("indices",e,t,n);return[r.gatherND(z,B)];case"SparseToDense":var U=kI("sparseIndices",e,t,n),V=kI("outputShape",e,t,n),W=kI("sparseValues",e,t,n),G=kI("defaultValue",e,t,n);return[r.sparseToDense(U,W,V,W.dtype===G.dtype?G:r.cast(G,W.dtype))];case"TensorScatterUpdate":var Z=kI("indices",e,t,n),H=kI("values",e,t,n),q=kI("tensor",e,t,n);return[r.tensorScatterUpdate(q,Z,H)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},jN=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"SparseFillEmptyRows":var a=r.sparse.sparseFillEmptyRows(kI("indices",e,t,n),kI("values",e,t,n),kI("denseShape",e,t,n),kI("defaultValue",e,t,n)),i=a.outputIndices,o=a.outputValues,s=a.emptyRowIndicator,u=a.reverseIndexMap;return[i,o,s,u];case"SparseReshape":var c=r.sparse.sparseReshape(kI("inputIndices",e,t,n),kI("inputShape",e,t,n),kI("newShape",e,t,n)),l=c.outputIndices,d=c.outputShape;return[l,d];case"SparseSegmentMean":var f=r.sparse.sparseSegmentMean(kI("data",e,t,n),kI("indices",e,t,n),kI("segmentIds",e,t,n));return[f];case"SparseSegmentSum":var h=r.sparse.sparseSegmentSum(kI("data",e,t,n),kI("indices",e,t,n),kI("segmentIds",e,t,n));return[h];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},zN=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"FFT":return[r.fft(kI("x",e,t,n))];case"IFFT":return[r.ifft(kI("x",e,t,n))];case"RFFT":return[r.rfft(kI("x",e,t,n))];case"IRFFT":return[r.irfft(kI("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},BN=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(kI("input",e,t,n),kI("pattern",e,t,n),kI("rewrite",e,t,n),kI("replaceGlobal",e,t,n))];case"StringNGrams":var a=r.string.stringNGrams(kI("data",e,t,n),kI("dataSplits",e,t,n),kI("separator",e,t,n),kI("nGramWidths",e,t,n),kI("leftPad",e,t,n),kI("rightPad",e,t,n),kI("padWidth",e,t,n),kI("preserveShortSequences",e,t,n)),i=a.nGrams,o=a.nGramsSplits;return[i,o];case"StringSplit":var s=r.string.stringSplit(kI("input",e,t,n),kI("delimiter",e,t,n),kI("skipEmpty",e,t,n)),u=s.indices,c=s.values,l=s.shape;return[u,c,l];case"StringToHashBucketFast":var d=r.string.stringToHashBucketFast(kI("input",e,t,n),kI("numBuckets",e,t,n));return[d];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}},UN=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:w;switch(e.op){case"Cast":return[r.cast(kI("x",e,t,n),kI("dtype",e,t,n))];case"ExpandDims":var a=kI("axis",e,t,n);return[r.expandDims(kI("x",e,t,n),a)];case"Squeeze":var i=kI("axis",e,t,n);return[r.squeeze(kI("x",e,t,n),i)];case"Reshape":return[r.reshape(kI("x",e,t,n),kI("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(kI("x",e,t,n),kI("padding",e,t,n),kI("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(kI("x",e,t,n),kI("padding",e,t,n),kI("constantValue",e,t,n))];case"SpaceToBatchND":var o=kI("blockShape",e,t,n),s=kI("paddings",e,t,n);return[r.spaceToBatchND(kI("x",e,t,n),o,s)];case"BatchToSpaceND":var u=kI("blockShape",e,t,n),c=kI("crops",e,t,n);return[r.batchToSpaceND(kI("x",e,t,n),u,c)];case"DepthToSpace":var l=kI("blockSize",e,t,n),d=kI("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(kI("x",e,t,n),l,d)];case"BroadcastTo":return[r.broadcastTo(kI("x",e,t,n),kI("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(kI("s0",e,t,n),kI("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function VN(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:qu,i=function(e,t,n){switch(e.category){case"arithmetic":return a((function(){return lN(e,t,n)}));case"basic_math":return a((function(){return dN(e,t,n)}));case"control":return wN(e,t,n);case"convolution":return a((function(){return IN(e,t,n)}));case"creation":return a((function(){return NN(e,t,n)}));case"dynamic":return CN(e,t,n);case"evaluation":return a((function(){return EN(e,t,n)}));case"image":return a((function(){return ON(e,t,n)}));case"graph":return a((function(){return _N(e,t,n)}));case"logical":return a((function(){return DN(e,t,n)}));case"matrices":return a((function(){return PN(e,t,n)}));case"normalization":return a((function(){return FN(e,t,n)}));case"ragged":return a((function(){return MN(e,t,n)}));case"reduction":return a((function(){return LN(e,t,n)}));case"slice_join":return a((function(){return $N(e,t,n)}));case"sparse":return a((function(){return jN(e,t,n)}));case"spectral":return a((function(){return zN(e,t,n)}));case"string":return a((function(){return BN(e,t,n)}));case"transformation":return a((function(){return UN(e,t,n)}));case"hash_table":return RN(e,t,n,r);case"custom":var i=xI(e.op);if(i&&i.customExecutor)return i.customExecutor(new cN(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return On(i)?i.then((function(e){return[].concat(e)})):[].concat(i)}var WN=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0;Vt(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return Zt(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function GN(e,t,n,r){var a=new Set,i=[],o=null,s=null,u=new Set,c=new Set(Object.keys(e).map((function(e){return TI(e)[0]})));r=r||[];for(var l=new Set(r.map((function(e){return TI(e.name)[0]}))),d=(0,Le.Z)(t);d.length>0;){var f=d.pop();(JN(f)||YN(f)||QN(f))&&null==o&&(s=(o=f).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(f.name),null==n[f.name]&&(c.has(f.name)||l.has(f.name)||(0!==f.inputs.length?f.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),d.push(e))})):i.push(f.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}function ZN(e,t){var n=t.usedNodes,r=t.inputs,a=Object.keys(r).map((function(e){return TI(e)[0]})).map((function(t){return e.nodes[t]})),i=e.initNodes||[],o=function(e){return n.has("string"===typeof e?e:e.name)};function s(e){return(0,Le.Z)(new Map(e.map((function(e){return[e.name,e]}))).values())}var u,c=s([].concat((0,Le.Z)(a),(0,Le.Z)(e.weights),(0,Le.Z)(i))).filter(o),l=s([].concat((0,Le.Z)(c),(0,Le.Z)(Object.values(e.nodes)))).filter(o),d=new Map(l.map((function(e){return[e.name,e]}))),f={},h=Ut(l);try{for(h.s();!(u=h.n()).done;){var p=u.value;f[p.name]=f[p.name]||0;var v,m=Ut(p.children);try{for(m.s();!(v=m.n()).done;){var g=v.value;o(g)||(f[g.name]=Number.POSITIVE_INFINITY),f[g.name]=(f[g.name]||0)+1}}catch(Rme){m.e(Rme)}finally{m.f()}}}catch(Rme){h.e(Rme)}finally{h.f()}for(var y=Object.entries(f).filter((function(e){return 0===(0,C.Z)(e,2)[1]})).map((function(e){return(0,C.Z)(e,1)[0]})),b=(0,Le.Z)(y);y.length>0;){var x,k=y.pop(),w=Ut(d.get(k).children.filter(o));try{for(w.s();!(x=w.n()).done;){var S=x.value;0===--f[S.name]&&(b.push(S.name),y.push(S.name))}}catch(Rme){w.e(Rme)}finally{w.f()}}var I=function(e,t){var n=new Map(e.map((function(e){return[e.name,e]}))),r=t.map((function(e){return e.name})),a=new Set(r);for(;r.length>0;){var i,o=r.pop(),s=Ut(n.get(o).children);try{for(s.s();!(i=s.n()).done;){var u=i.value;n.has(u.name)&&!a.has(u.name)&&(a.add(u.name),r.push(u.name))}}catch(Rme){s.e(Rme)}finally{s.f()}}var c=e.filter((function(e){return a.has(e.name)}));return c}(b.map((function(e){return d.get(e)})),c);return function(e,t){var n,r=new Map(e.map((function(e,t){return[e.name,t]}))),a=new Set(t.map((function(e){return e.name}))),i=function(e){return a.has("string"===typeof e?e:e.name)},o=new Set(e.map((function(e){return e.name}))),s=function(e){return o.has("string"===typeof e?e:e.name)},u=Ut(e);try{for(u.s();!(n=u.n()).done;){var c,l=n.value,d=Ut(l.children.filter(s));try{for(d.s();!(c=d.n()).done;){var f=c.value;if(!r.has(f.name))throw new HN("Child ".concat(f.name," of node ").concat(l.name," is unreachable."));if(r.get(l.name)>r.get(f.name))throw new HN("Node ".concat(l.name," is scheduled to run after its child ").concat(f.name,"."))}}catch(Rme){d.e(Rme)}finally{d.f()}if(!i(l)){var h,p=Ut(l.inputs);try{for(p.s();!(h=p.n()).done;){var v=h.value;if(!r.has(v.name))throw new HN("Input ".concat(v.name," of node ").concat(l.name," is unreachable."));if(r.get(v.name)>r.get(l.name))throw new HN("Node ".concat(l.name," is scheduled to run before its input ").concat(v.name,"."))}}catch(Rme){p.e(Rme)}finally{p.f()}}}}catch(Rme){u.e(Rme)}finally{u.f()}}(I,c),I}var HN=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,"NodesExecutionOrderError: ".concat(e))}return Zt(n)}(uy(Error));var qN=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),KN=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),XN=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function JN(e){return qN.has(e.op)}function YN(e){return KN.has(e.op)}function QN(e){return XN.has(e.op)}var eT=function(){function e(t,n){var r=this;Vt(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return Zt(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,(0,Le.Z)(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}},{key:"compile",value:function(e,t){var n=GN(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(i,"]"));if(r.length>0){var o=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}var u=ZN(this.graph,n),c=function(e){for(var t=new Map(e.map((function(e,t){return[e.name,t]}))),n=Number.MAX_SAFE_INTEGER,r=e.map((function(e,t){return JN(e)?n:t})),a=function(e){var n=r[t.get(e.name)];return null==n?-1:n},i=e.map((function(e,t){return e.children.map(a).reduce((function(e,t){return Math.max(e,t)}),r[t])})),o=new Map,s=0;s<e.length;++s){var u=i[s];if(u!==n){var c=e[s],l=e[u];o.has(l.name)||o.set(l.name,[]),o.get(l.name).push(c)}}return o}(u);return{orderedNodes:u,nodeLiveUntilMap:c}}},{key:"cloneAndKeepTensor",value:function(e){if(null==e)return null;var t=e.clone();return Xu(t),t}},{key:"cloneTensorList",value:function(e){var t=this;return e?e.map((function(e){return t.cloneAndKeepTensor(e)})):null}},{key:"cloneTensorMap",value:function(e){var t=this;return Object.fromEntries(Object.entries(e).map((function(e){var n=(0,C.Z)(e,2),r=n[0],a=n[1];return[r,t.cloneTensorList(a)]})))}},{key:"execute",value:function(e,t){var n=this;this.disposeIntermediateTensors(),e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[TI(e)[0]]})),i=t.map((function(e){return TI(e)[0]})),o=new Set(i),s=i.map((function(e){return n.graph.nodes[e]}));0===s.length&&(s=this._outputs);var u=this.getCompilationKey(a,s),c=this.compiledMap.get(u);null==c&&(c=this.compile(e,s),this.compiledMap.set(u,c));try{this.keepIntermediateTensors=Ln().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}var l={},d={};return qu((function(){var r=new WN(n.weightMap,l,d,n.functionExecutorMap,n.parseNodeNameCache),a=Object.assign({},n.weightMap);n.keepIntermediateTensors&&(n.clonedTensorsMap=n.cloneTensorMap(n.weightMap)),Object.keys(e).forEach((function(t){var i=TI(t,r),o=(0,C.Z)(i,2),s=o[0],u=[];u[o[1]]=e[t],a[s]=u,n.keepIntermediateTensors&&(n.clonedTensorsMap[s]=n.cloneTensorList(u))}));var i,s=n.getFrozenTensorIds(a),u=c,f=u.orderedNodes,h=u.nodeLiveUntilMap,p=Ut(f);try{for(p.s();!(i=p.n()).done;){var v=i.value;if(!a[v.name]){var m=VN(v,a,r,n._resourceManager);if(On(m))throw new Error("The execution of the op '".concat(v.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[v.name]=m,n.keepIntermediateTensors&&(n.clonedTensorsMap[v.name]=n.cloneTensorList(m)),n.checkTensorForDisposalWithNodeLiveUntilInfo(v,a,r,s,o,h.get(v.name))}}}catch(Rme){p.e(Rme)}finally{p.f()}return null==n.parent&&r.dispose(s),t.map((function(e){return wI(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,i,o){if(!JN(t)&&!i.has(e)){var s,u=Ut(n[e]);try{for(u.s();!(s=u.n()).done;){var c=s.value;null!=c&&(o[c.id]=(o[c.id]||0)+t.children.length)}}catch(Rme){u.e(Rme)}finally{u.f()}var l,d=Ut(t.inputs);try{for(d.s();!(l=d.n()).done;){var f=l.value;if(!JN(f)){var h=SI(f.name,n,r);if(null!=h){var p,v=Ut(h);try{for(v.s();!(p=v.n()).done;){var m=p.value;if(m&&!m.kept&&!a.has(m.id)){var g=o[m.id];1===g?(m.dispose(),delete o[m.id]):null!=g&&o[m.id]--}}}catch(Rme){v.e(Rme)}finally{v.f()}}}}}catch(Rme){d.e(Rme)}finally{d.f()}}}},{key:"checkTensorForDisposalWithNodeLiveUntilInfo",value:function(e,t,n,r,a,i){function o(e){return JN(e)||a.has(e.name)}if(!JN(e)&&null!=i){var s,u=Ut(i);try{for(u.s();!(s=u.n()).done;){var c=s.value;if(!o(c)){var l,d=Ut(SI(c.name,t,n));try{for(d.s();!(l=d.n()).done;){var f=l.value;!f||f.kept||r.has(f.id)||f.dispose()}}catch(Rme){d.e(Rme)}finally{d.f()}}}}catch(Rme){u.e(Rme)}finally{u.f()}}}},{key:"executeAsync",value:function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeIntermediateTensors",value:function(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach((function(e){var t,n=Ut(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r&&!r.isDisposed&&r.dispose()}}catch(Rme){n.e(Rme)}finally{n.f()}})),this.clonedTensorsMap=null)}},{key:"getIntermediateTensors",value:function(){return this.clonedTensorsMap}},{key:"_executeAsync",value:function(){var e=me(ye().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=f.length>2&&void 0!==f[2]&&f[2],a=f.length>3&&void 0!==f[3]?f[3]:{},i=f.length>4&&void 0!==f[4]?f[4]:{},this.disposeIntermediateTensors(),r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=Ln().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}return o=new WN(this.weightMap,a,i,this.functionExecutorMap,this.parseNodeNameCache),this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),e.next=10,this.executeWithControlFlow(t,o,n,r);case 10:return s=e.sent,u=n.map((function(e){return wI(e,s,o)})),c=u.map((function(e){return e.id})),l=Object.keys(t).map((function(e){return t[e].id})),d=new Set([].concat((0,Le.Z)(c),(0,Le.Z)(l),(0,Le.Z)(this.weightIds))),Object.values(s).forEach((function(e){e.forEach((function(e){!e||e.isDisposed||d.has(e.id)||e.dispose()}))})),null==this.parent&&o.dispose(d),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=me(ye().mark((function e(t,n,r){var a,i=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=me(ye().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,x,k,w,S=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),o=i.map((function(e){return S.graph.nodes[TI(e)[0]]})),s=r.map((function(e){return TI(e)[0]})),u=new Set(s),0===(c=s.map((function(e){return S.graph.nodes[e]}))).length&&(c=this._outputs),l=GN(t,c,this.weightMap,this._initNodes),d=l.usedNodes,f=l.missingInputs,h=l.dynamicNode,p=l.syncInputs,v=[].concat((0,Le.Z)(o),(0,Le.Z)(this.graph.weights),(0,Le.Z)(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),m=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=TI(e),r=(0,C.Z)(n,2),a=r[0],i=[];i[r[1]]=t[e],m[a]=i})),g={},y=this.getFrozenTensorIds(m),b={};case 13:if(!(v.length>0)){e.next=19;break}return x=this.processStack(o,v,n,m,b,y,u,g,d),e.next=17,Promise.all(x);case 17:e.next=13;break;case 19:if(null!=h||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((k=c.filter((function(e){return!JN(e)&&!wI(e.name,m,n)})).map((function(e){return e.name}))).length>0)){e.next=25;break}throw w="",null!=h&&(w="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(p,"]")),new Error("Cannot compute the outputs [".concat(k,"] from the provided ")+"inputs [".concat(i,"]. Consider providing the following inputs: ")+"[".concat(f,"]. ").concat(w));case 25:return e.abrupt("return",m);case 26:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,i,o,s,u){for(var c=this,l=[],d=function(){var e=t.pop();n.currentContext=e.contexts;var d="";if("Enter"===e.node.op&&kI("isConstant",e.node,r,n)){var f=II(e.node.name,n),h=(0,C.Z)(f,1);d=h[0]}if(null==r[e.node.name]){var p=VN(e.node,r,n,c._resourceManager);if(!d){var v=II(e.node.name,n),m=(0,C.Z)(v,1);d=m[0]}var g=n.currentContext;On(p)?l.push(p.then((function(l){return r[d]=l,c.keepIntermediateTensors&&(c.clonedTensorsMap[d]=c.cloneTensorList(l)),n.currentContext=g,c.checkTensorForDisposal(d,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u),l}))):(r[d]=p,c.keepIntermediateTensors&&(c.clonedTensorsMap[d]=c.cloneTensorList(p)),c.checkTensorForDisposal(d,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u))}else c.processChildNodes(e.node,t,n,r,a,u)};t.length>0;)d();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,i){e.children.forEach((function(e){var o=II(e.name,n),s=(0,C.Z)(o,1)[0];!a[s]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!wI(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!wI(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=TI(n),i=(0,C.Z)(a,1)[0],o=t.graph.nodes[i];if(o.attrParams.shape&&o.attrParams.shape.value){var s=o.attrParams.shape.value;tn(s.length===r.shape.length&&r.shape.every((function(e,t){return-1===s[t]||s[t]===e})),(function(){return"The shape of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be [".concat(s,"], but was ")+"[".concat(r.shape,"]")}))}o.attrParams.dtype&&o.attrParams.dtype.value&&tn(r.dtype===o.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(o.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t,n,r={};for(var a in e){var i=null===(n=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===n?void 0:n[a];null!=i?r[i.name]=e[a]:r[a]=e[a]}return r}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=TI(e),r=(0,C.Z)(n,1)[0];return null==t.graph.nodes[r]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){var n,r,a=null===(r=null===(n=t._signature)||void 0===n?void 0:n.outputs)||void 0===r?void 0:r[e];return null!=a?a.name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=TI(e),r=(0,C.Z)(n,1)[0];if(!t.graph.nodes[r])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),tT=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Vt(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return Zt(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),nT=function(){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;Vt(this,t),this.modelUrl=n,this.loadOptions=r,this.version="n/a",this.io=a,null==r&&(this.loadOptions={}),this.resourceManager=new tT}return Zt(t,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"modelStructuredOutputKeys",get:function(){return this.structuredOutputKeys}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{var t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for ")+"URL '".concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=this;if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");var t=this.handler.load();return On(t)?t.then((function(t){return e.loadSync(t)})):this.loadSync(t)}},{key:"loadSync",value:function(e){this.artifacts=e;var t=this.artifacts.modelTopology,n=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){var r=this.artifacts.userDefinedMetadata;null!=r.signature&&(n=r.signature),null!=r.structuredOutputKeys&&(this.structuredOutputKeys=r.structuredOutputKeys)}this.signature=n,this.version="".concat(t.versions.producer,".").concat(t.versions.minConsumer);var a=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new eT(qI.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(a),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var i=qI.Instance.transformGraph(e.modelInitializer);this.initializer=new eT(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}},{key:"save",value:function(){var e=me(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(0!==(r=this.io.getSaveHandlers(t)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addStructuredOutputNames",value:function(e){var t=this;if(this.structuredOutputKeys){var n={};return(e instanceof Xo?[e]:e).forEach((function(e,r){return n[t.structuredOutputKeys[r]]=e})),n}return e}},{key:"predict",value:function(e,t){var n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}},{key:"predictAsync",value:function(){var e=me(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.executeAsync(t,this.outputNodes);case 2:return r=e.sent,e.abrupt("return",this.addStructuredOutputNames(r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"normalizeInputs",value:function(e){var t,n=this;if(!(e instanceof Xo)&&!Array.isArray(e)){var r=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=r)for(var a in r){var i=r[a];null!=i.resourceId&&(e[a]=this.resourceIdToCapturedInput[i.resourceId])}return e}e=Array.isArray(e)?e:[e];var o=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+o!==this.inputNodes.length)throw new Error("Input tensor count mismatch, the graph model has ".concat(this.inputNodes.length-o," non-resource placeholders, while there are ").concat(e.length," input tensors provided."));var s=0;return this.inputNodes.reduce((function(t,r){var a,i,o,u=null===(o=null===(i=null===(a=n.signature)||void 0===a?void 0:a.inputs)||void 0===i?void 0:i[r])||void 0===o?void 0:o.resourceId;return t[r]=null!=u?n.resourceIdToCapturedInput[u]:e[s++],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"executeInitializerGraph",value:function(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}},{key:"executeInitializerGraphAsync",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.initializer){e.next=2;break}return e.abrupt("return",[]);case 2:if(null!=this.initializerSignature){e.next=6;break}return e.abrupt("return",this.initializer.executeAsync({},[]));case 6:return e.abrupt("return",this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setResourceIdToCapturedInput",value:function(e){if(this.resourceIdToCapturedInput={},this.initializerSignature)for(var t=this.initializerSignature.outputs,n=Object.keys(t),r=0;r<n.length;r++){var a=t[n[r]];this.resourceIdToCapturedInput[a.resourceId]=e[r]}}},{key:"execute",value:function(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=me(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.resourceIdToCapturedInput){e.next=6;break}return e.t0=this,e.next=4,this.executeInitializerGraphAsync();case 4:e.t1=e.sent,e.t0.setResourceIdToCapturedInput.call(e.t0,e.t1);case 6:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=10,this.executor.executeAsync(t,n);case 10:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Ku(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}]),t}();function rT(e){return aT.apply(this,arguments)}function aT(){return aT=me(ye().mark((function t(n){var r,a,i,o=arguments;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},a=o.length>2&&void 0!==o[2]?o[2]:e,null!=n){t.next=4;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 4:return null==r&&(r={}),r.fromTFHub&&"string"===typeof n&&(n=iT(n)),i=new nT(n,r,a),t.next=9,i.load();case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)}))),aT.apply(this,arguments)}function iT(e){return e.endsWith("/")||(e+="/"),"".concat(e).concat("model.json").concat("?tfjs-format=file")}function oT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"===typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(lT(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var s=e[o],u=oT(s,t,n,r);i[o]=u}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function sT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cT;return uT(e,t)}function uT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(lT(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=e.map((function(e){return e[r]})),o=uT(a,t,n);i[r]=o};for(var s in r)o(s);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function cT(e){return null===e?null:lT(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function lT(e){var t=!1;Ln().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof n(4977).StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"===typeof e&&!(e instanceof Xo)&&!(e instanceof Promise)&&!t)}function dT(e){return function(e,t){return oT(e,t)}(e,fT)}function fT(e){return e instanceof Xo?{value:e.clone(),recurse:!1}:lT(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var hT=function(){function e(t){if(Vt(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return Zt(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=Ut(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(Rme){n.e(Rme)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),pT=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.call(this,n.INITIAL_CAPACITY)}return Zt(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){jx(Lo(n.prototype),"isFull",this).call(this)&&this.expand(),jx(Lo(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){jx(Lo(n.prototype),"isFull",this).call(this)&&this.expand(),jx(Lo(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(hT);function vT(e){return new xT(e)}function mT(e,t){return new RT(e,t)}pT.INITIAL_CAPACITY=32;var gT,yT=function(){function e(){Vt(this,e)}return Zt(e,[{key:"toArray",value:function(){var e=me(ye().mark((function e(){var t,n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=me(ye().mark((function e(){var t,n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new CT(this,e)}},{key:"filter",value:function(e){return new NT(this,e)}},{key:"map",value:function(e){return new TT(this,e)}},{key:"mapAsync",value:function(e){return new ET(this,e)}},{key:"serialMapAsync",value:function(e){return new ET(this,e).serial()}},{key:"flatmap",value:function(e){return new AT(this,e)}},{key:"forEachAsync",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new IT(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cT,r=this.rowMajorBatch(e,t);return r.map((function(e){return sT(e,n)}))}},{key:"concatenate",value:function(e,t){return new RT(new bT([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new ST(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new wT(this,e)}},{key:"prefetch",value:function(e){return new OT(this,e)}},{key:"shuffle",value:function(e,t){return new DT(this,e,t)}},{key:"serial",value:function(){return new kT(this)}}]),e}(),bT=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).items=e,r.trav=0,r}return Zt(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:dT(t),done:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(yT),xT=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).nextFn=e,r}return Zt(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(yT),kT=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return Zt(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=me(ye().mark((function e(){var t=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(yT),wT=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Zt(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=me(ye().mark((function e(){var t=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:Ku(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(yT),ST=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return Zt(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(yT),IT=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Vt(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=i,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Zt(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=me(ye().mark((function e(){var t=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=me(ye().mark((function e(){var t,n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(yT),NT=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Zt(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=me(ye().mark((function e(){var t=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:Ku(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(yT),TT=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Zt(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=me(ye().mark((function e(){var t,n,r,a,i,o,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=fs(t.value),r=this.transform(t.value),a=fs(r),i=Ut(n);try{for(i.s();!(o=i.n()).done;)ds(s=o.value,a)||s.dispose()}catch(Rme){i.e(Rme)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(yT),CT=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Zt(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=me(ye().mark((function e(){var t=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(yT),ET=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Zt(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=me(ye().mark((function e(){var t,n,r,a,i,o,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=fs(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=fs(r),i=Ut(n);try{for(i.s();!(o=i.n()).done;)ds(s=o.value,a)||s.dispose()}catch(Rme){i.e(Rme)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(yT),_T=function(e){Mo(n,e);var t=Bo(n);function n(){var e;return Vt(this,n),(e=t.call(this)).outputQueue=new pT,e.lastRead=Promise.resolve({value:null,done:!1}),e}return Zt(n,[{key:"next",value:function(){var e=me(ye().mark((function e(){var t=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(yT),AT=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Zt(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=me(ye().mark((function e(){var t,n,r,a,i,o,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=fs(t.value),r=this.transform(t.value),a=fs(r),this.outputQueue.pushAll(r),i=Ut(n);try{for(i.s();!(o=i.n()).done;)ds(s=o.value,a)||s.dispose()}catch(Rme){i.e(Rme)}finally{i.f()}return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(_T),RT=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return Zt(n,[{key:"summary",value:function(){return"".concat("TODO: fill in upstream of chained summaries"," -> Chained")}},{key:"next",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(yT);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(gT||(gT={}));var OT=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new hT(r),a}return Zt(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(yT),DT=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a){var i;return Vt(this,n),(i=t.call(this,e,r)).upstream=e,i.windowSize=r,i.upstreamExhausted=!1,i.random=Xf.alea(a||Co().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return Zt(n,[{key:"next",value:function(){var e=me(ye().mark((function e(){var t=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=me(ye().mark((function e(){var t,n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(OT),PT=function(){function e(){Vt(this,e),this.size=null}return Zt(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return tn(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),FT(me(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,MT));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,FT(me(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,FT(me(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return qu((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return FT(me(ye().mark((function n(){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return qu((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return FT(me(ye().mark((function n(){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return FT(me(ye().mark((function n(){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,FT(me(ye().mark((function t(){var r;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=vT(me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",mT(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,FT(me(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+"bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=Xf.alea(t||Co().toString());return FT(me(ye().mark((function t(){var i;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.int32(),n&&(i+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,i.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,FT(me(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function FT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){Mo(a,n);var r=Bo(a);function a(){var e;return Vt(this,a),(e=r.apply(this,arguments)).size=t,e}return Zt(a,[{key:"iterator",value:function(){var t=me(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(PT))}function MT(e){return null===e?null:function(e){return null==e||null===(t=e)||"object"!==typeof t&&"function"!==typeof t||Array.isArray(e)||"object"===typeof e&&e instanceof Xo||Ao(e);var t}(e[0])?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof Xo?Fh(e):Ps(e)}(e),recurse:!1}:{value:null,recurse:!0}}PT.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function LT(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&tn("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var $T=ep,jT=function(e){Mo(n,e);var t=Bo(n);function n(){var e;return Vt(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new Ht(je(e),Zu()),e}return Zt(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,Ln().get("IS_NODE")&&Ji("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&yn(n[0])){var a=n.map((function(e){return Eo(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;return"complex64"===n?um(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):function(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}(this.data.get(e).values,n)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return _o(e)}));return Uu(e.shape,e.dtype,n)}catch(Kte){throw new Error("Failed to decode encoded string bytes into utf-8")}return Uu(e.shape,e.dtype,t)}},{key:"makeOutput",value:function(e,t,n){return Zu().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Co(),t(),r=Co()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){LT([e],"where");var t=this.readSync(e.dataId);return $T(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return jx(Lo(n.prototype),"epsilon",this).call(this)}}]),n}(qt);jT.nextDataId=0;function zT(e){return function(t,n,r){for(var a=vn(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}function BT(e,t,n){return UT(e,zT(t),n)}function UT(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;LT(s,e);var u,c=o,l=c.data.get(s.dataId).values;if("string"===s.dtype){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=Nm(l)}else u=l;var d=n||s.dtype,f=t(u,d,i);return c.makeTensorInfo(s.shape,d,f)}}Ju("cpu",(function(){return new jT}),1);var VT=BT($r,(function(e){return e>=0?e:Math.exp(e)-1})),WT={kernelName:$r,backendName:"cpu",kernelFunc:VT};function GT(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var ZT={kernelName:ta,backendName:"cpu",kernelFunc:GT};function HT(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha;LT([a],"leakyRelu");for(var o=an(a.shape),s=n.data.get(a.dataId).values,u=pn("float32",o),c=0;c<s.length;c++)u[c]=s[c]<0?i*s[c]:s[c];return n.makeTensorInfo(a.shape,"float32",u)}var qT={kernelName:sa,backendName:"cpu",kernelFunc:HT};function KT(e){return function(t,n,r,a,i){var o=xc(t,n),s=o.length,u=Sn(o),c=pn(i,an(o)),l=t.length,d=n.length,f=Sn(t),h=Sn(n),p=yc(t,o),v=yc(n,o);if(p.length+v.length===0)for(var m=0;m<c.length;++m)c[m]=e(r[m%r.length],a[m%a.length]);else for(var g=function(t){var n=Rn(t,s,u),i=n.slice(-l);p.forEach((function(e){return i[e]=0}));var o=An(i,l,f),m=n.slice(-d);v.forEach((function(e){return m[e]=0}));var g=An(m,d,h);c[t]=e(r[o],a[g])},y=0;y<c.length;++y)g(y);return[c,o]}}var XT=KT((function(e,t){return e<0?t*e:e}));function JT(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;LT([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=XT(r.shape,a.shape,i,o,"float32"),u=(0,C.Z)(s,2),c=u[0],l=u[1];return n.makeTensorInfo(l,"float32",c)}var YT={kernelName:Ua,backendName:"cpu",kernelFunc:JT},QT=BT(Xa,(function(e){return Math.max(0,e)})),eC={kernelName:Xa,backendName:"cpu",kernelFunc:QT},tC=BT(ni,(function(e){return Math.min(Math.max(0,e),6)})),nC={kernelName:ni,backendName:"cpu",kernelFunc:tC},rC=zT((function(e){return 1/(1+Math.exp(-e))})),aC=BT(vi,(function(e){return 1/(1+Math.exp(-e))})),iC={kernelName:vi,backendName:"cpu",kernelFunc:aC};function oC(e,t,n,r,a){if("linear"===n)return GT({inputs:{x:t},backend:e});if("relu"===n)return QT({inputs:{x:t},backend:e});if("elu"===n)return VT({inputs:{x:t},backend:e});if("relu6"===n)return tC({inputs:{x:t},backend:e});if("prelu"===n)return JT({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return HT({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return aC({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function sC(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}var uC={kernelName:hr,backendName:"cpu",kernelFunc:sC};function cC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=cC(e,t,"float32"),a=cC(e,t,"float32");return sC({inputs:{real:r,imag:a},backend:e})}var i=Cn(an(t),n);return e.makeTensorInfo(t,n,i)}function lC(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var dC={kernelName:qa,backendName:"cpu",kernelFunc:lC};function fC(e,t,n,r){if("int32"===r)return[t,"int32",Int32Array.from(e)];if("bool"===r){var a=To([0],n),i=KT((function(e,t){return e!==t?1:0}))(t,[],e,a,"bool"),o=(0,C.Z)(i,2),s=o[0];return[o[1],"bool",s]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function hC(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return GT({inputs:{x:a},backend:n});var o=cC(n,a.shape,a.dtype),s=hC({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=sC({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}if("complex64"===a.dtype){var c=lC({inputs:{input:a},backend:n}),l=hC({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),l}if(!mn(a.dtype,i)){var d=GT({inputs:{x:a},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:i}}var f=fC(n.data.get(a.dataId).values,a.shape,a.dtype,i),h=(0,C.Z)(f,3),p=h[0],v=h[1],m=h[2];return n.makeTensorInfo(p,v,m)}var pC={kernelName:lr,backendName:"cpu",kernelFunc:hC};function vC(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,s=a.b,u=i;LT([o,s],e);var c=u.data.get(o.dataId).values,l=u.data.get(s.dataId).values,d="string"===o.dtype?Nm(c):c,f="string"===o.dtype?Nm(l):l,h=r||o.dtype,p=t(o.shape,s.shape,d,f,h),v=(0,C.Z)(p,2),m=v[0],g=v[1];return u.makeTensorInfo(g,h,m)}:function(e){var a=e.inputs,i=e.backend,o=a.a,s=a.b,u=i;if("complex64"===o.dtype||"complex64"===s.dtype){var c=hC({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),l=u.data.get(c.dataId),d=l.complexTensorInfos.real,f=l.complexTensorInfos.imag,h=u.data.get(d.dataId).values,p=u.data.get(f.dataId).values,v=hC({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),m=u.data.get(v.dataId),g=m.complexTensorInfos.real,y=m.complexTensorInfos.imag,b=u.data.get(g.dataId).values,x=u.data.get(y.dataId).values,k=n(o.shape,s.shape,h,p,b,x),w=(0,C.Z)(k,3),S=w[0],I=w[1],N=w[2],T=u.makeTensorInfo(N,"float32",S),E=u.makeTensorInfo(N,"float32",I),_=sC({inputs:{real:T,imag:E},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(T),u.disposeIntermediateTensorInfo(E),_}var A=u.data.get(o.dataId).values,R=u.data.get(s.dataId).values,O=r||o.dtype,D=t(o.shape,s.shape,A,R,O),P=(0,C.Z)(D,2),F=P[0],M=P[1];return u.makeTensorInfo(M,O,F)}}function mC(e){return function(t,n,r,a,i,o){var s=xc(t,n),u=an(s),c=s.length,l=Sn(s),d=pn("float32",u),f=pn("float32",u),h=yc(t,s),p=yc(n,s),v=um(r,a),m=um(i,o),g=t.length,y=Sn(t),b=n.length,x=Sn(n);if(h.length+p.length===0)for(var k=0;k<d.length;k++){var w=k%v.length,S=k%m.length,I=e(v[2*w],v[2*w+1],m[2*S],m[2*S+1]);d[k]=I.real,f[k]=I.imag}else for(var N=function(t){var n=Rn(t,c,l),r=n.slice(-g);h.forEach((function(e){return r[e]=0}));var a=An(r,g,y),i=n.slice(-b);p.forEach((function(e){return i[e]=0}));var o=An(i,b,x),s=e(v[2*a],v[2*a+1],m[2*o],m[2*o+1]);d[t]=s.real,f[t]=s.imag},T=0;T<d.length;T++)N(T);return[d,f,s]}}var gC=KT((function(e,t){return e+t})),yC=mC((function(e,t,n,r){return{real:e+n,imag:t+r}})),bC=vC(Gn,gC,yC),xC={kernelName:Gn,backendName:"cpu",kernelFunc:bC};function kC(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=an(a.shape),s=dn(i,o),u=an(s);tn(o===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old ")+"shape (".concat(a.shape,") has ").concat(o," elements. The new shape and old ")+"shape must have the same number of elements."})),n.incRef(a.dataId);var c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){var l=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;l.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var wC={kernelName:Ja,backendName:"cpu",kernelFunc:kC};function SC(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;LT([a,i],"matMul");var u=a.shape.length,c=i.shape.length,l=o?a.shape[u-2]:a.shape[u-1],d=s?i.shape[c-1]:i.shape[c-2],f=o?a.shape[u-1]:a.shape[u-2],h=s?i.shape[c-2]:i.shape[c-1],p=a.shape.slice(0,-2),v=i.shape.slice(0,-2),m=an(p),g=an(v),y=xc(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([f,h]);tn(l===d,(function(){return"Error in matMul: inner shapes (".concat(l,") and (")+"".concat(d,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(i.shape," and transposeA=").concat(o)+" and transposeB=".concat(s," must match.")}));for(var b=s?[g,h,d]:[g,d,h],x=kC({inputs:{x:a},backend:n,attrs:{shape:o?[m,l,f]:[m,f,l]}}),k=kC({inputs:{x:i},backend:n,attrs:{shape:b}}),w=o?x.shape[1]:x.shape[2],S=o?x.shape[2]:x.shape[1],I=s?k.shape[1]:k.shape[2],N=Math.max(m,g),T=n.data.get(x.dataId).values,E=n.data.get(k.dataId).values,_=Sn(x.shape),A=Sn(k.shape),R=o?[_[0],1,_[1]]:[_[0],_[1],1],O=(0,C.Z)(R,3),D=O[0],P=O[1],F=O[2],M=s?[1,A[1],A[0]]:[A[1],1,A[0]],L=(0,C.Z)(M,3),$=L[0],j=L[1],z=L[2],B=S*I,U=Uu([N,S,I],x.dtype),V=U.values,W=n.blockSize,G=0;G<N;G++)for(var Z=G%m,H=G%g,q=0;q<S;q+=W)for(var K=Math.min(q+W,S),X=0;X<I;X+=W)for(var J=Math.min(X+W,I),Y=0;Y<w;Y+=W)for(var Q=Math.min(Y+W,w),ee=q;ee<K;ee++)for(var te=X;te<J;te++){for(var ne=0,re=Y;re<Q;re++){ne+=T[Z*D+ee*P+re*F]*E[re*$+te*j+H*z]}V[G*B+(ee*I+te)]+=ne}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(y,U.dtype,U.values)}var IC={kernelName:or,backendName:"cpu",kernelFunc:SC};var NC={kernelName:qi,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,s=a.a,u=a.b,c=a.bias,l=a.preluActivationWeights,d=o.transposeA,f=o.transposeB,h=o.activation,p=o.leakyreluAlpha,v=[];t=SC({inputs:{a:s,b:u},attrs:{transposeA:d,transposeB:f},backend:i}),c&&(n=bC({inputs:{a:t,b:c},backend:i}),v.push(t),t=n),h&&(r=oC(i,t,h,l,p),v.push(t),t=r);for(var m=0,g=v;m<g.length;m++){var y=g[m];i.disposeIntermediateTensorInfo(y)}return t}};function TC(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var CC={kernelName:Un,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;LT(t,"abs");var r=new Float32Array(an(t.shape));return r=TC(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}},EC=BT(Vn,(function(e){return Math.acos(e)})),_C={kernelName:Vn,backendName:"cpu",kernelFunc:EC},AC=BT(Wn,(function(e){return Math.acosh(e)})),RC={kernelName:Wn,backendName:"cpu",kernelFunc:AC};var OC={kernelName:Zn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;LT(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),i=Uu(r[0].shape,r[0].dtype),o=i.values,s=0;s<r.length;s++)for(var u=a[s],c=0;c<o.length;c++)o[c]+=u[c];return n.makeTensorInfo(i.shape,i.dtype,i.values)}};function DC(e,t,n,r,a){for(var i=t.length,o=an(t),s=Sn(t),u=Sn(a),c=pn(n,an(a)),l=0;l<o;++l){for(var d=Rn(l,i,s),f=new Array(d.length),h=0;h<f.length;h++)f[h]=d[r[h]];c[An(f,i,u)]=e[l]}return c}function PC(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;LT(a,"transpose");for(var o=a.shape.length,s=new Array(o),u=0;u<s.length;u++)s[u]=a.shape[i[u]];var c=DC(r.data.get(a.dataId).values,a.shape,a.dtype,i,s);return{dataId:r.write(c,s,a.dtype),shape:s,dtype:a.dtype}}var FC={kernelName:zi,backendName:"cpu",kernelFunc:PC};var MC={kernelName:Hn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;LT(a,"all");var s=fn(i,a.shape),u=s,c=Od(u,a.shape.length),l=a;null!=c&&(l=PC({inputs:{x:a},backend:n,attrs:{perm:c}}),u=Pd(u.length,a.shape.length)),Rd("all",u,l.shape.length);for(var d=_d(l.shape,u),f=(0,C.Z)(d,2),h=f[0],p=an(f[1]),v=Cn(an(h),l.dtype),m=n.data.get(l.dataId).values,g=0;g<v.length;++g){for(var y=g*p,b=m[y],x=0;x<p;++x){var k=m[y+x];b=b&&k}v[g]=b}null!=c&&n.disposeIntermediateTensorInfo(l);var w=n.makeTensorInfo(h,l.dtype,v);if(o){var S=kC({inputs:{x:w},backend:n,attrs:{shape:Ad(h,s)}});return n.disposeIntermediateTensorInfo(w),S}return w}};var LC={kernelName:qn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;LT(a,"any");var s=fn(i,a.shape),u=s,c=Od(u,a.shape.length),l=a;null!=c&&(l=PC({inputs:{x:a},backend:n,attrs:{perm:c}}),u=Pd(u.length,a.shape.length)),Rd("any",u,l.shape.length);for(var d=_d(l.shape,u),f=(0,C.Z)(d,2),h=f[0],p=an(f[1]),v=Cn(an(h),l.dtype),m=n.data.get(l.dataId).values,g=0;g<v.length;++g){for(var y=g*p,b=m[y],x=0;x<p;++x){var k=m[y+x];b=b||k}v[g]=b}null!=c&&n.disposeIntermediateTensorInfo(l);var w=n.makeTensorInfo(h,l.dtype,v);if(o){var S=kC({inputs:{x:w},backend:n,attrs:{shape:Ad(h,s)}});return n.disposeIntermediateTensorInfo(w),S}return w}};var $C={kernelName:Kn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;LT(a,"argMax");var o=fn(i,a.shape),s=Od(o,a.shape.length),u=a,c=[];null!=s&&(u=PC({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=Pd(o.length,u.shape.length)),Rd("argMax",o=[o[0]],u.shape.length);for(var l=_d(u.shape,o),d=(0,C.Z)(l,2),f=d[0],h=d[1],p=Cn(an(f),"int32"),v=an(h),m=n.data.get(u.dataId).values,g=0;g<p.length;++g){for(var y=g*v,b=m[y],x=0,k=0;k<v;++k){var w=m[y+k];w>b&&(b=w,x=k)}p[g]=x}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",p)}};var jC={kernelName:Xn,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;LT(a,"argMin");var o=fn(i,a.shape),s=Od(o,a.shape.length),u=a,c=[];null!=s&&(u=PC({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=Pd(o.length,u.shape.length)),Rd("argMin",o=[o[0]],u.shape.length);for(var l=_d(u.shape,o),d=(0,C.Z)(l,2),f=d[0],h=d[1],p=Cn(an(f),"int32"),v=an(h),m=n.data.get(u.dataId).values,g=0;g<p.length;++g){for(var y=g*v,b=m[y],x=0,k=0;k<v;++k){var w=m[y+k];w<b&&(b=w,x=k)}p[g]=x}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",p)}},zC=BT(Jn,(function(e){return Math.asin(e)})),BC={kernelName:Jn,backendName:"cpu",kernelFunc:zC},UC=BT(Yn,(function(e){return Math.asinh(e)})),VC={kernelName:Yn,backendName:"cpu",kernelFunc:UC},WC=BT(Qn,(function(e){return Math.atan(e)})),GC={kernelName:Qn,backendName:"cpu",kernelFunc:WC},ZC=KT((function(e,t){return Math.atan2(e,t)})),HC=vC(tr,ZC),qC={kernelName:tr,backendName:"cpu",kernelFunc:HC},KC=BT(er,(function(e){return Math.atanh(e)})),XC={kernelName:er,backendName:"cpu",kernelFunc:KC};function JC(e,t,n,r,a,i){for(var o=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,c=a.dilationWidth,l=a.effectiveFilterHeight,d=a.effectiveFilterWidth,f=a.padInfo.top,h=a.padInfo.left,p="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Uu(a.outShape,n),m=v.values,g=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var k=x*g,w=x*r[0],S=0;S<a.inChannels;++S)for(var I=0;I<a.outHeight;++I)for(var N=I*o-f,T=Math.max(0,N),C=Math.min(a.inHeight,l+N),E=k+I*y,_=0;_<a.outWidth;++_){for(var A=_*s-h,R=Math.max(0,A),O=Math.min(a.inWidth,d+A),D=p,P=0,F=0,M=T;M<C;M+=u){for(var L=w+M*r[1],$=R;$<O;$+=c){var j=e[L+$*r[2]+S];"max"===i&&j>D?D=j:"avg"===i&&(P+=j,F++)}if(isNaN(D))break}m[E+_*b+S]="avg"===i?P/F:D}return v}function YC(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Uu(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,v=Uu(t,n,e),m=0;m<r.batchSize;++m)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.outHeight;++y){for(var b=y*s-h,x=b;x<0;)x+=c;for(var k=Math.min(r.inHeight,d+b),w=0;w<r.outWidth;++w){for(var S=w*u-p,I=S;I<0;)I+=l;for(var N=Math.min(r.inWidth,f+S),T=Number.NEGATIVE_INFINITY,C=-1,E=x;E<k;E+=c)for(var _=E-b,A=I;A<N;A+=l){var R=A-S,O=v.get(m,E,A,g);O>T&&(T=O,C=a?i?((m*r.inHeight+E)*r.inWidth+A)*r.inChannels+g:(E*r.inWidth+A)*r.inChannels+g:_*f+R)}o.set(C,m,y,w,g)}}return o}function QC(e,t,n,r,a,i){for(var o=a.strideDepth,s=a.strideHeight,u=a.strideWidth,c=a.dilationDepth,l=a.dilationHeight,d=a.dilationWidth,f=a.effectiveFilterDepth,h=a.effectiveFilterHeight,p=a.effectiveFilterWidth,v=a.padInfo.front,m=a.padInfo.top,g=a.padInfo.left,y="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=Uu(a.outShape,n),x=b.values,k=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],w=a.outShape[2]*a.outShape[3]*a.outShape[4],S=a.outShape[3]*a.outShape[4],I=a.outShape[4],N=0;N<a.batchSize;++N)for(var T=N*k,C=N*r[0],E=0;E<a.inChannels;++E)for(var _=0;_<a.outDepth;++_){for(var A=_*o-v,R=A;R<0;)R+=c;for(var O=Math.min(a.inDepth,f+A),D=T+_*w,P=0;P<a.outHeight;++P){for(var F=P*s-m,M=F;M<0;)M+=l;for(var L=Math.min(a.inHeight,h+F),$=D+P*S,j=0;j<a.outWidth;++j){for(var z=j*u-g,B=z;B<0;)B+=d;for(var U=Math.min(a.inWidth,p+z),V=$+j*I,W=y,G=0,Z=0,H=R;H<O;H+=c){for(var q=C+H*r[1],K=M;K<L;K+=l){for(var X=q+K*r[2],J=B;J<U;J+=d){var Y=e[X+J*r[3]+E];if("max"===i&&Y>W?W=Y:"avg"===i&&(G+=Y,Z++),isNaN(W))break}if(isNaN(W))break}if(isNaN(W))break}x[V+E]="avg"===i?G/Math.max(Z,1):W}}}return b}var eE={kernelName:nr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;LT(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;tn(Ol(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,l=xl(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&on(l.inShape,l.outShape))c=GT({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,f=Sn(a.shape),h=JC(d,a.shape,a.dtype,f,l,"avg");c=n.makeTensorInfo(l.outShape,a.dtype,h.values)}return c}};var tE={kernelName:ar,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;LT(a,"avgPool3d");var l=kl(a.shape,i,o,1,s,u,c),d=QC(n.data.get(a.dataId).values,a.shape,a.dtype,Sn(a.shape),l,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};var nE={kernelName:ir,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;LT([a,i],"avgPool3DGrad");for(var l=kl(i.shape,o,s,1,u,c),d=l.strideDepth,f=l.strideHeight,h=l.strideWidth,p=l.filterDepth,v=l.filterHeight,m=l.filterWidth,g=l.dilationDepth,y=l.dilationHeight,b=l.dilationWidth,x=l.effectiveFilterDepth,k=l.effectiveFilterHeight,w=l.effectiveFilterWidth,S=x-1-l.padInfo.front,I=w-1-l.padInfo.left,N=k-1-l.padInfo.top,T=Uu(i.shape,"float32"),C=1/(p*v*m),E=n.bufferSync(a),_=0;_<l.batchSize;++_)for(var A=0;A<l.inChannels;++A)for(var R=0;R<l.inDepth;++R)for(var O=0;O<l.inHeight;++O)for(var D=0;D<l.inWidth;++D){for(var P=R-S,F=O-N,M=D-I,L=0,$=0;$<x;$+=g){var j=(P+$)/d;if(!(j<0||j>=l.outDepth||Math.floor(j)!==j))for(var z=0;z<k;z+=y){var B=(F+z)/f;if(!(B<0||B>=l.outHeight||Math.floor(B)!==B))for(var U=0;U<w;U+=b){var V=(M+U)/h;if(!(V<0||V>=l.outWidth||Math.floor(V)!==V))L+=E.get(_,j,B,V,A)}}}T.set(L*C,_,R,O,D,A)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}};var rE={kernelName:rr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;LT([a,i],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=xl(o.shape,s,u,1,c),d=l.strideHeight,f=l.strideWidth,h=l.filterHeight,p=l.filterWidth,v=l.dilationHeight,m=l.dilationWidth,g=l.effectiveFilterHeight,y=l.effectiveFilterWidth,b=y-1-l.padInfo.left,x=g-1-l.padInfo.top,k=Uu(o.shape,"float32"),w=1/(h*p),S=n.data.get(a.dataId).values,I=Uu(a.shape,"float32",S),N=0;N<l.batchSize;++N)for(var T=0;T<l.inChannels;++T)for(var C=0;C<l.inHeight;++C)for(var E=0;E<l.inWidth;++E){for(var _=C-x,A=E-b,R=0,O=0;O<g;O+=v){var D=(_+O)/d;if(!(D<0||D>=l.outHeight||Math.floor(D)!==D))for(var P=0;P<y;P+=m){var F=(A+P)/f;if(!(F<0||F>=l.outWidth||Math.floor(F)!==F))R+=I.get(N,D,F,T)}}k.set(R*w,N,C,E,T)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var aE={kernelName:Xr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.scale,o=t.offset,s=t.mean,u=t.variance;tn(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),tn(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),tn(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),LT([a,s,u,i,o],"batchNorm");var c=r.varianceEpsilon;null==c&&(c=.001);for(var l=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,f=n.data.get(u.dataId).values,h=i?n.data.get(i.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),v=new Float32Array(l.length),m=p.length,g=h.length,y=f.length,b=d.length,x=0,k=0,w=0,S=0,I=0;I<l.length;++I)v[I]=p[x++]+(l[I]-d[k++])*h[w++]/Math.sqrt(f[S++]+c),x>=m&&(x=0),k>=b&&(k=0),w>=g&&(w=0),S>=y&&(S=0);return n.makeTensorInfo(a.shape,a.dtype,v)}};function iE(e,t,n,r,a){var i=nl(r,t,n),o=an(n),s=Sn(r);if(i){var u=rl(t,s);return"string"===a?e.slice(u,u+o):e.subarray(u,u+o)}for(var c=Uu(r,a,"string"===a?Nm(e):e),l=Uu(n,a),d=0;d<l.size;++d){var f=l.indexToLoc(d),h=f.map((function(e,n){return e+t[n]}));l.set.apply(l,[c.get.apply(c,(0,Le.Z)(h))].concat((0,Le.Z)(f)))}return"string"===a?l.values.map((function(e){return Eo(e)})):l.values}function oE(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size;LT(a,"slice");var s=al(a,i,o),u=(0,C.Z)(s,2),c=u[0],l=u[1];el(a,c,l);var d=iE(n.data.get(a.dataId).values,c,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,d)}var sE={kernelName:di,backendName:"cpu",kernelFunc:oE};var uE={kernelName:sr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;LT([a],"batchToSpaceND");var s=i.reduce((function(e,t){return e*t})),u=qv(a.shape,i,s),c=Kv(u.length,i.length),l=Xv(a.shape,i,s),d=Jv(o,i.length),f=Yv(l,o,i.length),h=kC({inputs:{x:a},backend:n,attrs:{shape:u}}),p=PC({inputs:{x:h},backend:n,attrs:{perm:c}}),v=kC({inputs:{x:p},backend:n,attrs:{shape:l}}),m=oE({inputs:{x:v},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),m}};function cE(e,t,n,r,a){for(var i=an(r),o=Cn(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(o[u]+=i>0?t[s]:1)}return o}function lE(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=Uu([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,s,c):t.size>0?o.set(o.get(s,c)+t.get(s,u),s,c):o.set(o.get(s,c)+1,s,c))}return o}var dE={kernelName:ur,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=cE(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}};var fE={kernelName:cr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=xc(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},hE=zT((function(e){return Math.ceil(e)})),pE=UT(dr,hE),vE={kernelName:dr,backendName:"cpu",kernelFunc:pE},mE=BT(fr,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),gE={kernelName:fr,backendName:"cpu",kernelFunc:mE},yE={kernelName:pr,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(an(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,c=0;c<s.length;c++){var l=s[c],d=u[c];r[c]=Math.hypot(l,d)}return n.makeOutput(r,t.shape,"float32")}};function bE(e,t,n,r){var a=vn(n,an(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=an(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?Nm(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+o,c=0;c<e.shape[1];++c)a[u+c]=r[i++];o+=e.shape[1]}))}return a}function xE(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var kE={kernelName:ra,backendName:"cpu",kernelFunc:xE};function wE(e){var t=e.inputs,n=e.backend,r=fn(e.attrs.axis,t[0].shape)[0],a=t.map((function(e){return e.shape}));Wv(a,r);var i=Gv(t.map((function(e){return e.shape})),r);if(0===an(i))return n.makeTensorInfo(i,t[0].dtype,[]);var o=t.filter((function(e){return an(e.shape)>0}));if(1===o.length)return GT({inputs:{x:o[0]},backend:n});if("complex64"===o[0].dtype){var s=o.map((function(e){return lC({inputs:{input:e},backend:n})})),u=o.map((function(e){return xE({inputs:{input:e},backend:n})})),c=wE({inputs:s,backend:n,attrs:{axis:r}}),l=wE({inputs:u,backend:n,attrs:{axis:r}}),d=sC({inputs:{real:c,imag:l},backend:n});return s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),d}var f=o.map((function(e){var t=an(e.shape.slice(r));return kC({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),h=f.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));i=Gv(f.map((function(e){return e.shape})),1);var p=1===f[0].shape[0],v=bE(h,i,t[0].dtype,p),m=Gv(o.map((function(e){return e.shape})),r),g=n.makeTensorInfo(m,t[0].dtype,v);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}var SE={kernelName:vr,backendName:"cpu",kernelFunc:wE};function IE(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dilations,l=r.dimRoundingMode;LT([a,i],"conv2d");for(var d=Pl(u),f=wl(a.shape,i.shape,o,c,s,l,!1,d),h=f.filterHeight,p=f.filterWidth,v=f.dilationHeight,m=f.dilationWidth,g=f.padInfo.left,y=f.padInfo.top,b="channelsLast"===f.dataFormat,x=new Ho(f.outShape,a.dtype),k=Sn(a.shape),w=Sn(i.shape),S=k[0],I=b?k[1]:k[2],N=b?k[2]:1,T=b?1:k[1],C=x.strides[0],E=b?x.strides[1]:x.strides[2],_=b?x.strides[2]:1,A=b?1:x.strides[1],R=n.data.get(a.dataId).values,O=n.data.get(i.dataId).values,D=x.values,P=0;P<f.batchSize;++P)for(var F=P*S,M=P*C,L=0;L<f.outHeight;++L)for(var $=M+L*E,j=L*f.strideHeight-y,z=0;z<h;++z){var B=j+z*v;if(!(B<0||B>=f.inHeight))for(var U=z*w[0],V=F+B*I,W=0;W<f.outWidth;++W)for(var G=$+W*_,Z=W*f.strideWidth-g,H=0;H<p;++H){var q=Z+H*m;if(!(q<0||q>=f.inWidth))for(var K=V+q*N,X=U+H*w[1],J=0;J<f.inChannels;++J){for(var Y=R[K+J*T],Q=0;Q<f.outChannels;++Q)D[G+Q*A]+=Y*O[X+Q];X+=f.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,D)}var NE={kernelName:mr,backendName:"cpu",kernelFunc:IE};var TE={kernelName:gr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape;LT([a,i],"conv2dBackpropFilter");for(var d=Pl(u),f=wl(a.shape,l,o,1,s,c,!1,d),h=f.strideHeight,p=f.strideWidth,v=f.filterHeight,m=f.filterWidth,g="channelsLast"===f.dataFormat,y=new Ho(f.filterShape,"float32"),b=f.padInfo.left,x=f.padInfo.top,k=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,S=new Ho(a.shape,a.dtype,k),I=new Ho(i.shape,i.dtype,w),N=0;N<v;++N)for(var T=Math.max(0,Math.ceil((x-N)/h)),C=Math.min(f.outHeight,(f.inHeight+x-N)/h),E=0;E<m;++E)for(var _=Math.max(0,Math.ceil((b-E)/p)),A=Math.min(f.outWidth,(f.inWidth+b-E)/p),R=0;R<f.inChannels;++R)for(var O=0;O<f.outChannels;++O){for(var D=0,P=0;P<f.batchSize;++P)for(var F=T;F<C;++F)for(var M=N+F*h-x,L=_;L<A;++L){var $=E+L*p-b;D+=g?S.get(P,M,$,R)*I.get(P,F,L,O):S.get(P,R,M,$)*I.get(P,O,F,L)}y.set(D,N,E,R,O)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var CE={kernelName:yr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode;LT([a,i],"conv2dBackpropInput");var d=Sn(i.shape),f=Sn(a.shape),h=Pl(c),p=wl(o,i.shape,s,1,u,l,!1,h),v=new Ho(p.inShape,"float32"),m=v.values,g=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,b=(0,C.Z)(d,3),x=b[0],k=b[1],w=b[2],S=p.batchSize,I=p.filterHeight,N=p.filterWidth,T=p.inChannels,E=p.inHeight,_=p.inWidth,A=p.outChannels,R=p.outHeight,O=p.outWidth,D=p.strideHeight,P=p.strideWidth;h=p.dataFormat;for(var F=I-1-p.padInfo.top,M=N-1-p.padInfo.left,L="channelsLast"===h,$=v.strides[0],j=L?v.strides[1]:v.strides[2],z=L?v.strides[2]:1,B=L?1:v.strides[1],U=f[0],V=L?f[1]:f[2],W=L?f[2]:1,G=L?1:f[1],Z=0;Z<S;++Z)for(var H=0;H<T;++H)for(var q=0;q<E;++q)for(var K=q-F,X=Math.max(0,Math.ceil(K/D)),J=Math.min(R,(I+K)/D),Y=0;Y<_;++Y){for(var Q=Y-M,ee=Math.max(0,Math.ceil(Q/P)),te=Math.min(O,(N+Q)/P),ne=0,re=X;re<J;++re)for(var ae=re*D-K,ie=ee;ie<te;++ie)for(var oe=U*Z+V*re+W*ie,se=x*(I-1-ae)+k*(N-1-(ie*P-Q))+w*H,ue=0;ue<A;++ue){ne+=g[oe+G*ue]*y[se+ue]}m[$*Z+j*q+z*Y+B*H]=ne}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var EE={kernelName:br,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations;LT([a,i],"conv3d");for(var c=Sl(a.shape,i.shape,o,u,s),l=c.filterDepth,d=c.filterHeight,f=c.filterWidth,h=c.dilationDepth,p=c.dilationHeight,v=c.dilationWidth,m=c.padInfo,g=m.front,y=m.left,b=m.top,x=new Ho(c.outShape,a.dtype),k=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,S=x.values,I=Sn(a.shape),N=Sn(i.shape),T=0;T<c.batchSize;++T)for(var C=T*I[0],E=T*x.strides[0],_=0;_<c.outDepth;++_)for(var A=E+_*x.strides[1],R=_*c.strideDepth-g,O=0;O<l;++O){var D=R+O*h;if(!(D<0||D>=c.inDepth))for(var P=O*N[0],F=C+D*I[1],M=0;M<c.outHeight;++M)for(var L=A+M*x.strides[2],$=M*c.strideHeight-b,j=0;j<d;++j){var z=$+j*p;if(!(z<0||z>=c.inHeight))for(var B=P+j*N[1],U=F+z*I[2],V=0;V<c.outWidth;++V)for(var W=L+V*c.outChannels,G=V*c.strideWidth-y,Z=0;Z<f;++Z){var H=G+Z*v;if(!(H<0||H>=c.inWidth))for(var q=B+Z*N[2],K=U+H*c.inChannels,X=q,J=0;J<c.inChannels;++J){for(var Y=k[K+J],Q=0;Q<c.outChannels;++Q)S[W+Q]+=Y*w[X+Q];X+=c.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var _E={kernelName:xr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape;LT([a,i],"conv3dBackpropFilterV2");for(var c=Sn(a.shape),l=Sn(i.shape),d=Sl(a.shape,u,o,1,s),f=d.strideDepth,h=d.strideHeight,p=d.strideWidth,v=d.filterDepth,m=d.filterHeight,g=d.filterWidth,y=new Ho(d.filterShape,"float32"),b=y.values,x=(0,C.Z)(y.strides,4),k=x[0],w=x[1],S=x[2],I=x[3],N=n.data.get(i.dataId).values,T=(0,C.Z)(l,4),E=T[0],_=T[1],A=T[2],R=T[3],O=n.data.get(a.dataId).values,D=(0,C.Z)(c,4),P=D[0],F=D[1],M=D[2],L=D[3],$=d.padInfo.front,j=d.padInfo.left,z=d.padInfo.top,B=0;B<v;++B)for(var U=Math.max(0,Math.ceil(($-B)/f)),V=Math.min(d.outDepth,(d.inDepth+$-B)/f),W=B*k,G=0;G<m;++G)for(var Z=Math.max(0,Math.ceil((z-G)/h)),H=Math.min(d.outHeight,(d.inHeight+z-G)/h),q=G*w+W,K=0;K<g;++K)for(var X=Math.max(0,Math.ceil((j-K)/p)),J=Math.min(d.outWidth,(d.inWidth+j-K)/p),Y=K*S+q,Q=0;Q<d.inChannels;++Q)for(var ee=Q*I+Y,te=0;te<d.outChannels;++te){for(var ne=0,re=0;re<d.batchSize;++re)for(var ae=re*P,ie=re*E,oe=U;oe<V;++oe)for(var se=(B+oe*f-$)*F+ae,ue=oe*_+ie,ce=Z;ce<H;++ce)for(var le=(G+ce*h-z)*M+se,de=ce*A+ue,fe=X;fe<J;++fe){var he=fe*R+de;ne+=O[(K+fe*p-j)*L+le+Q]*N[he+te]}b[ee+te]=ne}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var AE={kernelName:kr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=r.inputShape;LT([a],"conv3dBackpropInputV2");for(var c=Sn(a.shape),l=Sn(i.shape),d=Sl(u,i.shape,s,1,o),f=new Ho(d.inShape,"float32"),h=f.values,p=(0,C.Z)(f.strides,4),v=p[0],m=p[1],g=p[2],y=p[3],b=n.data.get(a.dataId).values,x=(0,C.Z)(c,4),k=x[0],w=x[1],S=x[2],I=x[3],N=n.data.get(i.dataId).values,T=(0,C.Z)(l,4),E=T[0],_=T[1],A=T[2],R=T[3],O=d.batchSize,D=d.filterDepth,P=d.filterHeight,F=d.filterWidth,M=d.inChannels,L=d.inDepth,$=d.inHeight,j=d.inWidth,z=d.outChannels,B=d.outDepth,U=d.outHeight,V=d.outWidth,W=d.strideDepth,G=d.strideHeight,Z=d.strideWidth,H=D-1-d.padInfo.front,q=P-1-d.padInfo.top,K=F-1-d.padInfo.left,X=0;X<O;++X)for(var J=0;J<M;++J)for(var Y=0;Y<L;++Y)for(var Q=Y-H,ee=Math.max(0,Math.ceil(Q/W)),te=Math.min(B,(D+Q)/W),ne=0;ne<$;++ne)for(var re=ne-q,ae=Math.max(0,Math.ceil(re/G)),ie=Math.min(U,(P+re)/G),oe=0;oe<j;++oe){for(var se=oe-K,ue=Math.max(0,Math.ceil(se/Z)),ce=Math.min(V,(F+se)/Z),le=0,de=ee;de<te;++de)for(var fe=de*W-Q,he=ae;he<ie;++he)for(var pe=he*G-re,ve=ue;ve<ce;++ve)for(var me=k*X+w*de+S*he+I*ve,ge=E*(D-1-fe)+_*(P-1-pe)+A*(F-1-(ve*Z-se))+R*J,ye=0;ye<z;++ye){le+=b[me+ye]*N[ge+ye]}h[v*X+m*Y+g*ne+y*oe+J]=le}return n.makeTensorInfo(f.shape,f.dtype,f.values)}},RE=BT(wr,(function(e){return Math.cos(e)})),OE={kernelName:wr,backendName:"cpu",kernelFunc:RE},DE=BT(Sr,(function(e){return Math.cosh(e)})),PE={kernelName:Sr,backendName:"cpu",kernelFunc:DE};var FE={kernelName:Tr,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=(0,C.Z)(a.shape,4),d=l[0],f=l[1],h=l[2],p=l[3],v=i.shape[0],m=(0,C.Z)(s,2),g=m[0],y=m[1],b=Uu([v,g,y,p],"float32"),x=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,w=n.data.get(a.dataId).values,S=Sn(a.shape),I=Sn(b.shape),N=0;N<v;N++){var T=4*N,E=x[T],_=x[T+1],A=x[T+2],R=x[T+3],O=k[N];if(!(O>=d))for(var D=g>1?(A-E)*(f-1)/(g-1):0,P=y>1?(R-_)*(h-1)/(y-1):0,F=0;F<g;F++){var M=g>1?E*(f-1)+F*D:.5*(E+A)*(f-1);if(M<0||M>f-1)for(var L=0;L<y;L++)for(var $=0;$<p;$++){var j=$+L*I[2]+F*I[1]+N*I[0];b.values[j]=c}else if("bilinear"===u)for(var z=Math.floor(M),B=Math.ceil(M),U=M-z,V=0;V<y;V++){var W=y>1?_*(h-1)+V*P:.5*(_+R)*(h-1);if(W<0||W>h-1)for(var G=0;G<p;G++){var Z=G+V*I[2]+F*I[1]+N*I[0];b.values[Z]=c}else for(var H=Math.floor(W),q=Math.ceil(W),K=W-H,X=0;X<p;X++){var J=X+H*S[2]+z*S[1]+O*S[0],Y=w[J],Q=w[J=X+q*S[2]+z*S[1]+O*S[0]],ee=w[J=X+H*S[2]+B*S[1]+O*S[0]],te=Y+(Q-Y)*K,ne=ee+(w[J=X+q*S[2]+B*S[1]+O*S[0]]-ee)*K;J=X+V*I[2]+F*I[1]+N*I[0],b.values[J]=te+(ne-te)*U}}else for(var re=0;re<y;++re){var ae=y>1?_*(h-1)+re*P:.5*(_+R)*(h-1);if(ae<0||ae>h-1)for(var ie=0;ie<p;ie++){var oe=ie+re*I[2]+F*I[1]+N*I[0];b.values[oe]=c}else for(var se=Math.round(ae),ue=Math.round(M),ce=0;ce<p;ce++){var le=ce+se*S[2]+ue*S[1]+O*S[0],de=ce+re*I[2]+F*I[1]+N*I[0];b.values[de]=w[le]}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var ME={kernelName:Ir,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;LT(a,"cumprod");var u=Od([i],a.shape.length),c=a;null!=u&&(c=PC({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=Pd(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var d=is(c.dtype,"int32"),f=Tn(an(c.shape),d),h=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],v=s?function(e,t){return e+p-t-1}:function(e,t){return e+t},m=0;m<h.length;m+=p)for(var g=0;g<p;g++){var y=v(m,g);if(0===g)f[y]=o?1:h[y];else{var b=v(m,g-1);f[y]=o?h[b]*f[b]:h[y]*f[b]}}var x=n.makeTensorInfo(c.shape,d,f);if(null!=u){var k=PC({inputs:{x:x},backend:n,attrs:{perm:Dd(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),k}return x}};var LE={kernelName:Nr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;LT(a,"cumsum");var u=Od([i],a.shape.length),c=a;null!=u&&(c=PC({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=Pd(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most "+"axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var d=is(c.dtype,"int32"),f=Cn(an(c.shape),d),h=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],v=s?function(e,t){return e+p-t-1}:function(e,t){return e+t},m=0;m<h.length;m+=p)for(var g=0;g<p;g++){var y=v(m,g);if(0===g)f[y]=o?0:h[y];else{var b=v(m,g-1);f[y]=o?h[b]+f[b]:h[y]+f[b]}}var x=n.makeTensorInfo(c.shape,d,f);if(null!=u){var k=PC({inputs:{x:x},backend:n,attrs:{perm:Dd(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),k}return x}};var $E={kernelName:Cr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=cE(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}if(2===a.shape.length){var c=lE(n.bufferSync(a),n.bufferSync(i),o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}};var jE={kernelName:Er,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;tn("NHWC"===o,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(o)}));for(var s=a.shape[0],u=a.shape[1],c=a.shape[2],l=a.shape[3],d=u*i,f=c*i,h=l/(i*i),p=n.data.get(a.dataId).values,v=new Float32Array(s*d*f*h),m=0,g=0;g<s;++g)for(var y=0;y<d;++y)for(var b=Math.floor(y/i),x=y%i,k=0;k<f;++k)for(var w=Math.floor(k/i),S=(x*i+k%i)*h,I=0;I<h;++I){var N=I+S+l*(w+c*(b+u*g));v[m++]=p[N]}return n.makeTensorInfo([s,d,f,h],a.dtype,v)}};function zE(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode;LT([a,i],"depthwiseConv2DNative");var l=Sn(a.shape),d=Sn(i.shape),f=u;null==f&&(f=[1,1]),tn(Ol(o,f),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(f,"'")}));for(var h=wl(a.shape,i.shape,o,f,s,c,!0),p=h.filterHeight,v=h.filterWidth,m=h.dilationHeight,g=h.dilationWidth,y=h.padInfo,b=y.left,x=y.top,k=h.outChannels/h.inChannels,w=new Ho(h.outShape,a.dtype),S=n.data.get(a.dataId).values,I=n.data.get(i.dataId).values,N=w.values,T=0;T<h.batchSize;++T)for(var C=T*l[0],E=T*w.strides[0],_=0;_<h.outHeight;++_)for(var A=E+_*w.strides[1],R=_*h.strideHeight-x,O=0;O<p;++O){var D=R+O*m;if(!(D<0||D>=h.inHeight))for(var P=O*d[0],F=C+D*l[1],M=0;M<h.outWidth;++M)for(var L=A+M*w.strides[2],$=M*h.strideWidth-b,j=0;j<v;++j){var z=$+j*g;if(!(z<0||z>=h.inWidth))for(var B=P+j*d[1],U=F+z*h.inChannels,V=L,W=B,G=0;G<h.inChannels;++G){for(var Z=S[U+G],H=0;H<k;++H)N[V+H]+=Z*I[W+H];V+=k,W+=k}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var BE={kernelName:_r,backendName:"cpu",kernelFunc:zE};var UE={kernelName:Ar,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape;LT([a,i],"depthwiseConv2dNativeBackpropFilter");for(var d=wl(a.shape,l,o,s,u,c,!0),f=d.strideHeight,h=d.strideWidth,p=d.filterHeight,v=d.filterWidth,m=new Ho(d.filterShape,"float32"),g=d.padInfo.left,y=d.padInfo.top,b=d.outChannels/d.inChannels,x=n.data.get(a.dataId).values,k=new Ho(a.shape,a.dtype,x),w=n.data.get(i.dataId).values,S=new Ho(i.shape,i.dtype,w),I=0;I<p;++I)for(var N=Math.max(0,Math.ceil((y-I)/f)),T=Math.min(d.outHeight,(d.inHeight+y-I)/f),C=0;C<v;++C)for(var E=Math.max(0,Math.ceil((g-C)/h)),_=Math.min(d.outWidth,(d.inWidth+g-C)/h),A=0;A<d.outChannels;++A){for(var R=Math.trunc(A/b),O=A%b,D=0,P=0;P<d.batchSize;++P)for(var F=N;F<T;++F)for(var M=I+F*f-y,L=E;L<_;++L){var $=C+L*h-g;D+=k.get(P,M,$,R)*S.get(P,F,L,A)}m.set(D,I,C,R,O)}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var VE={kernelName:Rr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.inputShape;LT([a,i],"depthwiseConv2DNativeBackpropInput");for(var d=Sn(a.shape),f=Sn(i.shape),h=wl(l,i.shape,o,s,u,c,!0),p=new Ho(h.inShape,"float32"),v=p.values,m=(0,C.Z)(p.strides,3),g=m[0],y=m[1],b=m[2],x=n.data.get(a.dataId).values,k=(0,C.Z)(d,3),w=k[0],S=k[1],I=k[2],N=n.data.get(i.dataId).values,T=(0,C.Z)(f,3),E=T[0],_=T[1],A=T[2],R=h.batchSize,O=h.filterHeight,D=h.filterWidth,P=h.inChannels,F=h.inHeight,M=h.inWidth,L=h.outChannels,$=h.outHeight,j=h.outWidth,z=h.strideHeight,B=h.strideWidth,U=O-1-h.padInfo.top,V=D-1-h.padInfo.left,W=L/P,G=0;G<R;++G)for(var Z=0;Z<P;++Z)for(var H=0;H<F;++H)for(var q=H-U,K=Math.max(0,Math.ceil(q/z)),X=Math.min($,(O+q)/z),J=0;J<M;++J){for(var Y=J-V,Q=Math.max(0,Math.ceil(Y/B)),ee=Math.min(j,(D+Y)/B),te=0,ne=K;ne<X;++ne)for(var re=ne*z-q,ae=Q;ae<ee;++ae)for(var ie=w*G+S*ne+I*ae,oe=E*(O-1-re)+_*(D-1-(ae*B-Y))+A*Z,se=0;se<W;++se){te+=x[ie+(Z*W+se)]*N[oe+se]}v[g*G+y*H+b*J+Z]=te}return n.makeTensorInfo(p.shape,p.dtype,p.values)}};var WE={kernelName:Or,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=an(r.shape),i=n.data.get(r.dataId).values,o=Uu([a,a],r.dtype),s=o.values,u=0;u<i.length;u++)s[u*a+u]=i[u];var c=[].concat((0,Le.Z)(r.shape),(0,Le.Z)(r.shape));return n.makeTensorInfo(c,o.dtype,o.values)}},GE={kernelName:Dr,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=n,l=c.data.get(a.dataId).values,d=a.shape.length,f=c.data.get(i.dataId).values,h=i.shape.length,p=bl(a.shape,i.shape,o,s,"NHWC",u),v=p.batchSize,m=p.inHeight,g=p.inWidth,y=p.inChannels,b=p.outHeight,x=p.outWidth,k=p.padInfo,w=p.strideHeight,S=p.strideWidth,I=p.filterHeight,N=p.filterWidth,T=p.dilationHeight,C=p.dilationWidth,E=p.outShape,_=an(E),A=E.length,R=vn(a.dtype,_),O=0;O<v;++O)for(var D=0;D<b;++D)for(var P=D*w-k.top,F=0;F<x;++F)for(var M=F*S-k.left,L=0;L<y;++L){for(var $=Number.MIN_SAFE_INTEGER,j=0;j<I;++j){var z=P+j*T;if(z>=0&&z<m)for(var B=0;B<N;++B){var U=M+B*C;if(U>=0&&U<g){var V=An([O,z,U,L],d,Sn(a.shape)),W=An([j,B,L],h,Sn(i.shape)),G=l[V]+f[W];G>$&&($=G)}}}R[An([O,D,F,L],A,Sn(E))]=$}return{dataId:c.write(To(R,a.dtype),E,a.dtype),shape:E,dtype:a.dtype}}},ZE={kernelName:Fr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=Nn(a.shape,l.data.get(a.dataId).values),f=Nn(i.shape,l.data.get(i.dataId).values),h=bl(a.shape,i.shape,s,u,"NHWC",c),p=h.batchSize,v=h.inHeight,m=h.inWidth,g=h.inChannels,y=h.outHeight,b=h.outWidth,x=h.padInfo,k=h.strideHeight,w=h.strideWidth,S=h.filterHeight,I=h.filterWidth,N=h.dilationHeight,T=h.dilationWidth,C=h.outShape;tn(o.rank===C.length,(function(){return"Error in ".concat(Fr,", dy ")+"must have the same rank as output ".concat(C.length,", but got ")+"".concat(o.rank)}));for(var E=Nn(C,l.data.get(o.dataId).values),_=En(i.shape,i.dtype),A=0;A<p;++A)for(var R=0;R<y;++R)for(var O=R*k-x.top,D=0;D<b;++D)for(var P=D*w-x.left,F=0;F<g;++F){for(var M=Number.MIN_SAFE_INTEGER,L=0,$=0,j=0;j<S;++j){var z=O+j*N;if(z>=0&&z<v)for(var B=0;B<I;++B){var U=P+B*T;if(U>=0&&U<m){var V=d[A][z][U][F]+f[j][B][F];V>M&&(M=V,L=j,$=B)}}}_[L][$][F]+=E[A][R][D][F]}return{dataId:l.write(To(_,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},HE={kernelName:Pr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=Nn(a.shape,l.data.get(a.dataId).values),f=Nn(i.shape,l.data.get(i.dataId).values),h=bl(a.shape,i.shape,s,u,"NHWC",c),p=h.batchSize,v=h.inHeight,m=h.inWidth,g=h.inChannels,y=h.outHeight,b=h.outWidth,x=h.padInfo,k=h.strideHeight,w=h.strideWidth,S=h.filterHeight,I=h.filterWidth,N=h.dilationHeight,T=h.dilationWidth,C=h.outShape;tn(o.rank===C.length,(function(){return"Error in ".concat(Pr,", dy ")+"must have the same rank as output ".concat(C.length,", but got ")+"".concat(o.rank)}));for(var E=Nn(C,l.data.get(o.dataId).values),_=En(a.shape,a.dtype),A=0;A<p;++A)for(var R=0;R<y;++R)for(var O=R*k-x.top,D=0;D<b;++D)for(var P=D*w-x.left,F=0;F<g;++F){for(var M=Number.MIN_SAFE_INTEGER,L=O<0?0:O,$=P<0?0:P,j=0;j<S;++j){var z=O+j*N;if(z>=0&&z<v)for(var B=0;B<I;++B){var U=P+B*T;if(U>=0&&U<m){var V=d[A][z][U][F]+f[j][B][F];V>M&&(M=V,L=z,$=U)}}}_[A][L][$][F]+=E[A][R][D][F]}return{dataId:l.write(To(_,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},qE=KT((function(e,t){return e*t})),KE=mC((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),XE=vC(Ra,qE,KE),JE={kernelName:Ra,backendName:"cpu",kernelFunc:XE};function YE(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims;LT(i,"sum");var u=(t="bool"===i.dtype?hC({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):GT({inputs:{x:i},backend:r})).shape.length,c=fn(o,t.shape),l=Od(c,u),d=c,f=t;null!=l&&(f=PC({inputs:{x:t},backend:r,attrs:{perm:l}}),d=Pd(d.length,u)),Rd("sum",d,f.shape.length);for(var h=_d(f.shape,d),p=(0,C.Z)(h,2),v=p[0],m=p[1],g=cC(r,v,is(f.dtype,"int32")),y=an(m),b=r.data.get(g.dataId).values,x=r.data.get(f.dataId).values,k=0;k<b.length;++k){for(var w=k*y,S=0,I=0;I<y;++I)S+=x[w+I];b[k]=S}if(s){var N=g;g=kC({inputs:{x:g},backend:r,attrs:{shape:Ad(g.shape,c)}}),r.disposeIntermediateTensorInfo(N)}return r.disposeIntermediateTensorInfo(t),null!=l&&r.disposeIntermediateTensorInfo(f),g}var QE={kernelName:yi,backendName:"cpu",kernelFunc:YE};var e_={kernelName:Lr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=pm(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;mm(i.length,s,r);for(var u=gm(o,s),c=u.path,l=u.steps,d=l.length,f=null,h=i.length,p=[],v=0;v<d;++v){var m,g=Ut(l[v]);try{for(g.s();!(m=g.n()).done;){var y=m.value,b=vm(h,s[y]),x=b.permutationIndices,k=b.expandDims,w=void 0;ym(x)?w=r[y]:(w=PC({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),p.push(w));for(var S=w.shape.slice(),I=0;I<k.length;++I)S.splice(k[I],0,1);on(w.shape,S)||(w=kC({inputs:{x:w},backend:n,attrs:{shape:S}}),p.push(w)),null===f?f=w:(f=XE({inputs:{a:w,b:f},backend:n}),p.push(f))}}catch(Rme){g.e(Rme)}finally{g.f()}v<d-1&&(c[v]>=0&&(f=YE({inputs:{x:f},backend:n,attrs:{axis:c[v]-(i.length-h),keepDims:!1}}),p.push(f)),h--)}for(var N=0,T=p;N<T.length;N++){var C=T[N];C!==f&&n.disposeIntermediateTensorInfo(C)}return f}};var t_={kernelName:jr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;LT([r,a],"eluGrad");for(var i=new Float32Array(an(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<o.length;++u){var c=o[u];i[u]=c>=0?s[u]:s[u]*(c+1)}return n.makeTensorInfo(a.shape,"float32",i)}},n_=KT((function(e,t){return e===t?1:0})),r_=vC(Br,n_,null,"bool"),a_={kernelName:Br,backendName:"cpu",kernelFunc:r_},i_=BT(zr,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+.3275911*n);return t*(1-((((1.061405429*r-1.453152027)*r+1.421413741)*r-.284496736)*r+.254829592)*r*Math.exp(-n*n))})),o_={kernelName:zr,backendName:"cpu",kernelFunc:i_},s_=zT((function(e){return Math.exp(e)})),u_=UT(Ur,s_,"float32"),c_={kernelName:Ur,backendName:"cpu",kernelFunc:u_};function l_(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,i=r.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(tn(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+i+1),s.splice(u,0,1),kC({inputs:{x:a},backend:n,attrs:{shape:s}})}var d_={kernelName:Vr,backendName:"cpu",kernelFunc:l_},f_=zT((function(e){return Math.expm1(e)})),h_=UT(Wr,f_),p_={kernelName:Wr,backendName:"cpu",kernelFunc:h_},v_=KT((function(e,t){return e/t})),m_=vC(Mr,v_),g_={kernelName:Mr,backendName:"cpu",kernelFunc:m_},y_=KT((function(e,t){return e-t})),b_=mC((function(e,t,n,r){return{real:e-n,imag:t-r}})),x_=vC(Pi,y_,b_),k_={kernelName:Pi,backendName:"cpu",kernelFunc:x_};function w_(e,t,n){for(var r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,u=o.complexTensorInfos.imag,c=[a,i],l=an(c),d=pn("float32",l),f=pn("float32",l),h=0;h<a;h++){for(var p=oE({inputs:{x:s},backend:n,attrs:{begin:[h,0],size:[1,i]}}),v=oE({inputs:{x:u},backend:n,attrs:{begin:[h,0],size:[1,i]}}),m=sC({inputs:{real:p,imag:v},backend:n}),g=S_(m,t,n),y=um(g.real,g.imag),b=0;b<i;b++){var x=cm(y,b);d[h*i+b]=x.real,f[h*i+b]=x.imag}n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m)}var k=n.makeTensorInfo(c,"float32",d),w=n.makeTensorInfo(c,"float32",f),S=sC({inputs:{real:k,imag:w},backend:n});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(w),S}function S_(e,t,n){var r=an(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0===((g=r)&g-1)){var s=I_(i,o,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var c=n.makeTensorInfo(u,"float32",s.real),l=n.makeTensorInfo(u,"float32",s.imag),d=n.makeTensorInfo([],"float32",No(r,"float32")),f=GT({inputs:{x:d},backend:n}),h=g_.kernelFunc({inputs:{a:c,b:d},backend:n}),p=g_.kernelFunc({inputs:{a:l,b:f},backend:n}),v=n.data.get(h.dataId).values,m=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:v,imag:m}}return s}var g,y=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var u=dm(a*s,t,n),c=cm(e,s);i+=c.real*u.real-c.imag*u.imag,o+=c.real*u.imag+c.imag*u.real}n&&(i/=t,o/=t),lm(r,i,o,a)}return r}(um(i,o),r,t);return function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(y)}function I_(e,t,n,r,a){if(1===n)return{real:e,imag:t};var i=um(e,t),o=n/2,s=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(i),u=s.real,c=s.imag,l=[u.length],d=a.makeTensorInfo(l,"float32",u),f=a.makeTensorInfo(l,"float32",c),h=sC({inputs:{real:d,imag:f},backend:a}),p=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}(i),v=p.real,m=p.imag,g=[v.length],y=a.makeTensorInfo(g,"float32",v),b=a.makeTensorInfo(g,"float32",m),x=sC({inputs:{real:y,imag:b},backend:a}),k=I_(u,c,o,r,a),w=k.real,S=k.imag,I=[w.length],N=a.makeTensorInfo(I,"float32",w),T=a.makeTensorInfo(I,"float32",S),C=sC({inputs:{real:N,imag:T},backend:a}),E=I_(v,m,o,r,a),_=E.real,A=E.imag,R=[_.length],O=a.makeTensorInfo(R,"float32",_),D=a.makeTensorInfo(R,"float32",A),P=sC({inputs:{real:O,imag:D},backend:a}),F=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}(n,r),M=[F.real.length],L=a.makeTensorInfo(M,"float32",F.real),$=a.makeTensorInfo(M,"float32",F.imag),j=sC({inputs:{real:L,imag:$},backend:a}),z=XE({inputs:{a:j,b:P},backend:a}),B=bC({inputs:{a:C,b:z},backend:a}),U=x_({inputs:{a:C,b:z},backend:a}),V=lC({inputs:{input:B},backend:a}),W=lC({inputs:{input:U},backend:a}),G=xE({inputs:{input:B},backend:a}),Z=xE({inputs:{input:U},backend:a}),H=wE({inputs:[V,W],backend:a,attrs:{axis:0}}),q=wE({inputs:[G,Z],backend:a,attrs:{axis:0}}),K=a.data.get(H.dataId).values,X=a.data.get(q.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(N),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo($),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(Z),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(q),{real:K,imag:X}}var N_={kernelName:Gr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=an(r.shape),i=r.shape[r.shape.length-1],o=kC({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=w_(o,!1,n),u=kC({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}};function T_(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype||xn(a),o=vn(i,an(r));return function(e,t,n){e.fill(t)}(o,a),t.makeTensorInfo(r,i,o)}var C_={kernelName:Zr,backendName:"cpu",kernelFunc:T_};var E_={kernelName:Hr,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,i=pn(r.dtype,an(r.shape)),o=(0,C.Z)(r.shape,4),s=o[0],u=o[1],c=o[2],l=o[3],d=a.data.get(r.dataId).values,f=0;f<s;f++)for(var h=f*c*u*l,p=0;p<u;p++)for(var v=p*(c*l),m=0;m<c;m++)for(var g=m*l,y=0;y<l;y++){var b=Math.round(c-m-1),x=h+v+g+y,k=d[x];if(b>=0&&b<c)k=d[h+v+b*l+y];i[x]=k}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},__=zT((function(e){return Math.floor(e)})),A_=UT(qr,__),R_={kernelName:qr,backendName:"cpu",kernelFunc:A_},O_=KT((function(e,t){return Math.floor(e/t)})),D_=vC(Kr,O_,null,"int32"),P_={kernelName:Kr,backendName:"cpu",kernelFunc:D_};var F_={kernelName:Ki,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,f=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,v=IE({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f}});if(o){var m=v;if("NCHW"===l&&1===o.shape.length&&1!==o.shape[0]){var g=kC({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});v=bC({inputs:{a:v,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else v=bC({inputs:{a:v,b:o},backend:n});n.disposeIntermediateTensorInfo(m)}if(h){var y=v;if("NCHW"===l&&"prelu"===h&&1===s.shape.length&&1!==s.shape[0]){var b=kC({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});v=oC(n,v,h,b,p),n.disposeIntermediateTensorInfo(b)}else v=oC(n,v,h,s,p);n.disposeIntermediateTensorInfo(y)}return v}};var M_={kernelName:Xi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,f=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,v=zE({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f}});if(o){var m=v;v=bC({inputs:{a:v,b:o},backend:n}),n.disposeIntermediateTensorInfo(m)}if(h){var g=v;v=oC(n,v,h,s,p),n.disposeIntermediateTensorInfo(g)}return v}};function L_(e,t,n,r,a,i,o,s,u){for(var c=Uu([r,i],n),l=0;l<r;l++){for(var d=[],f=0,h=0;h<a;h++){var p=e[l*a+h];f+=p*o[h],d.push(p)}if(f<0||f>=u/i)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(s));for(var v=0;v<i;v++)c.values[l*i+v]=t.get.apply(t,(0,Le.Z)(t.indexToLoc(f*i+v)))}return c}var $_={kernelName:Yr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=an(r.shape),o=a.shape,s=o[o.length-1],u=Qv(r,a),c=(0,C.Z)(u,4),l=c[0],d=c[1],f=c[2],h=c[3];if(0===d)return n.makeTensorInfo(l,r.dtype,[]);var p=L_(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,d,s,f,h,r.shape,i);return n.makeTensorInfo(l,r.dtype,p.values)}};function j_(e,t,n){for(var r=Uu(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],s=i[2],u=t.locToIndex([o,s]);i[2]=t.values[u];var c=e.locToIndex(i);0<=c&&c<e.values.length&&(r.values[a]=e.values[c])}return r}var z_={kernelName:Jr,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims;LT([a,i],"gatherV2");for(var u=fn(o,a.shape)[0],c=n.data.get(i.dataId).values,l=a.shape[u],d=function(e){var t=c[e];tn(t<=l-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(l-1,"]")}))},f=0;f<c.length;++f)d(f);var h=s;null==s&&(h=0);var p=an(i.shape),v=Im(a,i,u,h),m=kC({inputs:{x:a},backend:n,attrs:{shape:[v.batchSize,v.outerSize,v.dimSize,v.sliceSize]}}),g=kC({inputs:{x:i},backend:n,attrs:{shape:[v.batchSize,p/v.batchSize]}}),y=[v.batchSize,v.outerSize,p/v.batchSize,v.sliceSize],b=n.bufferSync(g),x=j_(n.bufferSync(m),b,y);return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(v.outputShape,x.dtype,x.values)}},B_=KT((function(e,t){return e>t?1:0})),U_=vC(Qr,B_,null,"bool"),V_={kernelName:Qr,backendName:"cpu",kernelFunc:U_},W_=KT((function(e,t){return e>=t?1:0})),G_=vC(ea,W_,null,"bool"),Z_={kernelName:ea,backendName:"cpu",kernelFunc:G_};var H_={kernelName:na,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=an(r.shape),i=r.shape[r.shape.length-1],o=kC({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=w_(o,!0,n),u=kC({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}},q_=BT(aa,(function(e){return Number.isFinite(e)?1:0}),"bool"),K_={kernelName:aa,backendName:"cpu",kernelFunc:q_},X_=BT(ia,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),J_={kernelName:ia,backendName:"cpu",kernelFunc:X_},Y_=BT(oa,(function(e){return Number.isNaN(e)?1:0}),"bool"),Q_={kernelName:oa,backendName:"cpu",kernelFunc:Y_},eA=KT((function(e,t){return e<t?1:0})),tA=vC(ua,eA,null,"bool"),nA={kernelName:ua,backendName:"cpu",kernelFunc:tA},rA=KT((function(e,t){return e<=t?1:0})),aA=vC(ca,rA,null,"bool"),iA={kernelName:ca,backendName:"cpu",kernelFunc:aA};function oA(e,t,n){var r=(t-e)/(n-1),a=Cn(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var sA={kernelName:la,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=oA(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},uA=zT((function(e){return Math.log(e)})),cA=UT(da,uA),lA={kernelName:da,backendName:"cpu",kernelFunc:cA},dA=BT(fa,(function(e){return Math.log1p(e)})),fA={kernelName:fa,backendName:"cpu",kernelFunc:dA},hA=KT((function(e,t){return e&&t})),pA=vC(ha,hA,null,"bool"),vA={kernelName:ha,backendName:"cpu",kernelFunc:pA},mA=BT(pa,(function(e){return e?0:1}),"bool"),gA={kernelName:pa,backendName:"cpu",kernelFunc:mA},yA=KT((function(e,t){return e||t})),bA=vC(va,yA,null,"bool"),xA={kernelName:va,backendName:"cpu",kernelFunc:bA};var kA={kernelName:ma,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta;LT(a,"LRN");var c=a.shape[3],l=c-1,d=n.data.get(a.dataId).values,f=an(a.shape),h=new Float32Array(f);function p(e){for(var t=e%c,n=e-t+Math.max(0,t-i),r=e-t+Math.min(t+i,l),a=0;n<=r;n++){var o=d[n];a+=o*o}return a}for(var v=0;v<f;v++){var m=p(v),g=d[v]*Math.pow(o+s*m,-u);h[v]=g}return n.makeTensorInfo(a.shape,a.dtype,h)}};var wA={kernelName:ga,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta;LT(o,"LRNGrad");for(var d=an(o.shape),f=o.shape[3],h=n.data.get(o.dataId).values,p=n.data.get(a.dataId).values,v=n.data.get(i.dataId).values,m=new Float32Array(d),g=d,y=0;y<g;y++){for(var b=y%f,x=y-b+Math.max(0,b-s),k=y-b+Math.min(f,b+s+1),w=0,S=x;S<k;S++)w+=Math.pow(p[S],2);w=c*w+u;for(var I=x;I<k;I++){var N=-2*c*l*p[I]*v[y]/w;y===I&&(N+=Math.pow(w,-l)),N*=h[y],m[I]+=N}}return n.makeTensorInfo(o.shape,a.dtype,m)}};function SA(e,t,n,r){for(var a=pn(r,an(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],u=0;u<t;++u){var c=e[o+u];(Number.isNaN(c)||c>s)&&(s=c)}a[i]=s}return a}function IA(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=n,u=a.shape,c=u.length,l=fn(i,u),d=l,f=Od(d,c),h=s.data.get(a.dataId).values;if(null!=f){for(var p=new Array(c),v=0;v<p.length;v++)p[v]=u[f[v]];h=DC(h,u,a.dtype,f,p),d=Pd(d.length,c),u=p}LT(a,"max"),Rd("max",d,c);var m=_d(u,d),g=(0,C.Z)(m,2),y=g[0],b=SA(h,an(g[1]),y,a.dtype),x=s.write(b,y,a.dtype),k=y;o&&(k=Ad(y,l));return{dataId:x,shape:k,dtype:a.dtype}}var NA={kernelName:ya,backendName:"cpu",kernelFunc:IA},TA=KT((function(e,t){return Math.max(e,t)})),CA=vC(ba,TA),EA={kernelName:ba,backendName:"cpu",kernelFunc:CA};var _A={kernelName:xa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;LT(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;tn(Ol(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,l=xl(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&on(l.inShape,l.outShape))c=GT({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,f=Sn(a.shape),h=JC(d,a.shape,a.dtype,f,l,"max");c=n.makeTensorInfo(l.outShape,a.dtype,h.values)}return c}};var AA={kernelName:wa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;LT(a,"maxPool3d");var l=kl(a.shape,i,o,1,s,u,c),d=QC(n.data.get(a.dataId).values,a.shape,a.dtype,Sn(a.shape),l,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};var RA={kernelName:Sa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;LT([a,i],"maxPool3DGrad");for(var l=kl(i.shape,o,s,1,u,c),d=function(e,t){for(var n=Uu(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,f=t.padInfo.front,h=t.padInfo.top,p=t.padInfo.left,v=0;v<t.batchSize;++v)for(var m=0;m<t.inChannels;++m)for(var g=0;g<t.outDepth;++g){for(var y=g*r-f,b=y;b<0;)b+=o;for(var x=Math.min(t.inDepth,c+y),k=0;k<t.outHeight;++k){for(var w=k*a-h,S=w;S<0;)S+=s;for(var I=Math.min(t.inHeight,l+w),N=0;N<t.outWidth;++N){for(var T=N*i-p,C=T;C<0;)C+=u;for(var E=Math.min(t.inWidth,d+T),_=Number.NEGATIVE_INFINITY,A=-1,R=b;R<x;R+=o)for(var O=R-y,D=S;D<I;D+=s)for(var P=D-w,F=C;F<E;F+=u){var M=F-T,L=e.get(v,R,D,F,m);L>=_&&(_=L,A=O*l*d+P*l+M)}n.set(A,v,g,k,N,m)}}}return n}(n.bufferSync(i),l),f=l.strideDepth,h=l.strideHeight,p=l.strideWidth,v=l.dilationDepth,m=l.dilationHeight,g=l.dilationWidth,y=l.effectiveFilterDepth,b=l.effectiveFilterHeight,x=l.effectiveFilterWidth,k=y-1-l.padInfo.front,w=x-1-l.padInfo.left,S=b-1-l.padInfo.top,I=Uu(i.shape,"float32"),N=n.bufferSync(a),T=0;T<l.batchSize;++T)for(var C=0;C<l.inChannels;++C)for(var E=0;E<l.inDepth;++E)for(var _=0;_<l.inHeight;++_)for(var A=0;A<l.inWidth;++A){for(var R=E-k,O=_-S,D=A-w,P=0,F=0;F<y;F+=v){var M=(R+F)/f;if(!(M<0||M>=l.outDepth||Math.floor(M)!==M))for(var L=0;L<b;L+=m){var $=(O+L)/h;if(!($<0||$>=l.outHeight||Math.floor($)!==$))for(var j=0;j<x;j+=g){var z=(D+j)/p;if(!(z<0||z>=l.outWidth||Math.floor(z)!==z)){var B=y*b*x-1-d.get(T,M,$,z,C)===F*b*x+L*x+j?1:0;if(0!==B)P+=N.get(T,M,$,z,C)*B}}}}I.set(P,T,E,_,A,C)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}};var OA={kernelName:ka,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;LT([i,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=xl(o.shape,s,u,1,c,l),f=n.data.get(o.dataId).values,h=Uu(d.outShape,o.dtype,YC(f,o.shape,o.dtype,d).values),p=d.strideHeight,v=d.strideWidth,m=d.dilationHeight,g=d.dilationWidth,y=d.effectiveFilterHeight,b=d.effectiveFilterWidth,x=b-1-d.padInfo.left,k=y-1-d.padInfo.top,w=Uu(o.shape,"float32"),S=n.data.get(a.dataId).values,I=Uu(a.shape,"float32",S),N=0;N<d.batchSize;++N)for(var T=0;T<d.inChannels;++T)for(var C=0;C<d.inHeight;++C)for(var E=0;E<d.inWidth;++E){for(var _=C-k,A=E-x,R=0,O=0;O<y;O+=m){var D=(_+O)/p;if(!(D<0||D>=d.outHeight||Math.floor(D)!==D))for(var P=0;P<b;P+=g){var F=(A+P)/v;if(!(F<0||F>=d.outWidth||Math.floor(F)!==F)){var M=y*b-1-h.get(N,D,F,T)===O*b+P?1:0;if(0!==M)R+=I.get(N,D,F,T)*M}}}w.set(R,N,C,E,T)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var DA={kernelName:Ia,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;LT(a,"MaxPoolWithArgmax");var l=c.data.get(a.dataId).values,d=xl(a.shape,i,o,[1,1],s),f=function(e,t,n,r,a){var i=JC(e,0,n,Sn(t),a,"max"),o=YC(e,t,n,a,!0,r);return[i.values,o.values]}(l,a.shape,a.dtype,u,d),h=(0,C.Z)(f,2),p=h[0],v=h[1],m=c.write(p,d.outShape,a.dtype),g=c.write(v,d.outShape,a.dtype);return[{dataId:m,shape:d.outShape,dtype:a.dtype},{dataId:g,shape:d.outShape,dtype:"int32"}]}};var PA={kernelName:Na,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=fn(i,a.shape),u=an(_d(a.shape,s)[1]),c=[],l=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(l);var d=hC({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(d);var f=m_({inputs:{a:d,b:l},backend:n});c.push(f);var h=YE({inputs:{x:f},backend:n,attrs:{axis:i,keepDims:o}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),h}};var FA={kernelName:Ta,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;LT(a,"min");var s=fn(i,a.shape),u=s,c=Od(u,a.shape.length),l=a;null!=c&&(l=PC({inputs:{x:a},backend:n,attrs:{perm:c}}),u=Pd(u.length,a.shape.length)),Rd("min",u,l.shape.length);for(var d=_d(l.shape,u),f=(0,C.Z)(d,2),h=f[0],p=an(f[1]),v=Cn(an(h),l.dtype),m=n.data.get(l.dataId).values,g=0;g<v.length;++g){for(var y=g*p,b=m[y],x=0;x<p;++x){var k=m[y+x];(Number.isNaN(k)||k<b)&&(b=k)}v[g]=b}null!=c&&n.disposeIntermediateTensorInfo(l);var w=n.makeTensorInfo(h,l.dtype,v);if(o){var S=kC({inputs:{x:w},backend:n,attrs:{shape:Ad(h,s)}});return n.disposeIntermediateTensorInfo(w),S}return w}},MA=KT((function(e,t){return Math.min(e,t)})),LA=vC(Ca,MA),$A={kernelName:Ca,backendName:"cpu",kernelFunc:LA};var jA={kernelName:Ea,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode;LT(a,"mirrorPad");for(var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),c=i.map((function(e,t){return e[0]+a.shape[t]})),l="reflect"===o?0:1,d=n.data.get(a.dataId).values,f=a.shape.length,h=Sn(a.shape),p=an(s),v=s.length,m=Sn(s),g=pn(a.dtype,p),y=0;y<p;y++){for(var b=Rn(y,v,m),x=0;x<v;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-l:b[x]>=c[x]&&(b[x]=2*(c[x]-1)-b[x]+l);b=b.map((function(e,t){return e-u[t]}));var k=An(b,f,h);g[y]=d[k]}return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},zA=KT((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),BA=vC(_a,zA),UA={kernelName:_a,backendName:"cpu",kernelFunc:BA};function VA(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=a.shape.length,s=i;if(-1===s&&(s=o-1),s!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(o," and dim was ").concat(s));var u=fn([s],a.shape),c=IA({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),l=Ad(c.shape,u),d=kC({inputs:{x:c},backend:n,attrs:{shape:l}}),f=x_({inputs:{a:a,b:d},backend:n}),h=u_({inputs:{x:f},backend:n}),p=YE({inputs:{x:h},backend:n,attrs:{axis:u,keepDims:!1}}),v=kC({inputs:{x:p},backend:n,attrs:{shape:l}}),m=m_({inputs:{a:h,b:v},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),m}var WA={kernelName:ki,backendName:"cpu",kernelFunc:VA};var GA={kernelName:Aa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized;LT(a,"multinomial");for(var u=s?a:VA({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=u.shape[0],l=u.shape[1],d=n.data.get(u.dataId).values,f=[c,i],h=Cn(an(f),"int32"),p=0;p<c;++p){var v=p*l,m=new Float32Array(l-1);m[0]=d[v];for(var g=1;g<m.length;++g)m[g]=m[g-1]+d[v+g];for(var y=Xf.alea(o.toString()),b=p*i,x=0;x<i;++x){var k=y();h[b+x]=m.length;for(var w=0;w<m.length;w++)if(k<m[w]){h[b+x]=w;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(f,"int32",h)}};function ZA(e,t,n){var r=No(-1,n);return qE([],t,r,e,n)}var HA={kernelName:Oa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;LT(r,"neg");var a=ZA(n.data.get(r.dataId).values,r.shape,r.dtype),i=(0,C.Z)(a,2),o=i[0],s=i[1];return n.makeTensorInfo(s,r.dtype,o)}},qA=$p;var KA={kernelName:Pa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;LT(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,d=qA(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},XA=jp;var JA={kernelName:Fa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize;LT(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,f=XA(l,d,o,s,u,c),h=f.selectedIndices,p=f.validOutputs;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},YA=zp;var QA={kernelName:Ma,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma;LT(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,f=YA(l,d,o,s,u,c),h=f.selectedIndices,p=f.selectedScores;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},eR=KT((function(e,t){return e!==t?1:0})),tR=vC(Da,eR,null,"bool"),nR={kernelName:Da,backendName:"cpu",kernelFunc:tR};var rR={kernelName:$a,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.dtype,o=r.depth,s=r.onValue,u=r.offValue;LT(a,"oneHot");var c=an(a.shape),l=new Float32Array(c*o);l.fill(u);for(var d=n.data.get(a.dataId).values,f=0;f<c;++f)d[f]>=0&&d[f]<o&&(l[f*o+d[f]]=s);return n.makeTensorInfo([].concat((0,Le.Z)(a.shape),[o]),i,l)}};function aR(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=lC({inputs:{input:r},backend:n}),i=aR({inputs:{x:a},backend:n}),o=xE({inputs:{input:r},backend:n}),s=aR({inputs:{x:o},backend:n}),u=sC({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return T_({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var iR={kernelName:Wi,backendName:"cpu",kernelFunc:aR};var oR={kernelName:La,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=lC({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=xE({inputs:{input:a},backend:r}),u=aR({inputs:{x:s},backend:r}),c=sC({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return T_({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function sR(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return l_({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){nn(a,e.shape,"All tensors passed to stack must have matching shapes"),tn(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=l_({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=wE({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}var uR={kernelName:ja,backendName:"cpu",kernelFunc:sR};var cR={kernelName:za,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;LT(a,"pad");var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),c=n.data.get(a.dataId).values,l=an(a.shape),d=a.shape.length,f=Sn(a.shape),h=an(s),p=s.length,v=Sn(s),m=pn(a.dtype,h);0!==o&&m.fill(o);for(var g=0;g<l;g++){m[An(Rn(g,d,f).map((function(e,t){return e+u[t]})),p,v)]=c[g]}return{dataId:n.write(m,s,a.dtype),shape:s,dtype:a.dtype}}},lR=KT((function(e,t){return Math.pow(e,t)})),dR=vC(Ba,lR),fR={kernelName:Ba,backendName:"cpu",kernelFunc:dR};function hR(e,t,n,r){for(var a=_d(e,r),i=(0,C.Z)(a,2),o=i[0],s=i[1],u=is(t,"int32"),c=Cn(an(o),u),l=an(s),d=0;d<c.length;++d){for(var f=d*l,h=1,p=0;p<l;++p)h*=n[f+p];c[d]=h}return{outVals:c,outShape:o,outDtype:u}}var pR={kernelName:Va,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;LT(a,"prod");var s=a.shape.length,u=fn(i,a.shape),c=Od(u,s),l=u,d=a,f=[];null!=c&&(d=PC({inputs:{x:a},backend:n,attrs:{perm:c}}),f.push(d),l=Pd(l.length,s));var h=n.data.get(d.dataId).values,p=hR(d.shape,d.dtype,h,l),v=p.outVals,m=p.outShape,g=p.outDtype,y=m;return o&&(y=Ad(m,u)),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,g,v)}};function vR(e,t,n,r){var a=[],i=0,o=t.length-1+n.length,s=new Array(o).fill(null).map((function(){return[0]}));!function(e,t){for(var n=0;n<e.length;++n){var r=e[n],a=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(var i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);for(var u=1,c=0;c<t.length-1;++c){u*=t[c];for(var l=t[c+1],d=1;d<u+1;++d)s[c].push(d*l)}for(var f=0;f<e.length;++f){for(var h=e[f],p=e[f]+1,v=0;v<n.length;++v){var m=n[v],g=v+t.length-1;if(g>=0)for(var y=s[g],b=y[y.length-1]-m[h],x=h;x<p;++x)s[g].push(m[x+1]+b);h=m[h],p=m[p]}p!==h&&(a.push([h,p]),i+=p-h)}return{outSplits:s,valueSlices:a,numValues:i}}function mR(e,t){for(var n=e.slice(0,t);n.length<t;)n.push(1);for(var r=t;r<e.length;r++)n[t-1]*=e[r];return n}function gR(e,t,n,r,a){var i=t.slice();i[0]=a;var o=vn(n,an(i)),s=e.length;return function(e,t,n,r,a,i){var o,s=mR(t,2)[1],u=mR(i,2)[1],c=0,l=Ut(n);try{for(l.s();!(o=l.n()).done;)for(var d=o.value,f=d[0];f<d[1];++f){for(var h=0;h<r;++h)a[c*u+h]=e[f*s+h];++c}}catch(Rme){l.e(Rme)}finally{l.f()}}(e,t,r,0===s?0:s/t[0],o,i),[o,i]}function yR(e,t,n,r,a,i,o,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach((function(e,r){if(e<0||e>=n){var a=Rn(r,t.length,Sn(t)).join(",");throw new Error("indices[".concat(a,"] = ").concat(e," is not in [0, ").concat(n,")"))}}))}(i,o,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");var u=vR(i,o,e,r[0]),c=u.outSplits,l=u.valueSlices,d=u.numValues,f=function(e){for(var t=[],n=function(n){var r=vn("int32",e[n].length);t.push(r),e[n].forEach((function(e,t){return r[t]=e}))},r=0;r<e.length;++r)n(r);return t}(c),h=gR(n,r,a,l,d);return[f,h[0],h[1]]}var bR={kernelName:Wa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,i=t.paramsDenseValues,o=t.indices,s=(r.outputRaggedRank,a.map((function(e){return n.data.get(e.dataId).values}))),u=a.map((function(e){return e.shape})),c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,d=yR(s,u,c,i.shape,i.dtype,l,o.shape),f=(0,C.Z)(d,3),h=f[0],p=f[1],v=f[2],m=h.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),g=n.makeTensorInfo(v,i.dtype,p);return m.concat([g])}},xR=2147483647;function kR(e,t,n,r,a,i,o){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");var s=0===t.length,u=0===a.length,c=0===o.length,l=[];s||l.push(t[0]),u||l.push(a[0]),c||l.push(o[0]);for(var d=1;d<l.length;++d)if(l[d]!==l[d-1])throw new Error("starts, limits, and deltas must have the same shape");var f=0===l.length?1:l[0],h=vn("int32",f+1);h[0]=0;for(var p=0;p<f;++p){var v=s?e[0]:e[p],m=u?r[0]:r[p],g=c?i[0]:i[p];if(0===g)throw new Error("Requires delta != 0");var y=void 0;if(g>0&&m<v||g<0&&m>v)y=0;else if((y=Math.ceil(Math.abs((m-v)/g)))>xR)throw new Error("Requires ((limit - start) / delta) <= ".concat(xR));h[p+1]=h[p]+y}for(var b=vn(n,h[f]),x=0,k=0;k<f;++k)for(var w=h[k+1]-h[k],S=s?e[0]:e[k],I=c?i[0]:i[k],N=0;N<w;++N)b[x++]=S,S+=I;return[h,b]}var wR={kernelName:Ga,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.starts,a=t.limits,i=t.deltas,o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=kR(o,r.shape,r.dtype,s,a.shape,u,i.shape),l=(0,C.Z)(c,2),d=l[0],f=l[1];return[n.makeTensorInfo([d.length],"int32",d),n.makeTensorInfo([f.length],r.dtype,f)]}},SR=Rv,IR=function(){function e(t,n,r,a,i,o,s,u,c,l){var d;Vt(this,e),this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=a,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=s,this.rowPartitionValues=u,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=function(e){var t,n={FIRST_DIM_SIZE:Rv.FIRST_DIM_SIZE,VALUE_ROWIDS:Rv.VALUE_ROWIDS,ROW_LENGTHS:Rv.ROW_LENGTHS,ROW_SPLITS:Rv.ROW_SPLITS,ROW_LIMITS:Rv.ROW_LIMITS,ROW_STARTS:Rv.ROW_STARTS},r=[],a=Ut(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(!(i in n))break;r.push(n[i])}}catch(Rme){a.e(Rme)}finally{a.f()}return r}(l),this.raggedRank=0===(d=this.rowPartitionTypes).length?0:d[0]===Rv.FIRST_DIM_SIZE?d.length-1:d.length}return Zt(e,[{key:"getRowPartitionTypeByDimension",value:function(e){return this.rowPartitionTypes[0]===SR.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}},{key:"getRowPartitionTensor",value:function(e){return this.rowPartitionTypes[0]===SR.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}},{key:"getMaxWidth",value:function(t){var n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case SR.VALUE_ROWIDS:return e.getMaxWidthValueRowID(n);case SR.ROW_SPLITS:return e.getMaxWidthRowSplit(n);default:throw new Error("Cannot handle partition type ".concat(SR[this.getRowPartitionTypeByDimension(t-1)]))}}},{key:"tensorShapeFromTensor",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return TR(e,n)}},{key:"calculateOutputSize",value:function(e){var t=this.valuesShape;!function(e,t){if(null!=e&&null!=t){var n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(var a=0;a<Math.min(n,r-1);++a){var i=e[a],o=t[a+1];if(i>=0&&o>=0&&1!==i&&i!==o)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(a-e.length,"] = ").concat(i," but ragged tensor input.flatValues.shape[").concat(a-e.length,"] = ").concat(o))}}}(this.defaultValueShape,t);var n=this.tensorShapeFromTensor(this.shape,this.shapeShape),r=function(e,t,n){var r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(var a=1;a<n.length;++a){var i=n[a],o=r[r.length-n.length+a],s=r[o];if(i>=0)if(s>=0){if(s!==i)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(a+e,"] = ").concat(i," but shape[").concat(a+e,"] = ").concat(s))}else r[o]=i}return r}(this.raggedRank,n,t),a=r;a[0]<0&&(a[0]=e);for(var i=1;i<=this.raggedRank;++i)a[i]<0&&(a[i]=this.getMaxWidth(i));return a}},{key:"calculateFirstParentOutputIndex",value:function(e,t,n){for(var r=Math.min(e,n),a=[],i=0,o=0;o<r;++o,i+=t)a.push(i);for(var s=r;s<e;++s)a.push(-1);return tn(a.length===e,(function(){return"Final length of result must be equal to firstDimension."})),a}},{key:"calculateOutputIndexRowSplit",value:function(e,t,n,r){for(var a=e.length,i=[],o=0;o<a-1;++o){var s=e[o+1]-e[o],u=Math.min(r,s),c=t[o];-1===c&&(u=0);for(var l=0;l<u;++l)i.push(c),c+=n;for(var d=0;d<s-u;++d)i.push(-1)}if(a>0&&i.length!==e[a-1])throw new Error("Invalid row split size.");return i}},{key:"calculateOutputIndexValueRowID",value:function(e,t,n,r){var a=e.length,i=[];if(0===a)return[];var o=0,s=e[0];if(s>=t.length)throw new Error("Got currentValueRowId=".concat(s,", which is not less than ").concat(t.length));var u=t[s];i.push(u);for(var c=1;c<a;++c){var l=e[c];if(l===s)u>=0&&(++o<r?u+=n:u=-1);else{if(o=0,s=l,l>=t.length)throw new Error("Got nextValueRowId=".concat(l," which is not less than ").concat(t.length));u=t[l]}i.push(u)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}},{key:"calculateOutputIndex",value:function(e,t,n,r){var a=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case SR.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case SR.ROW_SPLITS:if(a.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(a.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw new Error("Unsupported partition type: ".concat(SR[i]))}}},{key:"getFirstDimensionSize",value:function(){var e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");var t=this.rowPartitionTypes[0];switch(t){case SR.FIRST_DIM_SIZE:return e[0];case SR.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case SR.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(SR[t]))}}},{key:"compute",value:function(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");var e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(var r=n.length-2;r>=0;--r)n[r]=n[r+1]*t[r+1];var a=TR(t,!1),i=vn(this.valuesDType,an(a));if(n[0]*t[0]>0){for(var o=this.calculateFirstParentOutputIndex(e,n[0],t[0]),s=1;s<=this.raggedRank;++s){o=this.calculateOutputIndex(s-1,o,n[s],t[s])}this.setOutput(this.raggedRank,o,i,a)}return[a,i]}},{key:"setOutput",value:function(e,t,n,r){if(0!==n.length){var a=this.values,i=n,o=r.slice(),s=an(o=o.slice(e+1)),u=t.length,c=this.defaultValue;if(c.length!==s&&1!==c.length){var l=this.defaultValueShape;qu((function(){var e=Ml(c,l),t=Yl(e,o);c=t.dataSync()}))}for(var d=0,f=0,h=0,p=0;p<=u;++p){var v=p<u?t[p]:-1;if(v!==h){if(f<h){var m=a.subarray(d*s);NR(i.subarray(f*s),m,(h-f)*s)}if(p>=u){var g=n.length;v=Math.floor(g/s)}if(v>h)if(1===this.defaultValue.length)i.subarray(h*s,v*s).fill(this.defaultValue[0]),h=v;else for(;v>h;){NR(i.slice(h*s),c,s),++h}v<0?(d=p+1,f=h):(d=p,h=(f=h)+1)}else++h}}}}],[{key:"getMaxWidthRowSplit",value:function(e){var t=e.length;if(0===t||1===t)return 0;for(var n=0,r=0;r<t-1;++r){var a=e[r+1]-e[r];a>n&&(n=a)}return n}},{key:"getMaxWidthValueRowID",value:function(e){var t=e.length;if(0===t)return 0;for(var n=0,r=e[0],a=0,i=1;i<t;++i){var o=e[i];o!==r&&(r=o,a=Math.max(i-n,a),n=i)}return Math.max(t-n,a)}}]),e}();function NR(e,t,n){for(var r=0;r<n;r++)e[r]=t[r]}function TR(e,t){var n,r=[],a=Ut(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i<0){if(!t)throw new Error("Dimension ".concat(i," must be >= 0"));if(i<-1)throw new Error("Dimension ".concat(i," must be >= -1"));i=-1}r.push(i)}}catch(Rme){a.e(Rme)}finally{a.f()}return r}function CR(e,t,n,r,a,i,o,s,u,c){return new IR(e,t,n,r,a,i,o,s,u,c).compute()}var ER={kernelName:Za,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,i=t.values,o=t.defaultValue,s=t.rowPartitionTensors,u=r.rowPartitionTypes,c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,f=s.map((function(e){return n.data.get(e.dataId).values})),h=s.map((function(e){return e.shape})),p=CR(c,a.shape,l,i.shape,i.dtype,d,o.shape,f,h,u),v=(0,C.Z)(p,2),m=v[0],g=v[1];return n.makeTensorInfo(m,i.dtype,g)}};function _R(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return Cn(0,r);var a=Cn(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return a}var AR={kernelName:Ha,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=_R(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},RR=BT(Ka,(function(e){return 1/e})),OR={kernelName:Ka,backendName:"cpu",kernelFunc:RR};var DR={kernelName:ei,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;LT(a,"resizeBilinear");for(var u=Sn(a.shape),c=(0,C.Z)(s,2),l=c[0],d=c[1],f=(0,C.Z)(a.shape,4),h=f[0],p=f[1],v=f[2],m=f[3],g=n.data.get(a.dataId).values,y=new Float32Array(an([h,l,d,m])),b=[i&&l>1?p-1:p,i&&d>1?v-1:v],x=[i&&l>1?l-1:l,i&&d>1?d-1:d],k=0,w=b[0]/x[0],S=b[1]/x[1],I=0;I<h;I++)for(var N=0;N<l;N++){var T=void 0;T=o?w*(N+.5)-.5:w*N;for(var E=Math.max(0,Math.floor(T)),_=T-E,A=Math.min(p-1,Math.ceil(T)),R=I*u[0]+E*u[1],O=I*u[0]+A*u[1],D=0;D<d;D++){var P=void 0;P=o?S*(D+.5)-.5:S*D;for(var F=Math.max(0,Math.floor(P)),M=P-F,L=Math.min(v-1,Math.ceil(P)),$=R+F*u[2],j=O+F*u[2],z=R+L*u[2],B=O+L*u[2],U=0;U<m;U++){var V=g[$+U],W=g[j+U],G=V+(g[z+U]-V)*M,Z=G+(W+(g[B+U]-W)*M-G)*_;y[k++]=Z}}}return n.makeTensorInfo([h,l,d,m],"float32",y)}};var PR={kernelName:ti,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;LT([i,a],"resizeBilinearGrad");for(var s=Sn(a.shape),u=(0,C.Z)(a.shape,4),c=u[0],l=u[1],d=u[2],f=u[3],h=(0,C.Z)(i.shape,3),p=h[1],v=h[2],m=new Float32Array(c*l*d*f),g=[o&&p>1?l-1:l,o&&v>1?d-1:d],y=[o&&p>1?p-1:p,o&&v>1?v-1:v],b=g[0]/y[0],x=g[1]/y[1],k=n.data.get(i.dataId).values,w=0,S=0;S<c;S++)for(var I=S*s[0],N=0;N<p;N++)for(var T=N*b,E=Math.floor(T),_=Math.min(Math.ceil(T),l-1),A=I+E*s[1],R=I+_*s[1],O=T-E,D=1-O,P=0;P<v;P++)for(var F=P*x,M=Math.floor(F),L=Math.min(Math.ceil(F),d-1),$=F-M,j=1-$,z=A+M*s[2],B=A+L*s[2],U=R+M*s[2],V=R+L*s[2],W=D*j,G=D*$,Z=O*j,H=O*$,q=0;q<f;q++){var K=k[w++];m[z+q]+=K*W,m[B+q]+=K*G,m[U+q]+=K*Z,m[V+q]+=K*H}return n.makeTensorInfo([c,d,l,f],"float32",m)}};var FR={kernelName:Ya,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;LT(a,"resizeNearestNeighbor");for(var u=Sn(a.shape),c=(0,C.Z)(s,2),l=c[0],d=c[1],f=(0,C.Z)(a.shape,4),h=f[0],p=f[1],v=f[2],m=f[3],g=n.data.get(a.dataId).values,y=new Float32Array(h*l*d*m),b=[i&&l>1?p-1:p,i&&d>1?v-1:v],x=[i&&l>1?l-1:l,i&&d>1?d-1:d],k=b[0]/x[0],w=b[1]/x[1],S=0,I=0;I<h;I++)for(var N=I*u[0],T=0;T<l;T++){var E=o?k*(T+.5):k*T,_=Math.min(p-1,i?Math.round(E):Math.floor(E));o&&(_=Math.max(0,_));for(var A=N+_*u[1],R=0;R<d;R++){var O=o?w*(R+.5):w*R,D=Math.min(v-1,i?Math.round(O):Math.floor(O));o&&(D=Math.max(0,D));for(var P=A+D*u[2],F=0;F<m;F++){var M=g[P+F];y[S++]=M}}}return n.makeTensorInfo([h,l,d,m],a.dtype,y)}};var MR={kernelName:Qa,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;LT([i,a],"resizeNearestNeighborGrad");for(var s=Sn(a.shape),u=Sn(i.shape),c=(0,C.Z)(a.shape,4),l=c[0],d=c[1],f=c[2],h=c[3],p=(0,C.Z)(i.shape,3),v=p[1],m=p[2],g=new Float32Array(l*d*f*h),y=n.data.get(i.dataId).values,b=[o&&v>1?d-1:d,o&&m>1?f-1:f],x=[o&&v>1?v-1:v,o&&m>1?m-1:m],k=b[0]/x[0],w=b[1]/x[1],S=1/k,I=1/w,N=2*Math.ceil(S)+2,T=2*Math.ceil(I)+2,E=0;E<l;E++)for(var _=E*s[0],A=0;A<d;A++)for(var R=_+A*s[1],O=Math.floor(A*S),D=Math.floor(O-N/2),P=0;P<f;P++)for(var F=R+P*s[2],M=Math.floor(P*I),L=Math.floor(M-T/2),$=0;$<h;$++){for(var j=0,z=0;z<N;z++){var B=z+D;if(!(B<0||B>=v)){var U=_+B*u[1],V=B*k;if(A===Math.min(d-1,o?Math.round(V):Math.floor(V)))for(var W=0;W<T;W++){var G=W+L;if(!(G<0||G>=m)){var Z=U+G*u[2],H=G*w;P===Math.min(f-1,o?Math.round(H):Math.floor(H))&&(j+=y[Z+$])}}}}g[F+$]=j}return n.makeTensorInfo(a.shape,a.dtype,g)}};var LR={kernelName:ri,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims;LT(a,"reverse");var o=a.shape.length,s=fn(i,a.shape);if(0===o)return GT({inputs:{x:a},backend:n});for(var u=new Ho(a.shape,a.dtype),c=n.bufferSync(a),l=function(e){var t=u.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),u.set.apply(u,[c.get.apply(c,(0,Le.Z)(n))].concat((0,Le.Z)(t)))},d=0;d<u.size;d++)l(d);return n.makeTensorInfo(u.shape,u.dtype,u.values)}},$R={kernelName:Hi,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,c=pn(a.dtype,an(a.shape)),l=(0,C.Z)(a.shape,4),d=l[0],f=l[1],h=l[2],p=l[3],v=Hv(s,f,h),m=(0,C.Z)(v,2),g=m[0],y=m[1],b=Math.sin(i),x=Math.cos(i),k=u.data.get(a.dataId).values,w=0;w<d;w++)for(var S=w*h*f*p,I=0;I<f;I++)for(var N=I*(h*p),T=0;T<h;T++)for(var E=T*p,_=0;_<p;_++){var A=[d,I,T,_],R=A[2],O=A[1],D=(R-g)*x-(O-y)*b,P=(R-g)*b+(O-y)*x;D=Math.round(D+g),P=Math.round(P+y);var F=o;if("number"!==typeof o&&(F=3===_?255:o[_]),D>=0&&D<h&&P>=0&&P<f)F=k[S+P*(h*p)+D*p+_];c[S+N+E+_]=F}return{dataId:u.write(c,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},jR=BT(ai,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),zR={kernelName:ai,backendName:"cpu",kernelFunc:jR},BR=zT((function(e){return 1/Math.sqrt(e)})),UR=UT(ii,BR),VR={kernelName:ii,backendName:"cpu",kernelFunc:UR};function WR(e,t,n,r,a,i,o,s,u,c){var l=[r/a,a],d=e.values,f=t.values;if(0===r)return Uu(n,t.dtype);var h=u instanceof Ho?u:Uu(l,t.dtype);"string"===typeof u||"number"===typeof u?h.values.fill(u):"boolean"===typeof u&&h.values.fill(+u);for(var p=0;p<i;p++){for(var v=[],m=0,g=0;g<o;g++){var y=d[p*o+g];v.push(y),m+=y*s[g]}if(m<0||m>=r/a)throw new Error("Invalid indices: ".concat(v," does not index into ").concat(n));for(var b=0;b<a;b++)c?h.values[m*a+b]+=f[p*a+b]:h.values[m*a+b]=0===t.rank?f[0]:f[p*a+b]}return h}var GR={kernelName:oi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=Gh(0,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,f=s.outputSize,h=WR(n.bufferSync(a),n.bufferSync(i),o,f,l,c,u,d,0,!0);return n.makeTensorInfo(o,h.dtype,h.values)}};function ZR(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<t?n=a+1:r=a;return r}function HR(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<=t?n=a+1:r=a;return r}var qR={kernelName:ui,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=function(e,t,n,r,a,i){for(var o=vn("int32",n*a),s=0;s<n;++s)for(var u=e.slice(s*r,(s+1)*r),c=s*a,l=0;l<a;++l)o[c+l]="left"===i?ZR(u,t[l+c]):HR(u,t[l+c]);return o}(n.data.get(a.dataId).values,n.data.get(i.dataId).values,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",s)}};var KR={kernelName:ci,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e;LT([r,a,i],"select");for(var o=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=is(a.dtype,i.dtype),d=Cn(an(a.shape),l),f=0,h=0===o||o>1||1===a.shape.length?1:an(a.shape.slice(1)),p=0;p<s.length;p++)for(var v=0;v<h;v++)1===s[p]?d[f++]=u[p]:d[f++]=c[p];return n.makeTensorInfo(a.shape,l,d)}},XR=BT(li,(function(e){return e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)})),JR={kernelName:li,backendName:"cpu",kernelFunc:XR},YR=BT(pi,(function(e){return e<0?-1:e>0?1:0})),QR={kernelName:pi,backendName:"cpu",kernelFunc:YR},eO=BT(fi,(function(e){return Math.sin(e)})),tO={kernelName:fi,backendName:"cpu",kernelFunc:eO},nO=BT(hi,(function(e){return Math.sinh(e)})),rO={kernelName:hi,backendName:"cpu",kernelFunc:nO},aO=Math.log(1.1920928955078125e-7)+2,iO=BT(mi,(function(e){var t=e>-aO,n=e<aO,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),oO={kernelName:mi,backendName:"cpu",kernelFunc:iO};var sO={kernelName:bi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;LT([a],"spaceToBatchND");var s=an(i),u=[[0,0]];u.push.apply(u,(0,Le.Z)(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=cR.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=qv(l.shape,i,s,!1),f=Kv(d.length,i.length,!1),h=Xv(l.shape,i,s,!1),p=kC({inputs:{x:l},backend:n,attrs:{shape:d}}),v=PC({inputs:{x:p},backend:n,attrs:{perm:f}}),m=kC({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),m}};function uO(e,t,n,r,a,i,o){var s=t[0],u=i[0],c=new Array(u),l=new Array(s),d=t[1];if(0===u){if(0!==s)throw new Error("Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(s));return[vn(n,0),[0,d],vn(a,0),c,l]}for(var f,h=!0,p=0,v=new Array(u).fill(0),m=0;m<s;++m){var g=e[m*d];if(g<0)throw new Error((f=g,"indices(".concat(m,", 0) is invalid: ").concat(f," < 0")));if(g>=u)throw new Error(km(m,g,u));++v[g],h=h&&g>=p,p=g}for(var y=!0,b=0;b<u;++b){var x=0===v[b];c[b]=x,y=y&&!x,v[b]=Math.max(v[b],1),b>0&&(v[b]+=v[b-1])}if(y&&h){for(var k=e,w=r,S=0;S<s;++S)l[S]=S;return[k,[s,d],w,c,l]}for(var I=v[u-1],N=vn(n,I*d),T=vn(a,I),C=new Array(u).fill(0),E=0;E<s;++E){var _=e[E*d],A=C[_],R=(0===_?0:v[_-1])+A;C[_]++;for(var O=0;O<d;++O)N[R*d+O]=e[E*d+O];T[R]=r[E],l[E]=R}for(var D=0;D<u;++D){if(0===C[D]){var P=0===D?0:v[D-1];N[P*d+0]=D;for(var F=1;F<d;++F)N[P*d+F]=0;T[P]=o}}return[N,[I,d],T,c,l]}var cO={kernelName:wi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],d=uO(s,r.shape,r.dtype,u,a.dtype,c,l),f=(0,C.Z)(d,5),h=f[0],p=f[1],v=f[2],m=f[3],g=f[4];return[n.makeTensorInfo(p,r.dtype,h),n.makeTensorInfo([p[0]],a.dtype,v),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};function lO(e,t,n,r,a){for(var i,o,s=an(r),u=t[0],c=a.length,l=[],d=1,f=-1,h=0;h<c;++h){var p=a[h];if(-1===p){if(-1!==f)throw new Error((o=h,"only one output dimension may be -1, not both ".concat(f," and ").concat(o)));f=h,l.push(1)}else{if(p<0)throw new Error((i=p,"size ".concat(h," must be non-negative, not ").concat(i)));d*=p,l.push(p)}}if(-1!==f){if(d<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var v=Math.trunc(s/d);if(d*v!==s)throw new Error(function(e,t){var n=an(e),r=an(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}(r,l));l[f]=v}if(an(l)!==s)throw new Error(function(e,t){var n=an(e),r=an(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}(r,l));var m=r.length,g=[];if(m>0){g[m-1]=1;for(var y=m-2;y>=0;--y)g[y]=g[y+1]*r[y+1]}var b=[];if(c>0){b[c-1]=1;for(var x=c-2;x>=0;--x)b[x]=b[x+1]*l[x+1]}for(var k=vn(n,u*c),w=0;w<u;++w){for(var S=0,I=0;I<m;++I)S+=e[w*m+I]*g[I];for(var N=0;N<c;++N)k[w*c+N]=Math.trunc(S/b[N]),S%=b[N]}return[k,[u,c],l]}var dO={kernelName:Si,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,u=Array.from(n.data.get(i.dataId).values),c=lO(s,r.shape,r.dtype,o,u),l=(0,C.Z)(c,3),d=l[0],f=l[1],h=l[2];return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}};function fO(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],c=u[1],l=s>0?a[s-1]+1:0,d=l;if(d<0)throw new Error("segment ids must be >= 0");var f=t.slice();f[0]=d;var h=f.reduce((function(e,t){return e*t}),1),p=vn(n,h);if(0===s)return d>0&&p.fill(o),[p,f];if(d<=0)throw new Error("segment ids must be >= 0");for(var v=0,m=1,g=0,y=a[v];;){var b=0;if(m<s){if(y===(b=a[m])){++m;continue}if(y>=b)throw new Error("segment ids are not increasing")}if(y<0||y>=d)throw new Error(wm(y,d));y>g&&p.fill(o,g*c,y*c);for(var x=v;x<m;++x){var k=r[x];if(k<0||k>=u[0])throw new Error(Sm(x,r[x],u[0]));for(var w=0;w<c;w++)p[y*c+w]+=e[k*c+w]}if(i)for(var S=0;S<c;S++)p[y*c+S]/=m-v;if(v=m,g=y+1,y=b,++m>s)break}return g<d&&p.fill(o,g*c,d*c),[p,f]}var hO={kernelName:Ii,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=fO(o,r.shape,r.dtype,s,u,!0),l=(0,C.Z)(c,2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var pO={kernelName:Ni,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,c=fO(o,r.shape,r.dtype,s,u),l=(0,C.Z)(c,2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var vO={kernelName:Ti,backendName:"cpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.sparseIndices,o=n.sparseValues,s=n.defaultValue,u=a.outputShape,c=Gh(0,i,u),l=c.sliceRank,d=c.numUpdates,f=c.sliceSize,h=c.strides,p=c.outputSize,v=!1,m=r.bufferSync(i);switch(o.dtype){case"bool":t=WR(m,r.bufferSync(o),u,p,f,d,l,h,Boolean(r.data.get(s.dataId).values[0]),v);break;case"float32":t=WR(m,r.bufferSync(o),u,p,f,d,l,h,r.data.get(s.dataId).values[0],v);break;case"int32":t=WR(m,r.bufferSync(o),u,p,f,d,l,h,r.data.get(s.dataId).values[0],v);break;case"string":t=WR(m,r.bufferSync(o),u,p,f,d,l,h,_o(r.data.get(s.dataId).values[0]),v);break;default:throw new Error("Unsupported type ".concat(o.dtype))}return r.makeTensorInfo(u,t.dtype,t.values)}};var mO={kernelName:xi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=fn(r.axis,a.shape)[0],s=xm(a,i,o),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return s.map((function(e){var t=(0,Le.Z)(c);t[o]=e;var r=oE({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,r}))}},gO=zT((function(e){return Math.sqrt(e)})),yO=BT(gi,(function(e){return Math.sqrt(e)})),bO={kernelName:gi,backendName:"cpu",kernelFunc:yO},xO={kernelName:Ei,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;LT(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},kO=KT((function(e,t){var n=e-t;return n*n})),wO=vC(Ci,kO),SO={kernelName:Ci,backendName:"cpu",kernelFunc:wO},IO=zT((function(e,t){var n=t.pattern,r=t.replaceGlobal,a=t.rewrite;return e.replace(new RegExp(n,r?"g":""),a)})),NO=UT(_i,IO),TO={kernelName:_i,backendName:"cpu",kernelFunc:NO},CO=BT(Gi,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),EO={kernelName:Gi,backendName:"cpu",kernelFunc:CO};function _O(e,t,n,r){for(var a=Uu(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat((0,Le.Z)(o)))}return a}var AO={kernelName:Ai,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,s=r.strides,u=r.beginMask,c=r.endMask,l=r.ellipsisMask,d=r.newAxisMask,f=r.shrinkAxisMask;LT(a,"stridedSlice");var h,p=il(a.shape,i,o,s,u,c,l,d,f),v=p.finalShapeSparse,m=p.finalShape,g=p.isIdentity,y=p.sliceDim0,b=p.isSimpleSlice,x=p.begin,k=p.end,w=p.strides;if(g)h=kC({inputs:{x:a},backend:n,attrs:{shape:m}});else if(y||b){tn(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var S=tl(x,k,w),I=oE({inputs:{x:a},backend:n,attrs:{begin:x,size:S}});h=kC({inputs:{x:I},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(I)}else{var N=_O(v,n.bufferSync(a),w,x);h=n.makeTensorInfo(m,N.dtype,N.values)}return h}},RO=function(){function e(t,n,r,a,i,o){Vt(this,e),this.separator=Eo(t),this.nGramWidths=n,this.leftPad=Eo(r),this.rightPad=Eo(a),this.padWidth=i,this.preserveShort=o}return Zt(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,s=function(s){var u=o.getPadWidth(i),c=Math.max(0,u-s),l=Math.max(0,u-(a-(s+1))),d=i-(c+l),f=t+(c>0?0:s-u),h=0;h+=c*o.leftPad.length;for(var p=0;p<d;++p)h+=e[f+p].length;h+=l*o.rightPad.length,h+=(c+l+d-1)*o.separator.length,n[r+s]=new Uint8Array(h);for(var v=n[r+s],m=0,g=function(e){return e.forEach((function(e){return v[m++]=e}))},y=0;y<c;++y)g(o.leftPad),g(o.separator);for(var b=0;b<d-1;++b)g(e[f+b]),g(o.separator);if(d>0){g(e[f+d-1]);for(var x=0;x<l;++x)g(o.separator),g(o.rightPad)}else{for(var k=0;k<l-1;++k)g(o.rightPad),g(o.separator);g(o.rightPad)}},u=0;u<a;++u)s(u)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var o=1;o<a;++o){var s=t[o]>=i;if(!(s=s&&t[o]<=r))throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(i,", ").concat(r,"]"));i=t[o]}if(i!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(i))}var u=a-1,c=vn("int32",a);if(0===r||0===a){for(var l=new Array(r),d=0;d<=u;++d)c[d]=0;return[l,c]}c[0]=0;for(var f=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),c[e]=c[e-1]+a},h=1;h<=u;++h)f(h);for(var p=new Array(c[u]),v=function(r){var a=t[r],i=c[r];if(n.nGramWidths.forEach((function(o){var s=t[r+1]-t[r],u=n.getNumNGrams(s,o);n.createNGrams(e,a,p,i,u,o),i+=u})),n.preserveShort&&i===c[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(e,a,p,i,1,s)}},m=0;m<u;++m)v(m);return[p,c]}}]),e}();function OO(e,t,n,r,a,i,o,s){return new RO(n,r,a,i,o,s).compute(e,t)}var DO={kernelName:Ri,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,d=t.dataSplits,f=OO(n.data.get(l.dataId).values,n.data.get(d.dataId).values,a,i,o,s,u,c),h=(0,C.Z)(f,2),p=h[0],v=h[1];return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",v)]}};function PO(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);n&&0===o.length||r.push(o),a=i+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var c=e.subarray(0,u);n&&0===c.length||r.push(c),u=(e=e.subarray(u+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var l=0;l<e.length;++l)r.push(e.subarray(l,l+1))}function FO(e,t,n){for(var r=e.length,a=[],i=0,o=0,s=new Array(r),u=0;u<r;++u){var c=a.length;PO(e[u],t,n,a);var l=a.length-c;s[u]=l,i+=l,o=Math.max(o,l)}for(var d=vn("int32",2*i),f=new Array(i),h=[r,o],p=0,v=0;v<r;++v)for(var m=0;m<s[v];++m)d[2*p]=v,d[2*p+1]=m,f[p]=a[p],++p;return[d,f,h]}var MO={kernelName:Oi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=FO(n.data.get(a.dataId).values,n.data.get(i.dataId).values[0],r),s=(0,C.Z)(o,3),u=s[0],c=s[1],l=s[2],d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(l))]}};function LO(e,t){for(var n=vn("int32",e.length),r=0;r<e.length;++r)n[r]=Io(e[r]).modulo(t).getLowBitsUnsigned();return n}var $O={kernelName:Di,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=LO(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",i)}},jO=BT(Fi,(function(e){return Math.tan(e)})),zO={kernelName:Fi,backendName:"cpu",kernelFunc:jO},BO=BT(Mi,(function(e){return Math.tanh(e)}));var UO={kernelName:si,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.tensor,a=t.indices,i=t.updates,o=Gh(0,a,r.shape),s=o.sliceRank,u=o.numUpdates,c=o.sliceSize,l=o.strides,d=o.outputSize,f=n.bufferSync(a),h=n.bufferSync(i),p=n.bufferSync(r),v=WR(f,h,r.shape,d,c,u,s,l,p,!1);return n.makeTensorInfo(r.shape,v.dtype,v.values)}};function VO(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=Uu(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var c=e.locToIndex(s);a.values[i]=e.values[c]}return a}var WO={kernelName:Li,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;LT(a,"tile");var o=VO(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},GO=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function ZO(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2),c=Math.max(n,Math.floor(t-i*s/a+u)),l=Math.min(r,Math.floor(t+(a-i)*s/a+u));ZO(e,t,c,l)}var d=e[t],f=n,h=r;for(Qt(e,n,t),GO(e[r],d)>0&&Qt(e,n,r);f<h;){for(Qt(e,f,h),f++,h--;GO(e[f],d)<0;)f+=1;for(;GO(e[h],d)>0;)h-=1}0===GO(e[n],d)?Qt(e,n,h):Qt(e,h+=1,r),h<=t&&(n=h+1),t<=h&&(r=h-1)}}function HO(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,u=pn(n,o*r),c=pn("int32",o*r),l=function(t){var n=t*s,i=e.subarray(n,n+s),o=new Array(i.length);i.forEach((function(e,t){return o[t]={value:e,index:t}})),r<o.length&&(ZO(o,r),o=o.slice(0,r)),a&&o.sort(GO);for(var l=t*r,d=u.subarray(l,l+r),f=c.subarray(l,l+r),h=0;h<r;h++)d[h]=o[h].value,f[h]=o[h].index},d=0;d<o;d++)l(d);var f=t.slice();return f[f.length-1]=r,[Uu(f,n,u),Uu(f,"int32",c)]}var qO={kernelName:$i,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted;LT(a,"topk");var s=HO(n.data.get(a.dataId).values,a.shape,a.dtype,i,o),u=(0,C.Z)(s,2),c=u[0],l=u[1];return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}};var KO={kernelName:ji,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=t.transforms,o=n.interpolation,s=n.fillMode,u=n.fillValue,c=n.outputShape,l=(0,C.Z)(a.shape,4),d=l[0],f=l[1],h=l[2],p=l[3],v=null!=c?c:[f,h],m=(0,C.Z)(v,2),g=m[0],y=m[1],b=[d,g,y,p],x=Sn(a.shape),k=x[0],w=x[1],S=x[2],I=Sn(b),N=I[0],T=I[1],E=I[2],_=pn(a.dtype,an(b));_.fill(u);for(var A=r.data.get(a.dataId).values,R=r.data.get(i.dataId).values,O=0;O<d;++O){for(var D=1===i.shape[0]?R:R.subarray(8*O,8*O+8),P=0;P<g;++P)for(var F=0;F<y;++F)for(var M=0;M<p;++M){var L=void 0,$=D[6]*F+D[7]*P+1;if(0!==$){var j=(D[0]*F+D[1]*P+D[2])/$,z=(D[3]*F+D[4]*P+D[5])/$,B=XO(j,h,s),U=XO(z,f,s);switch(o){case"nearest":L=YO(A,f,h,k,w,S,O,U,B,M,u);break;case"bilinear":L=QO(A,f,h,k,w,S,O,U,B,M,u);break;default:throw new Error("Error in Transform: Expect 'nearest' or "+"'bilinear', but got ".concat(o))}_[O*N+P*T+F*E+M]=L}}return r.makeTensorInfo(b,a.dtype,_)}return{dataId:r.write(_,b,a.dtype),shape:a.shape,dtype:a.dtype}}};function XO(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return Jt(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return Jt(0,n,t-1)}(e,t);case"nearest":return function(e,t){return Jt(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function JO(e,t,n,r,a,i,o,s,u,c,l){return 0<=s&&s<t&&0<=u&&u<n?e[o*r+s*a+u*i+c]:l}function YO(e,t,n,r,a,i,o,s,u,c,l){return JO(e,t,n,r,a,i,o,Math.round(s),Math.round(u),c,l)}function QO(e,t,n,r,a,i,o,s,u,c,l){var d=Math.floor(s),f=Math.floor(u),h=d+1,p=f+1;return(h-s)*((p-u)*JO(e,t,n,r,a,i,o,d,f,c,l)+(u-f)*JO(e,t,n,r,a,i,o,d,p,c,l))+(s-d)*((p-u)*JO(e,t,n,r,a,i,o,h,f,c,l)+(u-f)*JO(e,t,n,r,a,i,o,h,p,c,l))}function eD(e,t,n,r){for(var a=fn(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var s=a+1;s<n.length;s++)i[2]*=n[s];for(var u=new Map,c=new Int32Array(n[a]),l=new Ho(i,r,e),d=[],f=1===i[0]&&1===i[2],h=0;h<n[a];h++){var p=void 0;if(f)p=e[h].toString();else{for(var v=[],m=0;m<i[0];m++)for(var g=0;g<i[2];g++)v.push(l.get(m,h,g));p=v.join(",")}var y=u.get(p);if(null!=y)c[h]=y;else{var b=u.size;u.set(p,b),c[h]=b,d.push(h)}}var x=i.slice();x[1]=u.size;var k=new Ho(x,r);d.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)k.set(l.get(n,e,r),n,t,r)}));var w=n.slice();return w[a]=x[1],{outputValues:k.values,outputShape:w,indices:c}}var tD={kernelName:Bi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;LT(i,"unique");var o=eD(r.data.get(i.dataId).values,a,i.shape,i.dtype),s=o.outputValues,u=o.outputShape,c=o.indices;return[r.makeTensorInfo(u,i.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}};var nD={kernelName:Ui,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],u=new Array(o-1),c=0,l=0;l<o;l++)l!==i&&(u[c++]=a.shape[l]);var d=new Array(o).fill(0),f=a.shape.slice();f[i]=1;for(var h=new Array(s),p=0;p<h.length;p++){d[i]=p;var v=oE({inputs:{x:a},backend:n,attrs:{begin:d,size:f}});h[p]=kC({inputs:{x:v},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(v)}return h}};for(var rD={kernelName:Vi,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments;LT(a,"unsortedSegmentSum");for(var s=[],u=[],c=a.shape.length-i.shape.length,l=i,d=0;d<c;++d){var f=l_({inputs:{input:l},backend:n,attrs:{dim:d+1}});l=f,u.push(f)}for(var h=0;h<o;++h){var p=No(h,"int32"),v=n.makeTensorInfo([],"int32",p),m=r_({inputs:{a:v,b:l},backend:n}),g=hC({inputs:{x:m},backend:n,attrs:{dtype:"float32"}}),y=XE({inputs:{a:g,b:a},backend:n}),b=YE({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(v),u.push(m),u.push(g),u.push(y),u.push(b)}var x=sR({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},aD=0,iD=[NC,CC,_C,RC,xC,OC,MC,LC,$C,jC,BC,VC,GC,qC,XC,eE,tE,nE,rE,IC,aE,uE,dE,fE,pC,vE,gE,uC,yE,SE,NE,TE,CE,EE,_E,AE,OE,PE,FE,ME,LE,$E,jE,BE,UE,VE,WE,GE,ZE,HE,e_,WT,t_,a_,o_,c_,d_,p_,N_,C_,E_,R_,P_,F_,M_,$_,z_,V_,Z_,ZT,H_,kE,K_,J_,Q_,qT,nA,iA,sA,lA,fA,vA,gA,xA,kA,wA,NA,EA,_A,AA,RA,OA,DA,PA,FA,$A,jA,UA,GA,JE,HA,KA,JA,QA,nR,rR,oR,uR,cR,fR,YT,pR,bR,wR,ER,AR,dC,g_,OR,eC,nC,wC,DR,PR,FR,MR,LR,$R,zR,VR,GR,qR,KR,JR,iC,QR,tO,rO,sE,WA,oO,sO,cO,dO,hO,pO,vO,mO,bO,xO,SO,TO,EO,AO,DO,MO,$O,k_,QE,zO,{kernelName:Mi,backendName:"cpu",kernelFunc:BO},UO,WO,qO,KO,FC,tD,nD,rD,iR];aD<iD.length;aD++){ro(iD[aD])}var oD,sD,uD,cD={},lD={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function dD(e,t){if(!(e in cD)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if(Ln().getBool("IS_SAFARI")||"undefined"===typeof OffscreenCanvas||2!==e){if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}return new OffscreenCanvas(300,150)}(e):t;n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete cD[e]}),!1),Ln().getBool("SOFTWARE_WEBGL_ENABLED")&&(lD.failIfMajorPerformanceCaveat=!1);if(1===e)return n.getContext("webgl",lD)||n.getContext("experimental-webgl",lD);return n.getContext("webgl2",lD)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;cD[e]=n}var r=cD[e];return null==r||r.isContextLost()?(delete cD[e],dD(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),cD[e])}function fD(e,t){return[t,e]}function hD(e){var t=an(e);return un(Math.ceil(t/4))}function pD(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function vD(e,t){var n,r,a,i,o,s,u,c,l,d,f=e;return 2===Ln().getNumber("WEBGL_VERSION")?(n=f.R32F,r=f.R16F,a=f.RGBA16F,i=f.RGBA32F,o=f.RED,u=4,c=1,l=f.HALF_FLOAT,d=f.FLOAT,s=f.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=f.RGBA,o=e.RGBA,u=4,c=4,l=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:d}}function mD(e,t){var n=t();return Ln().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(oD||(oD={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(sD||(sD={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(uD||(uD={}));function gD(e){return!!(Ln().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function yD(e,t){return RD(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}var bD,xD,kD=/ERROR: [0-9]+:([0-9]+):/g;function wD(e,t){var n=kD.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return cn((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var c=o.slice(0,r-1),l=o.slice(r-1,r),d=o.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(cn(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}function SD(e,t){if(mD(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function ID(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(mD(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),mD(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),mD(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function ND(e,t,n){return RD(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function TD(e,t,n){return e.getUniformLocation(t,n)}function CD(e,t,n,r){mD(e,(function(){return function(e,t,n){OD(e,n),mD(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),mD(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),mD(e,(function(){return e.uniform1i(n,r)}))}function ED(e,t,n){mD(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),mD(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function _D(e,t){mD(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),mD(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function AD(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function RD(e,t,n){var r=mD(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function OD(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function DD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return an(e.slice(0,e.length-t))}function PD(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function FD(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[DD(e)].concat((0,Le.Z)(PD(e)))),t}function MD(e){return e%2===0}function LD(e,t){if(on(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e[e.length-1],r=t[t.length-1];if(n===r)return!0;if(MD(n)&&MD(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&MD(e[0])&&MD(t[0])}function $D(e,t){return null!=e.getExtension(t)}function jD(e){try{if(null!=dD(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function zD(e){if(0===e)return!1;var t=dD(e);if(1!==e){if($D(t,"EXT_color_buffer_float"))return BD(t);var n="EXT_color_buffer_half_float";if($D(t,n)){var r=t.getExtension(n);return function(e,t){var n=vD(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!!$D(t,"OES_texture_float")&&(!!$D(t,"WEBGL_color_buffer_float")&&BD(t))}function BD(e){var t=vD(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function UD(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&tn("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var VD=Ln();function WD(){var e,t,n,r,a,i,o,s,u,c;return 2===Ln().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s=Ln().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function GD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=Sn(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function ZD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=Sn(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function HD(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function qD(e){var t=Sn(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}VD.registerFlag("HAS_WEBGL",(function(){return VD.getNumber("WEBGL_VERSION")>0})),VD.registerFlag("WEBGL_VERSION",(function(){return jD(2)?2:jD(1)?1:0})),VD.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),VD.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===VD.get("WEBGL_VERSION")})),VD.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),VD.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),VD.registerFlag("WEBGL_PACK",(function(){return VD.getBool("HAS_WEBGL")})),VD.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return VD.getBool("WEBGL_PACK")})),VD.registerFlag("WEBGL_PACK_CLIP",(function(){return VD.getBool("WEBGL_PACK")})),VD.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return VD.getBool("WEBGL_PACK")})),VD.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return VD.getBool("WEBGL_PACK")})),VD.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return VD.getBool("WEBGL_PACK")})),VD.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return VD.getBool("WEBGL_PACK")})),VD.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return VD.getBool("WEBGL_PACK")})),VD.registerFlag("WEBGL_PACK_REDUCE",(function(){return VD.getBool("WEBGL_PACK")})),VD.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return VD.getBool("WEBGL_PACK")})),VD.registerFlag("WEBGL_CONV_IM2COL",(function(){return VD.getBool("WEBGL_PACK")})),VD.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==bD){var t=dD(e);bD=t.getParameter(t.MAX_TEXTURE_SIZE)}return bD}(VD.getNumber("WEBGL_VERSION"))})),VD.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==xD){var t=dD(e);xD=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,xD)}(VD.getNumber("WEBGL_VERSION"))})),VD.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=VD.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=dD(e);return $D(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:$D(t,"EXT_disjoint_timer_query")?1:0}(e)})),VD.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return VD.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!ws()})),VD.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=dD(e);if(1===e){if(!$D(t,"OES_texture_float"))return!1}else if(!$D(t,"EXT_color_buffer_float"))return!1;return BD(t)}(VD.getNumber("WEBGL_VERSION"))})),VD.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!VD.getBool("WEBGL_FORCE_F16_TEXTURES")&&VD.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),VD.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return zD(VD.getNumber("WEBGL_VERSION"))})),VD.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=VD.getNumber("WEBGL_VERSION"))&&null!=dD(e).fenceSync;var e})),VD.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return VD.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),VD.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),VD.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return ws()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),VD.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),VD.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),VD.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),VD.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128})),VD.registerFlag("WEBGL_EXP_CONV",(function(){return!1})),VD.registerFlag("SOFTWARE_WEBGL_ENABLED",(function(){return VD.getBool("IS_TEST")})),VD.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",(function(){return 1/0})),VD.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",(function(){return!1})),VD.registerFlag("WEBGL2_ISNAN_CUSTOM",(function(){return!1})),VD.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1}));var KD="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",XD=yc;function JD(e,t,n){var r=[];if(e.forEach((function(e){var t=an(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(mP(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,i,o=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?QD(e,r):YD(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;i.length<=o.length&&(a+=n?hP(e,t):pP(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,c=WD(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),d=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(eP,"\n    ").concat(tP,"\n    ").concat(nP,"\n  ")}(c);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(on(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,s="",u="b, r, c",c=2;c<e.length-1;c++)o*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(o,";\n      index -= b").concat(c," * ").concat(o,";\n    ")+s,u="b".concat(c,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(on(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=ZD(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=GD(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=ZD(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=GD(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=GD(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=GD(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(d+=rP),[d,l,i,o,a,s,n.userCode].join("\n")}function YD(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return iP(e,t);case 1:return oP(e,t);case 2:return sP(e,t);case 3:return uP(e,t);case 4:return cP(e,t);case 5:return lP(e);case 6:return dP(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function QD(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=WD();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=WD();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],u=WD();if(null!=i&&on(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=[1,2],u=gP(e,n.slice(1)),c=["b","row","col"];return"\n        ".concat(QD(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(yP(c,s),");\n        }\n      ")}var l=WD();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var d=o[0],f=o[1],h=Math.ceil(n[2]/2),p=h*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(d,", ").concat(f,", ").concat(p,", ").concat(h,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=WD();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=u[0],l=u[1],d=Math.ceil(i[o-1]/2),f=d*Math.ceil(i[o-2]/2),h="int b, int row, int col",p="b * ".concat(f," + (row / 2) * ").concat(d," + (col / 2)"),v=2;v<o-1;v++)h="int b".concat(v,", ")+h,f*=i[o-v-1],p="b".concat(v," * ").concat(f," + ")+p;return"\n    vec4 ".concat(r,"(").concat(h,") {\n      int index = ").concat(p,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var eP="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",tP="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",nP="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",rP="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function aP(e){return"offset".concat(e)}function iP(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=(0,C.Z)(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=aP(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var u=(0,C.Z)(e.shapeInfo.texShape,2),c=u[0],l=u[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(c,", ").concat(l,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function oP(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(fP(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=aP(n);return 1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function sP(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&on(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var o=i[0],s=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=hn(n),c=u.newShape,l=u.keptDims,d=c;if(d.length<n.length){var f=gP(e,d);return"\n      ".concat(YD(f,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(yP(["row","col"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(fP(e),"\n      }\n    ");var h=i[0],p=i[1],v=aP(r);return 1===p?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(h,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===h?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(p,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(v,";\n    vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function uP(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],s=hn(n),u=s.newShape,c=s.keptDims,l=u;if(l.length<n.length){var d=gP(e,l);return"\n        ".concat(YD(d,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(yP(["row","col","depth"],c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(fP(e),"\n      }\n    ");var f=e.shapeInfo.texShape,h=f[0],p=f[1],v=e.shapeInfo.flatOffset;if(p===i&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(p,".0, ").concat(h,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(p===o&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(p,".0, ").concat(h,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var m=aP(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(m,";\n        vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function cP(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,u=hn(n),c=u.newShape,l=u.keptDims;if(c.length<n.length){var d=gP(e,c);return"\n      ".concat(YD(d,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(yP(["row","col","depth","depth2"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(fP(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],v=h[1],m="int stride2 = ".concat(r,"Shape[3];"),g="int stride1 = ".concat(r,"Shape[2] * stride2;"),y="int stride0 = ".concat(r,"Shape[1] * stride1;");if(v===s&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(m,"\n        ").concat(g,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(v===i&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var b=aP(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(m,"\n      ").concat(g,"\n      ").concat(y,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function lP(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=hn(t),c=u.newShape,l=u.keptDims;if(c.length<t.length){var d=gP(e,c);return"\n      ".concat(YD(d),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(yP(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(fP(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],v=h[1];if(v===s&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===a&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(p,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var m=aP(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(p,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function dP(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=hn(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=gP(e,i);return"\n      ".concat(YD(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(yP(["row","col","depth","depth2","depth3","depth4"],o),");\n      }\n    ")}var u=t[5],c=t[4]*u,l=t[3]*c,d=t[2]*l,f=t[1]*d;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(f,", ").concat(d,", ").concat(l,", ").concat(c,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(u,", 1)));\n        ").concat(fP(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,v=p[0],m=p[1];if(m===f&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(d,", ").concat(l,", ").concat(c,", ").concat(u,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===u&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=aP(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(f," + col * ").concat(d," + depth * ").concat(l," +\n          depth2 * ").concat(c," + depth3 * ").concat(u," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function fP(e){var t=e.name,n=an(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function hP(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=XD(e.shapeInfo.logicalShape,t.logicalShape),c=vP(s),l=s-o,d=["x","y","z","w","u","v"];n=0===o?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(d[e+l]," = 0;")})).join("\n");var f="";f=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+l])})).join(", ");var h="return outputValue;",p=1===an(e.shapeInfo.logicalShape),v=1===an(t.logicalShape);if(1!==o||p||v){if(p&&!v)h=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var m=o-2,g=o-1;u.indexOf(m)>-1&&u.indexOf(g)>-1?h="return vec4(outputValue.x);":u.indexOf(m)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(f,");\n      ").concat(h,"\n    }\n  ")}function pP(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&on(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=vP(u),d=XD(e.shapeInfo.logicalShape,t.logicalShape),f=u-s,h=["x","y","z","w","u","v"];c=0===s?"":u<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords.".concat(h[e+f]," = 0;")})).join("\n");var p="";return p=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(h[t+f])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(p,");\n    }\n  ")}function vP(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function mP(e,t,n){var r=hn(t),a=r.newShape,i=r.keptDims,o=t.length,s=e&&3===o&&1===t[0],u=s?t.slice(1):a,c=!e&&o>1&&!on(t,n)&&a.length<o||s;return{useSqueezeShape:c,uniformShape:c?u:t,keptDims:i}}function gP(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function yP(e,t){return t.map((function(t){return e[t]})).join(", ")}function bP(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=JD(a,o,t),u=function(e,t){var n=RD(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(mD(e,(function(){return e.shaderSource(n,t)})),mD(e,(function(){return e.compileShader(n)})),Ln().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw wD(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}(e.gl,s),c=e.createProgram(u);return Ln().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o},xP(e,t,c))}function xP(e,t,n){var r,a,i,o,s=[],u=[],c=null;o=e.getUniformLocation(n,"NAN",!1),1===Ln().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(n,"INFINITY",!1));var l,d=!1,f=Ut(t.variableNames);try{for(f.s();!(l=f.n()).done;){var h=l.value,p={name:h,uniform:e.getUniformLocation(n,h,d),offset:e.getUniformLocation(n,"offset".concat(h),d)};t.enableShapeUniforms&&(p.shape=e.getUniformLocation(n,"".concat(h,"Shape"),d),p.texShape=e.getUniformLocation(n,"".concat(h,"TexShape"),d)),s.push(p)}}catch(Rme){f.e(Rme)}finally{f.f()}if(t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",d),i=e.getUniformLocation(n,"outShapeStrides",d),a=e.getUniformLocation(n,"outTexShape",d)),t.customUniforms){var v,m=Ut(t.customUniforms);try{for(m.s();!(v=m.n()).done;){var g=v.value;u.push(e.getUniformLocation(n,g.name,d))}}catch(Rme){m.e(Rme)}finally{m.f()}}return{variablesLocations:s,customUniformLocations:u,infLoc:c,nanLoc:o,outShapeLocation:r,outShapeStridesLocation:i,outTexShapeLocation:a}}function kP(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!on(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!on(o,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function wP(e,t,n,r,a){t.program.enableShapeUniforms||(kP(t.inShapeInfos,n),kP([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===Ln().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(var s=0;s<n.length;++s){var u=n[s],c=t.variablesLocations[s],l=c.uniform,d=c.offset,f=c.shape,h=c.texShape;if(f){var p=mP(t.program.packedInputs,u.shape,u.texData.texShape).uniformShape;switch(p.length){case 1:e.gl.uniform1iv(f,new Int32Array(p));break;case 2:e.gl.uniform2iv(f,new Int32Array(p));break;case 3:e.gl.uniform3iv(f,new Int32Array(p));break;case 4:e.gl.uniform4iv(f,new Int32Array(p))}}if(h&&e.gl.uniform2i(h,u.texData.texShape[0],u.texData.texShape[1]),null!=l)if(u.isUniform)if(an(u.shape)<2)e.gl.uniform1f(l,u.uniformValues[0]);else{var v=u.uniformValues;v instanceof Float32Array||(v=new Float32Array(v)),e.gl.uniform1fv(l,v)}else null!=u.texData.slice&&null!=d&&e.gl.uniform1i(d,u.texData.slice.flatOffset),e.setInputMatrixTexture(u.texData.texture.texture,l,s)}var m=t.outShapeLocation;if(m)switch(r.shape.length){case 1:e.gl.uniform1iv(m,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(m,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(m,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(m,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var g=Sn(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(g));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(g));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(g))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a)for(var y=0;y<t.program.customUniforms.length;++y){var b=t.program.customUniforms[y],x=t.customUniformLocations[y],k=a[y];if("float"===b.type)e.gl.uniform1fv(x,k);else if("vec2"===b.type)e.gl.uniform2fv(x,k);else if("vec3"===b.type)e.gl.uniform3fv(x,k);else if("vec4"===b.type)e.gl.uniform4fv(x,k);else if("int"===b.type)e.gl.uniform1iv(x,k);else if("ivec2"===b.type)e.gl.uniform2iv(x,k);else if("ivec3"===b.type)e.gl.uniform3iv(x,k);else{if("ivec4"!==b.type)throw Error("uniform type ".concat(b.type," is not supported yet."));e.gl.uniform4iv(x,k)}}e.executeProgram()}function SP(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=mP(e.packedInputs,t.shape,i),s=o.useSqueezeShape,u=o.uniformShape,c=o.keptDims,l="",d="",f="";if(1===u.length&&e.packedInputs){var h=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];l="".concat(h[0]>1,"_").concat(h[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var p=Sn(u);f="".concat(p[0]===i[1],"_").concat(p[p.length-1]===i[1])}}else d="".concat(u[0]>1,"_").concat(u[1]>1);var v=t.shape.length,m=2===u.length&&on(t.shape,i),g=1===an(t.shape),y=yc(t.shape,n.shape),b=!e.packedInputs&&v===n.shape.length&&on(i,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(v,"_").concat(b,"_").concat(s?c:"","_").concat(u.length,"_").concat(g,"_").concat(y,"_").concat(m,"_").concat(l,"_").concat(d,"_").concat(f,"_").concat(x,"_").concat(a)}else{var k=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(k,"_").concat(a)}}));var a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat(Ln().getNumber("WEBGL_VERSION"))}function IP(e){return Ln().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var NP=Zt((function e(t){Vt(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=oD.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=WD();this.outputShape=t,this.enableShapeUniforms=IP(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?ZD(["r","c","d"],t):GD(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),TP=Zt((function e(t){Vt(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=oD.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=WD();this.outputShape=t,this.enableShapeUniforms=IP(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?ZD(["r","c","d"],t):GD(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),CP=Zt((function e(t){Vt(this,e),this.variableNames=["A"],this.outTexUsage=sD.DOWNLOAD;var n=WD();this.outputShape=t,this.userCode="\n      ".concat(KD,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),EP=Zt((function e(t){Vt(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=sD.DOWNLOAD;var n=WD();this.outputShape=t,this.userCode="\n      ".concat(KD,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),_P={R:0,G:1,B:2,A:3},AP=Zt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";Vt(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var a=WD();this.outputShape=t,this.enableShapeUniforms=IP(this.outputShape.length);var i="result";n&&(i="floor(result * 255. + 0.5)");for(var o="",s=0;s<r.length;s++){var u=r[s];o+="\n          if(offset == ".concat(s,") {\n            result = values[").concat(_P[u],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":qD(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(r.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(r.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(a.texture2D,"(A, uv);\n          ").concat(o,"\n        }\n        ").concat(a.output," = vec4(").concat(i,", 0., 0., 0.);\n      }\n    ")})),RP=Zt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Vt(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=WD();this.outputShape=t,this.enableShapeUniforms=IP(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var u=2*o+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":qD(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")}));function OP(e){var t=WD();return function(e,t){var n=RD(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(mD(e,(function(){return e.shaderSource(n,t)})),mD(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function DP(e){return function(e,t){var n=RD(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return mD(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),mD(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function PP(e){return function(e,t){var n=RD(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return mD(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),mD(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function FP(e,t,n,r,a,i){!function(e,t){var n=Ln().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}(t,n);var o=function(e){return RD(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return mD(e,(function(){return e.bindTexture(s,o)})),mD(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),mD(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),mD(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),mD(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===Ln().getNumber("WEBGL_VERSION")?mD(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})):mD(e,(function(){return e.texStorage2D(s,1,r,t,n)})),mD(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function MP(e){return e.internalFormatFloat}function LP(e){return e.internalFormatHalfFloat}function $P(e){return e.downloadTextureFormat}function jP(e){return e.internalFormatPackedFloat}function zP(e){return e.internalFormatPackedHalfFloat}function BP(e,t,n,r,a,i,o,s){var u=e,c=new Float32Array(function(e,t){var n=pD(e,t),r=(0,C.Z)(n,2);return r[0]*r[1]*4}(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}var UP=function(){function e(t){Vt(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];var n=Ln().getNumber("WEBGL_VERSION");if(null!=t?(this.gl=t,function(e,t){cD[e]=t}(n,t)):this.gl=dD(n),t=this.gl,2===Ln().getNumber("WEBGL_VERSION")){var r=t;this.createVertexArray=function(){return mD(r,(function(){return r.createVertexArray()}))},this.bindVertexArray=function(e){return mD(r,(function(){return r.bindVertexArray(e)}))},this.deleteVertexArray=function(e){return mD(r,(function(){return r.deleteVertexArray(e)}))},this.getVertexArray=function(){return mD(r,(function(){return r.getParameter(r.VERTEX_ARRAY_BINDING)}))}}else if(null!=t){var a=t.getExtension("OES_vertex_array_object");if(null==a)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=function(){return mD(t,(function(){return a.createVertexArrayOES()}))},this.bindVertexArray=function(e){return mD(t,(function(){return a.bindVertexArrayOES(e)}))},this.deleteVertexArray=function(e){return mD(t,(function(){return a.deleteVertexArrayOES(e)}))},this.getVertexArray=function(){return mD(t,(function(){return t.getParameter(a.VERTEX_ARRAY_BINDING_OES)}))}}var i="WEBGL_color_buffer_float",o="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===Ln().getNumber("WEBGL_VERSION")){var s="OES_texture_half_float";if(this.textureFloatExtension=yD(this.gl,"OES_texture_float"),$D(this.gl,s))this.textureHalfFloatExtension=yD(this.gl,s);else if(Ln().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(i),$D(this.gl,o))this.colorBufferHalfFloatExtension=yD(this.gl,o);else if(Ln().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(i="EXT_color_buffer_float",$D(this.gl,i))this.colorBufferFloatExtension=this.gl.getExtension(i);else{if(!$D(this.gl,o))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(o)}this.vertexBuffer=DP(this.gl),this.indexBuffer=PP(this.gl),this.framebuffer=function(e){return RD(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=vD(this.gl,this.textureHalfFloatExtension)}return Zt(e,[{key:"debug",get:function(){return Ln().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;mD(t,(function(){return t.finish()})),mD(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),mD(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),mD(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),mD(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),mD(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=fD(t,n),i=(0,C.Z)(a,2);return FP(e,i[0],i[1],MP(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=fD(t,n),i=(0,C.Z)(a,2);return FP(e,i[0],i[1],LP(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=fD(t,n),i=(0,C.Z)(a,2);return FP(e,i[0],i[1],$P(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){mD(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===Ln().getNumber("WEBGL_VERSION")?mD(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):mD(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===Ln().getNumber("WEBGL_VERSION")?mD(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):mD(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),mD(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){var o,s,u;mD(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),o.set(a),2===Ln().getNumber("WEBGL_VERSION")?mD(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)})):mD(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,o)})),mD(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=pD(t,n),i=(0,C.Z)(a,2);return FP(e,i[0],i[1],zP(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=pD(t,n),i=(0,C.Z)(a,2);return FP(e,i[0],i[1],jP(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(_D(this.gl,this.framebuffer),this.outputTexture=null),mD(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=fD(t,n),i=(0,C.Z)(a,2),o=i[0],s=i[1],u=new Uint8Array(t*n*4);return mD(e,(function(){return e.readPixels(0,0,o,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return BP(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();mD(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return mD(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),mD(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),mD(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(Ln().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else Ln().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Ln().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return mD(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=OP(n));var r,a=function(e){return RD(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return mD(n,(function(){return n.attachShader(a,t.vertexShader)})),mD(n,(function(){return n.attachShader(a,e)})),function(e,t){if(mD(e,(function(){return e.linkProgram(t)})),!Ln().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,a),r=Object.assign(a,{vao:this.createVertexArray()}),this.bindVertexArray(r.vao),mD(n,(function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer)})),console.assert(function(e,t,n){return mD(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),ID(e,t,"clipSpacePos",n,3,20,0)&&ID(e,t,"uv",n,2,20,12)}(n,r,this.vertexBuffer),"gpgpu_util.bindVertexProgramAttributeStreams not fully successful."),this.debug&&SD(n,r),this.setProgram(r),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(mD(this.gl,(function(){return t.gl.deleteProgram(e)})),this.deleteVertexArray(e.vao))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&(this.bindVertexArray(this.program.vao),this.debug&&SD(this.gl,this.program)),mD(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?ND(this.gl,e,t):TD(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),mD(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),CD(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=pD(t,n),a=(0,C.Z)(r,2),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(e,i,o)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&SD(this.gl,this.program),AD(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;if(this.debug){var t=this.getVertexArray();console.assert(t===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}mD(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),mD(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=yD(this.gl,2===Ln().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===Ln().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==Ln().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=me(ye().mark((function e(t){var n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ln((function(){return n.disposed||n.isQueryAvailable(t,Ln().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,Ln().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)){var r=void 0;"setTimeoutCustom"in Ln().platform&&(r=Ln().platform.setTimeoutCustom.bind(Ln().platform)),ln((function(){return n.pollItems(),0===n.itemsToPoll.length}),(function(){return 0}),null,r)}}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),ED(this.gl,e,this.framebuffer),this.debug&&AD(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(ED(this.gl,this.outputTexture,this.framebuffer),this.debug&&AD(this.gl)):_D(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;ED(r,e,this.framebuffer),this.debug&&AD(r),this.outputTexture=e,mD(r,(function(){return r.viewport(0,0,t,n)})),mD(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),mD(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var VP=gC,WP=cE,GP=lE,ZP=fC,HP=hE,qP=bE,KP=n_,XP=s_,JP=f_,YP=__,QP=L_,eF=j_,tF=B_,nF=W_,rF=eA,aF=rA,iF=oA,oF=uA,sF=SA,uF=TA,cF=MA,lF=qE,dF=ZA,fF=eR,hF=hR,pF=yR,vF=kR,mF=CR,gF=_R,yF=BR,bF=WR,xF=rC,kF=TC,wF=iE,SF=uO,IF=lO,NF=fO,TF=gO,CF=IO,EF=_O,_F=OO,AF=FO,RF=LO,OF=y_,DF=VO,PF=HO,FF=DC,MF=eD;function LF(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function $F(e,t){return 1===t?[e]:LF(e,t)}var jF=function(){function e(t){if(Vt(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=IP(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=$F("rc",this.rank),r=vP(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return Zt(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),zF=Zt((function e(t,n){Vt(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=IP(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=HD(r,t);return a.map((function(t,r){var i="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),o=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(i,"; ").concat(o,";")})).join("")}(["r","c","d"],"inputShape"):GD(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":qD(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var BF=function(){function e(t){Vt(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}return Zt(e,[{key:"acquireTexture",value:function(e,t,n){var r=VF(t,n),a=WF(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=UF(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].pop();return this.usedTextures[a].push(s),s}return r===uD.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===uD.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===uD.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===uD.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===uD.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=VF(n,r),i=WF(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=UF(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=Ln().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var u=this.usedTextures[i],c=u&&u.indexOf(e);if(null==c||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[c]=u[u.length-1],u.pop(),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function UF(e,t,n,r,a){var i,o=function(e,t){switch(e){case uD.PACKED_2X2_FLOAT32:return jP(t);case uD.PACKED_2X2_FLOAT16:return zP(t);case uD.UNPACKED_FLOAT32:return MP(t);case uD.UNPACKED_FLOAT16:return LP(t);case uD.PACKED_4X1_UNSIGNED_BYTE:return $P(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=pD(e[0],e[1]),u=(0,C.Z)(s,2);i=u[0]*u[1]}else{var c=fD(e[0],e[1]),l=(0,C.Z)(c,2);i=l[0]*l[1]}var d=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*d}function VF(e,t){if(e===sD.UPLOAD)return uD.PACKED_2X2_FLOAT32;if(e===sD.RENDER||null==e)return function(e){return Ln().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?uD.PACKED_2X2_FLOAT32:uD.UNPACKED_FLOAT32:e?uD.PACKED_2X2_FLOAT16:uD.UNPACKED_FLOAT16}(t);if(e===sD.DOWNLOAD||e===sD.PIXELS)return uD.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function WF(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var GF=Zt((function e(t,n){Vt(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=IP(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),ZF="if (isnan(x)) return x;",HF="return x;",qF="return abs(x);";var KF="return (x >= 0.0) ? x : (exp(x) - 1.0);",XF=ZF+"\n  return (x < 0.0) ? 0.0 : x;\n",JF=ZF+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",YF="return x;",QF="return 1.0 / (1.0 + exp(-1.0 * x));",eM="return x;",tM="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",nM="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",rM="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",aM="return 1.0 / (1.0 + exp(-1.0 * x));",iM=Zt((function e(t,n){Vt(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=IP(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),oM=Zt((function e(t){Vt(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=IP(this.outputShape.length);var n=t.length,r=$F("rc",n),a=vP(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),sM=ep,uM={};var cM=Ln().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var lM=function(e){Mo(n,e);var t=Bo(n);function n(e){var r,a,i;if(Vt(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!Ln().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof UP)a=e;else{var o=dD(Ln().getNumber("WEBGL_VERSION"),e);a=new UP(o)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var s=dD(Ln().getNumber("WEBGL_VERSION"));a=new UP(s),r.binaryCache=((i=Ln().getNumber("WEBGL_VERSION"))in uM||(uM[i]={}),uM[i]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new BF(r.gpgpu),r.numMBBeforeWarning=null==Ln().global.screen?1024:Ln().global.screen.height*Ln().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new Ht(je(r),Zu()),r}return Zt(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"writeTexture",value:function(e,t,n,r,a,i){var o=this.makeTensorInfo(t,n),s=this.texData.get(o.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,a]},s.texShape=[r,a];var u=FD(t),c=new AP(u,!1,i),l=this.runWebGLProgram(c,[o],n,[[r,a]]);return l.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(o),l.dataId}},{key:"write",value:function(e,t,n){if((Ln().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Ln().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:sD.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(Ln().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:sD.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new iM(o,YF):new GF(o,YF);var c=this.runWebGLProgram(u,[{dataId:e,shape:o,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,f,h=null!=this.activeTimers;(h&&(d=Co()),"complex64"===r)?f=um(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):f=this.getValuesFromTexture(e);return h&&(this.downloadWaitMs+=Co()-d),this.convertAndCacheOnCPU(e,f)}},{key:"read",value:function(){var e=me(ye().mark((function e(t){var n,r,a,i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,x,k,w,S,I;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,s=r.dtype,u=r.complexTensorInfos,c=r.isPacked,null==o){e.next=11;break}return l=c?new iM(i,YF):new GF(i,YF),d=this.runWebGLProgram(l,[{dataId:t,shape:i,dtype:s}],s),f=this.read(d.dataId),this.disposeIntermediateTensorInfo(d),e.abrupt("return",f);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!Ln().getBool("DEBUG")){e.next=16;break}if(Ln().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==Ln().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(h=null,"complex64"!==s&&Ln().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(t),m=this.texData.get(p.dataId),h=(v=this.gpgpu).createBufferFromTexture.apply(v,[m.texture.texture].concat((0,Le.Z)(hD(i))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==s){e.next=31;break}return e.next=25,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 25:y=e.sent,b=y[0],x=y[1],g=um(b,x),e.next=32;break;case 31:null==h?g=this.getValuesFromTexture(t):(k=an(i),g=this.gpgpu.downloadFloat32MatrixFromBuffer(h,k));case 32:return null!=p&&this.disposeIntermediateTensorInfo(p),null!=h&&mD(w=this.gpgpu.gl,(function(){return w.deleteBuffer(h)})),S=this.convertAndCacheOnCPU(t,g),I=this.pendingRead.get(t),this.pendingRead.delete(t),I.forEach((function(e){return e(S)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&Zu().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",S);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var c;c=s?new iM(a,YF):new GF(a,YF);var l=this.runWebGLProgram(c,[{dataId:e,shape:a,dtype:o}],o),d=this.readToGPU(l,t);return this.disposeIntermediateTensorInfo(l),d}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var f=this.decode(e,t.customTexShape),h=Zu().makeTensorFromTensorInfo(f),p=this.texData.get(f.dataId);return Object.assign({tensorRef:h},p.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return _o(e)}));return Uu(e.shape,e.dtype,n)}catch(Kte){throw new Error("Failed to decode encoded string bytes into utf-8")}return Uu(e.shape,e.dtype,t)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!gD(n)){if(Ln().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=an(n);if(Ln().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),u=this.texData.get(s.dataId),c=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[u.texture.texture].concat((0,Le.Z)(hD(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),c}var l=Ln().getBool("WEBGL_PACK")&&!0===a,d=l?FD(n):n,f=l?new EP(d):new CP(d),h=this.runWebGLProgram(f,[{shape:d,dtype:r,dataId:e}],"float32"),p=this.texData.get(h.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(p.texture.texture,p.texShape[0],p.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(h),v}},{key:"timerAvailable",value:function(){return Ln().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=Ro(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=Ro(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return me(ye().mark((function e(){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Ln().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(i);case 3:n=e.sent,s.kernelMs=en(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return Ln().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Co(),endMs:null}}},{key:"endTimer",value:function(e){return Ln().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Co(),e)}},{key:"getQueryTime",value:function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Ln().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cM;return Ln().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&an(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){Ji("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return sM(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new iM(e.shape,t),a=this.compileAndRun(r,[e],n);return Zu().makeTensorFromTensorInfo(a)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=kF(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Ln().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,qF,e.dtype);var n=new GF(e.shape,qF),r=this.compileAndRun(n,[e]);return Zu().makeTensorFromTensorInfo(r)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&yn(n[0])){var a=n.map((function(e){return Eo(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){return Zu().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}},{key:"unpackTensor",value:function(e){var t=new oM(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new jF(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[DD(e.shape)].concat((0,Le.Z)(PD(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[DD(t)].concat((0,Le.Z)(PD(t))),i=new zF(a,n),o=[n],s=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype;null!=t&&tn(an(a)<=t[0]*t[1]*4,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}));var o,s=FD(a);o=r?new TP(s):new NP(s);var u=[null!=t?t:hD(s)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:e}],i,u,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===oD.DENSE){var c=null!=o?o:hD(e.outputShape);u.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===an(s.shape))return u.values=pn(s.dtype,0),s;var l=[],d=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&an(t.shape)<=Ln().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),l.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!LD(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),l.push(t),n=a.texData.get(t.dataId),r.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var f,h={shape:s.shape,texData:u,isUniform:!1},p=SP(e,d,h),v=this.getAndSaveBinary(p,(function(){return bP(a.gpgpu,e,d,h)})),m=null!=this.activeTimers;m&&(f=this.startTimer()),Ln().get("ENGINE_COMPILE_ONLY")||wP(this.gpgpu,v,d,h,r),l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),m&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));var g=Ln().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var y=Co();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!Ln().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===i){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return i}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!Ln().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=qu((function(){if(!Ln().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=Ln().getBool("DEBUG");Ln().set("DEBUG",!1);var n=e.abs(oc(1e-8)).dataSync()[0];if(Ln().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,s=t.isPacked;if(null==i){var u,c=null!=this.activeTimers;c&&(u=Co());var l=t.texShape;if(null==l&&(l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Ln().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Ln().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&Ln().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?Yt(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var a=hn(e);e=a.newShape}var i=an(e),o=null;e.length<=1&&i<=n?o=[1,i]:2===e.length&&e[0]<=n&&e[1]<=n?o=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?o=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?o=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?o=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(o=[e[0],e[1]*e[2]*e[3]]);var s=null!=o&&Math.max.apply(Math,(0,Le.Z)(o))>r&&Math.min.apply(Math,(0,Le.Z)(o))<=(t?2:1)&&Math.min.apply(Math,(0,Le.Z)(o))>0;if(null==o||s)if(t){var u=DD(e),c=2,l=2;if(e.length){var d=PD(e),f=(0,C.Z)(d,2);c=f[0],l=f[1]}o=un(i=u*(c/2)*(l/2)).map((function(e){return 2*e}))}else o=un(i);return o}(n,s),t.texShape=l),null!=a){var d,f=FD(n),h=l[1],p=l[0],v=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(s||!v){var m=pD(l[0],l[1]),g=(0,C.Z)(m,2);h=g[0],p=g[1]}d=s?new RP(f,v):new AP(f,v);var y=v?[p,h]:l,b=this.makeTensorInfo(y,r),x=this.texData.get(b.dataId);x.usage=v?sD.PIXELS:sD.UPLOAD,x.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),h,p,a);var k=[[p,h]],w=this.runWebGLProgram(d,[b],r,k,!0),S=this.texData.get(w.dataId);t.texShape=S.texShape,t.isPacked=S.isPacked,t.usage=S.usage,Ln().get("ENGINE_COMPILE_ONLY")?this.disposeData(w.dataId):(t.texture=S.texture,t.values=null,this.texData.delete(w.dataId)),this.disposeIntermediateTensorInfo(b),c&&(this.uploadWaitMs+=Co()-u)}else{var I=this.acquireTexture(l,o,r,s);t.texture=I}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*gn(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=(0,C.Z)(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=me(ye().mark((function e(){var t,n,r,a,i,o,s,u,c=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,r=Object.entries(this.binaryCache);n<r.length;n++)a=(0,C.Z)(r[n],2),i=a[1],t.push(this.checkCompletionAsync_(i));return e.abrupt("return",Promise.all(t));case 6:for(o=function(){var e=(0,C.Z)(u[s],2)[1],n=new Promise((function(t){try{c.checkCompletion_(e),t(!0)}catch(n){throw n}}));t.push(n)},s=0,u=Object.entries(this.binaryCache);s<u.length;s++)o();return e.abrupt("return",Promise.all(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}return e.abrupt("return",this.checkCompletion_(t));case 4:return e.next=6,Vv();case 6:return e.abrupt("return",this.checkCompletionAsync_(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw wD(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.");throw new Error("Failed to link vertex and fragment shaders.")}return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.values(this.binaryCache);e<t.length;e++){var n=t[e],r=xP(this.gpgpu,n.program,n.webGLProgram),a=r.variablesLocations,i=r.customUniformLocations,o=r.infLoc,s=r.nanLoc,u=r.outShapeLocation,c=r.outShapeStridesLocation,l=r.outTexShapeLocation;n.variablesLocations=a,n.customUniformLocations=i,n.infLoc=o,n.nanLoc=s,n.outShapeLocation=u,n.outShapeStridesLocation=c,n.outTexShapeLocation=l}}},{key:"createTensorFromGPUData",value:function(e,t,n){e.channels=e.channels||"RGBA";var r=e.texture,a=e.height,i=e.width,o=e.channels,s=Zu().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");var u=s.writeTexture(r,t,n,a,i,o);return Zu().makeTensorFromDataId(u,t,n,s)}}]),n}(qt);lM.nextDataId=0;Ss()&&Ju("webgl",(function(){return new lM}),2);var dM=Zt((function e(t,n,r){Vt(this,e),this.variableNames=["A","B"],this.outputShape=xc(n,r),this.enableShapeUniforms=IP(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),fM="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n",hM=Zt((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Vt(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=xc(n,r);var i=this.outputShape.length;this.enableShapeUniforms=IP(i);var o="";if(a)if(0===i||1===an(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=vP(i);if(o="\n          ".concat(s," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=$F("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function pM(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var vM={kernelName:ta,backendName:"webgl",kernelFunc:pM};function mM(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=pM({inputs:{x:r},backend:n}),u=pM({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var gM={kernelName:hr,backendName:"webgl",kernelFunc:mM},yM="return (a < 0.) ? b * a : a;",bM="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var xM={kernelName:sa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",No(i,"float32")),s=Ln().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hM(bM,a.shape,o.shape):new dM(yM,a.shape,o.shape),u=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),u}},kM="return (a < 0.) ? b * a : a;",wM="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var SM={kernelName:Ua,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=Ln().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hM(wM,r.shape,a.shape):new dM(kM,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}};function IM(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,u=o.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var d=c.texData.get(u.dataId),f=r(d.values,l);return c.makeTensorInfo(u.shape,l,f)}return i=Ln().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new iM(u.shape,n):new GF(u.shape,t),c.runWebGLProgram(i,[u],l)}}function NM(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,i=e.backend,c=r.a,l=r.b,d=i;if(o&&"complex64"===c.dtype){var f=d.texData.get(c.dataId),h=d.texData.get(l.dataId),p=[[f.complexTensorInfos.real,h.complexTensorInfos.real],[f.complexTensorInfos.imag,h.complexTensorInfos.imag]].map((function(e){var n=(0,C.Z)(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:c.shape},o={dataId:a.dataId,dtype:a.dtype,shape:l.shape},s=new dM(t,c.shape,l.shape);return d.runWebGLProgram(s,[i,o],is(r.dtype,a.dtype))})),v=(0,C.Z)(p,2),m=v[0],g=v[1],y=mM({inputs:{real:m,imag:g},backend:d});return d.disposeIntermediateTensorInfo(m),d.disposeIntermediateTensorInfo(g),y}var b,x=u||is(c.dtype,l.dtype);if(("string"===c.dtype||"string"===l.dtype||d.shouldExecuteOnCPU([c,l]))&&null!=s){var k=d.texData.get(c.dataId).values,w=d.texData.get(l.dataId).values,S="string"===c.dtype?Nm(k):k,I="string"===c.dtype?Nm(w):w,N=s(c.shape,l.shape,S,I,x),T=(0,C.Z)(N,2),E=T[0],_=T[1],A=d.makeTensorInfo(_,x);return d.texData.get(A.dataId).values=E,A}return b=Ln().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new hM(n,c.shape,l.shape,a):new dM(t,c.shape,l.shape),d.runWebGLProgram(b,[c,l],x)}}function TM(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?eM:HF;if("relu"===e)return t?nM:XF;if("elu"===e)return t?tM:KF;if("relu6"===e)return t?rM:JF;if("prelu"===e)return t?wM:kM;if("leakyrelu"===e)return t?bM:yM;if("sigmoid"===e)return t?aM:QF;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var CM=Zt((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Vt(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=IP(this.outputShape.length);var l=a?t[1]:t[2],d=Math.ceil(l/2),f=a?"i * 2, rc.y":"rc.y, i * 2",h=i?"rc.z, i * 2":"i * 2, rc.z",p=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",g="";s&&(m=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),g="result = activation(result);");var y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="imod(rc.x, ".concat(t[0],")"):n[0]<t[0]&&(x="imod(rc.x, ".concat(n[0],")")),this.userCode="\n      ".concat(m,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(d,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(b,";\n        int batchB = ").concat(x,";\n        for (int i = 0; i < ").concat(d,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(f,");\n          vec4 b = getMatrixB(batchB, ").concat(h,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(p[0]," * ").concat(v[0],");\n          result += (").concat(p[1]," * ").concat(v[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")})),EM="return areal * breal - aimag * bimag;",_M="return areal * bimag + aimag * breal;",AM=Zt((function e(t,n,r){Vt(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=xc(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),RM="return a * b;";function OM(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=is(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(i.dataId),c=new AM(EM,a.shape,i.shape),l=new AM(_M,a.shape,i.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],f=r.runWebGLProgram(c,d,"float32"),h=r.runWebGLProgram(l,d,"float32"),p=mM({inputs:{real:f,imag:h},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(h),p}if(r.shouldExecuteOnCPU([a,i])){var v=r.texData.get(a.dataId),m=r.texData.get(i.dataId),g=lF(a.shape,i.shape,v.values,m.values,o),y=(0,C.Z)(g,2),b=y[0],x=y[1],k=r.makeTensorInfo(x,o);return r.texData.get(k.dataId).values=b,k}return t=Ln().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hM(RM,a.shape,i.shape):new dM(RM,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var DM={kernelName:Ra,backendName:"webgl",kernelFunc:OM};function PM(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=an(a.shape),u=dn(i,s),c=an(u);tn(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var l=o.texData.get(a.dataId);return!l.isPacked||LD(a.shape,u)||null!==l.texture&&LD(l.shape,u)?(o.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[DD(e.shape)].concat((0,Le.Z)(PD(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[DD(t)].concat((0,Le.Z)(PD(t))),o=new zF(i,r),s=[r],u=n.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,o)}var FM={kernelName:Ja,backendName:"webgl",kernelFunc:PM},MM=Zt((function e(t,n){Vt(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=4*Math.floor(r/4),u=r%4,c="sumValue += dot(values, ones);";if(null!=n){var l=1/n;c="sumValue += dot(values * ".concat(sn(l)?l.toPrecision(2):l,", ones);")}var d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),LM=Zt((function e(t,n){Vt(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),d=r%4,f="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),h="vec4";"all"===n?(s="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===n&&(s="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var p="";i%r>0&&(p="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(p,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(f,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===d,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(2===d,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(3===d,") {\n          ").concat(h," values = ").concat(h,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(f,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}));function $M(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=Zv(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,u=a[o],c=u.inSize,l=u.windowSize,d=u.outSize,f=void 0;f="mean"===n?0===o?new MM({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d},c):new MM({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d}):new LM({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d},n),s=i,i=r.runWebGLProgram(f,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var jM=Zt((function e(t,n){Vt(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=vP(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var zM=Zt((function e(t,n){Vt(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=vP(this.rank),o=LF("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),d="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(d,";\n      if(").concat(l,") {\n        result[1] = ").concat(d,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(d,";\n        if(").concat(l,") {\n          result[3] = ").concat(d,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function BM(e,t,n){var r=Ln().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zM(e.shape,t):new jM(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function UM(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=fn(a,e.shape),s=o,u=Od(s,i),c=null!=u,l=e;c&&(l=BM(e,u,r),s=Pd(s.length,i)),Rd("sum",s,i);var d=_d(l.shape,s),f=(0,C.Z)(d,2),h=f[0],p=f[1],v=h;n&&(v=Ad(h,o));var m=an(p),g=PM({inputs:{x:l},attrs:{shape:[an(e.shape)/m,m]},backend:r}),y=$M(g,os(e.dtype),"sum",r),b=PM({inputs:{x:y},attrs:{shape:v},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(y),c&&r.disposeIntermediateTensorInfo(l),b}(t.x,r.axis,r.keepDims,n)}var VM={kernelName:yi,backendName:"webgl",kernelFunc:UM};function WM(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,u=i.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=i.shape[o[l]];if(s.shouldExecuteOnCPU([i])){var d=s.texData.get(i.dataId).values,f=FF(d,i.shape,i.dtype,o,c);t=s.makeTensorInfo(c,i.dtype),s.texData.get(t.dataId).values=f}else t=BM(i,o,s);return t}var GM={kernelName:zi,backendName:"webgl",kernelFunc:WM};function ZM(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,f=e.activation,h=void 0===f?null:f,p=t.shape.length,v=n.shape.length,m=r?t.shape[p-2]:t.shape[p-1],g=a?n.shape[v-1]:n.shape[v-2],y=r?t.shape[p-1]:t.shape[p-2],b=a?n.shape[v-2]:n.shape[v-1],x=t.shape.slice(0,-2),k=n.shape.slice(0,-2),w=an(x),S=an(k),I=xc(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);tn(m===g,(function(){return"Error in matMul: inner shapes (".concat(m,") and (")+"".concat(g,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var N,T=r?[w,m,y]:[w,y,m],C=a?[S,b,g]:[S,g,b],E=PM({inputs:{x:t},backend:i,attrs:{shape:T}}),_=PM({inputs:{x:n},backend:i,attrs:{shape:C}}),A=[E,_],R=Math.max(w,S),O=r?E.shape[1]:E.shape[2],D=null!=s,P=null!=c,F="leakyrelu"===h,M=null!=h?TM(h,!0):null;if((1===y||1===b)&&O>1e3&&!1===(D||P||F||null!=M)){var L=E,$=_;r&&(L=WM({inputs:{x:E},backend:i,attrs:{perm:[0,2,1]}}),A.push(L)),a&&($=WM({inputs:{x:_},backend:i,attrs:{perm:[0,2,1]}}),A.push($));var j=1===b,z=L;1!==b&&(z=PM({inputs:{x:L},backend:i,attrs:{shape:[R,O,1]}}),A.push(z));var B=1===b?2:1,U=$;j&&(U=PM({inputs:{x:$},backend:i,attrs:{shape:[R,1,O]}}),A.push(U));var V=OM({inputs:{a:z,b:U},backend:i});N=UM({inputs:{x:V},backend:i,attrs:{axis:B,keepDims:!0}}),A.push(V)}else{var W=is(t.dtype,n.dtype),G=new CM(T,C,[R,y,b],r,a,D,M,P,F),Z=[E,_];if(null!=s&&Z.push(s),P&&Z.push(c),F){var H=i.makeTensorInfo([],"float32",No(d,"float32"));Z.push(H),A.push(H)}N=i.runWebGLProgram(G,Z,W)}var q=PM({inputs:{x:N},backend:i,attrs:{shape:I}});A.push(N);for(var K=0,X=A;K<X.length;K++){var J=X[K];i.disposeIntermediateTensorInfo(J)}return q}var HM={kernelName:qi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return ZM({a:a,b:i,transposeA:u,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},qM="return abs(x);";var KM={kernelName:Un,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=kF(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=Ln().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new iM(a.shape,qM):new GF(a.shape,qM),r.runWebGLProgram(t,[a],a.dtype)}},XM=IM({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),JM={kernelName:Vn,backendName:"webgl",kernelFunc:XM},YM=IM({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),QM={kernelName:Wn,backendName:"webgl",kernelFunc:YM},eL="return a + b;",tL=NM({opSnippet:eL,packedOpSnippet:eL,supportsComplex:!0,cpuKernelImpl:VP}),nL={kernelName:Gn,backendName:"webgl",kernelFunc:tL},rL=Zt((function e(t,n){Vt(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),aL=Zt((function e(t,n){Vt(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var iL={kernelName:Zn,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return pM({inputs:{x:a[0]},backend:r});if(a.length>Ln().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return is(e,t)})),c=a.map((function(e){return e.shape})),l=Ln().getBool("WEBGL_PACK")?new aL(a[0].shape,c):new rL(a[0].shape,c);return r.runWebGLProgram(l,a,u)}};var oL={kernelName:Hn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=fn(i,a.shape),c=u,l=Od(c,s),d=a;null!=l&&(d=WM({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Pd(c.length,s)),Rd("all",c,s);var f,h=_d(d.shape,c),p=(0,C.Z)(h,2),v=p[0],m=PM({inputs:{x:d},backend:n,attrs:{shape:[-1,an(p[1])]}}),g=$M(m,m.dtype,"all",n);return f=PM(o?{inputs:{x:g},backend:n,attrs:{shape:Ad(v,u)}}:{inputs:{x:g},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),f}};var sL={kernelName:qn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=fn(i,a.shape),c=u,l=Od(c,s),d=a;null!=l&&(d=WM({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Pd(c.length,s)),Rd("any",c,s);var f,h=_d(d.shape,c),p=(0,C.Z)(h,2),v=p[0],m=PM({inputs:{x:d},backend:n,attrs:{shape:[-1,an(p[1])]}}),g=$M(m,m.dtype,"any",n);return f=PM(o?{inputs:{x:g},backend:n,attrs:{shape:Ad(v,u)}}:{inputs:{x:g},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),f}},uL=Zt((function e(t,n,r){Vt(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),cL=Zt((function e(t,n,r,a){Vt(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,tn(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,l=c.length,d=vP(l),f=$F("coords",l);if(1===o){var h=vP(u=l+1);s="\n        ".concat(h," sourceLocR = ").concat(h,"(").concat(f.join(),", 0);\n        ++").concat(f[l-1],";\n        ").concat(h," sourceLocG = ").concat(h,"(").concat(f.join(),", 0);\n        ++").concat(f[l-2],";\n        ").concat(h," sourceLocA = ").concat(h,"(").concat(f.join(),", 0);\n        --").concat(f[l-1],";\n        ").concat(h," sourceLocB = ").concat(h,"(").concat(f.join(),", 0);\n        --").concat(f[l-2],";")}else u=l,s="\n        ".concat(d," sourceLocR = coords;\n        ++").concat(f[l-1],";\n        ").concat(d," sourceLocG = coords;\n        ++").concat(f[l-2],";\n        ").concat(d," sourceLocA = coords;\n        --").concat(f[l-1],";\n        ").concat(d," sourceLocB = coords;\n        --").concat(f[l-2],";");var p=["x","y","z","w","u","v"].slice(0,u),v="."+p[u-1],m=p.map((function(e){return"int "+e})),g=$F("sourceLocR",u-1).concat("inIdx.r"),y=$F("sourceLocG",u-1).concat("inIdx.g"),b=$F("sourceLocB",u-1).concat("inIdx.b"),x=$F("sourceLocA",u-1).concat("inIdx.a"),k="max"===r?"greaterThan":"lessThan",w=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),S="vec4(\n            getAChannel(".concat(g.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),I=a?"":"\n      float getBestIndicesAChannel(".concat(m.join(),") {\n        return getChannel(getBestIndicesA(").concat(p.join(),"),\n                                          vec2(").concat(p.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(m.join(),") {\n        return getChannel(getA(").concat(p.join(),"),\n                               vec2(").concat(p.slice(-2).join(),"));\n      }\n      ").concat(I,"\n      void main() {\n        ").concat(d," coords = getOutputCoords();\n        bool hasNextCol = ").concat(f[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(f[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(v,", sourceLocG").concat(v,",\n          sourceLocB").concat(v,", sourceLocA").concat(v,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(S,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(S,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(k,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function lL(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=Zv(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},u=new uL(s,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;var d=lL(e,t,n,l);return e.disposeIntermediateTensorInfo(l),d}function dL(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=a[a.length-1],o=Zv(i),s=new cL(a,o,n,null==r),u=null==r?[t]:[t,r],c=e.runWebGLProgram(s,u,"int32");if(c.shape.length===t.shape.length){var l=dL(e,t,n,c);return e.disposeIntermediateTensorInfo(c),l}return c}function fL(e,t,n,r){var a=[n];if(Rd("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!Ln().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),i.push(s));var u=_d(s.shape,a),c=(0,C.Z)(u,2),l=c[0],d=an(c[1]),f=PM({inputs:{x:s},backend:e,attrs:{shape:[-1,d]}});i.push(f);var h=lL(e,f,r);i.push(h);var p=PM({inputs:{x:h},backend:e,attrs:{shape:l}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),p}return dL(e,t,r)}var hL={kernelName:Kn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=fn(r.axis,a.shape),o=Od(i,a.shape.length),s=a,u=[];null!=o&&(s=WM({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=Pd(i.length,s.shape.length)),Rd("argMax",[i[0]],s.shape.length);var c=fL(n,s,i[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}};var pL={kernelName:Xn,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=fn(r.axis,a.shape),o=Od(i,a.shape.length),s=a,u=[];null!=o&&(s=WM({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=Pd(i.length,s.shape.length)),Rd("argMin",[i[0]],s.shape.length);var c=fL(n,s,i[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},vL=IM({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),mL={kernelName:Jn,backendName:"webgl",kernelFunc:vL},gL=IM({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),yL={kernelName:Yn,backendName:"webgl",kernelFunc:gL},bL=IM({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),xL={kernelName:Qn,backendName:"webgl",kernelFunc:bL},kL=NM({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),wL={kernelName:tr,backendName:"webgl",kernelFunc:kL},SL=IM({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),IL={kernelName:er,backendName:"webgl",kernelFunc:SL},NL=Zt((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Vt(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;var v="avg"===n,m="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),g="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(v||(y="-1.0 / 1e-20"),r){var b=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(b," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?m:g:"wR * ".concat(f," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var x="max",k="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(k="avgValue / max(count, 1.0)");var w=4*Math.floor(o/4),S=o%4,I="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(x,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(h,", ").concat(p,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(I,"\n          }\n\n          int xC = xCCorner + ").concat(w,";\n          if (").concat(1===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(I,"\n          } else if (").concat(2===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(I,"\n          } else if (").concat(3===S,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(I,"\n          }\n        }\n        setOutput(").concat(k,");\n      }\n    ")}})),TL=Zt((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Vt(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,d=t.dilationHeight,f=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,v=t.effectiveFilterWidth,m=t.padInfo.front,g=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){var k=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(h,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(p,";\n                wR += ").concat(d,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(v,";\n                  wC += ").concat(f,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(k," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(p," * ").concat(v," +\n                      wR * ").concat(v," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="max",S="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(S="avgValue / max(count, 1.0)");var I=4*Math.floor(o/4),N=o%4,T="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(w,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(g,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(h,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(p,";\n            wR += ").concat(d,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(I,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(f,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(f,", ch)\n              );\n\n              ").concat(T,"\n            }\n\n            int xC = xCCorner + ").concat(I,";\n            if (").concat(1===N,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(T,"\n            } else if (").concat(2===N,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(T,"\n            } else if (").concat(3===N,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                initializationValue\n              );\n\n              ").concat(T,"\n            }\n          }\n        }\n        setOutput(").concat(S,");\n      }\n    ")}}));var CL={kernelName:nr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;UD(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;tn(Ol(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=xl(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&on(c.inShape,c.outShape))return pM({inputs:{x:a},backend:n});var l=new NL(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}};var EL={kernelName:ar,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=kl(a.shape,i,o,[1,1,1],s,u,c),d=new TL(l,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}},_L=Zt((function e(t){Vt(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.top,d=c-1-t.padInfo.left,f=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(d,");\n      const float avgMultiplier = float(").concat(f,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),AL=Zt((function e(t){Vt(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterDepth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=d-1-t.padInfo.front,v=f-1-t.padInfo.top,m=h-1-t.padInfo.left,g=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(p,", ").concat(v,", ").concat(m,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var RL={kernelName:ir,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=kl(i.shape,o,s,[1,1,1],u,c),d=new AL(l);return n.runWebGLProgram(d,[a],i.dtype)}};var OL={kernelName:rr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;UD([a,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=xl(o.shape,s,u,1,c),d=new _L(l);return n.runWebGLProgram(d,[a],o.dtype)}};var DL={kernelName:or,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return ZM({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},PL=Zt((function e(t,n,r,a,i,o){Vt(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],xc(t,n),xc(t,r);var s="0.0";null!=a&&(xc(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=i&&(xc(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),FL=Zt((function e(t,n,r,a,i,o){Vt(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],xc(t,n),xc(t,r);var s="vec4(0.0)";null!=a&&(xc(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=i&&(xc(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),ML={kernelName:Xr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,u=t.scale;tn(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),tn(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),tn(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,i,o],d=null;null!=s&&(d=s.shape,l.push(s));var f=null;null!=u&&(f=u.shape,l.push(u));var h=Ln().getBool("WEBGL_PACK_NORMALIZATION")?new FL(a.shape,i.shape,o.shape,d,f,c):new PL(a.shape,i.shape,o.shape,d,f,c);return n.runWebGLProgram(h,l,l[0].dtype)}},LL=Zt((function e(t){Vt(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=vP(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return $L.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat($L[t]," = start[").concat(t,"] + coords.").concat($L[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),$L=["x","y","z","w","u","v"];var jL=Zt((function e(t){Vt(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=vP(this.rank),r=$F("coords",this.rank),a=$F("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function zL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=al(a,r.begin,r.size),o=(0,C.Z)(i,2),s=o[0],u=o[1];if(el(a,s,u),0===an(u))return n.makeTensorInfo(u,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var c=n.texData.get(a.dataId),l=wF(c.values,s,u,a.shape,a.dtype);return n.makeTensorInfo(u,a.dtype,l)}var d=n.texData.get(a.dataId).isPacked,f=nl(a.shape,s,u);if(d||!f){var h=Ln().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jL(u):new LL(u),p=[s];return n.runWebGLProgram(h,[a],a.dtype,p)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=rl(t,Sn(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}(a,s,u,n)}var BL={kernelName:di,backendName:"webgl",kernelFunc:zL},UL={kernelName:sr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;tn(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=qv(a.shape,i,s),c=Kv(u.length,i.length),l=Xv(a.shape,i,s),d=Jv(o,i.length),f=Yv(l,o,i.length),h=[],p=PM({inputs:{x:a},backend:n,attrs:{shape:u}}),v=WM({inputs:{x:p},backend:n,attrs:{perm:c}}),m=PM({inputs:{x:v},backend:n,attrs:{shape:l}}),g=zL({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return h.push(p),h.push(v),h.push(m),h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var VL={kernelName:ur,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=WP(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}};var WL={kernelName:cr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=xc(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},GL=NM({opSnippet:"return float(a != b);",cpuKernelImpl:fF,dtype:"bool"}),ZL={kernelName:Da,backendName:"webgl",kernelFunc:GL};function HL(e){var t=e.inputs,n=e.backend,r=t.input;return pM({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var qL={kernelName:qa,backendName:"webgl",kernelFunc:HL};var KL={kernelName:lr,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return pM({inputs:{x:i},backend:r});var s=If(i.shape),u=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),c=mM({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),c}if("complex64"===i.dtype){var l=HL({inputs:{input:i},backend:r}),d=e({inputs:{x:l},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(l),d}if(!mn(i.dtype,o)){var f=pM({inputs:{x:i},backend:r});return{dataId:f.dataId,shape:f.shape,dtype:o}}if(r.shouldExecuteOnCPU([i])){var h=r.texData.get(i.dataId).values,p=ZP(h,i.shape,i.dtype,o),v=(0,C.Z)(p,3),m=v[0],g=v[1],y=v[2];return r.makeTensorInfo(m,g,y)}if("int32"===o)return function(e,t){var n=new GF(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var b=r.makeTensorInfo([],"bool",pn("bool",1)),x=GL({inputs:{a:i,b:b},backend:r});return r.disposeIntermediateTensorInfo(b),x}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},XL="return ceil(x);",JL=IM({opSnippet:XL,packedOpSnippet:XL,cpuKernelImpl:HP}),YL={kernelName:dr,backendName:"webgl",kernelFunc:JL},QL=Zt((function e(t){Vt(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),e$=Zt((function e(t){Vt(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var t$={kernelName:fr,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax;t=Ln().getBool("WEBGL_PACK_CLIP")?new e$(i.shape):new QL(i.shape);var u=[[o],[s]];return r.runWebGLProgram(t,[i],i.dtype,u)}},n$=Zt((function e(t){Vt(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function r$(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var a$={kernelName:pr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new n$(r.shape),o=[r$(r,a.complexTensorInfos.real),r$(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},i$=Zt((function e(t){Vt(this,e),this.outputShape=[],this.outputShape=Gv(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),o$=Zt((function e(t,n){Vt(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Gv(t,n);var r=this.outputShape,a=r.length,i=vP(a),o=$F("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var l=s[n],d=s.slice(-2),f=s.join(),h="if (".concat(l," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(f,"), vec2(").concat(d.join(),"));\n        }"),p=1;p<u.length;p++){var v=u[p-1];h+="\n        if (".concat(l," < ").concat(u[p],"  && ").concat(l," >= ").concat(u[p-1],") {\n          return getChannel(\n            getT").concat(p,"(").concat(s$(s,l,v),"),\n            vec2(").concat(s$(d,l,v),"));\n        }")}var m=u.length,g=u[u.length-1];h+="\n        return getChannel(\n          getT".concat(m,"(").concat(s$(s,l,g),"),\n          vec2(").concat(s$(d,l,g),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(h,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function s$(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function u$(e){var t=e.inputs,n=e.backend,r=t.input;return pM({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var c$={kernelName:ra,backendName:"webgl",kernelFunc:u$};function l$(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return HL({inputs:{input:e},backend:n})})),i=e.map((function(e){return u$({inputs:{input:e},backend:n})})),o=l$(a,t,n),s=l$(i,t,n),u=mM({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}var c=n.shouldExecuteOnCPU(e);if("string"===r&&(c=!0),c){var l=e.map((function(e){var r=an(e.shape.slice(t));return PM({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),d=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),f=Gv(l.map((function(e){return e.shape})),1),h=1===l[0].shape[0],p=qP(d,f,r,h),v=Gv(e.map((function(e){return e.shape})),t),m=n.makeTensorInfo(v,r,p);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}var g=e.filter((function(e){return an(e.shape)>0})),y=Ln().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&g[0].shape.length>1;if(1===g.length){var b=y?new GF(e[0].shape,YF):new iM(e[0].shape,YF);return n.runWebGLProgram(b,e,r)}var x=Ln().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(g.length>x){for(var k=[],w=0;w<g.length;w+=x){var S=g.slice(w,w+x);k.push(l$(S,t,n))}for(var I=l$(k,t,n),N=0,T=k;N<T.length;N++){var C=T[N];n.disposeIntermediateTensorInfo(C)}return I}if(y){var E=new o$(g.map((function(e){return e.shape})),t);return n.runWebGLProgram(E,g,r)}var _=function(e,t,n){var r=Gv(e.map((function(e){return e.shape})),t),a=e.map((function(e){return PM({inputs:{x:e},attrs:{shape:[-1,an(e.shape.slice(t))]},backend:n})}));return{tensors2D:a,outShape:r}}(g,t,n),A=_.tensors2D,R=_.outShape,O=new i$(A.map((function(e){return e.shape}))),D=n.runWebGLProgram(O,A,r);A.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var P=PM({inputs:{x:D},attrs:{shape:R},backend:n});return n.disposeIntermediateTensorInfo(D),P}function d$(e){var t=e.inputs,n=e.backend,r=fn(e.attrs.axis,t[0].shape)[0],a=t.map((function(e){return e.shape}));Wv(a,r);var i=Gv(t.map((function(e){return e.shape})),r);if(0===an(i))return n.makeTensorInfo(i,t[0].dtype,[]);var o=t.filter((function(e){return an(e.shape)>0}));return 1===o.length?pM({inputs:{x:o[0]},backend:n}):l$(o,r,n)}var f$={kernelName:vr,backendName:"webgl",kernelFunc:d$},h$=Zt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Vt(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,d=t.dilationWidth,f=t.filterHeight,h=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4,m="channelsLast"===t.dataFormat,g=m?1:2,y=m?2:3,b=m?3:1,x="",k="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),k="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(f,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(h,"; wC++) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===v,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(p,") *\n                    getW(wR, wC, ").concat(p,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(p,", xR, xC) *\n                    getW(wR, wC, ").concat(p,", d2);\n              }\n\n            } else if (").concat(2===v,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===v,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(p,", d2),\n                getW(wR, wC, ").concat(p," + 1, d2),\n                getW(wR, wC, ").concat(p," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(p,"),\n                  getX(batch, xR, xC, ").concat(p," + 1),\n                  getX(batch, xR, xC, ").concat(p," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(p,", xR, xC),\n                  getX(batch, ").concat(p," + 1, xR, xC),\n                  getX(batch, ").concat(p," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")})),p$=Zt((function e(t){Vt(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.filterDepth,f=t.filterHeight,h=t.filterWidth,p=4*Math.floor(t.inChannels/4),v=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(d,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(f,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(p,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===v,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(p,") *\n                  getW(wF, wR, wC, ").concat(p,", d2);\n              } else if (").concat(2===v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(p,"),\n                  getX(batch, xF, xR, xC, ").concat(p," + 1),\n                  getX(batch, xF, xR, xC, ").concat(p," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(p,", d2),\n                  getW(wF, wR, wC, ").concat(p," + 1, d2),\n                  getW(wF, wR, wC, ").concat(p," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),v$=Zt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Vt(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=IP(this.outputShape.length);for(var o=t.padInfo.left,s=t.strideWidth,u=t.dilationWidth,c=t.filterHeight,l=t.filterWidth,d=l,f="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;",h=0;h<l;h++)f+="\n           vec4 xTexelC".concat(2*h,";\n           int xTexelC").concat(2*h,"Ready;\n           vec4 xTexelC").concat(2*h+1,";\n           int xTexelC").concat(2*h+1,"Ready;\n           vec4 xC").concat(h,";");f+="\n     for (int r = 0; r < ".concat(c,"; r++) {\n      for (int d1 = 0; d1 < ").concat(t.inChannels,"; d1 += 2) {\n       ");for(var p=0;p<l;p++)f+="\n           xTexelC".concat(2*p," = vec4(0.0);\n           xTexelC").concat(2*p,"Ready = 0;\n           xTexelC").concat(2*p+1," = vec4(0.0);\n           xTexelC").concat(2*p+1,"Ready = 0;\n           xC").concat(p," = vec4(0.0);");f+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(var v=0;v<(d+1)/2;v++){var m=2*v;if(f+="\n           xC = xCCorner + ".concat(m*u,";\n           "),1===s){if(m<l&&(o%2===1?(f+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                   xTexelC").concat(m," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(m,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(m,"Ready = 1;\n                 }\n               "),f+=1===u&&m>0?"\n                 xC".concat(m," = vec4(xTexelC").concat(m-2,".zw, xTexelC").concat(m,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(m," = vec4(previous.zw, xTexelC").concat(m,".xy);\n                   } else {\n                     xC").concat(m," = vec4(0.0, 0.0, xTexelC").concat(m,".xy);\n                   }\n                   ")):f+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                   xTexelC").concat(m," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(m,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(m,"Ready = 1;\n                 }\n\n                 xC").concat(m," = xTexelC").concat(m,";\n                 "),m+1<l)){var g=o%2===0?Yt(u):u;u%2===0&&o%2===1||u%2!==0&&o%2!==1?(f+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(g,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                     xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(m+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(m+1,"Ready = 1;\n                   }\n                   "),f+=u>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(m+1," = vec4(previous.zw, xTexelC").concat(m+1,".xy);\n                     } else {\n                      xC").concat(m+1," = vec4(0.0, 0.0, xTexelC").concat(m+1,".xy);\n                     }\n                     "):"\n                     xC".concat(m+1," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".xy);\n                     ")):f+=1===g?"\n                     xC".concat(m+1," = xTexelC").concat(m,";\n                     "):"\n                     xCOffset = xC + ".concat(g,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                       xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(m+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(m+1,"Ready = 1;\n                     }\n\n                     xC").concat(m+1," = xTexelC").concat(m+1,";\n                     ")}}else m<l&&(o%2===1?(f+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                   xTexelC").concat(m," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(m,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(m,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                   xTexelC").concat(m+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(m+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(m+1,"Ready = 1;\n                 }\n\n                 xC").concat(m," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".zw);\n               "),m+1<l&&(f+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(m+1," = vec4(xTexelC").concat(m+1,".xy, final.xy);\n                 "))):(f+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(m,"Ready == 0) {\n                   xTexelC").concat(m," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(m,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(m,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(m+1,"Ready == 0) {\n                   xTexelC").concat(m+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(m+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(m+1,"Ready = 1;\n                 }\n\n                 xC").concat(m," = vec4(\n                   xTexelC").concat(m,".xy, xTexelC").concat(m+1,".xy);\n               "),m+1<l&&(f+="\n                   xC".concat(m+1," = vec4(xTexelC").concat(m,".zw, xTexelC").concat(m+1,".zw);\n                 "))));m<l&&(f+="\n             wTexel = getW(r, ".concat(m,", d1, d2);\n             dotProd += xC").concat(m,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(t.inChannels,") {\n               dotProd += xC").concat(m,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),m+1<l&&(f+="\n               wTexel = getW(r, ".concat(m+1,", d1, d2);\n               dotProd += xC").concat(m+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(t.inChannels,") {\n                 dotProd += xC").concat(m+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}f+="\n     }\n   ",f+="\n     }\n   ",f+="\n     }\n   ";var y="",b="";r&&(y=a?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(r,"\n         }"):i?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(r,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(r,"\n         }"),b="result = activation(result);");var x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(y,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(f,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(x,"\n         ").concat(b,"\n         setOutput(result);\n       }\n     ")})),m$=Zt((function e(t,n){Vt(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=IP(this.outputShape.length);for(var r=n.dataFormat,a=WD(),i="channelsLast"===r,o=i?1:2,s=i?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(t[2]," && pos < ").concat(t[1],") {"),c="",l=0;l<=1;l++)for(var d=0;d<=1;d++)c+="\n          blockIndex = rc.z + ".concat(d,";\n          pos = rc.y + ").concat(l,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+d,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+d,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function g$(e,t){var n=e.length;return n>=3?[].concat((0,Le.Z)(e.slice(0,-3)),t?[e[n-3]*e[n-2],e[n-1]]:[e[n-3],e[n-2]*e[n-1]]):!t&&1===n&&e[0]>1?[e[0],1]:null}function y$(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,f=e.activation,h=void 0===f?null:f,p=n.shape,v=i.texData.get(n.dataId),m=a.inChannels,g=p[0]*p[1]*p[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(null!=c){var k=g$(c.shape,b);null!=k&&(c=PM({inputs:{x:c},backend:i,attrs:{shape:k}}),x.push(c))}if(null!=s){var w=g$(s.shape,b);null!=w&&(s=PM({inputs:{x:s},backend:i,attrs:{shape:w}}),x.push(s))}if(!((1===g||1===y)&&m>1e3)&&v.isPacked&&b&&null!=v.texture&&p[2]%2!==0&&on(v.shape.slice(-3),p.slice(-3))){var S=p[0]*p[1]*(p[2]+1),I={dataId:n.dataId,shape:[1,S,a.inChannels],dtype:n.dtype},N=v.shape;v.shape=v.shape.slice(),v.shape[v.shape.length-2]++,tn(LD(v.shape,I.shape),(function(){return"packed reshape ".concat(v.shape," to ").concat(I.shape," isn't free")}));var T=PM({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(T);var C=ZM({a:I,b:T,backend:i,transposeA:!1,transposeB:false,bias:s,activation:h,preluActivationWeights:c,leakyreluAlpha:d}),E=i.texData.get(C.dataId);tn(E.isPacked,(function(){return"batchMatMul result is expected to be packed"})),v.shape=N,E.shape=a.outShape,(t=pM({inputs:{x:C},backend:i})).shape=a.outShape,x.push(C)}else{var _=a.outHeight*a.outWidth,A=PM({inputs:{x:n},backend:i,attrs:{shape:b?[a.batchSize,_,a.inChannels]:[a.batchSize,a.inChannels,_]}}),R=PM({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),O=ZM({a:b?A:R,b:b?R:A,transposeA:!b,transposeB:false,backend:i,bias:s,activation:h,preluActivationWeights:c,leakyreluAlpha:d});t=PM({inputs:{x:O},backend:i,attrs:{shape:a.outShape}}),x.push(A),x.push(R),x.push(O)}for(var D=0,P=x;D<P.length;D++){var F=P[D];i.disposeIntermediateTensorInfo(F)}return t}function b$(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,d=e.activation,f=void 0===d?null:d,h=r.filterWidth,p=r.filterHeight,v=r.inChannels,m=r.outWidth,g=r.outHeight,y="channelsLast"===r.dataFormat,b=h*p*v,x=g*m,k=[r.batchSize,b,x],w=[];if(null!=u){var S=g$(u.shape,y);null!=S&&(u=PM({inputs:{x:u},backend:a,attrs:{shape:S}}),w.push(u))}if(null!=o){var I=g$(o.shape,y);null!=I&&(o=PM({inputs:{x:o},backend:a,attrs:{shape:I}}),w.push(o))}var N=PM({inputs:{x:n},backend:a,attrs:{shape:[1,b,an(n.shape)/b]}});w.push(N);var T=new m$(k,r),C=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],E=a.runWebGLProgram(T,[t],"float32",C),_=PM({inputs:{x:E},backend:a,attrs:{shape:k}});w.push(E),w.push(_);var A=null!=o,R=null!=u,O="leakyrelu"===f,D=f?TM(f,!0):null,P=new CM(y?_.shape:N.shape,y?N.shape:_.shape,y?[r.batchSize,x,r.outChannels]:[r.batchSize,r.outChannels,x],!0,!1,A,D,R,O),F=y?[_,N]:[N,_];if(o&&F.push(o),R&&F.push(u),O){var M=a.makeTensorInfo([],"float32",No(l,"float32"));F.push(M),w.push(M)}var L=a.runWebGLProgram(P,F,"float32"),$=PM({inputs:{x:L},backend:a,attrs:{shape:r.outShape}});w.push(L);for(var j=0,z=w;j<z.length;j++){var B=z[j];a.disposeIntermediateTensorInfo(B)}return $}var x$={kernelName:mr,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,d=a.dimRoundingMode,f=Pl(c),h=wl(i.shape,o.shape,s,l,u,d,!1,f);if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if(h.strideWidth<=2&&"channelsLast"===f&&Ln().getBool("WEBGL_EXP_CONV")){var p=new v$(h),v=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];t=r.runWebGLProgram(p,[i,o],"float32",v)}else if(Ln().getBool("WEBGL_CONV_IM2COL"))t=b$({x:i,filter:o,convInfo:h,backend:r});else{var m=new h$(h);t=r.runWebGLProgram(m,[i,o],"float32")}else t=y$({x:i,filter:o,convInfo:h,backend:r});var g=PM({inputs:{x:t},backend:r,attrs:{shape:h.outShape}});return r.disposeIntermediateTensorInfo(t),g}},k$=Zt((function e(t){Vt(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              ").concat(o?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),w$=Zt((function e(t){Vt(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=o?1:2,l=o?2:3,d=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(d,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),S$=Zt((function e(t){Vt(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),I$=Zt((function e(t){Vt(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var N$={kernelName:gr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,d=Pl(u),f=wl(a.shape,l,o,1,s,c,!1,d),h=new k$(f);return n.runWebGLProgram(h,[a,i],"float32")}},T$=Zt((function e(t){Vt(this,e),this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=IP(this.outputShape.length);var n=t.filterHeight,r=t.filterWidth,a=n-1-t.padInfo.top,i=r-1-t.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(a,", ").concat(i,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(t.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(t.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}));var C$={kernelName:yr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,d=Pl(c),f=wl(o,i.shape,s,1,u,l,!1,d);if(Ln().getBool("WEBGL_PACK")&&"channelsLast"===d){var h=[[f.strideHeight,f.strideWidth]],p=new T$(f);return n.runWebGLProgram(p,[a,i],"float32",h)}var v=new w$(f);return n.runWebGLProgram(v,[a,i],"float32")}};var E$={kernelName:br,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=Sl(a.shape,i.shape,o,u,s),l=new p$(c);return n.runWebGLProgram(l,[a,i],"float32")}};var _$={kernelName:xr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape,c=Sl(a.shape,u,o,1,s),l=new S$(c);return n.runWebGLProgram(l,[a,i],"float32")}};var A$,R$={kernelName:kr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=Sl(r.inputShape,i.shape,s,1,o),c=new I$(u);return n.runWebGLProgram(c,[a,i],"float32")}},O$=IM({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(fM,"\n  return result;\n")}),D$={kernelName:wr,backendName:"webgl",kernelFunc:O$},P$=IM({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),F$={kernelName:Sr,backendName:"webgl",kernelFunc:P$},M$=Zt((function e(t,n,r,a,i){Vt(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=(0,C.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3],d=(0,C.Z)(n,1)[0],f=(0,C.Z)(r,2),h=f[0],p=f[1];this.outputShape=[d,h,p,l];var v="bilinear"===a?1:0,m="".concat(u-1,".0"),g="".concat(c-1,".0"),y=h>1?["".concat((u-1)/(h-1)),"(y2-y1) * height_ratio","y1*".concat(m," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(m)],b=(0,C.Z)(y,3),x=b[0],k=b[1],w=b[2],S=p>1?["".concat((c-1)/(p-1)),"(x2-x1) * width_ratio","x1*".concat(g," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(g)],I=(0,C.Z)(S,3),N=I[0],T=I[1],E=I[2];this.userCode="\n      const float height_ratio = float(".concat(x,");\n      const float width_ratio = float(").concat(N,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(k,";\n        float width_scale = ").concat(T,";\n\n        float in_y = ").concat(w,";\n        if( in_y < 0.0 || in_y > ").concat(m," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(E,";\n        if( in_x < 0.0 || in_x > ").concat(g," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(v," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),L$={kernelName:Tr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new M$(a.shape,i.shape,s,u,c);return n.runWebGLProgram(l,[a,i,o],"float32")}};!function(e){e.Prod="*",e.Sum="+"}(A$||(A$={}));var $$=Zt((function e(t,n,r,a){Vt(this,e),this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var i=this.outputShape.length,o=this.op===A$.Prod?"1.0":"0.0",s=r?o:"getX(".concat(j$(i,"coords",this.op),")"),u=this.outputShape[this.outputShape.length-1],c="",l="";r?(c=a?"end != ".concat(u-1):"end != 0",l=a?"end + 1":"end - 1"):(c=a?"end + pow2 < ".concat(u):"end >= pow2",l=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(vP(i)," coords = getOutputCoords();\n        int end = ").concat(z$(i,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(l,";\n          ").concat(z$(i,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(j$(i,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function j$(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function z$(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function B$(e,t,n,r,a,i){var o=t.shape.length,s=Od([r],o),u=t;null!=s&&(u=WM({inputs:{x:t},backend:n,attrs:{perm:s}}));var c=Pd(1,o)[0];if(c!==o-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," ")+"but got axis=".concat(r));for(var l=u.shape[c],d=pM({inputs:{x:u},backend:n}),f=0;f<=Math.ceil(Math.log2(l))-1;f++){var h=new $$(e,u.shape,!1,i),p=[[f]],v=d;d=n.runWebGLProgram(h,[d],d.dtype,p),n.disposeIntermediateTensorInfo(v)}if(a){var m=new $$(e,u.shape,a,i),g=d;d=n.runWebGLProgram(m,[d],d.dtype),n.disposeIntermediateTensorInfo(g)}if(null!=s){var y=WM({inputs:{x:d},backend:n,attrs:{perm:Dd(s)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),y}return d}var U$={kernelName:Ir,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return B$(A$.Prod,a,n,i,o,s)}};var V$={kernelName:Nr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;return B$(A$.Sum,a,n,i,o,s)}};var W$={kernelName:Cr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=WP(u,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var d=n.bufferSync(a),f=n.bufferSync(i),h=GP(d,f,o,s);return n.makeTensorInfo(h.shape,i.dtype,h.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},G$=function(){function e(t,n,r){Vt(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return Zt(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var Z$={kernelName:Er,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,l=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),d=new G$("NHWC"===o?[s,u,c,l]:[s,l,u,c],i,o);return n.runWebGLProgram(d,[a],a.dtype)}},H$=Zt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Vt(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=IP(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,c="",l="";r&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),l="result = activation(result);");var d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(d,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")})),q$=Zt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Vt(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=IP(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,c=t.dilationWidth,l=t.filterHeight,d=t.filterWidth,f=d,h="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",p=0;p<d;p++)h+="\n          vec4 xTexelC".concat(2*p,";\n          int xTexelC").concat(2*p,"Ready;\n          vec4 xTexelC").concat(2*p+1,";\n          int xTexelC").concat(2*p+1,"Ready;\n          vec4 xC").concat(p,";");h+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(var v=0;v<d;v++)h+="\n          xTexelC".concat(2*v," = vec4(0.0);\n          xTexelC").concat(2*v,"Ready = 0;\n          xTexelC").concat(2*v+1," = vec4(0.0);\n          xTexelC").concat(2*v+1,"Ready = 0;\n          xC").concat(v," = vec4(0.0);");h+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var m=0;m<(f+1)/2;m++){var g=2*m;if(h+="\n          xC = xCCorner + ".concat(g*c,";\n          "),1===u){if(g<d&&(s%2===1?(h+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n              "),h+=1===c&&g>0?"\n                xC".concat(g," = vec4(xTexelC").concat(g-2,".zw, xTexelC").concat(g,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(g," = vec4(previous.zw, xTexelC").concat(g,".xy);\n                  } else {\n                    xC").concat(g," = vec4(0.0, 0.0, xTexelC").concat(g,".xy);\n                  }\n                  ")):h+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xC").concat(g," = xTexelC").concat(g,";\n                "),g+1<d)){var y=s%2===0?Yt(c):c;c%2===0&&s%2===1||c%2!==0&&s%2!==1?(h+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                    xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(g+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(g+1,"Ready = 1;\n                  }\n                  "),h+=c>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(g+1," = vec4(previous.zw, xTexelC").concat(g+1,".xy);\n                    } else {\n                     xC").concat(g+1," = vec4(0.0, 0.0, xTexelC").concat(g+1,".xy);\n                    }\n                    "):"\n                    xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".xy);\n                    ")):h+=1===y?"\n                    xC".concat(g+1," = xTexelC").concat(g,";\n                    "):"\n                    xCOffset = xC + ".concat(y,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                      xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(g+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(g+1,"Ready = 1;\n                    }\n\n                    xC").concat(g+1," = xTexelC").concat(g+1,";\n                    ")}}else g<d&&(s%2===1?(h+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n              "),g+1<d&&(h+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(g+1," = vec4(xTexelC").concat(g+1,".xy, final.xy);\n                "))):(h+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(\n                  xTexelC").concat(g,".xy, xTexelC").concat(g+1,".xy);\n              "),g+1<d&&(h+="\n                  xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n                "))));g<d&&(h+="\n            wTexel = getW(r, ".concat(g,", d1, q);\n            dotProd += xC").concat(g," * vec4(wTexel.xz, wTexel.xz);\n          "),g+1<d&&(h+="\n              wTexel = getW(r, ".concat(g+1,", d1, q);\n              dotProd += xC").concat(g+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}h+="\n    }\n  ",h+="\n      }\n    ";var b="",x="";r&&(b=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),x="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(h,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(k,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}));var K$={kernelName:_r,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]),tn(Ol(o,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(l,"'")}));var d,f=wl(a.shape,i.shape,o,l,s,c,!0);d=Ln().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?new q$(f):new H$(f);var h=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(d,[a,i],"float32",h)}},X$=Zt((function e(t){Vt(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),J$=Zt((function e(t){Vt(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var Y$={kernelName:Ar,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,d=wl(a.shape,l,o,s,u,c,!0),f=new X$(d);return n.runWebGLProgram(f,[a,i],"float32")}};var Q$={kernelName:Rr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=wl(r.inputShape,i.shape,o,s,u,c,!0),d=new J$(l);return n.runWebGLProgram(d,[a,i],"float32")}},ej=Zt((function e(t){Vt(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var tj={kernelName:Or,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat((0,Le.Z)(r.shape),(0,Le.Z)(r.shape)),i=an(r.shape),o=PM({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new ej(i),u=n.runWebGLProgram(s,[o],o.dtype),c=PM({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),c}},nj=Zt((function e(t){Vt(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,d=a.top,f=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(f,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var rj={kernelName:Dr,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=bl(i.shape,o.shape,s,u,"NHWC",c),d=new nj(l),f=PM({inputs:{x:t=r.runWebGLProgram(d,[i,o],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),f}};var aj={kernelName:Lr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=pm(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;mm(i.length,s,r);for(var u=gm(o,s),c=u.path,l=u.steps,d=l.length,f=null,h=i.length,p=[],v=0;v<d;++v){var m,g=Ut(l[v]);try{for(g.s();!(m=g.n()).done;){var y=m.value,b=vm(h,s[y]),x=b.permutationIndices,k=b.expandDims,w=void 0;ym(x)?w=r[y]:(w=WM({inputs:{x:r[y]},backend:n,attrs:{perm:x}}),p.push(w));for(var S=w.shape.slice(),I=0;I<k.length;++I)S.splice(k[I],0,1);on(w.shape,S)||(w=PM({inputs:{x:w},backend:n,attrs:{shape:S}}),p.push(w)),null===f?f=w:(f=OM({inputs:{a:w,b:f},backend:n}),p.push(f))}}catch(Rme){g.e(Rme)}finally{g.f()}v<d-1&&(c[v]>=0&&(f=UM({inputs:{x:f},backend:n,attrs:{axis:c[v]-(i.length-h),keepDims:!1}}),p.push(f)),h--)}for(var N=0,T=p;N<T.length;N++){var C=T[N];C!==f&&n.disposeIntermediateTensorInfo(C)}return f}},ij=IM({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),oj={kernelName:$r,backendName:"webgl",kernelFunc:ij},sj={kernelName:jr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=Ln().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new hM("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new dM("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},uj=NM({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:KP}),cj={kernelName:Br,backendName:"webgl",kernelFunc:uj},lj=IM({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(nm,";\n  float a1 = ").concat(rm,";\n  float a2 = ").concat(am,";\n  float a3 = ").concat(im,";\n  float a4 = ").concat(om,";\n  float a5 = ").concat(sm,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),dj={kernelName:zr,backendName:"webgl",kernelFunc:lj},fj=IM({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:XP,dtype:"float32"}),hj={kernelName:Ur,backendName:"webgl",kernelFunc:fj};function pj(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(tn(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+a+1),s.splice(u,0,1),PM({inputs:{x:i},backend:r,attrs:{shape:s}})}var vj={kernelName:Vr,backendName:"webgl",kernelFunc:pj},mj="return exp(x) - 1.0;",gj=IM({opSnippet:mj,packedOpSnippet:mj,cpuKernelImpl:JP}),yj={kernelName:Wr,backendName:"webgl",kernelFunc:gj},bj=Zt((function e(t,n,r){Vt(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function xj(e,t,n){var r=n.texData.get(e.dataId),a=an(e.shape),i=e.shape[e.shape.length-1],o=PM({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,u=new bj("real",s,t),c=new bj("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(u,l,"float32"),f=n.runWebGLProgram(c,l,"float32"),h=mM({inputs:{real:d,imag:f},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f);var p=PM({inputs:{x:h},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(h),p}var kj={kernelName:Gr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return xj(t.input,!1,n)}},wj=Zt((function e(t,n){Vt(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function Sj(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||xn(a))){var o=vn(i,an(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new wj(r,a),u=[[a]];return t.runWebGLProgram(s,[],i,u)}var Ij,Nj={kernelName:Zr,backendName:"webgl",kernelFunc:Sj},Tj=Zt((function e(t){Vt(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),Cj={kernelName:Hr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new Tj(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},Ej="return floor(x);",_j=IM({opSnippet:Ej,packedOpSnippet:Ej,cpuKernelImpl:YP}),Aj={kernelName:qr,backendName:"webgl",kernelFunc:_j},Rj=NM({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),Oj={kernelName:Kr,backendName:"webgl",kernelFunc:Rj},Dj=Zt((function e(t){Vt(this,e),this.variableNames=["A"];var n=WD(),r=(0,C.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),Pj=Zt((function e(t){Vt(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=WD(),r=(0,C.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),Fj={kernelName:Zi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,u=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=(0,C.Z)(u,2),l=c[0],d=c[1],f=[d,l],h=[d,l,i];if(s||o){var p=Ln().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");null!=Ij&&p===Mj||(Mj=p,Ij=document.createElement("canvas").getContext("2d",{willReadFrequently:Mj})),Ij.canvas.width=l,Ij.canvas.height=d,Ij.drawImage(a,0,0,l,d),a=Ij.canvas}var v=n.makeTensorInfo(f,"int32");n.texData.get(v.dataId).usage=sD.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(v.dataId),a);var m=Ln().getBool("WEBGL_PACK")?new Pj(h):new Dj(h),g=n.runWebGLProgram(m,[v],"int32");return n.disposeData(v.dataId),g}},Mj=Ln().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");var Lj={kernelName:Ki,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,u=n.preluActivationWeights,c=a.strides,l=a.pad,d=a.dataFormat,f=a.dilations,h=a.dimRoundingMode,p=a.activation,v=a.leakyreluAlpha,m=Pl(d),g=wl(i.shape,o.shape,c,f,l,h,!1,m),y=[],b=null!=s,x=null!=u,k="leakyrelu"===p,w=function(){var e=[i,o],t=function(e,t){if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){var n=PM({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return y.push(n),n}return e};if(b&&e.push(t(s,d)),x&&e.push(t(u,d)),k){var n=r.makeTensorInfo([],"float32",No(v,"float32"));e.push(n),y.push(n)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===m&&Ln().getBool("WEBGL_EXP_CONV")){var S=p?TM(p,!0):null,I=new v$(g,b,S,x,k),N=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],T=w();t=r.runWebGLProgram(I,T,"float32",N)}else if(Ln().getBool("WEBGL_CONV_IM2COL"))t=b$({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:v});else{var C=p?TM(p,!1):null,E=new h$(g,b,C,x,k),_=w();t=r.runWebGLProgram(E,_,"float32")}else t=y$({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:p,preluActivationWeights:u,leakyreluAlpha:v});var A=PM({inputs:{x:t},backend:r,attrs:{shape:g.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),A}};var $j={kernelName:Xi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,d=r.dimRoundingMode,f=r.activation,h=r.leakyreluAlpha,p=[],v=l;null==v&&(v=[1,1]),tn(Ol(u,v),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(v,"'")}));var m,g=wl(a.shape,i.shape,u,v,c,d,!0),y=Ln().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=f?TM(f,y):null,x=[a,i],k=null!=o,w=null!=s,S="leakyrelu"===f;if(k&&x.push(o),w&&x.push(s),S){var I=n.makeTensorInfo([],"float32",No(h,"float32"));x.push(I),p.push(I)}m=y?new q$(g,k,b,w,S):new H$(g,k,b,w,S);var N=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],T=n.runWebGLProgram(m,x,"float32",N);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),T}},jj=Zt((function e(t,n,r,a){Vt(this,e),this.sliceDim=t,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;for(var i=vP(r.length),o="\n    int index;",s=0;s<this.sliceDim;s++)o+="\n          index = round(getIndices(coords[0], ".concat(s,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[s],";\n          flattenIndex += index * ").concat(this.strides[s],";");this.userCode="\n         void main() {\n          ".concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(o,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}));var zj={kernelName:Yr,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=an(r.shape),u=Qv(r,a),c=(0,C.Z)(u,4),l=c[0],d=c[1],f=c[2],h=c[3],p=PM({inputs:{x:a},backend:n,attrs:{shape:[d,o]}}),v=PM({inputs:{x:r},backend:n,attrs:{shape:[an(r.shape)/f,f]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var m=n.readSync(a.dataId),g=n.bufferSync(r),y=QP(m,g,r.dtype,d,o,f,h,r.shape,s);return n.makeTensorInfo(l,r.dtype,y.values)}var b=new jj(o,h,[d,f],r.shape),x=n.runWebGLProgram(b,[v,p],v.dtype),k=PM({inputs:{x:x},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),k}},Bj=Zt((function e(t,n){Vt(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=vP(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function Uj(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=fn(o,a.shape)[0];Ln().get("DEBUG")&&function(){for(var e=n.readSync(i.dataId),t=a.shape[u],r=function(n){var r=e[n];tn(r<=t-1&&r>=0,(function(){return"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")}))},o=0;o<e.length;++o)r(o)}();var c=Im(a,i,u,s),l=an(i.shape),d=[],f=PM({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=PM({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,l/c.batchSize]}});d.push(f),d.push(h);var p=[c.batchSize,c.outerSize,l/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var v=n.bufferSync(h),m=n.bufferSync(f),g=eF(m,v,p);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(c.outputShape,g.dtype,g.values)}var y=new Bj(f.shape,p),b=n.runWebGLProgram(y,[f,h],f.dtype);d.push(b);var x=PM({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}var Vj={kernelName:Jr,backendName:"webgl",kernelFunc:Uj},Wj=NM({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:tF,dtype:"bool"}),Gj={kernelName:Qr,backendName:"webgl",kernelFunc:Wj},Zj=NM({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:nF}),Hj={kernelName:ea,backendName:"webgl",kernelFunc:Zj};var qj={kernelName:na,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return xj(t.input,!0,n)}},Kj=IM({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),Xj={kernelName:aa,backendName:"webgl",kernelFunc:Kj},Jj=IM({opSnippet:"return float(isinf(x));",dtype:"bool"}),Yj={kernelName:ia,backendName:"webgl",kernelFunc:Jj},Qj=IM({opSnippet:"return float(isnan(x));",dtype:"bool"}),ez={kernelName:oa,backendName:"webgl",kernelFunc:Qj},tz=NM({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:rF,dtype:"bool"}),nz={kernelName:ua,backendName:"webgl",kernelFunc:tz},rz=NM({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:aF,dtype:"bool"}),az={kernelName:ca,backendName:"webgl",kernelFunc:rz};var iz={kernelName:la,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=iF(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},oz=IM({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:oF}),sz={kernelName:da,backendName:"webgl",kernelFunc:oz},uz=IM({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),cz={kernelName:fa,backendName:"webgl",kernelFunc:uz},lz=NM({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),dz={kernelName:ha,backendName:"webgl",kernelFunc:lz},fz=IM({opSnippet:"return float(!(x >= 1.0));"}),hz={kernelName:pa,backendName:"webgl",kernelFunc:fz},pz=NM({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),vz={kernelName:va,backendName:"webgl",kernelFunc:pz},mz=Zt((function e(t,n,r,a,i){Vt(this,e),this.variableNames=["x"],this.outputShape=[];var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")})),gz=Zt((function e(t,n,r,a,i){Vt(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")})),yz={kernelName:ma,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta,c=Ln().getBool("WEBGL_PACK_NORMALIZATION")?new gz(a.shape,i,o,s,u):new mz(a.shape,i,o,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},bz=Zt((function e(t,n,r,a,i){Vt(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),xz={kernelName:ga,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,d=new bz(a.shape,s,u,c,l);return n.runWebGLProgram(d,[a,i,o],a.dtype)}};function kz(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,u=fn(i,a.shape),c=u,l=Od(c,s),d=null!=l,f=n.shouldExecuteOnCPU([a]),h=a;if(d){if(f){for(var p=n.texData.get(h.dataId).values,v=new Array(s),m=0;m<v.length;m++)v[m]=a.shape[l[m]];var g=FF(p,a.shape,a.dtype,l,v);h=n.makeTensorInfo(v,a.dtype),n.texData.get(h.dataId).values=g}else h=BM(a,l,n);c=Pd(c.length,s)}Rd("max",c,s);var y,b=_d(h.shape,c),x=(0,C.Z)(b,2),k=x[0],w=x[1],S=k;if(o&&(S=Ad(k,u)),f){var I=n.texData.get(h.dataId).values,N=sF(I,an(w),S,a.dtype);y=n.makeTensorInfo(S,a.dtype),n.texData.get(y.dataId).values=N}else y=function(e,t,n,r){var a=an(t),i=PM({inputs:{x:e},attrs:{shape:[an(e.shape)/a,a]},backend:r}),o=$M(i,e.dtype,"max",r),s=PM({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(h,w,S,n);return d&&n.disposeIntermediateTensorInfo(h),y}var wz={kernelName:ya,backendName:"webgl",kernelFunc:kz},Sz=NM({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:uF}),Iz={kernelName:ba,backendName:"webgl",kernelFunc:Sz};var Nz={kernelName:xa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;UD(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;tn(Ol(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=xl(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&on(c.inShape,c.outShape))return pM({inputs:{x:a},backend:n});var l=new NL(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}};var Tz={kernelName:wa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=kl(a.shape,i,o,[1,1,1],s,c,u),d=new TL(l,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}},Cz=Zt((function e(t){Vt(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,u=o-1-t.padInfo.left,c=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Ez=Zt((function e(t){Vt(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,d=u-1-t.padInfo.front,f=c-1-t.padInfo.top,h=l-1-t.padInfo.left,p=u*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(f,", ").concat(h,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(p," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var _z={kernelName:Sa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=kl(i.shape,o,s,[1,1,1],u,c),d=new TL(l,"max",!0),f=n.runWebGLProgram(d,[i],i.dtype),h=new Ez(l),p=n.runWebGLProgram(h,[a,f],i.dtype);return n.disposeIntermediateTensorInfo(f),p}};var Az={kernelName:ka,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;UD([i,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=xl(o.shape,s,u,1,c,l),f=new NL(d,"max",!0),h=n.runWebGLProgram(f,[o],o.dtype),p=new Cz(d),v=n.runWebGLProgram(p,[a,h],o.dtype);return n.disposeIntermediateTensorInfo(h),v}};var Rz={kernelName:Ia,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;tn(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var l=[1,1];tn(Ol(o,l),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(l,"'")}));var d=xl(a.shape,i,o,l,s),f=function(e,t,n,r){var a=new NL(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new NL(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,u,d,c),h=(0,C.Z)(f,2);return[h[0],h[1]]}};var Oz={kernelName:Na,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,s=r,u=a.shape.length,c=fn(o,a.shape),l=c,d=Od(l,u),f=null!=d,h=s.shouldExecuteOnCPU([a]),p=[],v=a;if(f){if(h){for(var m=s.texData.get(v.dataId).values,g=new Array(u),y=0;y<g.length;y++)g[y]=a.shape[d[y]];var b=FF(m,a.shape,a.dtype,d,g);v=s.makeTensorInfo(g,a.dtype),s.texData.get(v.dataId).values=b}else v=BM(a,d,s);p.push(v),l=Pd(l.length,u)}Rd("sum",l,u);var x=_d(v.shape,l),k=(0,C.Z)(x,2),w=k[0],S=k[1],I=w;i&&(I=Ad(w,c));for(var N=function(e,t,n,r){var a=an(t),i=PM({inputs:{x:e},attrs:{shape:[an(e.shape)/a,a]},backend:r}),o=$M(i,"float32","mean",r),s=PM({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(v,S,I,s),T=0,E=p;T<E.length;T++){var _=E[T];s.disposeIntermediateTensorInfo(_)}return N}};var Dz={kernelName:Ta,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=fn(i,a.shape),c=u,l=Od(c,s),d=a;null!=l&&(d=WM({inputs:{x:a},backend:n,attrs:{perm:l}}),c=Pd(c.length,a.shape.length)),Rd("min",c,s);var f,h=_d(d.shape,c),p=(0,C.Z)(h,2),v=p[0],m=PM({inputs:{x:d},backend:n,attrs:{shape:[-1,an(p[1])]}}),g=$M(m,m.dtype,"min",n);return f=PM(o?{inputs:{x:g},backend:n,attrs:{shape:Ad(v,u)}}:{inputs:{x:g},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=l&&n.disposeIntermediateTensorInfo(d),f}},Pz=NM({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:cF}),Fz={kernelName:Ca,backendName:"webgl",kernelFunc:Pz},Mz=Zt((function e(t,n,r){Vt(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=vP(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),Lz=Zt((function e(t,n,r){Vt(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=vP(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=$F("rc",a),c=$F("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f="reflect"===r?0:1,h="";if(1===a){var p="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(f,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(f,";\n        }\n        source -= start;\n      ");h="\n        ".concat(i," rc = outputLoc;\n        ").concat(p,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(p,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ")}else{var v="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(f,") +\n                gte * ((end - 1) * 2 - source + ").concat(f,");\n        source -= start;\n      ");h="\n        ".concat(i," rc = outputLoc;\n        ").concat(v,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(v,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(v,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(v,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")})),$z={kernelName:Ea,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=Ln().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Lz(a.shape,i,o):new Mz(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},jz=NM({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),zz={kernelName:_a,backendName:"webgl",kernelFunc:jz},Bz=Zt((function e(t,n,r){Vt(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),Uz=NM({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),Vz={kernelName:Mr,backendName:"webgl",kernelFunc:Uz},Wz="return a - b;",Gz=NM({opSnippet:Wz,packedOpSnippet:Wz,supportsComplex:!0,cpuKernelImpl:OF}),Zz={kernelName:Pi,backendName:"webgl",kernelFunc:Gz};function Hz(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=fn([r.dim],a.shape),o=kz({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),s=Ad(o.shape,i),u=PM({inputs:{x:o},backend:n,attrs:{shape:s}}),c=Gz({inputs:{a:a,b:u},backend:n}),l=fj({inputs:{x:c},backend:n}),d=UM({inputs:{x:l},backend:n,attrs:{axis:i,keepDims:!1}}),f=PM({inputs:{x:d},backend:n,attrs:{shape:s}}),h=Uz({inputs:{a:l,b:f},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),h}var qz={kernelName:ki,backendName:"webgl",kernelFunc:Hz};var Kz={kernelName:Aa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:Hz({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],d=new Bz(c,l,i),f=[[o]],h=n.runWebGLProgram(d,[u],"int32",f);return s||n.disposeIntermediateTensorInfo(u),h}};var Xz={kernelName:Oa,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=dF(i.values,a.shape,a.dtype),s=(0,C.Z)(o,2),u=s[0],c=s[1];return r.makeTensorInfo(c,a.dtype,u)}return t=Ln().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new iM(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new GF(a.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[a],a.dtype)}},Jz=$p;var Yz={kernelName:Pa,backendName:"webgl",kernelFunc:function(e){Ji("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(i.dataId),d=Jz(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},Qz=jp;var eB={kernelName:Fa,backendName:"webgl",kernelFunc:function(e){Ji("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),d=n.readSync(i.dataId),f=Qz(l,d,o,s,u,c),h=f.selectedIndices,p=f.validOutputs;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},tB=zp;var nB={kernelName:Ma,backendName:"webgl",kernelFunc:function(e){Ji("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),d=n.readSync(i.dataId),f=tB(l,d,o,s,u,c),h=f.selectedIndices,p=f.selectedScores;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},rB=Zt((function e(t,n,r,a){Vt(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),aB={kernelName:$a,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.dtype,o=r.depth,s=r.onValue,u=r.offValue,c=an(a.shape),l=new rB(c,o,s,u),d=PM({inputs:{x:a},backend:n,attrs:{shape:[c]}}),f=n.runWebGLProgram(l,[d],i);n.disposeIntermediateTensorInfo(d);var h=PM({inputs:{x:f},backend:n,attrs:{shape:[].concat((0,Le.Z)(a.shape),[o])}});return n.disposeIntermediateTensorInfo(f),h}};function iB(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=HL({inputs:{input:r},backend:n}),i=iB({inputs:{x:a},backend:n}),o=u$({inputs:{input:r},backend:n}),s=iB({inputs:{x:o},backend:n}),u=mM({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return Sj({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var oB={kernelName:Wi,backendName:"webgl",kernelFunc:iB};var sB={kernelName:La,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=HL({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=u$({inputs:{input:a},backend:r}),u=iB({inputs:{x:s},backend:r}),c=mM({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return Sj({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var uB={kernelName:ja,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return pj({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){nn(a,e.shape,"All tensors passed to stack must have matching shapes"),tn(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=pj({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=d$({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}},cB=Zt((function e(t,n,r){Vt(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=vP(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),lB=Zt((function e(t,n,r){Vt(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=vP(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=$F("rc",a),c=$F("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],h=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",v=0,m=1===a?2:4;v<m;v++)p+="\n        ".concat(f[v],"\n        if (").concat(h,") {\n          result[").concat(v,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(v,"] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ");p+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),dB=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(0===an(a.shape)){var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return Sj({backend:n,attrs:{shape:s,value:o,dtype:a.dtype}})}var u=Ln().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new lB(a.shape,i,o):new cB(a.shape,i,o),c=[[o]];return n.runWebGLProgram(u,[a],a.dtype,c)},fB={kernelName:za,backendName:"webgl",kernelFunc:dB},hB=NM({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),pB={kernelName:Ba,backendName:"webgl",kernelFunc:hB};var vB={kernelName:Va,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims,u=i.shape.length,c=[],l=fn(o,i.shape),d=l,f=Od(d,u),h=i;if(null!=f&&(h=WM({inputs:{x:i},backend:r,attrs:{perm:f}}),d=Pd(d.length,u),c.push(h)),Rd("prod",d,u),r.shouldExecuteOnCPU([h])){var p=r.texData.get(h.dataId).values,v=hF(h.shape,h.dtype,p,d),m=v.outVals,g=v.outShape,y=v.outDtype;t=r.makeTensorInfo(g,y,m)}else{var b=_d(h.shape,d),x=(0,C.Z)(b,2),k=x[0],w=an(x[1]),S=PM({inputs:{x:h},backend:r,attrs:{shape:[-1,w]}}),I=$M(S,os(i.dtype),"prod",r);t=PM({inputs:{x:I},backend:r,attrs:{shape:k}}),c.push(S),c.push(I)}if(s){c.push(t);var N=Ad(t.shape,l);t=PM({inputs:{x:t},backend:r,attrs:{shape:N}})}return c.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}};var mB={kernelName:Wa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.paramsNestedSplits,i=t.paramsDenseValues,o=t.indices,s=r.outputRaggedRank,u=a.map((function(e){return n.readSync(e.dataId)})),c=a.map((function(e){return e.shape})),l=n.readSync(i.dataId),d=n.readSync(o.dataId),f=pF(u,c,l,i.shape,i.dtype,d,o.shape,s),h=(0,C.Z)(f,3),p=h[0],v=h[1],m=h[2],g=p.map((function(e){return n.makeTensorInfo([e.length],"int32",e)})),y=n.makeTensorInfo(m,i.dtype,v);return g.concat([y])}};var gB={kernelName:Ga,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.starts,a=t.limits,i=t.deltas,o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=vF(o,r.shape,r.dtype,s,a.shape,u,i.shape),l=(0,C.Z)(c,2),d=l[0],f=l[1];return[n.makeTensorInfo([d.length],"int32",d),n.makeTensorInfo([f.length],r.dtype,f)]}};var yB={kernelName:Za,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.shape,i=t.values,o=t.defaultValue,s=t.rowPartitionTensors,u=r.rowPartitionTypes,c=n.readSync(a.dataId),l=n.readSync(i.dataId),d=n.readSync(o.dataId),f=s.map((function(e){return n.readSync(e.dataId)})),h=s.map((function(e){return e.shape})),p=mF(c,a.shape,l,i.shape,i.dtype,d,o.shape,f,h,u),v=(0,C.Z)(p,2),m=v[0],g=v[1];return n.makeTensorInfo(m,i.dtype,g)}},bB=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=gF(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},xB={kernelName:Ha,backendName:"webgl",kernelFunc:bB},kB=IM({opSnippet:"return 1.0 / x;"}),wB={kernelName:Ka,backendName:"webgl",kernelFunc:kB},SB=IM({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),IB={kernelName:Xa,backendName:"webgl",kernelFunc:SB},NB=IM({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),TB={kernelName:ni,backendName:"webgl",kernelFunc:NB},CB=Zt((function e(t,n,r,a,i){Vt(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,C.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],h=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/h[0],",\n          ").concat(f[1]/h[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),EB=Zt((function e(t,n,r,a,i){Vt(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,C.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],h=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/h[0],",\n          ").concat(f[1]/h[1],",\n          ").concat(f[1]/h[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var _B={kernelName:ei,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,u=(0,C.Z)(s,2),c=u[0],l=u[1],d=Ln().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new EB(a.shape,c,l,i,o):new CB(a.shape,c,l,i,o);return n.runWebGLProgram(d,[a],"float32")}},AB=Zt((function e(t,n,r){Vt(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,C.Z)(n,3),i=a[1],o=a[2],s=(0,C.Z)(t,3),u=s[1],c=s[2],l=[r&&u>1?i-1:i,r&&c>1?o-1:o],d=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=l[0]/d[0],h=l[1]/d[1],p=1/f,v=1/h,m=2*Math.ceil(p)+2,g=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(h,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(m,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var RB={kernelName:ti,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new AB(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},OB=Zt((function e(t,n,r,a,i){Vt(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,C.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],h=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";d=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/h[0],",\n          ").concat(f[1]/h[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(p,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),DB=Zt((function e(t,n,r,a,i){Vt(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,C.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],h=[a&&n>1?n-1:n,a&&r>1?r-1:r],p=a?"0.5":"0.0";d=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/h[0],",\n          ").concat(f[1]/h[1],",\n          ").concat(f[1]/h[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(p,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var PB={kernelName:Ya,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,u=(0,C.Z)(s,2),c=u[0],l=u[1],d=Ln().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new DB(a.shape,c,l,i,o):new OB(a.shape,c,l,i,o);return n.runWebGLProgram(d,[a],a.dtype)}},FB=Zt((function e(t,n,r){Vt(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,C.Z)(n,3),i=a[1],o=a[2],s=(0,C.Z)(t,3),u=s[1],c=s[2],l=[r&&u>1?i-1:i,r&&c>1?o-1:o],d=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=l[0]/d[0],h=l[1]/d[1],p=1/f,v=1/h,m=2*Math.ceil(p)+2,g=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(h,");\n\n        const float invHeightScale = float(").concat(p,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(m,");\n        const int winWidth = int(").concat(g,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(d[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(d[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var MB={kernelName:Qa,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new FB(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},LB=Zt((function e(t,n){Vt(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=vP(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),$B=Zt((function e(t,n){Vt(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=$F("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=vP(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var jB={kernelName:ri,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=fn(i,a.shape);if(0===o)return pM({inputs:{x:a},backend:n});var u=Ln().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $B(a.shape,s):new LB(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},zB=Zt((function e(t,n){Vt(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),BB={kernelName:Hi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,c=new zB(a.shape,o),l=Hv(s,a.shape[1],a.shape[2]),d=(0,C.Z)(l,2),f=[[d[0],d[1],Math.sin(i),Math.cos(i)]];return u.runWebGLProgram(c,[a],a.dtype,f)}},UB=IM({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),VB={kernelName:ai,backendName:"webgl",kernelFunc:UB},WB=IM({opSnippet:"return inversesqrt(x);",cpuKernelImpl:yF}),GB={kernelName:ii,backendName:"webgl",kernelFunc:WB},ZB=Zt((function e(t,n,r,a,i,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Vt(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var u=vP(i.length),c=vP(o.length),l="";1===r?l="i":2===r&&(l="i, j");var d="getIndices(".concat(l,")"),f="";1===a?f="i":2===a&&(f="i, coords[1]");var h="getUpdates(".concat(f,")"),p="";s&&(p="coords[0], coords[1]");var v="getDefaultValue(".concat(p,")"),m=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(u," strides = ").concat(u,"(").concat(i,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(d,");\n              flattenedIndex += index * ").concat(m,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(h,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(v,", sum, float(found)));\n        }\n      ")})),HB=Zt((function e(t,n,r,a,i,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Vt(this,e),this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;var u=vP(i.length),c=vP(o.length),l="";1===r?l="i":2===r&&(l="i, j");var d="getIndices(".concat(l,")"),f="";1===a?f="i":2===a&&(f="i, coords[1]");var h="getUpdates(".concat(f,")"),p="";s&&(p="coords[0], coords[1]");var v="getDefaultValue(".concat(p,")"),m=n>1?"strides[j]":"strides",g=n>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(u," strides = ").concat(u,"(").concat(i,");\n\n        void main() {\n          ").concat(c," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(t,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(n,"; j+=2) {\n              ivec4 index = round(").concat(d,");\n              flattenedIndex += index.xz * ").concat(m,";\n              if (j + 1 < ").concat(n,") {\n                flattenedIndex += index.yw * ").concat(g,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(h,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(v,", sum, found));\n        }\n      ")}));var qB={kernelName:oi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=Gh(0,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,f=s.outputSize,h=[f/l,l];if(0===f)return n.makeTensorInfo(o,a.dtype);var p,v=PM({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),m=PM({inputs:{x:i},backend:n,attrs:{shape:[c,l]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0]));p=Ln().getBool("WEBGL_PACK")?new HB(c,u,v.shape.length,m.shape.length,d,h):new ZB(c,u,v.shape.length,m.shape.length,d,h);var y=n.runWebGLProgram(p,[m,v,g],m.dtype),b=PM({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),b}},KB=Zt((function e(t,n,r,a){Vt(this,e),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];var i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),o=2===Ln().getNumber("WEBGL_VERSION")?"while (left < right) {":i,s="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}));var XB={kernelName:ui,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=new KB(a.shape[0],a.shape[1],i.shape[1],o),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",u)}},JB=Zt((function e(t,n,r){var a,i;if(Vt(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(o[c])),c<t&&s.push("".concat(o[c]));a=s.join(),i=u.join()}var l=vP(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var YB={kernelName:ci,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new JB(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],is(a.dtype,i.dtype))}},QB=IM({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(em,";\n  float scale = ").concat(tm,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),eU={kernelName:li,backendName:"webgl",kernelFunc:QB},tU=IM({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:xF}),nU={kernelName:vi,backendName:"webgl",kernelFunc:tU},rU=IM({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),aU={kernelName:pi,backendName:"webgl",kernelFunc:rU},iU=IM({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(fM,"\n  return result;\n")}),oU={kernelName:fi,backendName:"webgl",kernelFunc:iU},sU=IM({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),uU={kernelName:hi,backendName:"webgl",kernelFunc:sU},cU=IM({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),lU={kernelName:mi,backendName:"webgl",kernelFunc:cU},dU={kernelName:bi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;tn(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,(0,Le.Z)(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=[],d=dB({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),f=qv(d.shape,i,s,!1),h=Kv(f.length,i.length,!1),p=Xv(d.shape,i,s,!1),v=PM({inputs:{x:d},backend:n,attrs:{shape:f}}),m=WM({inputs:{x:v},backend:n,attrs:{perm:h}}),g=PM({inputs:{x:m},backend:n,attrs:{shape:p}});return l.push(d),l.push(v),l.push(m),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var fU={kernelName:wi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],d=SF(s,r.shape,r.dtype,u,a.dtype,c,l),f=(0,C.Z)(d,5),h=f[0],p=f[1],v=f[2],m=f[3],g=f[4];return[n.makeTensorInfo(p,r.dtype,h),n.makeTensorInfo([p[0]],a.dtype,v),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};var hU={kernelName:Si,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),c=IF(s,r.shape,r.dtype,o,u),l=(0,C.Z)(c,3),d=l[0],f=l[1],h=l[2];return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}};var pU={kernelName:Ii,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=NF(o,r.shape,r.dtype,s,u,!0),l=(0,C.Z)(c,2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var vU={kernelName:Ni,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=NF(o,r.shape,r.dtype,s,u),l=(0,C.Z)(c,2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var mU={kernelName:Ti,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=Gh(0,a,s),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,f=u.strides,h=u.outputSize;if("string"===i.dtype){var p=n.bufferSync(a),v=n.bufferSync(i),m=_o(n.readSync(o.dataId)[0]),g=bF(p,v,s,h,d,l,c,f,m,false);return n.makeTensorInfo(s,g.dtype,g.values)}var y=new ZB(l,c,a.shape.length,i.shape.length,f,[h,1],false),b=n.runWebGLProgram(y,[i,a,o],i.dtype),x=PM({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(b),x}};var gU={kernelName:xi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=fn(r.axis,a.shape)[0],s=xm(a,i,o),u=a.shape.length,c=new Array(u).fill(0),l=a.shape.slice();return s.map((function(e){var t=(0,Le.Z)(l);t[o]=e;var r=zL({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[o]+=e,r}))}},yU="return sqrt(x);",bU=IM({opSnippet:yU,packedOpSnippet:yU,cpuKernelImpl:TF}),xU={kernelName:gi,backendName:"webgl",kernelFunc:bU},kU={kernelName:Ei,backendName:"webgl",kernelFunc:IM({opSnippet:"return x * x;"})},wU="return (a - b) * (a - b);",SU=NM({opSnippet:wU,packedOpSnippet:wU}),IU={kernelName:Ci,backendName:"webgl",kernelFunc:SU};var NU={kernelName:_i,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;if("string"!==a.dtype)throw new Error("Input must be of datatype string");var i=Nm(n.readSync(a.dataId)),o=CF(i,"string",r);return n.makeTensorInfo(a.shape,"string",o)}};var TU={kernelName:Gi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=ZF+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new GF(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},CU=Zt((function e(t,n,r){Vt(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=vP(r.length),o=vP(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var EU={kernelName:Ai,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,d=a.ellipsisMask,f=a.newAxisMask,h=a.shrinkAxisMask,p=il(i.shape,o,s,u,c,l,d,f,h),v=p.finalShapeSparse,m=p.finalShape,g=p.isIdentity,y=p.sliceDim0,b=p.isSimpleSlice,x=p.begin,k=p.end,w=p.strides;if(g)t=PM({inputs:{x:i},backend:r,attrs:{shape:m}});else if(y||b){tn(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var S=tl(x,k,w),I=zL({inputs:{x:i},backend:r,attrs:{begin:x,size:S}});t=PM({inputs:{x:I},backend:r,attrs:{shape:m}}),r.disposeIntermediateTensorInfo(I)}else{if(r.shouldExecuteOnCPU([i])){var N=r.readSync(i.dataId),T=Uu(i.shape,i.dtype,N),C=EF(v,T,w,x);t=r.makeTensorInfo(m,i.dtype,C.values)}else{var E=new CU(x,w,v);t=r.runWebGLProgram(E,[i],i.dtype)}}var _=PM({inputs:{x:t},backend:r,attrs:{shape:m}});return r.disposeIntermediateTensorInfo(t),_}};var _U={kernelName:Ri,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,d=t.dataSplits,f=n.readSync(l.dataId),h=n.readSync(d.dataId),p=_F(f,h,a,i,o,s,u,c),v=(0,C.Z)(p,2),m=v[0],g=v[1];return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",g)]}};var AU={kernelName:Oi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(a.dataId),s=n.readSync(i.dataId)[0],u=AF(o,s,r),c=(0,C.Z)(u,3),l=c[0],d=c[1],f=c[2],h=d.length;return[n.makeTensorInfo([h,2],"int32",l),n.makeTensorInfo([h],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(f))]}};var RU={kernelName:Di,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=RF(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},OU=IM({opSnippet:"return tan(x);"}),DU={kernelName:Fi,backendName:"webgl",kernelFunc:OU},PU=IM({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),FU={kernelName:Mi,backendName:"webgl",kernelFunc:PU};var MU={kernelName:si,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.tensor,i=t.indices,o=t.updates;!function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(r);var s=Gh(0,i,a.shape),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,f=s.outputSize,h=[f/l,l];if(0===f)return n.makeTensorInfo(a.shape,i.dtype);var p=PM({inputs:{x:i},backend:n,attrs:{shape:[c,u]}}),v=PM({inputs:{x:o},backend:n,attrs:{shape:[c,l]}}),m=PM({inputs:{x:a},backend:n,attrs:{shape:h}}),g=new ZB(c,u,p.shape.length,v.shape.length,d,h,!1,!0),y=n.runWebGLProgram(g,[v,p,m],m.dtype),b=PM({inputs:{x:y},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),b}},LU=Zt((function e(t,n){Vt(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=vP(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function $U(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype||a.shape.length>5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return _o(e)})):o,u=Uu(a.shape,a.dtype,s),c=DF(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new LU(a.shape,i);return n.runWebGLProgram(l,[a],a.dtype)}var jU={kernelName:Li,backendName:"webgl",kernelFunc:$U},zU=Zt((function e(t){Vt(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),BU=Zt((function e(t){Vt(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function UU(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function VU(e){for(var t=1;t<e;)t*=2;return t}var WU={kernelName:$i,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=Ln().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=Ln().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,l=c[c.length-1];if(n.shouldExecuteOnCPU([a])||l<s||i>u){var d=n.readSync(a.dataId),f=PF(d,c,a.dtype,i,o),h=(0,C.Z)(f,2),p=h[0],v=h[1];return[n.makeTensorInfo(p.shape,p.dtype,p.values),n.makeTensorInfo(v.shape,v.dtype,v.values)]}if(0===i)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===l)return[a,Sj({attrs:{shape:c,dtype:"int32",value:0},backend:n})];var m=n.texData.get(a.dataId),g=null!==m&&m.isPacked,y=g?n.unpackTensor(a):a,b=an(c)/l,x=PM({inputs:{x:y},attrs:{shape:[b,l]},backend:n});g&&UU(n,y);for(var k=VU(i),w=VU(l),S=null,I=function(){return null===S?[x,x]:[x,S]},N=function(e,t,r){var a=I(),i=new zU(r),o=[[l],[null===S?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=S;S=n.runWebGLProgram(i,a,"int32",o),UU(n,s)},T=1;T<k;T*=2)for(var E=2*T,_=T;_>=1;_/=2)N(E,_,[b,w]);for(var A=w;A>k;A/=2){var R=I(),O=new BU([b,A/2]),D=[[l],[null===S?1:0],[k]],P=S;S=n.runWebGLProgram(O,R,"int32",D),UU(n,P);for(var F=k/2,M=2*F,L=F;L>=1;L/=2)N(M,L,S.shape)}var $=S;S=zL({inputs:{x:S},backend:n,attrs:{begin:0,size:[b,i]}}),UU(n,$);var j=Uj({inputs:{x:x,indices:S},backend:n,attrs:{axis:1,batchDims:1}});UU(n,x);var z=c.slice(0,-1);z.push(i),$=S,S=PM({inputs:{x:S},attrs:{shape:z},backend:n}),UU(n,$);var B=j;return j=PM({inputs:{x:j},attrs:{shape:z},backend:n}),UU(n,B),[j,S]}},GU=Zt((function e(t,n,r,a,i,o){Vt(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var ZU={kernelName:ji,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,s=r.fillMode,u=r.fillValue,c=r.outputShape,l=(0,C.Z)(a.shape,4),d=l[0],f=l[1],h=l[2],p=l[3],v=null!=c?c:[f,h],m=(0,C.Z)(v,2),g=m[0],y=m[1],b=new GU(f,h,o,s,u,[d,g,y,p]);return n.runWebGLProgram(b,[a,i],"float32")}};var HU={kernelName:Bi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;UD(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=MF(o,a,i.shape,i.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,i.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}};var qU={kernelName:Ui,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],c=new Array(s-1),l=0,d=0;d<s;d++)d!==i&&(c[l++]=o.shape[d]);var f=[],h=new Array(s).fill(0),p=o.shape.slice();p[i]=1;for(var v=new Array(u),m=0;m<v.length;m++){h[i]=m;var g=zL({inputs:{x:o},backend:n,attrs:{begin:h,size:p}}),y=PM({inputs:{x:g},backend:n,attrs:{shape:c}});v[m]=y,f.push(g)}return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},KU=Zt((function e(t,n){Vt(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(f,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var XU={kernelName:Vi,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,u=[],c=0,l=Od([c],s),d=a;null!=l&&(d=WM({inputs:{x:a},backend:n,attrs:{perm:l}}),u.push(d),c=Pd(1,s)[0]);var f=function(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}(d.shape,c,o),h=an([d.shape[c]]),p=PM({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});u.push(p);var v=function e(t,r,a,i,o){var s=t.shape[0],c=t.shape[1],l=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=wn(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=wn(e,n+1);return n}(c,o),d=new KU({windowSize:l,inSize:c,batchSize:s,numSegments:o},r),f=n.compileAndRun(d,[t,a],i);if(u.push(f),f.shape[1]===o)return f;var h=bB({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),p=$U({inputs:{x:h},backend:n,attrs:{reps:[c/l]}});return u.push(h),u.push(p),e(f,r,p,i,o)}(p,"unsortedSegmentSum",i,os(a.dtype),o),m=PM({inputs:{x:v},backend:n,attrs:{shape:f}}),g=m;if(null!=l){u.push(m);var y=Dd(l);g=WM({inputs:{x:g},backend:n,attrs:{perm:y}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},JU=0,YU=[HM,KM,JM,QM,nL,iL,oL,sL,hL,pL,mL,yL,xL,wL,IL,CL,EL,RL,OL,DL,ML,UL,VL,WL,KL,YL,t$,gM,a$,f$,x$,N$,C$,E$,_$,R$,D$,F$,L$,U$,V$,W$,Z$,K$,Y$,Q$,tj,rj,aj,oj,sj,cj,dj,hj,vj,yj,kj,Nj,Cj,Aj,Oj,Fj,Lj,$j,zj,Vj,Gj,Hj,vM,qj,c$,Xj,Yj,ez,xM,nz,az,iz,sz,cz,dz,hz,vz,yz,xz,wz,Iz,Nz,Tz,_z,Az,Rz,Oz,Dz,Fz,$z,zz,Kz,DM,Xz,Yz,eB,nB,ZL,aB,sB,uB,fB,pB,SM,vB,mB,gB,yB,xB,qL,Vz,wB,IB,TB,FM,_B,RB,PB,MB,jB,BB,VB,GB,qB,XB,YB,eU,nU,aU,oU,uU,BL,qz,lU,dU,fU,hU,pU,vU,mU,gU,xU,kU,IU,NU,TU,EU,_U,AU,RU,Zz,VM,DU,FU,MU,jU,WU,ZU,GM,HU,qU,XU,oB];JU<YU.length;JU++){ro(YU[JU])}var QU="%[a-f0-9]{2}";new RegExp("("+QU+")|([^%]+?)","gi"),new RegExp("("+QU+")+","gi");Symbol("encodeFragmentIdentifier");function eV(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var tV=function e(t,n){function r(e,r,a){if("undefined"!==typeof document){"number"===typeof(a=eV({},n,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var o in a)a[o]&&(i+="; "+o,!0!==a[o]&&(i+="="+a[o].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+i}}return Object.create({set:r,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},a=0;a<n.length;a++){var i=n[a].split("="),o=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(r[s]=t.read(o,s),e===s)break}catch(u){}}return e?r[e]:r}},remove:function(e,t){r(e,"",eV({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,eV({},this.attributes,t))},withConverter:function(t){return e(eV({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),nV=tV,rV={"ANDAMAN&NICOBARISLANDS":{JAN:52.63727272727272,FEB:27.994545454545452,MAR:31.824074074074073,APR:72.22314814814816,MAY:357.056880733945,JUN:471.58055555555546,JUL:400.0425925925926,AUG:400.0472222222222,SEP:439.48224299065424,OCT:290.26481481481477,NOV:233.74444444444447,DEC:153.1448598130841},ARUNACHALPRADESH:{JAN:47.29791666666667,FEB:91.11666666666666,MAR:153.52736842105264,APR:263.83608247422677,MAY:358.52268041237113,JUN:647.3739583333333,JUL:694.5447916666667,AUG:495.2298969072165,SEP:432.1340206185567,OCT:194.6863157894737,NOV:35.69684210526316,DEC:24.502105263157894},ASSAM:{JAN:16.97478260869565,FEB:31.44173913043478,MAR:79.02695652173912,APR:203.11565217391305,MAY:341.5391304347825,JUN:510.1617391304348,JUL:495.1026086956522,AUG:404.5930434782608,SEP:310.73478260869564,OCT:152.11826086956518,NOV:26.938260869565216,DEC:8.951304347826088},MEGHALAYA:{JAN:16.97478260869565,FEB:31.44173913043478,MAR:79.02695652173912,APR:203.11565217391305,MAY:341.5391304347825,JUN:510.1617391304348,JUL:495.1026086956522,AUG:404.5930434782608,SEP:310.73478260869564,OCT:152.11826086956518,NOV:26.938260869565216,DEC:8.951304347826088},NAGALAND:{JAN:14.025217391304349,FEB:36.65217391304348,MAR:77.19913043478262,APR:170.73304347826087,MAY:290.8391304347826,JUN:445.6339130434783,JUL:438.684347826087,AUG:411.28173913043474,SEP:314.3504347826088,OCT:175.00608695652167,NOV:46.83391304347827,DEC:12.399130434782608},MANIPUR:{JAN:14.025217391304349,FEB:36.65217391304348,MAR:77.19913043478262,APR:170.73304347826087,MAY:290.8391304347826,JUN:445.6339130434783,JUL:438.684347826087,AUG:411.28173913043474,SEP:314.3504347826088,OCT:175.00608695652167,NOV:46.83391304347827,DEC:12.399130434782608},MIZORAM:{JAN:14.025217391304349,FEB:36.65217391304348,MAR:77.19913043478262,APR:170.73304347826087,MAY:290.8391304347826,JUN:445.6339130434783,JUL:438.684347826087,AUG:411.28173913043474,SEP:314.3504347826088,OCT:175.00608695652167,NOV:46.83391304347827,DEC:12.399130434782608},TRIPURA:{JAN:14.025217391304349,FEB:36.65217391304348,MAR:77.19913043478262,APR:170.73304347826087,MAY:290.8391304347826,JUN:445.6339130434783,JUL:438.684347826087,AUG:411.28173913043474,SEP:314.3504347826088,OCT:175.00608695652167,NOV:46.83391304347827,DEC:12.399130434782608},"SUB HIMALAYAN":{JAN:14.083478260869564,FEB:22.97478260869565,MAR:43.135652173913044,APR:110.68173913043478,MAY:269.14347826086953,JUN:537.8817391304348,JUL:646.4026086956522,AUG:520.7634782608696,SEP:421.3417391304348,OCT:143.64608695652174,NOV:16.08869565217391,DEC:6.0600000000000005},SIKKIM:{JAN:14.083478260869564,FEB:22.97478260869565,MAR:43.135652173913044,APR:110.68173913043478,MAY:269.14347826086953,JUN:537.8817391304348,JUL:646.4026086956522,AUG:520.7634782608696,SEP:421.3417391304348,OCT:143.64608695652174,NOV:16.08869565217391,DEC:6.0600000000000005},WESTBENGAL:{JAN:12.595652173913045,FEB:22.452173913043477,MAR:29.090434782608696,APR:44.885217391304344,MAY:107.78782608695653,JUN:247.19652173913042,JUL:326.3773913043478,AUG:311.3826086956521,SEP:245.71043478260867,OCT:115.74608695652175,NOV:21.57913043478261,DEC:5.690434782608696},ORISSA:{JAN:12.329565217391304,FEB:19.71913043478261,MAR:21.13478260869565,APR:34.16,MAY:64.88608695652174,JUN:210.86086956521737,JUL:351.17304347826087,AUG:355.3826086956522,SEP:241.40347826086952,OCT:113.59217391304347,NOV:27.96173913043478,DEC:5.567826086956521},JHARKHAND:{JAN:17.621739130434786,FEB:24.18608695652174,MAR:18.423478260869565,APR:19.366956521739134,MAY:48.31739130434783,JUN:194.58869565217393,JUL:336.97565217391303,AUG:325.52434782608697,SEP:227.4217391304348,OCT:80.01565217391304,NOV:11.923478260869565,DEC:4.9391304347826095},BIHAR:{JAN:13.386086956521737,FEB:14.39391304347826,MAR:10.124347826086955,APR:16.91826086956522,MAY:53.08173913043478,JUN:174.31565217391304,JUL:324.4417391304348,AUG:299.6434782608696,SEP:217.38434782608695,OCT:63.07478260869565,NOV:7.178260869565217,DEC:3.694782608695652},UTTARPRADESH:{JAN:16.01217391304348,FEB:15.87391304347826,MAR:8.907826086956522,APR:6.430434782608698,MAY:17.211304347826086,JUN:110.71217391304349,JUL:290.56869565217386,AUG:275.6139130434782,SEP:184.59130434782608,OCT:42.92086956521739,NOV:4.590434782608695,DEC:5.776521739130436},UTTARAKHAND:{JAN:53.797391304347826,FEB:63.45217391304349,MAR:57.27217391304348,APR:35.16608695652174,MAY:55.338260869565204,JUN:162.5513043478261,JUL:390.69826086956516,AUG:382.0234782608696,SEP:196.09652173913045,OCT:39.07391304347827,NOV:8.187826086956521,DEC:22.035652173913046},HARYANA:{JAN:16.889565217391304,FEB:17.43391304347826,MAR:12.935652173913043,APR:7.63391304347826,MAY:14.533913043478263,JUN:48.62608695652173,JUL:150.01565217391303,AUG:150.8408695652174,SEP:88.30695652173914,OCT:12.823478260869566,NOV:3.2643478260869565,DEC:7.18608695652174},DELHI:{JAN:16.889565217391304,FEB:17.43391304347826,MAR:12.935652173913043,APR:7.63391304347826,MAY:14.533913043478263,JUN:48.62608695652173,JUL:150.01565217391303,AUG:150.8408695652174,SEP:88.30695652173914,OCT:12.823478260869566,NOV:3.2643478260869565,DEC:7.18608695652174},CHANDIGARH:{JAN:16.889565217391304,FEB:17.43391304347826,MAR:12.935652173913043,APR:7.63391304347826,MAY:14.533913043478263,JUN:48.62608695652173,JUL:150.01565217391303,AUG:150.8408695652174,SEP:88.30695652173914,OCT:12.823478260869566,NOV:3.2643478260869565,DEC:7.18608695652174},PUNJAB:{JAN:25.24608695652174,FEB:26.786956521739132,MAR:23.651304347826088,APR:12.66,MAY:14.136521739130435,JUN:46.466956521739135,JUL:168.96347826086958,AUG:158.16782608695652,SEP:86.78956521739131,OCT:13.836521739130434,NOV:4.140000000000001,DEC:12.69478260869565},HIMACHALPRADESH:{JAN:84.18956521739132,FEB:90.89478260869566,MAR:101.14608695652174,APR:62.42869565217391,MAY:58.15652173913043,JUN:91.22086956521738,JUL:280.28434782608696,AUG:273.9330434782609,SEP:130.2191304347826,OCT:31.278260869565216,NOV:16.695652173913043,DEC:39.89304347826087},"JAMMU&KASHMIR":{JAN:102.03043478260871,FEB:115.45043478260871,MAR:131.37826086956522,APR:93.70260869565217,MAY:67.47652173913043,JUN:64.23478260869564,JUL:179.83771929824562,AUG:180.97304347826085,SEP:89.28956521739131,OCT:34.16695652173913,NOV:24.133333333333333,DEC:55.42543859649123},RAJASTHAN:{JAN:6.422608695652174,FEB:5.417391304347826,MAR:4.516521739130434,APR:3.1443478260869564,MAY:9.82,JUN:63.399130434782606,JUL:223.3478260869565,AUG:218.27739130434782,SEP:97.97826086956522,OCT:14.360869565217389,NOV:4.87391304347826,DEC:3.651304347826087},MADHYAPRADESH:{JAN:9.241739130434782,FEB:6.307894736842106,MAR:5.173043478260869,APR:2.375652173913043,MAY:7.657391304347826,JUN:111.7817391304348,JUL:302.9826086956521,AUG:288.10869565217394,SEP:161.16869565217388,OCT:28.08695652173913,NOV:12.340869565217389,DEC:6.296521739130434},GUJARAT:{JAN:1.7860869565217392,FEB:1.191304347826087,MAR:1.220869565217391,APR:1.1165217391304345,MAY:5.809565217391304,JUN:121.28434782608697,JUL:348.9208695652174,AUG:259.19304347826085,SEP:148.84173913043477,OCT:20.565217391304348,NOV:6.9286956521739125,DEC:1.3391304347826087},GOA:{JAN:1.262608695652174,FEB:.5469565217391305,MAR:1.374782608695652,APR:4.266086956521739,MAY:33.51565217391305,JUN:688.5695652173913,JUL:1073.0304347826086,AUG:682.7565217391306,SEP:349.78000000000003,OCT:113.38695652173911,NOV:24.67130434782609,DEC:4.516521739130434},MAHARASHTRA:{JAN:3.054782608695653,FEB:1.4678260869565218,MAR:3.596521739130435,APR:9.14695652173913,MAY:22.94347826086957,JUN:147.42608695652174,JUL:248.97999999999996,AUG:184.3973913043478,SEP:157.22173913043474,OCT:70.19478260869566,NOV:25.945217391304347,DEC:5.848695652173912},CHHATTISGARH:{JAN:14.20695652173913,FEB:19.259130434782605,MAR:15.26695652173913,APR:16.773043478260867,MAY:21.048695652173908,JUN:198.26608695652172,JUL:398.5773913043478,AUG:389.8730434782608,SEP:217.78,OCT:63.65999999999999,NOV:11.772173913043478,DEC:5.2486956521739145},ANDHRAPRADESH:{JAN:7.483478260869566,FEB:12.923478260869565,MAR:13.221739130434782,APR:26.740869565217398,MAY:62.549565217391304,JUN:123.69391304347826,JUL:173.82434782608695,AUG:175.92347826086953,SEP:181.70782608695652,OCT:185.51130434782607,NOV:77.90347826086959,DEC:11.42},TELANGANA:{JAN:7.702608695652175,FEB:9.688695652173914,MAR:12.614782608695652,APR:18.18521739130435,MAY:25.373913043478264,JUN:142.12608695652173,JUL:247.4991304347826,AUG:215.0591304347826,SEP:175.50347826086957,OCT:74.22695652173914,NOV:20.250434782608696,DEC:5.141739130434784},TAMILNADU:{JAN:23.81913043478261,FEB:13.422608695652174,MAR:19.47565217391304,APR:44.99565217391305,MAY:69.9208695652174,JUN:52.05652173913043,JUL:71.31478260869567,AUG:95.88782608695654,SEP:111.59739130434782,OCT:183.19652173913045,NOV:176.90347826086955,DEC:81.13739130434782},KARNATAKA:{JAN:1.9377192982456137,FEB:1.5182608695652173,MAR:6.357391304347826,APR:30.91652173913043,MAY:122.78782608695651,JUN:841.3260869565217,JUL:1127.0286956521738,AUG:713.6182608695651,SEP:299.65217391304355,OCT:184.55217391304348,NOV:63.60782608695652,DEC:12.613913043478258},KERALA:{JAN:12.246956521739131,FEB:15.496521739130435,MAR:36.81478260869565,APR:110.57391304347827,MAY:229.8817391304348,JUN:654.3026086956521,JUL:700.953043478261,AUG:421.97739130434775,SEP:245.61913043478262,OCT:294.12260869565216,NOV:163.56,DEC:39.95043478260869},LAKSHADWEEP:{JAN:27.494642857142853,FEB:15.834513274336281,MAR:14.350892857142856,APR:45.16339285714285,MAY:163.89374999999998,JUN:327.62767857142853,JUL:281.92882882882884,AUG:207.99375,SEP:163.1702702702703,OCT:166.72792792792796,NOV:124.84074074074073,DEC:60.8109090909091},RANDOM:{JAN:9.241739130434782,FEB:6.307894736842106,MAR:5.173043478260869,APR:2.375652173913043,MAY:7.657391304347826,JUN:111.7817391304348,JUL:302.9826086956521,AUG:288.10869565217394,SEP:161.16869565217388,OCT:28.08695652173913,NOV:12.340869565217389,DEC:6.296521739130434}},aV=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=63&a|128):55296===(64512&a)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=63&a|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=63&a|128)}return t},iV={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],a=0;a<e.length;a+=3){var i=e[a],o=a+1<e.length,s=o?e[a+1]:0,u=a+2<e.length,c=u?e[a+2]:0,l=i>>2,d=(3&i)<<4|s>>4,f=(15&s)<<2|c>>6,h=63&c;u||(h=64,o||(f=64)),r.push(n[l],n[d],n[f],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(aV(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){var i=e[n++];t[r++]=String.fromCharCode((31&a)<<6|63&i)}else if(a>239&&a<365){var o=((7&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&a)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],a=0;a<e.length;){var i=n[e.charAt(a++)],o=a<e.length?n[e.charAt(a)]:0,s=++a<e.length?n[e.charAt(a)]:64,u=++a<e.length?n[e.charAt(a)]:64;if(++a,null==i||null==o||null==s||null==u)throw new oV;var c=i<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var d=s<<6&192|u;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},oV=function(e){Mo(n,e);var t=Bo(n);function n(){var e;return Vt(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return Zt(n)}(uy(Error)),sV=function(e){return function(e){var t=aV(e);return iV.encodeByteArray(t,!0)}(e).replace(/\./g,"")},uV=function(e){try{return iV.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function cV(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=cV(e[n],t[n]));return e}var lV=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},dV=function(){try{return lV()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&uV(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},fV=function(e){var t,n;return null===(n=null===(t=dV())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},hV=function(){var e;return null===(e=dV())||void 0===e?void 0:e.config},pV=function(e){var t;return null===(t=dV())||void 0===t?void 0:t["_".concat(e)]},vV=function(){function e(){var t=this;Vt(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Zt(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function mV(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},e);return[sV(JSON.stringify({alg:"none",type:"JWT"})),sV(JSON.stringify(i)),""].join(".")}function gV(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function yV(){var e,t=null===(e=dV())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function bV(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function xV(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function kV(){var e=gV();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function wV(){try{return"object"===typeof indexedDB}catch(e){return!1}}var SV=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a){var i;return Vt(this,n),(i=t.call(this,r)).code=e,i.customData=a,i.name="FirebaseError",Object.setPrototypeOf(je(i),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(je(i),IV.prototype.create),i}return Zt(n)}(uy(Error)),IV=function(){function e(t,n,r){Vt(this,e),this.service=t,this.serviceName=n,this.errors=r}return Zt(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],a=r?NV(r,t):"Error",i="".concat(this.serviceName,": ").concat(a," (").concat(n,")."),o=new SV(n,i,t);return o}}]),e}();function NV(e,t){return e.replace(TV,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var TV=/\{\$([^}]+)}/g;function CV(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function EV(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),a=0,i=n;a<i.length;a++){var o=i[a];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(_V(s)&&_V(u)){if(!EV(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var d=l[c];if(!n.includes(d))return!1}return!0}function _V(e){return null!==e&&"object"===typeof e}function AV(e){for(var t=[],n=function(){var e=(0,C.Z)(a[r],2),n=e[0],i=e[1];Array.isArray(i)?i.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))},r=0,a=Object.entries(e);r<a.length;r++)n();return t.length?"&"+t.join("&"):""}function RV(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=(0,C.Z)(n,2),a=r[0],i=r[1];t[decodeURIComponent(a)]=decodeURIComponent(i)}})),t}function OV(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function DV(e,t){var n=new PV(e,t);return n.subscribe.bind(n)}var PV=function(){function e(t,n){var r=this;Vt(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Zt(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,a=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Ut(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a in e&&"function"===typeof e[a])return!0}}catch(Rme){r.e(Rme)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=FV),void 0===r.error&&(r.error=FV),void 0===r.complete&&(r.complete=FV);var i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{a.finalError?r.error(a.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function FV(){}function MV(e){return e&&e._delegate?e._delegate:e}var LV=function(){function e(t,n,r){Vt(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Zt(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),$V="[DEFAULT]",jV=function(){function e(t,n){Vt(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Zt(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new vV;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(a){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(r)return null;throw a}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:$V})}catch(u){}var t,n=Ut(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,C.Z)(t.value,2),a=r[0],i=r[1],o=this.normalizeInstanceIdentifier(a);try{var s=this.getOrInitializeService({instanceIdentifier:o});i.resolve(s)}catch(u){}}}catch(Rme){n.e(Rme)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$V;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=me(ge.mark((function e(){var t;return ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat((0,Le.Z)(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),(0,Le.Z)(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$V;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$V;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a,i=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Ut(this.instancesDeferred.entries());try{for(o.s();!(a=o.n()).done;){var s=(0,C.Z)(a.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);r===l&&c.resolve(i)}}catch(Rme){o.e(Rme)}finally{o.f()}return i}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),a=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;a.add(e),this.onInitCallbacks.set(r,a);var i=this.instances.get(r);return i&&e(i,r),function(){a.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,a=Ut(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;try{i(e,t)}catch(Kte){}}}catch(Rme){a.e(Rme)}finally{a.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,a=void 0===r?{}:r,i=this.instances.get(n);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===$V?void 0:t),options:a}),this.instances.set(n,i),this.instancesOptions.set(n,a),this.invokeOnInitCallbacks(i,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,i)}catch(Kte){}return i||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$V;return this.component?this.component.multipleInstances?e:$V:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var zV,BV,UV=function(){function e(t){Vt(this,e),this.name=t,this.providers=new Map}return Zt(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new jV(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),VV=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(BV||(BV={}));var WV={debug:BV.DEBUG,verbose:BV.VERBOSE,info:BV.INFO,warn:BV.WARN,error:BV.ERROR,silent:BV.SILENT},GV=BV.INFO,ZV=(zV={},(0,De.Z)(zV,BV.DEBUG,"log"),(0,De.Z)(zV,BV.VERBOSE,"log"),(0,De.Z)(zV,BV.INFO,"info"),(0,De.Z)(zV,BV.WARN,"warn"),(0,De.Z)(zV,BV.ERROR,"error"),zV),HV=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ZV[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a,i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];(a=console)[r].apply(a,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},qV=function(){function e(t){Vt(this,e),this.name=t,this._logLevel=GV,this._logHandler=HV,this._userLogHandler=null,VV.push(this)}return Zt(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in BV))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?WV[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,BV.DEBUG].concat(t)),this._logHandler.apply(this,[this,BV.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,BV.VERBOSE].concat(t)),this._logHandler.apply(this,[this,BV.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,BV.INFO].concat(t)),this._logHandler.apply(this,[this,BV.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,BV.WARN].concat(t)),this._logHandler.apply(this,[this,BV.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,BV.ERROR].concat(t)),this._logHandler.apply(this,[this,BV.ERROR].concat(t))}}]),e}();function KV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function XV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KV(Object(n),!0).forEach((function(t){(0,De.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var JV,YV;var QV=new WeakMap,eW=new WeakMap,tW=new WeakMap,nW=new WeakMap,rW=new WeakMap;var aW={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return eW.get(e);if("objectStoreNames"===t)return e.objectStoreNames||tW.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sW(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function iW(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(YV||(YV=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(uW(this),n),sW(QV.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return sW(e.apply(uW(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var i=e.call.apply(e,[uW(this),t].concat(r));return tW.set(i,t.sort?t.sort():[t]),sW(i)}}function oW(e){return"function"===typeof e?iW(e):(e instanceof IDBTransaction&&function(e){if(!eW.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=function(){t(),r()},i=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)}));eW.set(e,t)}}(e),t=e,(JV||(JV=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,aW):e);var t}function sW(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",a),e.removeEventListener("error",i)},a=function(){t(sW(e.result)),r()},i=function(){n(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",i)}));return t.then((function(t){t instanceof IDBCursor&&QV.set(t,e)})).catch((function(){})),rW.set(t,e),t}(e);if(nW.has(e))return nW.get(e);var t=oW(e);return t!==e&&(nW.set(e,t),rW.set(t,e)),t}var uW=function(e){return rW.get(e)};var cW,lW,dW=["get","getKey","getAll","getAllKeys","count"],fW=["put","add","delete","clear"],hW=new Map;function pW(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(hW.get(t))return hW.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,a=fW.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(a||dW.includes(n))){var i=function(){var e=me(ge.mark((function e(t){var i,o,s,u,c,l,d=arguments;return ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,a?"readwrite":"readonly"),s=o.store,u=d.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=d[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(i=s)[n].apply(i,c),a&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return hW.set(t,i),i}}}aW=function(e){return XV(XV({},e),{},{get:function(t,n,r){return pW(t,n)||e.get(t,n,r)},has:function(t,n){return!!pW(t,n)||e.has(t,n)}})}(aW);var vW=function(){function e(t){Vt(this,e),this.container=t}return Zt(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var mW="@firebase/app",gW="0.9.7",yW=new qV("@firebase/app"),bW="[DEFAULT]",xW=(cW={},(0,De.Z)(cW,mW,"fire-core"),(0,De.Z)(cW,"@firebase/app-compat","fire-core-compat"),(0,De.Z)(cW,"@firebase/analytics","fire-analytics"),(0,De.Z)(cW,"@firebase/analytics-compat","fire-analytics-compat"),(0,De.Z)(cW,"@firebase/app-check","fire-app-check"),(0,De.Z)(cW,"@firebase/app-check-compat","fire-app-check-compat"),(0,De.Z)(cW,"@firebase/auth","fire-auth"),(0,De.Z)(cW,"@firebase/auth-compat","fire-auth-compat"),(0,De.Z)(cW,"@firebase/database","fire-rtdb"),(0,De.Z)(cW,"@firebase/database-compat","fire-rtdb-compat"),(0,De.Z)(cW,"@firebase/functions","fire-fn"),(0,De.Z)(cW,"@firebase/functions-compat","fire-fn-compat"),(0,De.Z)(cW,"@firebase/installations","fire-iid"),(0,De.Z)(cW,"@firebase/installations-compat","fire-iid-compat"),(0,De.Z)(cW,"@firebase/messaging","fire-fcm"),(0,De.Z)(cW,"@firebase/messaging-compat","fire-fcm-compat"),(0,De.Z)(cW,"@firebase/performance","fire-perf"),(0,De.Z)(cW,"@firebase/performance-compat","fire-perf-compat"),(0,De.Z)(cW,"@firebase/remote-config","fire-rc"),(0,De.Z)(cW,"@firebase/remote-config-compat","fire-rc-compat"),(0,De.Z)(cW,"@firebase/storage","fire-gcs"),(0,De.Z)(cW,"@firebase/storage-compat","fire-gcs-compat"),(0,De.Z)(cW,"@firebase/firestore","fire-fst"),(0,De.Z)(cW,"@firebase/firestore-compat","fire-fst-compat"),(0,De.Z)(cW,"fire-js","fire-js"),(0,De.Z)(cW,"firebase","fire-js-all"),cW),kW=new Map,wW=new Map;function SW(e,t){try{e.container.addComponent(t)}catch(n){yW.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function IW(e,t){e.container.addOrOverwriteComponent(t)}function NW(e){var t=e.name;if(wW.has(t))return yW.debug("There were multiple attempts to register component ".concat(t,".")),!1;wW.set(t,e);var n,r=Ut(kW.values());try{for(r.s();!(n=r.n()).done;){SW(n.value,e)}}catch(Rme){r.e(Rme)}finally{r.f()}return!0}function TW(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function CW(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bW;TW(e,t).clearInstance(n)}function EW(){wW.clear()}var _W=(lW={},(0,De.Z)(lW,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,De.Z)(lW,"bad-app-name","Illegal App name: '{$appName}"),(0,De.Z)(lW,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,De.Z)(lW,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,De.Z)(lW,"no-options","Need to provide options, when not being deployed to hosting via source."),(0,De.Z)(lW,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,De.Z)(lW,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,De.Z)(lW,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),(0,De.Z)(lW,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),(0,De.Z)(lW,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),(0,De.Z)(lW,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),lW),AW=new IV("app","Firebase",_W),RW=function(){function e(t,n,r){var a=this;Vt(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new LV("app",(function(){return a}),"PUBLIC"))}return Zt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw AW.create("app-deleted",{appName:this._name})}}]),e}(),OW="9.19.1";function DW(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var a=Object.assign({name:bW,automaticDataCollectionEnabled:!1},t),i=a.name;if("string"!==typeof i||!i)throw AW.create("bad-app-name",{appName:String(i)});if(n||(n=hV()),!n)throw AW.create("no-options");var o=kW.get(i);if(o){if(EV(n,o.options)&&EV(a,o.config))return o;throw AW.create("duplicate-app",{appName:i})}var s,u=new UV(i),c=Ut(wW.values());try{for(c.s();!(s=c.n()).done;){var l=s.value;u.addComponent(l)}}catch(Rme){c.e(Rme)}finally{c.f()}var d=new RW(n,a,u);return kW.set(i,d),d}function PW(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bW,t=kW.get(e);if(!t&&e===bW)return DW();if(!t)throw AW.create("no-app",{appName:e});return t}function FW(){return Array.from(kW.values())}function MW(e){return LW.apply(this,arguments)}function LW(){return LW=me(ge.mark((function e(t){var n;return ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!kW.has(n)){e.next=6;break}return kW.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),LW.apply(this,arguments)}function $W(e,t,n){var r,a=null!==(r=xW[e])&&void 0!==r?r:e;n&&(a+="-".concat(n));var i=a.match(/\s|\//),o=t.match(/\s|\//);if(i||o){var s=['Unable to register library "'.concat(a,'" with version "').concat(t,'":')];return i&&s.push('library name "'.concat(a,'" contains illegal characters (whitespace or "/")')),i&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void yW.warn(s.join(" "))}NW(new LV("".concat(a,"-version"),(function(){return{library:a,version:t}}),"VERSION"))}function jW(e,t){if(null!==e&&"function"!==typeof e)throw AW.create("invalid-log-argument");!function(e,t){var n,r=Ut(VV);try{var a=function(){var r=n.value,a=null;t&&t.level&&(a=WV[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var s=i.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==a&&void 0!==a?a:t.logLevel)&&e({level:BV[n].toLowerCase(),message:s,args:i,type:t.name})}};for(r.s();!(n=r.n()).done;)a()}catch(Rme){r.e(Rme)}finally{r.f()}}(e,t)}function zW(e){var t;t=e,VV.forEach((function(e){e.setLogLevel(t)}))}var BW="firebase-heartbeat-store",UW=null;function VW(){return UW||(UW=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,a=n.upgrade,i=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=sW(s);return a&&s.addEventListener("upgradeneeded",(function(e){a(sW(s.result),e.oldVersion,e.newVersion,sW(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),i&&e.addEventListener("versionchange",(function(){return i()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(BW)}}).catch((function(e){throw AW.create("idb-open",{originalErrorMessage:e.message})}))),UW}function WW(e){return GW.apply(this,arguments)}function GW(){return GW=me(ge.mark((function e(t){var n,r;return ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,VW();case 3:return n=e.sent,e.abrupt("return",n.transaction(BW).objectStore(BW).get(qW(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof SV?yW.warn(e.t0.message):(r=AW.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),yW.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),GW.apply(this,arguments)}function ZW(e,t){return HW.apply(this,arguments)}function HW(){return HW=me(ge.mark((function e(t,n){var r,a,i,o;return ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,VW();case 3:return r=e.sent,a=r.transaction(BW,"readwrite"),i=a.objectStore(BW),e.next=8,i.put(n,qW(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof SV?yW.warn(e.t0.message):(o=AW.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),yW.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),HW.apply(this,arguments)}function qW(e){return"".concat(e.name,"!").concat(e.options.appId)}var KW=function(){function e(t){var n=this;Vt(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new QW(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Zt(e,[{key:"triggerHeartbeat",value:function(){var e=me(ge.mark((function e(){var t,n,r;return ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=XW(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=me(ge.mark((function e(){var t,n,r,a,i;return ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=XW(),n=JW(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,a=n.unsentEntries,i=sV(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(a.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=a,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function XW(){return(new Date).toISOString().substring(0,10)}function JW(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],a=e.slice(),i=Ut(e);try{var o=function(){var e=t.value,i=r.find((function(t){return t.agent===e.agent}));if(i){if(i.dates.push(e.date),eG(r)>n)return i.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),eG(r)>n)return r.pop(),"break";a=a.slice(1)};for(i.s();!(t=i.n()).done;){var s=o();if("break"===s)break}}catch(Rme){i.e(Rme)}finally{i.f()}return{heartbeatsToSend:r,unsentEntries:a}}var YW,QW=function(){function e(t){Vt(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Zt(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=me(ge.mark((function e(){return ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wV()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=function(){a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=function(){n=!1},a.onerror=function(){var e;t((null===(e=a.error)||void 0===e?void 0:e.message)||"")}}catch(i){t(i)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=me(ge.mark((function e(){var t;return ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,WW(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=me(ge.mark((function e(t){var n,r;return ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ZW(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=me(ge.mark((function e(t){var n,r;return ge.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ZW(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat((0,Le.Z)(r.heartbeats),(0,Le.Z)(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function eG(e){return sV(JSON.stringify({version:2,heartbeats:e})).length}YW="",NW(new LV("platform-logger",(function(e){return new vW(e)}),"PRIVATE")),NW(new LV("heartbeat",(function(e){return new KW(e)}),"PRIVATE")),$W(mW,gW,YW),$W(mW,gW,"esm2017"),$W("fire-js","");function tG(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}Object.create;var nG;Object.create;var rG="facebook.com",aG="github.com",iG="google.com",oG="password",sG="twitter.com",uG="EMAIL_SIGNIN",cG="PASSWORD_RESET",lG="RECOVER_EMAIL",dG="REVERT_SECOND_FACTOR_ADDITION",fG="VERIFY_AND_CHANGE_EMAIL",hG="VERIFY_EMAIL";function pG(){return(0,De.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var vG=function(){var e;return e={},(0,De.Z)(e,"admin-restricted-operation","This operation is restricted to administrators only."),(0,De.Z)(e,"argument-error",""),(0,De.Z)(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,De.Z)(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,De.Z)(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,De.Z)(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,De.Z)(e,"cordova-not-ready","Cordova framework is not ready."),(0,De.Z)(e,"cors-unsupported","This browser is not supported."),(0,De.Z)(e,"credential-already-in-use","This credential is already associated with a different user account."),(0,De.Z)(e,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,De.Z)(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,De.Z)(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,De.Z)(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,De.Z)(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,De.Z)(e,"email-already-in-use","The email address is already in use by another account."),(0,De.Z)(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,De.Z)(e,"expired-action-code","The action code has expired."),(0,De.Z)(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,De.Z)(e,"internal-error","An internal AuthError has occurred."),(0,De.Z)(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,De.Z)(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),(0,De.Z)(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,De.Z)(e,"invalid-auth-event","An internal AuthError has occurred."),(0,De.Z)(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,De.Z)(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,De.Z)(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,De.Z)(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,De.Z)(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,De.Z)(e,"invalid-email","The email address is badly formatted."),(0,De.Z)(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,De.Z)(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,De.Z)(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,De.Z)(e,"invalid-credential","The supplied auth credential is malformed or has expired."),(0,De.Z)(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,De.Z)(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,De.Z)(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,De.Z)(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,De.Z)(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,De.Z)(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,De.Z)(e,"wrong-password","The password is invalid or the user does not have a password."),(0,De.Z)(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,De.Z)(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,De.Z)(e,"invalid-provider-id","The specified provider ID is invalid."),(0,De.Z)(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,De.Z)(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,De.Z)(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,De.Z)(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,De.Z)(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),(0,De.Z)(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,De.Z)(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,De.Z)(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,De.Z)(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,De.Z)(e,"missing-continue-uri","A continue URL must be provided in the request."),(0,De.Z)(e,"missing-iframe-start","An internal AuthError has occurred."),(0,De.Z)(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,De.Z)(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,De.Z)(e,"missing-password","A non-empty password must be provided"),(0,De.Z)(e,"missing-multi-factor-info","No second factor identifier is provided."),(0,De.Z)(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,De.Z)(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,De.Z)(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,De.Z)(e,"app-deleted","This instance of FirebaseApp has been deleted."),(0,De.Z)(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,De.Z)(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,De.Z)(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,De.Z)(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,De.Z)(e,"no-auth-event","An internal AuthError has occurred."),(0,De.Z)(e,"no-such-provider","User was not linked to an account with the given provider."),(0,De.Z)(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,De.Z)(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,De.Z)(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,De.Z)(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,De.Z)(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,De.Z)(e,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,De.Z)(e,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,De.Z)(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,De.Z)(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,De.Z)(e,"rejected-credential","The request contains malformed or mismatching credentials."),(0,De.Z)(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,De.Z)(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,De.Z)(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,De.Z)(e,"timeout","The operation has timed out."),(0,De.Z)(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,De.Z)(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,De.Z)(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,De.Z)(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,De.Z)(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,De.Z)(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,De.Z)(e,"unverified-email","The operation requires a verified email."),(0,De.Z)(e,"user-cancelled","The user did not grant your application the permissions it requested."),(0,De.Z)(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,De.Z)(e,"user-disabled","The user account has been disabled by an administrator."),(0,De.Z)(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,De.Z)(e,"user-signed-out",""),(0,De.Z)(e,"weak-password","The password must be 6 characters long or more."),(0,De.Z)(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,De.Z)(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},mG=pG,gG=new IV("auth","Firebase",pG()),yG=new qV("@firebase/auth");function bG(e){if(yG.logLevel<=BV.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];yG.error.apply(yG,["Auth (".concat(OW,"): ").concat(e)].concat(n))}}function xG(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw IG.apply(void 0,[e].concat(n))}function kG(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return IG.apply(void 0,[e].concat(n))}function wG(e,t,n){var r=Object.assign(Object.assign({},mG()),(0,De.Z)({},t,n));return new IV("auth","Firebase",r).create(t,{appName:e.name})}function SG(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&xG(e,"argument-error"),wG(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function IG(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var a,i=n[0],o=(0,Le.Z)(n.slice(1));return o[0]&&(o[0].appName=e.name),(a=e._errorFactory).create.apply(a,[i].concat((0,Le.Z)(o)))}return gG.create.apply(gG,[e].concat(n))}function NG(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];throw IG.apply(void 0,[t].concat(r))}}function TG(e){var t="INTERNAL ASSERTION FAILED: "+e;throw bG(t),new Error(t)}function CG(e,t){e||TG(t)}var EG=new Map;function _G(e){CG(e instanceof Function,"Expected a class definition");var t=EG.get(e);return t?(CG(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,EG.set(e,t),t)}function AG(e,t){var n=TW(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(EV(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;xG(r,"already-initialized")}return n.initialize({options:t})}function RG(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function OG(){return"http:"===DG()||"https:"===DG()}function DG(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var PG=function(){function e(t,n){Vt(this,e),this.shortDelay=t,this.longDelay=n,CG(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gV())||xV()}return Zt(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(OG()||bV()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function FG(e,t){CG(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var MG=function(){function e(){Vt(this,e)}return Zt(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void TG("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void TG("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void TG("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),LG=(nG={},(0,De.Z)(nG,"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,De.Z)(nG,"MISSING_CUSTOM_TOKEN","internal-error"),(0,De.Z)(nG,"INVALID_IDENTIFIER","invalid-email"),(0,De.Z)(nG,"MISSING_CONTINUE_URI","internal-error"),(0,De.Z)(nG,"INVALID_PASSWORD","wrong-password"),(0,De.Z)(nG,"MISSING_PASSWORD","missing-password"),(0,De.Z)(nG,"EMAIL_EXISTS","email-already-in-use"),(0,De.Z)(nG,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,De.Z)(nG,"INVALID_IDP_RESPONSE","invalid-credential"),(0,De.Z)(nG,"INVALID_PENDING_TOKEN","invalid-credential"),(0,De.Z)(nG,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,De.Z)(nG,"MISSING_REQ_TYPE","internal-error"),(0,De.Z)(nG,"EMAIL_NOT_FOUND","user-not-found"),(0,De.Z)(nG,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,De.Z)(nG,"EXPIRED_OOB_CODE","expired-action-code"),(0,De.Z)(nG,"INVALID_OOB_CODE","invalid-action-code"),(0,De.Z)(nG,"MISSING_OOB_CODE","internal-error"),(0,De.Z)(nG,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,De.Z)(nG,"INVALID_ID_TOKEN","invalid-user-token"),(0,De.Z)(nG,"TOKEN_EXPIRED","user-token-expired"),(0,De.Z)(nG,"USER_NOT_FOUND","user-token-expired"),(0,De.Z)(nG,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,De.Z)(nG,"INVALID_CODE","invalid-verification-code"),(0,De.Z)(nG,"INVALID_SESSION_INFO","invalid-verification-id"),(0,De.Z)(nG,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,De.Z)(nG,"MISSING_SESSION_INFO","missing-verification-id"),(0,De.Z)(nG,"SESSION_EXPIRED","code-expired"),(0,De.Z)(nG,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,De.Z)(nG,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,De.Z)(nG,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,De.Z)(nG,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,De.Z)(nG,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,De.Z)(nG,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,De.Z)(nG,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,De.Z)(nG,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,De.Z)(nG,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,De.Z)(nG,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,De.Z)(nG,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),nG),$G=new PG(3e4,6e4);function jG(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function zG(e,t,n,r){return BG.apply(this,arguments)}function BG(){return BG=me(ye().mark((function e(t,n,r,a){var i,o=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",UG(t,i,me(ye().mark((function e(){var i,o,s,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},o={},a&&("GET"===n?o=a:i={body:JSON.stringify(a)}),s=AV(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",MG.fetch()(ZG(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},i)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),BG.apply(this,arguments)}function UG(e,t,n){return VG.apply(this,arguments)}function VG(){return VG=me(ye().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,h;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,a=Object.assign(Object.assign({},LG),n),e.prev=2,i=new HG(t),e.next=6,Promise.race([r(),i.promise]);case 6:return o=e.sent,i.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw qG(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=(0,C.Z)(c,2),d=l[0],f=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw qG(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==d){e.next=27;break}throw qG(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==d){e.next=29;break}throw qG(t,"user-disabled",s);case 29:if(h=a[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!f){e.next=34;break}throw wG(t,h,f);case 34:xG(t,h);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof SV)){e.next=41;break}throw e.t0;case 41:xG(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),VG.apply(this,arguments)}function WG(e,t,n,r){return GG.apply(this,arguments)}function GG(){return GG=me(ye().mark((function e(t,n,r,a){var i,o,s=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,zG(t,n,r,a,i);case 3:return"mfaPendingCredential"in(o=e.sent)&&xG(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),GG.apply(this,arguments)}function ZG(e,t,n,r){var a="".concat(t).concat(n,"?").concat(r);return e.config.emulator?FG(e.config,a):"".concat(e.config.apiScheme,"://").concat(a)}var HG=function(){function e(t){var n=this;Vt(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(kG(n.auth,"network-request-failed"))}),$G.get())}))}return Zt(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function qG(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var a=kG(e,t,r);return a.customData._tokenResponse=n,a}function KG(e,t){return XG.apply(this,arguments)}function XG(){return XG=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zG(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),XG.apply(this,arguments)}function JG(e,t){return YG.apply(this,arguments)}function YG(){return YG=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zG(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),YG.apply(this,arguments)}function QG(e,t){return eZ.apply(this,arguments)}function eZ(){return eZ=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zG(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),eZ.apply(this,arguments)}function tZ(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function nZ(){return nZ=me(ye().mark((function e(t){var n,r,a,i,o,s,u=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=MV(t),e.next=4,r.getIdToken(n);case 4:return a=e.sent,NG((i=aZ(a))&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error"),o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:i,token:a,authTime:tZ(rZ(i.auth_time)),issuedAtTime:tZ(rZ(i.iat)),expirationTime:tZ(rZ(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),nZ.apply(this,arguments)}function rZ(e){return 1e3*Number(e)}function aZ(e){var t=e.split("."),n=(0,C.Z)(t,3),r=n[0],a=n[1],i=n[2];if(void 0===r||void 0===a||void 0===i)return bG("JWT malformed, contained fewer than 3 sections"),null;try{var o=uV(a);return o?JSON.parse(o):(bG("Failed to decode base64 JWT payload"),null)}catch(s){return bG("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function iZ(e,t){return oZ.apply(this,arguments)}function oZ(){return oZ=me(ye().mark((function e(t,n){var r=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof SV&&sZ(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),oZ.apply(this,arguments)}function sZ(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var uZ=function(){function e(t){Vt(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Zt(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(me(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),cZ=function(){function e(t,n){Vt(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Zt(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=tZ(this.lastLoginAt),this.creationTime=tZ(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function lZ(e){return dZ.apply(this,arguments)}function dZ(){return dZ=me(ye().mark((function e(t){var n,r,a,i,o,s,u,c,l,d,f;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,e.next=6,iZ(t,QG(r,{idToken:a}));case 6:NG(null===(i=e.sent)||void 0===i?void 0:i.users.length,r,"internal-error"),o=i.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?pZ(o.providerUserInfo):[],u=hZ(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),d=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new cZ(o.createdAt,o.lastLoginAt),isAnonymous:d},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),dZ.apply(this,arguments)}function fZ(){return(fZ=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=MV(t),e.next=3,lZ(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hZ(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat((0,Le.Z)(n),(0,Le.Z)(t))}function pZ(e){return e.map((function(e){var t=e.providerId,n=tG(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function vZ(e,t){return mZ.apply(this,arguments)}function mZ(){return mZ=me(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UG(t,{},me(ye().mark((function e(){var r,a,i,o,s,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=AV({grant_type:"refresh_token",refresh_token:n}).slice(1),a=t.config,i=a.tokenApiHost,o=a.apiKey,s=ZG(t,i,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",MG.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),mZ.apply(this,arguments)}var gZ=function(){function e(){Vt(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Zt(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){NG(e.idToken,"internal-error"),NG("undefined"!==typeof e.idToken,"internal-error"),NG("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=aZ(e);return NG(t,"internal-error"),NG("undefined"!==typeof t.exp,"internal-error"),NG("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=me(ye().mark((function e(t){var n,r=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],NG(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=me(ye().mark((function e(t,n){var r,a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vZ(t,n);case 2:r=e.sent,a=r.accessToken,i=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(a,i,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return TG("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,a=n.accessToken,i=n.expirationTime,o=new e;return r&&(NG("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),a&&(NG("string"===typeof a,"internal-error",{appName:t}),o.accessToken=a),i&&(NG("number"===typeof i,"internal-error",{appName:t}),o.expirationTime=i),o}}]),e}();function yZ(e,t){NG("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var bZ=function(){function e(t){Vt(this,e);var n=t.uid,r=t.auth,a=t.stsTokenManager,i=tG(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uZ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?(0,Le.Z)(i.providerData):[],this.metadata=new cZ(i.createdAt||void 0,i.lastLoginAt||void 0)}return Zt(e,[{key:"getIdToken",value:function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iZ(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(NG(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return nZ.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return fZ.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(NG(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){NG(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=me(ye().mark((function e(t){var n,r,a=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]&&a[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,lZ(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,iZ(this,KG(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,a,i,o,s,u,c,l,d=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(a=n.email)&&void 0!==a?a:void 0,h=null!==(i=n.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,g=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,b=n.uid,x=n.emailVerified,k=n.isAnonymous,w=n.providerData,S=n.stsTokenManager;NG(b&&S,t,"internal-error");var I=gZ.fromJSON(this.name,S);NG("string"===typeof b,t,"internal-error"),yZ(d,t.name),yZ(f,t.name),NG("boolean"===typeof x,t,"internal-error"),NG("boolean"===typeof k,t,"internal-error"),yZ(h,t.name),yZ(p,t.name),yZ(v,t.name),yZ(m,t.name),yZ(g,t.name),yZ(y,t.name);var N=new e({uid:b,auth:t,email:f,emailVerified:x,displayName:d,isAnonymous:k,photoURL:p,phoneNumber:h,tenantId:v,stsTokenManager:I,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(N.providerData=w.map((function(e){return Object.assign({},e)}))),m&&(N._redirectEventId=m),N}},{key:"_fromIdTokenResponse",value:function(){var t=me(ye().mark((function t(n,r){var a,i,o,s=arguments;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>2&&void 0!==s[2]&&s[2],(i=new gZ).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:i,isAnonymous:a}),t.next=6,lZ(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),xZ=function(){function e(){Vt(this,e),this.type="NONE",this.storage={}}return Zt(e,[{key:"_isAvailable",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();xZ.type="NONE";var kZ=xZ;function wZ(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var SZ=function(){function e(t,n,r){Vt(this,e),this.persistence=t,this.auth=n,this.userKey=r;var a=this.auth,i=a.config,o=a.name;this.fullUserKey=wZ(this.userKey,i.apiKey,o),this.fullPersistenceKey=wZ("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Zt(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?bZ._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=me(ye().mark((function t(n,r){var a,i,o,s,u,c,l,d,f,h,p,v=arguments;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(_G(kZ),n,a));case 3:return t.next=5,Promise.all(r.map(function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:i=t.sent.filter((function(e){return e})),o=i[0]||_G(kZ),s=wZ(a,n.config.apiKey,n.name),u=null,c=Ut(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return d=l.value,t.prev=14,t.next=17,d._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return h=bZ._fromJSON(n,f),d!==o&&(u=h),o=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=i.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,a));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,a));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function IZ(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(EZ(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(NZ(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(AZ(t))return"Blackberry";if(RZ(t))return"Webos";if(TZ(t))return"Safari";if((t.includes("chrome/")||CZ(t))&&!t.includes("edge/"))return"Chrome";if(_Z(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function NZ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gV();return/firefox\//i.test(e)}function TZ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gV(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function CZ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gV();return/crios\//i.test(e)}function EZ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gV();return/iemobile/i.test(e)}function _Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gV();return/android/i.test(e)}function AZ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gV();return/blackberry/i.test(e)}function RZ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gV();return/webos/i.test(e)}function OZ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gV();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function DZ(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gV();return OZ(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function PZ(){return kV()&&10===document.documentMode}function FZ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gV();return OZ(e)||_Z(e)||RZ(e)||AZ(e)||/windows phone/i.test(e)||EZ(e)}function MZ(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=IZ(gV());break;case"Worker":t="".concat(IZ(gV()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(OW,"/").concat(r)}var LZ=function(){function e(t){Vt(this,e),this.auth=t,this.queue=[]}return Zt(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(a){r(a)}}))};r.onAbort=t,this.queue.push(r);var a=this.queue.length-1;return function(){n.queue[a]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=me(ye().mark((function e(t){var n,r,a,i,o,s,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=Ut(this.queue),e.prev=5,r.s();case 7:if((a=r.n()).done){e.next=14;break}return i=a.value,e.next=11,i(t);case 11:i.onAbort&&n.push(i.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=Ut(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(c){}}}catch(Rme){o.e(Rme)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),$Z=function(){function e(t,n,r){Vt(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zZ(this),this.idTokenSubscription=new zZ(this),this.beforeStateQueue=new LZ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gG,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return Zt(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=_G(t)),this._initializationPromise=this.queue(me(ye().mark((function r(){var a,i;return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,SZ.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(a=n._popupRedirectResolver)||void 0===a?void 0:a._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(i=n.currentUser)||void 0===i?void 0:i.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=me(ye().mark((function e(t){var n,r,a,i,o,s,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,a=r,i=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===a||void 0===a?void 0:a._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(a=u.user,i=!0);case 14:if(a){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(a._redirectEventId){e.next=32;break}if(!i){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(a);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),a=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!a){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(a));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return NG(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==a._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(a));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(a));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lZ(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?MV(t):null)&&NG(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=me(ye().mark((function e(t){var n,r=this,a=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]&&a[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&NG(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(me(ye().mark((function n(){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(_G(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new IV("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=me(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return NG(n=t&&_G(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,SZ.create(this,[_G(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=me(ye().mark((function e(t){var n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var a=this;if(this._deleted)return function(){};var i="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return NG(o,this,"internal-error"),o.then((function(){return i(a.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return NG(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MZ(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=me(ye().mark((function e(){var t,n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,De.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function jZ(e){return MV(e)}var zZ=function(){function e(t){var n=this;Vt(this,e),this.auth=t,this.observer=null,this.addObserver=DV((function(e){return n.observer=e}))}return Zt(e,[{key:"next",get:function(){return NG(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function BZ(e,t,n){var r=jZ(e);NG(r._canInitEmulator,r,"emulator-config-failed"),NG(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var a=!!(null===n||void 0===n?void 0:n.disableWarnings),i=UZ(t),o=function(e){var t=UZ(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){var i=a[1];return{host:i,port:VZ(r.substr(i.length+1))}}var o=r.split(":"),s=(0,C.Z)(o,2);return{host:s[0],port:VZ(s[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(i,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function UZ(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function VZ(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var WZ=function(){function e(t,n){Vt(this,e),this.providerId=t,this.signInMethod=n}return Zt(e,[{key:"toJSON",value:function(){return TG("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return TG("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return TG("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return TG("not implemented")}}]),e}();function GZ(e,t){return ZZ.apply(this,arguments)}function ZZ(){return ZZ=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zG(t,"POST","/v1/accounts:resetPassword",jG(t,n)));case 1:case"end":return e.stop()}}),e)}))),ZZ.apply(this,arguments)}function HZ(e,t){return qZ.apply(this,arguments)}function qZ(){return qZ=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zG(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),qZ.apply(this,arguments)}function KZ(e,t){return XZ.apply(this,arguments)}function XZ(){return XZ=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zG(t,"POST","/v1/accounts:update",jG(t,n)));case 1:case"end":return e.stop()}}),e)}))),XZ.apply(this,arguments)}function JZ(e,t){return YZ.apply(this,arguments)}function YZ(){return YZ=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WG(t,"POST","/v1/accounts:signInWithPassword",jG(t,n)));case 1:case"end":return e.stop()}}),e)}))),YZ.apply(this,arguments)}function QZ(e,t){return eH.apply(this,arguments)}function eH(){return eH=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zG(t,"POST","/v1/accounts:sendOobCode",jG(t,n)));case 1:case"end":return e.stop()}}),e)}))),eH.apply(this,arguments)}function tH(e,t){return nH.apply(this,arguments)}function nH(){return nH=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",QZ(t,n));case 1:case"end":return e.stop()}}),e)}))),nH.apply(this,arguments)}function rH(e,t){return aH.apply(this,arguments)}function aH(){return aH=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",QZ(t,n));case 1:case"end":return e.stop()}}),e)}))),aH.apply(this,arguments)}function iH(e,t){return oH.apply(this,arguments)}function oH(){return oH=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",QZ(t,n));case 1:case"end":return e.stop()}}),e)}))),oH.apply(this,arguments)}function sH(e,t){return uH.apply(this,arguments)}function uH(){return uH=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",QZ(t,n));case 1:case"end":return e.stop()}}),e)}))),uH.apply(this,arguments)}function cH(e,t){return lH.apply(this,arguments)}function lH(){return lH=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WG(t,"POST","/v1/accounts:signInWithEmailLink",jG(t,n)));case 1:case"end":return e.stop()}}),e)}))),lH.apply(this,arguments)}function dH(e,t){return fH.apply(this,arguments)}function fH(){return fH=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WG(t,"POST","/v1/accounts:signInWithEmailLink",jG(t,n)));case 1:case"end":return e.stop()}}),e)}))),fH.apply(this,arguments)}var hH=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Vt(this,n),(i=t.call(this,"password",a))._email=e,i._password=r,i._tenantId=o,i}return Zt(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",JZ(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",cH(t,{email:this._email,oobCode:this._password}));case 5:xG(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",HZ(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",dH(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:xG(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(WZ);function pH(e,t){return vH.apply(this,arguments)}function vH(){return vH=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WG(t,"POST","/v1/accounts:signInWithIdp",jG(t,n)));case 1:case"end":return e.stop()}}),e)}))),vH.apply(this,arguments)}var mH=function(e){Mo(n,e);var t=Bo(n);function n(){var e;return Vt(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Zt(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return pH(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,pH(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,pH(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=AV(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):xG("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,a=t.signInMethod,i=tG(t,["providerId","signInMethod"]);if(!r||!a)return null;var o=new n(r,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}}]),n}(WZ);function gH(e,t){return yH.apply(this,arguments)}function yH(){return yH=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zG(t,"POST","/v1/accounts:sendVerificationCode",jG(t,n)));case 1:case"end":return e.stop()}}),e)}))),yH.apply(this,arguments)}function bH(){return bH=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WG(t,"POST","/v1/accounts:signInWithPhoneNumber",jG(t,n)));case 1:case"end":return e.stop()}}),e)}))),bH.apply(this,arguments)}function xH(){return xH=me(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,WG(t,"POST","/v1/accounts:signInWithPhoneNumber",jG(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw qG(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),xH.apply(this,arguments)}var kH=(0,De.Z)({},"USER_NOT_FOUND","user-not-found");function wH(){return wH=me(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",WG(t,"POST","/v1/accounts:signInWithPhoneNumber",jG(t,r),kH));case 2:case"end":return e.stop()}}),e)}))),wH.apply(this,arguments)}var SH=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Zt(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return bH.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return xH.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return wH.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,a=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:a}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,a=t.verificationCode,i=t.phoneNumber,o=t.temporaryProof;return a||r||i||o?new n({verificationId:r,verificationCode:a,phoneNumber:i,temporaryProof:o}):null}}]),n}(WZ);var IH=function(){function e(t){var n,r,a,i,o,s;Vt(this,e);var u=RV(OV(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(a=u.mode)&&void 0!==a?a:null);NG(c&&l&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=l,this.continueUrl=null!==(i=u.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return Zt(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=RV(OV(e)).link,n=t?RV(OV(t)).deep_link_id:null,r=RV(OV(e)).deep_link_id;return(r?RV(OV(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Kte){return null}}}]),e}();var NH=function(){function e(){Vt(this,e),this.providerId=e.PROVIDER_ID}return Zt(e,null,[{key:"credential",value:function(e,t){return hH._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=IH.parseLink(t);return NG(n,"argument-error"),hH._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();NH.PROVIDER_ID="password",NH.EMAIL_PASSWORD_SIGN_IN_METHOD="password",NH.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var TH=function(){function e(t){Vt(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Zt(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),CH=function(e){Mo(n,e);var t=Bo(n);function n(){var e;return Vt(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Zt(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return(0,Le.Z)(this.scopes)}}]),n}(TH),EH=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return NG(e.idToken||e.accessToken,"argument-error"),mH._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return NG("providerId"in t&&"signInMethod"in t,"argument-error"),mH._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,a=t.oauthAccessToken,i=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!a&&!i&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:a,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(CH),_H=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.call(this,"facebook.com")}return Zt(n,null,[{key:"credential",value:function(e){return mH._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Kte){return null}}}]),n}(CH);_H.FACEBOOK_SIGN_IN_METHOD="facebook.com",_H.PROVIDER_ID="facebook.com";var AH=function(e){Mo(n,e);var t=Bo(n);function n(){var e;return Vt(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Zt(n,null,[{key:"credential",value:function(e,t){return mH._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,a=t.oauthAccessToken;if(!r&&!a)return null;try{return n.credential(r,a)}catch(Kte){return null}}}]),n}(CH);AH.GOOGLE_SIGN_IN_METHOD="google.com",AH.PROVIDER_ID="google.com";var RH=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.call(this,"github.com")}return Zt(n,null,[{key:"credential",value:function(e){return mH._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Kte){return null}}}]),n}(CH);RH.GITHUB_SIGN_IN_METHOD="github.com",RH.PROVIDER_ID="github.com";var OH=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this,e,e)).pendingToken=r,a}return Zt(n,[{key:"_getIdTokenResponse",value:function(e){return pH(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,pH(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,pH(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,a=t.signInMethod,i=t.pendingToken;return r&&a&&i&&r===a?new n(r,i):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(WZ),DH=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),NG(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Zt(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=OH.fromJSON(e);return NG(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return OH._create(r,n)}catch(a){return null}}}]),n}(TH),PH=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.call(this,"twitter.com")}return Zt(n,null,[{key:"credential",value:function(e,t){return mH._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,a=t.oauthTokenSecret;if(!r||!a)return null;try{return n.credential(r,a)}catch(Kte){return null}}}]),n}(CH);function FH(e,t){return MH.apply(this,arguments)}function MH(){return MH=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WG(t,"POST","/v1/accounts:signUp",jG(t,n)));case 1:case"end":return e.stop()}}),e)}))),MH.apply(this,arguments)}PH.TWITTER_SIGN_IN_METHOD="twitter.com",PH.PROVIDER_ID="twitter.com";var LH=function(){function e(t){Vt(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Zt(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=me(ye().mark((function t(n,r,a){var i,o,s,u,c=arguments;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.length>3&&void 0!==c[3]&&c[3],t.next=3,bZ._fromIdTokenResponse(n,a,i);case 3:return o=t.sent,s=$H(a),u=new e({user:o,providerId:s,_tokenResponse:a,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=me(ye().mark((function t(n,r,a){var i;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(a,!0);case 2:return i=$H(a),t.abrupt("return",new e({user:n,providerId:i,_tokenResponse:a,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function $H(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function jH(){return jH=me(ye().mark((function e(t){var n,r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jZ(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new LH({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,FH(r,{returnSecureToken:!0});case 7:return a=e.sent,e.next=10,LH._fromIdTokenResponse(r,"signIn",a,!0);case 10:return i=e.sent,e.next=13,r._updateCurrentUser(i.user);case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)}))),jH.apply(this,arguments)}var zH=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a,i){var o,s;return Vt(this,n),(o=t.call(this,r.code,r.message)).operationType=a,o.user=i,Object.setPrototypeOf(je(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:a},o}return Zt(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,a){return new n(e,t,r,a)}}]),n}(SV);function BH(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw zH._fromErrorAndOperation(e,n,t,r);throw n}))}function UH(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function VH(e,t){return WH.apply(this,arguments)}function WH(){return WH=me(ye().mark((function e(t,n){var r,a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=MV(t),e.next=3,HH(!0,r,n);case 3:return e.t0=JG,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return a=e.sent,i=a.providerUserInfo,o=UH(i||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),WH.apply(this,arguments)}function GH(e,t){return ZH.apply(this,arguments)}function ZH(){return ZH=me(ye().mark((function e(t,n){var r,a,i=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]&&i[2],e.t0=iZ,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return a=e.sent,e.abrupt("return",LH._forOperation(t,"link",a));case 14:case"end":return e.stop()}}),e)}))),ZH.apply(this,arguments)}function HH(e,t,n){return qH.apply(this,arguments)}function qH(){return(qH=me(ye().mark((function e(t,n,r){var a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lZ(n);case 2:a=UH(n.providerData),i=!1===t?"provider-already-linked":"no-such-provider",NG(a.has(r)===t,n.auth,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function KH(e,t){return XH.apply(this,arguments)}function XH(){return XH=me(ye().mark((function e(t,n){var r,a,i,o,s,u,c=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],a=t.auth,i="reauthenticate",e.prev=3,e.next=6,iZ(t,BH(a,i,n,t),r);case 6:return NG((o=e.sent).idToken,a,"internal-error"),NG(s=aZ(o.idToken),a,"internal-error"),u=s.sub,NG(t.uid===u,a,"user-mismatch"),e.abrupt("return",LH._forOperation(t,i,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&xG(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),XH.apply(this,arguments)}function JH(e,t){return YH.apply(this,arguments)}function YH(){return YH=me(ye().mark((function e(t,n){var r,a,i,o,s=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],a="signIn",e.next=4,BH(t,a,n);case 4:return i=e.sent,e.next=7,LH._fromIdTokenResponse(t,a,i);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),YH.apply(this,arguments)}function QH(e,t){return eq.apply(this,arguments)}function eq(){return eq=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JH(jZ(t),n));case 1:case"end":return e.stop()}}),e)}))),eq.apply(this,arguments)}function tq(e,t){return nq.apply(this,arguments)}function nq(){return(nq=me(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=MV(t),e.next=3,HH(!1,r,n.providerId);case 3:return e.abrupt("return",GH(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rq(e,t){return aq.apply(this,arguments)}function aq(){return(aq=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",KH(MV(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iq(e,t){return oq.apply(this,arguments)}function oq(){return oq=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WG(t,"POST","/v1/accounts:signInWithCustomToken",jG(t,n)));case 1:case"end":return e.stop()}}),e)}))),oq.apply(this,arguments)}function sq(){return sq=me(ye().mark((function e(t,n){var r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=jZ(t),e.next=3,iq(r,{token:n,returnSecureToken:!0});case 3:return a=e.sent,e.next=6,LH._fromIdTokenResponse(r,"signIn",a);case 6:return i=e.sent,e.next=9,r._updateCurrentUser(i.user);case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)}))),sq.apply(this,arguments)}var uq=function(){function e(t,n){Vt(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Zt(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?cq._fromServerResponse(e,t):"totpInfo"in t?lq._fromServerResponse(e,t):xG(e,"internal-error")}}]),e}(),cq=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Zt(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(uq),lq=function(e){Mo(n,e);var t=Bo(n);function n(e){return Vt(this,n),t.call(this,"totp",e)}return Zt(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(uq);function dq(e,t,n){var r;NG((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),NG("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(NG(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(NG(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function fq(){return fq=me(ye().mark((function e(t,n,r){var a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=MV(t),i={requestType:"PASSWORD_RESET",email:n},r&&dq(a,i,r),e.next=5,rH(a,i);case 5:case"end":return e.stop()}}),e)}))),fq.apply(this,arguments)}function hq(){return hq=me(ye().mark((function e(t,n,r){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GZ(MV(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),hq.apply(this,arguments)}function pq(){return pq=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,KZ(MV(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),pq.apply(this,arguments)}function vq(e,t){return mq.apply(this,arguments)}function mq(){return mq=me(ye().mark((function e(t,n){var r,a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=MV(t),e.next=3,GZ(r,{oobCode:n});case 3:a=e.sent,NG(i=a.requestType,r,"internal-error"),e.t0=i,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return NG(a.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:NG(a.mfaInfo,r,"internal-error");case 13:NG(a.email,r,"internal-error");case 14:return o=null,a.mfaInfo&&(o=uq._fromServerResponse(jZ(r),a.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===a.requestType?a.newEmail:a.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===a.requestType?a.email:a.newEmail)||null,multiFactorInfo:o},operation:i});case 17:case"end":return e.stop()}}),e)}))),mq.apply(this,arguments)}function gq(){return gq=me(ye().mark((function e(t,n){var r,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vq(MV(t),n);case 2:return r=e.sent,a=r.data,e.abrupt("return",a.email);case 5:case"end":return e.stop()}}),e)}))),gq.apply(this,arguments)}function yq(e,t,n){return bq.apply(this,arguments)}function bq(){return bq=me(ye().mark((function e(t,n,r){var a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=jZ(t),e.next=3,FH(a,{returnSecureToken:!0,email:n,password:r});case 3:return i=e.sent,e.next=6,LH._fromIdTokenResponse(a,"signIn",i);case 6:return o=e.sent,e.next=9,a._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),bq.apply(this,arguments)}function xq(e,t,n){return QH(MV(e),NH.credential(t,n))}function kq(){return kq=me(ye().mark((function e(t,n,r){var a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=MV(t),i={requestType:"EMAIL_SIGNIN",email:n},NG(r.handleCodeInApp,a,"argument-error"),r&&dq(a,i,r),e.next=6,iH(a,i);case 6:case"end":return e.stop()}}),e)}))),kq.apply(this,arguments)}function wq(){return wq=me(ye().mark((function e(t,n,r){var a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=MV(t),NG((i=NH.credentialWithLink(n,r||RG()))._tenantId===(a.tenantId||null),a,"tenant-id-mismatch"),e.abrupt("return",QH(a,i));case 4:case"end":return e.stop()}}),e)}))),wq.apply(this,arguments)}function Sq(e,t){return Iq.apply(this,arguments)}function Iq(){return Iq=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zG(t,"POST","/v1/accounts:createAuthUri",jG(t,n)));case 1:case"end":return e.stop()}}),e)}))),Iq.apply(this,arguments)}function Nq(){return Nq=me(ye().mark((function e(t,n){var r,a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=OG()?RG():"http://localhost",a={identifier:n,continueUri:r},e.next=4,Sq(MV(t),a);case 4:return i=e.sent,o=i.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Nq.apply(this,arguments)}function Tq(){return(Tq=me(ye().mark((function e(t,n){var r,a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=MV(t),e.next=3,t.getIdToken();case 3:return a=e.sent,i={requestType:"VERIFY_EMAIL",idToken:a},n&&dq(r.auth,i,n),e.next=8,tH(r.auth,i);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cq(){return(Cq=me(ye().mark((function e(t,n,r){var a,i,o,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=MV(t),e.next=3,t.getIdToken();case 3:return i=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:i,newEmail:n},r&&dq(a.auth,o,r),e.next=8,sH(a.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eq(e,t){return _q.apply(this,arguments)}function _q(){return _q=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zG(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),_q.apply(this,arguments)}function Aq(){return(Aq=me(ye().mark((function e(t,n){var r,a,i,o,s,u,c;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,a=n.photoURL,void 0!==r||void 0!==a){e.next=3;break}return e.abrupt("return");case 3:return i=MV(t),e.next=6,i.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:a,returnSecureToken:!0},e.next=10,iZ(i,Eq(i.auth,s));case 10:return u=e.sent,i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null,(c=i.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=i.displayName,c.photoURL=i.photoURL),e.next=17,i._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rq(e,t,n){return Oq.apply(this,arguments)}function Oq(){return Oq=me(ye().mark((function e(t,n,r){var a,i,o,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,o={idToken:i,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,iZ(t,HZ(a,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),Oq.apply(this,arguments)}var Dq=Zt((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Vt(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Pq=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a,i){var o;return Vt(this,n),(o=t.call(this,e,r,a)).username=i,o}return Zt(n)}(Dq),Fq=function(e){Mo(n,e);var t=Bo(n);function n(e,r){return Vt(this,n),t.call(this,e,"facebook.com",r)}return Zt(n)}(Dq),Mq=function(e){Mo(n,e);var t=Bo(n);function n(e,r){return Vt(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Zt(n)}(Pq),Lq=function(e){Mo(n,e);var t=Bo(n);function n(e,r){return Vt(this,n),t.call(this,e,"google.com",r)}return Zt(n)}(Dq),$q=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a){return Vt(this,n),t.call(this,e,"twitter.com",r,a)}return Zt(n)}(Pq);function jq(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,a=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},i=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=aZ(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Dq(i,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Fq(i,a);case"github.com":return new Mq(i,a);case"google.com":return new Lq(i,a);case"twitter.com":return new $q(i,a,e.screenName||null);case"custom":case"anonymous":return new Dq(i,null);default:return new Dq(i,r,a)}}(n)}function zq(e,t,n,r){return MV(e).onIdTokenChanged(t,n,r)}function Bq(e,t,n){return MV(e).beforeAuthStateChanged(t,n)}var Uq=function(){function e(t,n,r){Vt(this,e),this.type=t,this.credential=n,this.auth=r}return Zt(e,[{key:"toJSON",value:function(){var e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:(0,De.Z)({},e,this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Vq=function(){function e(t,n,r){Vt(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Zt(e,[{key:"resolveSignIn",value:function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=jZ(t),a=n.customData._serverResponse,i=(a.mfaInfo||[]).map((function(e){return uq._fromServerResponse(r,e)}));NG(a.mfaPendingCredential,r,"internal-error");var o=Uq._fromMfaPendingCredential(a.mfaPendingCredential);return new e(o,i,function(){var e=me(ye().mark((function e(t){var i,s,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:i=e.sent,delete a.mfaInfo,delete a.mfaPendingCredential,s=Object.assign(Object.assign({},a),{idToken:i.idToken,refreshToken:i.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,LH._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return NG(n.user,r,"internal-error"),e.abrupt("return",LH._forOperation(n.user,n.operationType,s));case 17:xG(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Wq(e,t){return zG(e,"POST","/v2/accounts/mfaEnrollment:start",jG(e,t))}function Gq(e,t){return zG(e,"POST","/v2/accounts/mfaEnrollment:start",jG(e,t))}function Zq(e,t){return zG(e,"POST","/v2/accounts/mfaEnrollment:finalize",jG(e,t))}function Hq(e,t){return zG(e,"POST","/v2/accounts/mfaEnrollment:withdraw",jG(e,t))}var qq=function(){function e(t){var n=this;Vt(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return uq._fromServerResponse(t.auth,e)})))}))}return Zt(e,[{key:"getSession",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uq,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=me(ye().mark((function e(t,n){var r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return a=e.sent,e.next=6,iZ(this.user,r._process(this.user.auth,a,n));case 6:return i=e.sent,e.next=9,this.user._updateTokensIfNecessary(i);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=me(ye().mark((function e(t){var n,r,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,iZ(this.user,Hq(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(a);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Kq=new WeakMap;var Xq="__sak",Jq=function(){function e(t,n){Vt(this,e),this.storageRetriever=t,this.type=n}return Zt(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Xq,"1"),this.storage.removeItem(Xq),Promise.resolve(!0)):Promise.resolve(!1)}catch(Kte){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Yq=function(e){Mo(n,e);var t=Bo(n);function n(){var e;return Vt(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=gV();return TZ(e)||OZ(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=FZ(),e._shouldAllowMigration=!0,e}return Zt(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],a=this.storage.getItem(r),i=this.localCache[r];a!==i&&e(r,i,a)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var a=this.storage.getItem(r);if(e.newValue!==a)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var i=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);PZ()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,a=Array.from(n);r<a.length;r++){(0,a[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=me(ye().mark((function e(t,r){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jx(Lo(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=me(ye().mark((function e(t){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jx(Lo(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jx(Lo(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Jq);Yq.type="LOCAL";var Qq=Yq,eK=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Zt(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Jq);eK.type="SESSION";var tK=eK;function nK(e){return Promise.all(e.map(function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var rK=function(){function e(t){Vt(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Zt(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=me(ye().mark((function e(t){var n,r,a,i,o,s,u,c;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,a=r.eventId,i=r.eventType,o=r.data,null===(s=this.handlersMap[i])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:a,eventType:i}),u=Array.from(s).map(function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,nK(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:a,eventType:i,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function aK(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}rK.receivers=[];var iK=function(){function e(t){Vt(this,e),this.target=t,this.handlers=new Set}return Zt(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=me(ye().mark((function e(t,n){var r,a,i,o,s=this,u=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,a="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=aK("",20);a.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:a,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),i=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),e(n.data.response);break;default:clearTimeout(l),clearTimeout(i),u(new Error("invalid_response"))}}},s.handlers.add(o),a.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[a.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function oK(){return window}function sK(){return"undefined"!==typeof oK().WorkerGlobalScope&&"function"===typeof oK().importScripts}function uK(){return cK.apply(this,arguments)}function cK(){return(cK=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function lK(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var dK="firebaseLocalStorageDb",fK="firebaseLocalStorage",hK="fbase_key",pK=function(){function e(t){Vt(this,e),this.request=t}return Zt(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function vK(e,t){return e.transaction([fK],t?"readwrite":"readonly").objectStore(fK)}function mK(){var e=indexedDB.deleteDatabase(dK);return new pK(e).toPromise()}function gK(){var e=indexedDB.open(dK,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(fK,{keyPath:hK})}catch(r){n(r)}})),e.addEventListener("success",me(ye().mark((function n(){var r;return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(fK)){n.next=12;break}return r.close(),n.next=5,mK();case 5:return n.t0=t,n.next=8,gK();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function yK(e,t,n){return bK.apply(this,arguments)}function bK(){return bK=me(ye().mark((function e(t,n,r){var a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vK(t,!0).put((a={},(0,De.Z)(a,hK,n),(0,De.Z)(a,"value",r),a)),e.abrupt("return",new pK(i).toPromise());case 2:case"end":return e.stop()}}),e)}))),bK.apply(this,arguments)}function xK(e,t){return kK.apply(this,arguments)}function kK(){return kK=me(ye().mark((function e(t,n){var r,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vK(t,!1).get(n),e.next=3,new pK(r).toPromise();case 3:return a=e.sent,e.abrupt("return",void 0===a?null:a.value);case 5:case"end":return e.stop()}}),e)}))),kK.apply(this,arguments)}function wK(e,t){var n=vK(e,!0).delete(t);return new pK(n).toPromise()}var SK=function(){function e(){Vt(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Zt(e,[{key:"_openDb",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,gK();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sK()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=me(ye().mark((function e(){var t=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=rK._getInstance(sK()?self:null),this.receiver._subscribe("keyChanged",function(){var e=me(ye().mark((function e(n,r){var a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return a=e.sent,e.abrupt("return",{keyProcessed:a.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=me(ye().mark((function e(){var t,n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uK();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new iK(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&lK()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,gK();case 5:return t=e.sent,e.next=8,yK(t,Xq,"1");case 8:return e.next=10,wK(t,Xq);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=me(ye().mark((function e(t,n){var r=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return yK(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return xK(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=me(ye().mark((function e(t){var n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return wK(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=me(ye().mark((function e(){var t,n,r,a,i,o,s,u,c,l,d;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=vK(e,!1).getAll();return new pK(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,a=Ut(t);try{for(a.s();!(i=a.n()).done;)o=i.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(Rme){a.e(Rme)}finally{a.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)d=l[c],this.localCache[d]&&!r.has(d)&&(this.notifyListeners(d,null),n.push(d));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,a=Array.from(n);r<a.length;r++){(0,a[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(me(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();SK.type="LOCAL";var IK=SK;function NK(e,t){return zG(e,"POST","/v2/accounts/mfaSignIn:start",jG(e,t))}function TK(e,t){return zG(e,"POST","/v2/accounts/mfaSignIn:finalize",jG(e,t))}function CK(e){return EK.apply(this,arguments)}function EK(){return EK=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zG(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),EK.apply(this,arguments)}function _K(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=kG("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function AK(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var RK=1e12,OK=function(){function e(t){Vt(this,e),this.auth=t,this.counter=RK,this._widgets=new Map}return Zt(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new DK(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||RK;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||RK;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||RK,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),DK=function(){function e(t,n,r){var a=this;Vt(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){a.execute()};var i="string"===typeof t?document.getElementById(t):t;NG(i,"argument-error",{appName:n}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Zt(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(a){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(a){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var PK=AK("rcb"),FK=new PG(3e4,6e4),MK="https://www.google.com/recaptcha/api.js?",LK=function(){function e(){var t;Vt(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=oK().grecaptcha)||void 0===t?void 0:t.render)}return Zt(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return NG($K(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(oK().grecaptcha):new Promise((function(r,a){var i=oK().setTimeout((function(){a(kG(e,"network-request-failed"))}),FK.get());oK()[PK]=function(){oK().clearTimeout(i),delete oK()[PK];var o=oK().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else a(kG(e,"internal-error"))},_K("".concat(MK,"?").concat(AV({onload:PK,render:"explicit",hl:n}))).catch((function(){clearTimeout(i),a(kG(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=oK().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function $K(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var jK=function(){function e(){Vt(this,e)}return Zt(e,[{key:"load",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new OK(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),zK="recaptcha",BK={theme:"light",type:"image"},UK=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},BK),r=arguments.length>2?arguments[2]:void 0;Vt(this,e),this.parameters=n,this.type=zK,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=jZ(r),this.isInvisible="invisible"===this.parameters.size,NG("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var a="string"===typeof t?document.getElementById(t):t;NG(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jK:new LK,this.validateStartingState()}return Zt(e,[{key:"verify",value:function(){var e=me(ye().mark((function e(){var t,n,r,a=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){a.tokenChangeListeners.add((function t(n){n&&(a.tokenChangeListeners.delete(t),e(n))})),a.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){NG(!this.parameters.sitekey,this.auth,"argument-error"),NG(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),NG("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=oK()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){NG(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=me(ye().mark((function e(){var t,n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return NG(OG()&&!sK(),this.auth,"internal-error"),e.next=3,VK();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,CK(this.auth);case 8:NG(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return NG(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function VK(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var WK=function(){function e(t,n){Vt(this,e),this.verificationId=t,this.onConfirmation=n}return Zt(e,[{key:"confirm",value:function(e){var t=SH._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function GK(e,t,n){return ZK.apply(this,arguments)}function ZK(){return ZK=me(ye().mark((function e(t,n,r){var a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=jZ(t),e.next=3,XK(a,n,MV(r));case 3:return i=e.sent,e.abrupt("return",new WK(i,(function(e){return QH(a,e)})));case 5:case"end":return e.stop()}}),e)}))),ZK.apply(this,arguments)}function HK(e,t,n){return qK.apply(this,arguments)}function qK(){return(qK=me(ye().mark((function e(t,n,r){var a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=MV(t),e.next=3,HH(!1,a,"phone");case 3:return e.next=5,XK(a.auth,n,MV(r));case 5:return i=e.sent,e.abrupt("return",new WK(i,(function(e){return tq(a,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function KK(){return(KK=me(ye().mark((function e(t,n,r){var a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=MV(t),e.next=3,XK(a.auth,n,MV(r));case 3:return i=e.sent,e.abrupt("return",new WK(i,(function(e){return rq(a,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XK(e,t,n){return JK.apply(this,arguments)}function JK(){return JK=me(ye().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(i=e.sent,e.prev=3,NG("string"===typeof i,t,"argument-error"),NG(r.type===zK,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return NG("enroll"===s.type,t,"internal-error"),e.next=13,Wq(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return NG("signin"===s.type,t,"internal-error"),NG(c=(null===(a=o.multiFactorHint)||void 0===a?void 0:a.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,NK(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:i}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,gH(t,{phoneNumber:o.phoneNumber,recaptchaToken:i});case 28:return d=e.sent,f=d.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),JK.apply(this,arguments)}function YK(){return(YK=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GH(MV(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var QK=function(){function e(t){Vt(this,e),this.providerId=e.PROVIDER_ID,this.auth=jZ(t)}return Zt(e,[{key:"verifyPhoneNumber",value:function(e,t){return XK(this.auth,e,MV(t))}}],[{key:"credential",value:function(e,t){return SH._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?SH._fromTokenResponse(n,r):null}}]),e}();function eX(e,t){return t?_G(t):(NG(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}QK.PROVIDER_ID="phone",QK.PHONE_SIGN_IN_METHOD="phone";var tX=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Zt(n,[{key:"_getIdTokenResponse",value:function(e){return pH(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return pH(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return pH(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(WZ);function nX(e){return JH(e.auth,new tX(e),e.bypassAuthState)}function rX(e){var t=e.auth,n=e.user;return NG(n,t,"internal-error"),KH(n,new tX(e),e.bypassAuthState)}function aX(e){return iX.apply(this,arguments)}function iX(){return iX=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,NG(r=t.user,n,"internal-error"),e.abrupt("return",GH(r,new tX(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),iX.apply(this,arguments)}var oX=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Vt(this,e),this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Zt(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=me(ye().mark((function t(n,r){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=me(ye().mark((function e(t){var n,r,a,i,o,s,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,a=t.postBody,i=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nX;case"linkViaPopup":case"linkViaRedirect":return aX;case"reauthViaPopup":case"reauthViaRedirect":return rX;default:xG(this.auth,"internal-error")}}},{key:"resolve",value:function(e){CG(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){CG(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),sX=new PG(2e3,1e4);function uX(e,t,n){return cX.apply(this,arguments)}function cX(){return cX=me(ye().mark((function e(t,n,r){var a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=jZ(t),SG(t,n,TH),i=eX(a,r),o=new hX(a,"signInViaPopup",n,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),cX.apply(this,arguments)}function lX(){return(lX=me(ye().mark((function e(t,n,r){var a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return SG((a=MV(t)).auth,n,TH),i=eX(a.auth,r),o=new hX(a.auth,"reauthViaPopup",n,i,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dX(e,t,n){return fX.apply(this,arguments)}function fX(){return(fX=me(ye().mark((function e(t,n,r){var a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return SG((a=MV(t)).auth,n,TH),i=eX(a.auth,r),o=new hX(a.auth,"linkViaPopup",n,i,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hX=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a,i,o){var s;return Vt(this,n),(s=t.call(this,e,r,i,o)).provider=a,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=je(s),s}return Zt(n,[{key:"executeNotNull",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return NG(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=me(ye().mark((function e(){var t,n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return CG(1===this.filter.length,"Popup operations only handle one event"),t=aK(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(kG(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(kG(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(kG(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,sX.get())}()}}]),n}(oX);hX.currentPopupAction=null;var pX=new Map,vX=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Vt(this,n),(a=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i)).eventId=null,a}return Zt(n,[{key:"execute",value:function(){var e=me(ye().mark((function e(){var t,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=pX.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,mX(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,jx(Lo(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:pX.set(this.auth._key(),t);case 21:return this.bypassAuthState||pX.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=me(ye().mark((function e(t){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",jx(Lo(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",jx(Lo(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(oX);function mX(e,t){return gX.apply(this,arguments)}function gX(){return gX=me(ye().mark((function e(t,n){var r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wX(n),a=kX(t),e.next=4,a._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,a._get(r);case 8:return e.t0=e.sent,i="true"===e.t0,e.next=12,a._remove(r);case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)}))),gX.apply(this,arguments)}function yX(e,t){return bX.apply(this,arguments)}function bX(){return bX=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kX(t)._set(wX(n),"true"));case 1:case"end":return e.stop()}}),e)}))),bX.apply(this,arguments)}function xX(e,t){pX.set(e._key(),t)}function kX(e){return _G(e._redirectPersistence)}function wX(e){return wZ("pendingRedirect",e.config.apiKey,e.name)}function SX(e,t,n){return function(e,t,n){return IX.apply(this,arguments)}(e,t,n)}function IX(){return IX=me(ye().mark((function e(t,n,r){var a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=jZ(t),SG(t,n,TH),e.next=4,a._initializationPromise;case 4:return i=eX(a,r),e.next=7,yX(i,a);case 7:return e.abrupt("return",i._openRedirect(a,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),IX.apply(this,arguments)}function NX(e,t,n){return function(e,t,n){return TX.apply(this,arguments)}(e,t,n)}function TX(){return(TX=me(ye().mark((function e(t,n,r){var a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return SG((a=MV(t)).auth,n,TH),e.next=4,a.auth._initializationPromise;case 4:return i=eX(a.auth,r),e.next=7,yX(i,a.auth);case 7:return e.next=9,DX(a);case 9:return o=e.sent,e.abrupt("return",i._openRedirect(a.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CX(e,t,n){return function(e,t,n){return EX.apply(this,arguments)}(e,t,n)}function EX(){return(EX=me(ye().mark((function e(t,n,r){var a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return SG((a=MV(t)).auth,n,TH),e.next=4,a.auth._initializationPromise;case 4:return i=eX(a.auth,r),e.next=7,HH(!1,a,n.providerId);case 7:return e.next=9,yX(i,a.auth);case 9:return e.next=11,DX(a);case 11:return o=e.sent,e.abrupt("return",i._openRedirect(a.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _X(e,t){return AX.apply(this,arguments)}function AX(){return AX=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jZ(t)._initializationPromise;case 2:return e.abrupt("return",RX(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),AX.apply(this,arguments)}function RX(e,t){return OX.apply(this,arguments)}function OX(){return OX=me(ye().mark((function e(t,n){var r,a,i,o,s,u=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],a=jZ(t),i=eX(a,n),o=new vX(a,i,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,a._persistUserIfCurrent(s.user);case 11:return e.next=13,a._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),OX.apply(this,arguments)}function DX(e){return PX.apply(this,arguments)}function PX(){return(PX=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=aK("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var FX=function(){function e(t){Vt(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Zt(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LX(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!LX(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(kG(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(MX(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(MX(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function MX(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function LX(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function $X(e){return jX.apply(this,arguments)}function jX(){return jX=me(ye().mark((function e(t){var n,r=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",zG(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),jX.apply(this,arguments)}var zX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BX=/^https?/;function UX(){return UX=me(ye().mark((function e(t){var n,r,a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,$X(t);case 4:n=e.sent,r=n.authorizedDomains,a=Ut(r),e.prev=7,a.s();case 9:if((i=a.n()).done){e.next=20;break}if(o=i.value,e.prev=11,!VX(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),a.e(e.t1);case 25:return e.prev=25,a.f(),e.finish(25);case 28:xG(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),UX.apply(this,arguments)}function VX(e){var t=RG(),n=new URL(t),r=n.protocol,a=n.hostname;if(e.startsWith("chrome-extension://")){var i=new URL(e);return""===i.hostname&&""===a?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&i.hostname===a}if(!BX.test(r))return!1;if(zX.test(e))return a===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}var WX=new PG(3e4,6e4);function GX(){var e=oK().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=(0,Le.Z)(e.H[r].L),e.CP)for(var a=0;a<e.CP.length;a++)e.CP[a]=null}}var ZX=null;function HX(e){return ZX=ZX||function(e){return new Promise((function(t,n){var r,a,i;function o(){GX(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){GX(),n(kG(e,"network-request-failed"))},timeout:WX.get()})}if(null===(a=null===(r=oK().gapi)||void 0===r?void 0:r.iframes)||void 0===a?void 0:a.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=oK().gapi)||void 0===i?void 0:i.load)){var s=AK("iframefcb");return oK()[s]=function(){gapi.load?o():n(kG(e,"network-request-failed"))},_K("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw ZX=null,e}))}(e),ZX}var qX=new PG(5e3,15e3),KX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JX(e){var t=e.config;NG(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?FG(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:OW},a=XX.get(e.config.apiHost);a&&(r.eid=a);var i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(AV(r).slice(1))}function YX(e){return QX.apply(this,arguments)}function QX(){return QX=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,HX(t);case 2:return n=e.sent,NG(r=oK().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:JX(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KX,dontclear:!0},(function(e){return new Promise(function(){var n=me(ye().mark((function n(r,a){var i,o,s;return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){oK().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:i=kG(t,"network-request-failed"),o=oK().setTimeout((function(){a(i)}),qX.get()),e.ping(s).then(s,(function(){a(i)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),QX.apply(this,arguments)}var eJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tJ="_blank",nJ="http://localhost",rJ=function(){function e(t){Vt(this,e),this.window=t,this.associatedEvent=null}return Zt(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function aJ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},eJ),{width:r.toString(),height:a.toString(),top:i,left:o}),c=gV().toLowerCase();n&&(s=CZ(c)?tJ:n),NZ(c)&&(t=t||nJ,u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=(0,C.Z)(t,2),r=n[0],a=n[1];return"".concat(e).concat(r,"=").concat(a,",")}),"");if(DZ(c)&&"_self"!==s)return iJ(t||"",s),new rJ(null);var d=window.open(t||"",s,l);NG(d,e,"popup-blocked");try{d.focus()}catch(f){}return new rJ(d)}function iJ(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var oJ="__/auth/handler",sJ="emulator/auth/handler";function uJ(e,t,n,r,a,i){NG(e.config.authDomain,e,"auth-domain-config-required"),NG(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:OW,eventId:a};if(t instanceof TH){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(i||{});s<u.length;s++){var c=(0,C.Z)(u[s],2),l=c[0],d=c[1];o[l]=d}}if(t instanceof CH){var f=t.getScopes().filter((function(e){return""!==e}));f.length>0&&(o.scopes=f.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var h=o,p=0,v=Object.keys(h);p<v.length;p++){var m=v[p];void 0===h[m]&&delete h[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(oJ);return FG(t,sJ)}(e),"?").concat(AV(h).slice(1))}var cJ="webStorageSupport",lJ=function(){function e(){Vt(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tK,this._completeRedirectFn=RX,this._overrideRedirectResult=xX}return Zt(e,[{key:"_openPopup",value:function(){var e=me(ye().mark((function e(t,n,r,a){var i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return CG(null===(i=this.eventManagers[t._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),o=uJ(t,n,r,RG(),a),e.abrupt("return",aJ(t,o,aK()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=me(ye().mark((function e(t,n,r,a){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return i=uJ(t,n,r,RG(),a),oK().location.href=i,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var i}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],a=r.manager,i=r.promise;return a?Promise.resolve(a):(CG(i,"If manager is not set, promise should be"),i)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,YX(t);case 2:return n=e.sent,r=new FX(t),n.register("authEvent",(function(e){return NG(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(cJ,{type:cJ},(function(n){var r,a=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==a&&t(!!a),xG(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return UX.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return FZ()||TZ()||OZ()}}]),e}(),dJ=lJ,fJ=function(){function e(t){Vt(this,e),this.factorId=t}return Zt(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return TG("unexpected MultiFactorSessionType")}}}]),e}(),hJ=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,"phone")).credential=e,r}return Zt(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return zG(e,"POST","/v2/accounts/mfaEnrollment:finalize",jG(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return zG(e,"POST","/v2/accounts/mfaSignIn:finalize",jG(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(fJ),pJ=function(){function e(){Vt(this,e)}return Zt(e,null,[{key:"assertion",value:function(e){return hJ._fromCredential(e)}}]),e}();pJ.FACTOR_ID="phone";var vJ=function(){function e(){Vt(this,e)}return Zt(e,null,[{key:"assertionForEnrollment",value:function(e,t){return mJ._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return mJ._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return NG("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,Gq(n.auth,{idToken:n.credential,totpEnrollmentInfo:{}});case 4:return r=e.sent,e.abrupt("return",gJ._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();vJ.FACTOR_ID="totp";var mJ=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a){var i;return Vt(this,n),(i=t.call(this,"totp")).otp=e,i.enrollmentId=r,i.secret=a,i}return Zt(n,[{key:"_finalizeEnroll",value:function(){var e=me(ye().mark((function e(t,n,r){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return NG("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Zq(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=me(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return NG(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",TK(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(fJ),gJ=function(){function e(t,n,r,a,i,o,s){Vt(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=a,this.enrollmentCompletionDeadline=i}return Zt(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(yJ(e)||yJ(t))&&(r=!0),r&&(yJ(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),yJ(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function yJ(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var bJ="@firebase/auth",xJ="0.22.0",kJ=function(){function e(t){Vt(this,e),this.auth=t,this.internalListeners=new Map}return Zt(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){NG(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var wJ,SJ,IJ=pV("authIdTokenMaxAge")||300,NJ=null,TJ=function(e){return function(){var t=me(ye().mark((function t(n){var r,a,i;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((a=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&a>IJ)){t.next=9;break}return t.abrupt("return");case 9:if(i=null===r||void 0===r?void 0:r.token,NJ!==i){t.next=12;break}return t.abrupt("return");case 12:return NJ=i,t.next=15,fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};wJ="Browser",NW(new LV("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=r.options,o=i.apiKey,s=i.authDomain;return function(e,t){NG(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),NG(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:wJ,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MZ(wJ)},a=new $Z(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_G);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(a,n),a}(r,a)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),NW(new LV("auth-internal",(function(e){return function(e){return new kJ(e)}(jZ(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),$W(bJ,xJ,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(wJ)),$W(bJ,xJ,"esm2017");var CJ=function(){function e(t,n){var r=this;Vt(this,e),this._delegate=t,this.firebase=n,SW(t,new LV("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Zt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),MW(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bW;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bW;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){SW(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){IW(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),EJ=(SJ={},(0,De.Z)(SJ,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,De.Z)(SJ,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),SJ),_J=new IV("app-compat","Firebase",EJ);var AJ=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(r){var a=DW(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(CV(t,a.name))return t[a.name];var i=new e(a,n);return t[a.name]=i,i},app:r,registerVersion:$W,setLogLevel:zW,onLog:jW,apps:null,SDK_VERSION:OW,INTERNAL:{registerComponent:function(t){var a=t.name,i=a.replace("-compat","");if(NW(t)&&"PUBLIC"===t.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();if("function"!==typeof e[i])throw _J.create("invalid-app-argument",{appName:a});return e[i]()};void 0!==t.serviceProps&&cV(o,t.serviceProps),n[i]=o,e.prototype[i]=function(){for(var e=this._getService.bind(this,a),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.apply(this,t.multipleInstances?r:[])}}return"PUBLIC"===t.type?n[i]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:S}};function r(e){if(!CV(t,e=e||bW))throw _J.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),r.App=e,n}(CJ);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){cV(t,e)},createSubscribe:DV,ErrorFactory:IV,deepExtend:cV}),t}(),RJ=new qV("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){RJ.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var OJ=self.firebase.SDK_VERSION;OJ&&OJ.indexOf("LITE")>=0&&RJ.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var DJ=AJ;!function(e){$W("@firebase/app-compat","0.2.7",e)}();DJ.registerVersion("firebase","9.19.1","app-compat");var PJ,FJ="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},MJ={},LJ=LJ||{},$J=FJ||self;function jJ(){}function zJ(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function BJ(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var UJ="closure_uid_"+(1e9*Math.random()>>>0),VJ=0;function WJ(e,t,n){return e.call.apply(e.bind,arguments)}function GJ(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ZJ(e,t,n){return(ZJ=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?WJ:GJ).apply(null,arguments)}function HJ(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function qJ(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var a=Array(arguments.length-2),i=2;i<arguments.length;i++)a[i-2]=arguments[i];return t.prototype[n].apply(e,a)}}function KJ(){this.s=this.s,this.o=this.o}KJ.prototype.s=!1,KJ.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,UJ)&&e[UJ]||(e[UJ]=++VJ))},KJ.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var XJ=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function JJ(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function YJ(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(zJ(r)){var a=e.length||0,i=r.length||0;e.length=a+i;for(var o=0;o<i;o++)e[a+o]=r[o]}else e.push(r)}}function QJ(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}QJ.prototype.h=function(){this.defaultPrevented=!0};var eY=function(){if(!$J.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{$J.addEventListener("test",jJ,t),$J.removeEventListener("test",jJ,t)}catch(n){}return e}();function tY(e){return/^[\s\xa0]*$/.test(e)}var nY=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function rY(e,t){return e<t?-1:e>t?1:0}function aY(){var e=$J.navigator;return e&&(e=e.userAgent)?e:""}function iY(e){return-1!=aY().indexOf(e)}function oY(e){return oY[" "](e),e}oY[" "]=jJ;var sY,uY=iY("Opera"),cY=iY("Trident")||iY("MSIE"),lY=iY("Edge"),dY=lY||cY,fY=iY("Gecko")&&!(-1!=aY().toLowerCase().indexOf("webkit")&&!iY("Edge"))&&!(iY("Trident")||iY("MSIE"))&&!iY("Edge"),hY=-1!=aY().toLowerCase().indexOf("webkit")&&!iY("Edge");function pY(){var e=$J.document;return e?e.documentMode:void 0}e:{var vY="",mY=function(){var e=aY();return fY?/rv:([^\);]+)(\)|;)/.exec(e):lY?/Edge\/([\d\.]+)/.exec(e):cY?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):hY?/WebKit\/(\S+)/.exec(e):uY?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(mY&&(vY=mY?mY[1]:""),cY){var gY=pY();if(null!=gY&&gY>parseFloat(vY)){sY=String(gY);break e}}sY=vY}var yY,bY={};function xY(){return function(e){var t=bY;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=nY(String(sY)).split("."),n=nY("9").split("."),r=Math.max(t.length,n.length),a=0;0==e&&a<r;a++){var i=t[a]||"",o=n[a]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;e=rY(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||rY(0==i[2].length,0==o[2].length)||rY(i[2],o[2]),i=i[3],o=o[3]}while(0==e)}return 0<=e}))}if($J.document&&cY){var kY=pY();yY=kY||(parseInt(sY,10)||void 0)}else yY=void 0;var wY=yY;function SY(e,t){if(QJ.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(fY){e:{try{oY(t.nodeName);var a=!0;break e}catch(i){}a=!1}a||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:IY[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&SY.X.h.call(this)}}qJ(SY,QJ);var IY={2:"touch",3:"pen",4:"mouse"};SY.prototype.h=function(){SY.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var NY="closure_listenable_"+(1e6*Math.random()|0),TY=0;function CY(e,t,n,r,a){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=a,this.key=++TY,this.ba=this.ea=!1}function EY(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function _Y(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function AY(e){var t={};for(var n in e)t[n]=e[n];return t}var RY="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function OY(e,t){for(var n,r,a=1;a<arguments.length;a++){for(n in r=arguments[a])e[n]=r[n];for(var i=0;i<RY.length;i++)n=RY[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function DY(e){this.src=e,this.g={},this.h=0}function PY(e,t){var n=t.type;if(n in e.g){var r,a=e.g[n],i=XJ(a,t);(r=0<=i)&&Array.prototype.splice.call(a,i,1),r&&(EY(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function FY(e,t,n,r){for(var a=0;a<e.length;++a){var i=e[a];if(!i.ba&&i.listener==t&&i.capture==!!n&&i.ha==r)return a}return-1}DY.prototype.add=function(e,t,n,r,a){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=FY(e,t,r,a);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new CY(t,this.src,i,!!r,a)).ea=n,e.push(t)),t};var MY="closure_lm_"+(1e6*Math.random()|0),LY={};function $Y(e,t,n,r,a){if(r&&r.once)return zY(e,t,n,r,a);if(Array.isArray(t)){for(var i=0;i<t.length;i++)$Y(e,t[i],n,r,a);return null}return n=HY(n),e&&e[NY]?e.N(t,n,BJ(r)?!!r.capture:!!r,a):jY(e,t,n,!1,r,a)}function jY(e,t,n,r,a,i){if(!t)throw Error("Invalid event type");var o=BJ(a)?!!a.capture:!!a,s=GY(e);if(s||(e[MY]=s=new DY(e)),(n=s.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=WY;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)eY||(a=o),void 0===a&&(a=!1),e.addEventListener(t.toString(),r,a);else if(e.attachEvent)e.attachEvent(VY(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function zY(e,t,n,r,a){if(Array.isArray(t)){for(var i=0;i<t.length;i++)zY(e,t[i],n,r,a);return null}return n=HY(n),e&&e[NY]?e.O(t,n,BJ(r)?!!r.capture:!!r,a):jY(e,t,n,!0,r,a)}function BY(e,t,n,r,a){if(Array.isArray(t))for(var i=0;i<t.length;i++)BY(e,t[i],n,r,a);else r=BJ(r)?!!r.capture:!!r,n=HY(n),e&&e[NY]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=FY(i=e.g[t],n,r,a))&&(EY(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=GY(e))&&(t=e.g[t.toString()],e=-1,t&&(e=FY(t,n,r,a)),(n=-1<e?t[e]:null)&&UY(n))}function UY(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[NY])PY(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(VY(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=GY(t))?(PY(n,e),0==n.h&&(n.src=null,t[MY]=null)):EY(e)}}}function VY(e){return e in LY?LY[e]:LY[e]="on"+e}function WY(e,t){if(e.ba)e=!0;else{t=new SY(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&UY(e),e=n.call(r,t)}return e}function GY(e){return(e=e[MY])instanceof DY?e:null}var ZY="__closure_events_fn_"+(1e9*Math.random()>>>0);function HY(e){return"function"===typeof e?e:(e[ZY]||(e[ZY]=function(t){return e.handleEvent(t)}),e[ZY])}function qY(){KJ.call(this),this.i=new DY(this),this.P=this,this.I=null}function KY(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new QJ(t,e);else if(t instanceof QJ)t.target=t.target||e;else{var a=t;OY(t=new QJ(r,e),a)}if(a=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];a=XY(o,r,!0,t)&&a}if(a=XY(o=t.g=e,r,!0,t)&&a,a=XY(o,r,!1,t)&&a,n)for(i=0;i<n.length;i++)a=XY(o=t.g=n[i],r,!1,t)&&a}function XY(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var a=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.ba&&o.capture==n){var s=o.listener,u=o.ha||o.src;o.ea&&PY(e.i,o),a=!1!==s.call(u,r)&&a}}return a&&!r.defaultPrevented}qJ(qY,KJ),qY.prototype[NY]=!0,qY.prototype.removeEventListener=function(e,t,n,r){BY(this,e,t,n,r)},qY.prototype.M=function(){if(qY.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)EY(n[r]);delete t.g[e],t.h--}}this.I=null},qY.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},qY.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var JY=$J.JSON.stringify;function YY(){var e=oQ,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var QY,eQ=function(){function e(){Vt(this,e),this.h=this.g=null}return Zt(e,[{key:"add",value:function(e,t){var n=tQ.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),tQ=new(function(){function e(t,n){Vt(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Zt(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new nQ}),(function(e){return e.reset()})),nQ=function(){function e(){Vt(this,e),this.next=this.g=this.h=null}return Zt(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function rQ(e){$J.setTimeout((function(){throw e}),0)}function aQ(e,t){QY||function(){var e=$J.Promise.resolve(void 0);QY=function(){e.then(sQ)}}(),iQ||(QY(),iQ=!0),oQ.add(e,t)}var iQ=!1,oQ=new eQ;function sQ(){for(var e;e=YY();){try{e.h.call(e.g)}catch(n){rQ(n)}var t=tQ;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}iQ=!1}function uQ(e,t){qY.call(this),this.h=e||1,this.g=t||$J,this.j=ZJ(this.lb,this),this.l=Date.now()}function cQ(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function lQ(e,t,n){if("function"===typeof e)n&&(e=ZJ(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ZJ(e.handleEvent,e)}return 2147483647<Number(t)?-1:$J.setTimeout(e,t||0)}function dQ(e){e.g=lQ((function(){e.g=null,e.i&&(e.i=!1,dQ(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}qJ(uQ,qY),(PJ=uQ.prototype).ca=!1,PJ.R=null,PJ.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),KY(this,"tick"),this.ca&&(cQ(this),this.start()))}},PJ.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},PJ.M=function(){uQ.X.M.call(this),cQ(this),delete this.g};var fQ=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this)).m=e,a.j=r,a.h=null,a.i=!1,a.g=null,a}return Zt(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:dQ(this)}},{key:"M",value:function(){jx(Lo(n.prototype),"M",this).call(this),this.g&&($J.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(KJ);function hQ(e){KJ.call(this),this.h=e,this.g={}}qJ(hQ,KJ);var pQ=[];function vQ(e,t,n,r){Array.isArray(n)||(n&&(pQ[0]=n.toString()),n=pQ);for(var a=0;a<n.length;a++){var i=$Y(t,n[a],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function mQ(e){_Y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&UY(e)}),e),e.g={}}function gQ(){this.g=!0}function yQ(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var i=a[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<a.length;o++)a[o]=""}}}return JY(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}hQ.prototype.M=function(){hQ.X.M.call(this),mQ(this)},hQ.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},gQ.prototype.Aa=function(){this.g=!1},gQ.prototype.info=function(){};var bQ={},xQ=null;function kQ(){return xQ=xQ||new qY}function wQ(e){QJ.call(this,bQ.Pa,e)}function SQ(e){var t=kQ();KY(t,new wQ(t))}function IQ(e,t){QJ.call(this,bQ.STAT_EVENT,e),this.stat=t}function NQ(e){var t=kQ();KY(t,new IQ(t,e))}function TQ(e,t){QJ.call(this,bQ.Qa,e),this.size=t}function CQ(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return $J.setTimeout((function(){e()}),t)}bQ.Pa="serverreachability",qJ(wQ,QJ),bQ.STAT_EVENT="statevent",qJ(IQ,QJ),bQ.Qa="timingevent",qJ(TQ,QJ);var EQ={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},_Q={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function AQ(){}function RQ(e){return e.h||(e.h=e.i())}function OQ(){}AQ.prototype.h=null;var DQ,PQ={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function FQ(){QJ.call(this,"d")}function MQ(){QJ.call(this,"c")}function LQ(){}function $Q(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new hQ(this),this.O=zQ,e=dY?125:void 0,this.T=new uQ(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new jQ}function jQ(){this.i=null,this.g="",this.h=!1}qJ(FQ,QJ),qJ(MQ,QJ),qJ(LQ,AQ),LQ.prototype.g=function(){return new XMLHttpRequest},LQ.prototype.i=function(){return{}},DQ=new LQ;var zQ=45e3,BQ={},UQ={};function VQ(e,t,n){e.K=1,e.v=u0(r0(t)),e.s=n,e.P=!0,WQ(e,null)}function WQ(e,t){e.F=Date.now(),qQ(e),e.A=r0(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),k0(n.i,"t",r),e.C=0,n=e.l.H,e.h=new jQ,e.g=w1(e.l,n?t:null,!e.s),0<e.N&&(e.L=new fQ(ZJ(e.La,e,e.g),e.N)),vQ(e.S,e.g,"readystatechange",e.ib),t=e.H?AY(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),SQ(),function(e,t,n,r,a,i){e.info((function(){if(e.g)if(i)for(var o="",s=i.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function GQ(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function ZQ(e,t,n){for(var r,a=!0;!e.I&&e.C<n.length;){if((r=HQ(e,n))==UQ){4==t&&(e.o=4,NQ(14),a=!1),yQ(e.j,e.m,null,"[Incomplete Response]");break}if(r==BQ){e.o=4,NQ(15),yQ(e.j,e.m,n,"[Invalid Chunk]"),a=!1;break}yQ(e.j,e.m,r,null),QQ(e,r)}GQ(e)&&r!=UQ&&r!=BQ&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,NQ(16),a=!1),e.i=e.i&&a,a?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),p1(t),t.K=!0,NQ(11))):(yQ(e.j,e.m,n,"[Invalid Chunked Response]"),YQ(e),JQ(e))}function HQ(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?UQ:(n=Number(t.substring(n,r)),isNaN(n)?BQ:(r+=1)+n>t.length?UQ:(t=t.substr(r,n),e.C=r+n,t))}function qQ(e){e.V=Date.now()+e.O,KQ(e,e.O)}function KQ(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=CQ(ZJ(e.gb,e),t)}function XQ(e){e.B&&($J.clearTimeout(e.B),e.B=null)}function JQ(e){0==e.l.G||e.I||g1(e.l,e)}function YQ(e){XQ(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,cQ(e.T),mQ(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function QQ(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||_0(n.h,e)))if(!e.J&&_0(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(i){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;m1(n),o1(n)}h1(n),NQ(18)}}else n.Ba=a[1],0<n.Ba-n.T&&37500>a[2]&&n.L&&0==n.A&&!n.v&&(n.v=CQ(ZJ(n.cb,n),6e3));if(1>=E0(n.h)&&n.ja){try{n.ja()}catch(i){}n.ja=void 0}}else b1(n,11)}else if((e.J||n.g==e)&&m1(n),!tY(t))for(a=n.Fa.g.parse(t),t=0;t<a.length;t++){var i=a[t];if(n.T=i[0],i=i[1],2==n.G)if("c"==i[0]){n.I=i[1],n.ka=i[2];var o=i[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var s=i[4];null!=s&&(n.Ca=s,n.j.info("SVER="+n.Ca));var u=i[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var d=r.h;d.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(d.j=d.l,d.g=new Set,d.h&&(A0(d,d.h),d.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.za=f,s0(r.F,r.D,f))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var h=e;if((r=n).sa=k1(r,r.H?r.ka:null,r.V),h.J){R0(r.h,h);var p=h,v=r.J;v&&p.setTimeout(v),p.B&&(XQ(p),qQ(p)),r.g=h}else f1(r);0<n.i.length&&u1(n)}else"stop"!=i[0]&&"close"!=i[0]||b1(n,7);else 3==n.G&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?b1(n,7):i1(n):"noop"!=i[0]&&n.l&&n.l.wa(i),n.A=0)}SQ()}catch(i){}}function e0(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(zJ(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(zJ(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(zJ(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),a=r.length,i=0;i<a;i++)t.call(void 0,r[i],n&&n[i],e)}(PJ=$Q.prototype).setTimeout=function(e){this.O=e},PJ.ib=function(e){e=e.target;var t=this.L;t&&3==Q0(e)?t.l():this.La(e)},PJ.La=function(e){try{if(e==this.g)e:{var t=Q0(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||dY||this.g&&(this.h.h||this.g.fa()||e1(this.g)))){this.I||4!=t||7==n||SQ(),XQ(this);var r=this.g.aa();this.Y=r;t:if(GQ(this)){var a=e1(this.g);e="";var i=a.length,o=4==Q0(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){YQ(this),JQ(this);var s="";break t}this.h.i=new $J.TextDecoder}for(n=0;n<i;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:o&&n==i-1});a.splice(0,i),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.fa();if(this.i=200==r,function(e,t,n,r,a,i,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+t+"\n"+n+"\n"+i+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!tY(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,NQ(12),YQ(this),JQ(this);break e}yQ(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,QQ(this,r)}this.P?(ZQ(this,t,s),dY&&this.i&&3==t&&(vQ(this.S,this.T,"tick",this.hb),this.T.start())):(yQ(this.j,this.m,s,null),QQ(this,s)),4==t&&YQ(this),this.i&&!this.I&&(4==t?g1(this.l,this):(this.i=!1,qQ(this)))}else 400==r&&0<s.indexOf("Unknown SID")?(this.o=3,NQ(12)):(this.o=0,NQ(13)),YQ(this),JQ(this)}}}catch(t){}},PJ.hb=function(){if(this.g){var e=Q0(this.g),t=this.g.fa();this.C<t.length&&(XQ(this),ZQ(this,e,t),this.i&&4!=e&&qQ(this))}},PJ.cancel=function(){this.I=!0,YQ(this)},PJ.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(SQ(),NQ(17)),YQ(this),this.o=2,JQ(this)):KQ(this,this.V-e)};var t0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function n0(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof n0){this.h=void 0!==t?t:e.h,a0(this,e.j),this.s=e.s,this.g=e.g,i0(this,e.m),this.l=e.l,t=e.i;var n=new g0;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),o0(this,n),this.o=e.o}else e&&(n=String(e).match(t0))?(this.h=!!t,a0(this,n[1]||"",!0),this.s=c0(n[2]||""),this.g=c0(n[3]||"",!0),i0(this,n[4]),this.l=c0(n[5]||"",!0),o0(this,n[6]||"",!0),this.o=c0(n[7]||"")):(this.h=!!t,this.i=new g0(null,this.h))}function r0(e){return new n0(e)}function a0(e,t,n){e.j=n?c0(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function i0(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function o0(e,t,n){t instanceof g0?(e.i=t,function(e,t){t&&!e.j&&(y0(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(b0(this,t),k0(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=l0(t,v0)),e.i=new g0(t,e.h))}function s0(e,t,n){e.i.set(t,n)}function u0(e){return s0(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function c0(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function l0(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,d0),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function d0(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}n0.prototype.toString=function(){var e=[],t=this.j;t&&e.push(l0(t,f0,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(l0(t,f0,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(l0(n,"/"==n.charAt(0)?p0:h0,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",l0(n,m0)),e.join("")};var f0=/[#\/\?@]/g,h0=/[#\?:]/g,p0=/[#\?]/g,v0=/[#\?@]/g,m0=/#/g;function g0(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function y0(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),a=null;if(0<=r){var i=e[n].substring(0,r);a=e[n].substring(r+1)}else i=e[n];t(i,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function b0(e,t){y0(e),t=w0(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function x0(e,t){return y0(e),t=w0(e,t),e.g.has(t)}function k0(e,t,n){b0(e,t),0<n.length&&(e.i=null,e.g.set(w0(e,t),JJ(n)),e.h+=n.length)}function w0(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(PJ=g0.prototype).add=function(e,t){y0(this),this.i=null,e=w0(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},PJ.forEach=function(e,t){y0(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},PJ.oa=function(){y0(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var a=e[r],i=0;i<a.length;i++)n.push(t[r]);return n},PJ.W=function(e){y0(this);var t=[];if("string"===typeof e)x0(this,e)&&(t=t.concat(this.g.get(w0(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},PJ.set=function(e,t){return y0(this),this.i=null,x0(this,e=w0(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},PJ.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},PJ.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],a=encodeURIComponent(String(r)),i=this.W(r);for(r=0;r<i.length;r++){var o=a;""!==i[r]&&(o+="="+encodeURIComponent(String(i[r]))),e.push(o)}}return this.i=e.join("&")};var S0=Zt((function e(t,n){Vt(this,e),this.h=t,this.g=n}));function I0(e){this.l=e||T0,$J.PerformanceNavigationTiming?e=0<(e=$J.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!($J.g&&$J.g.Ga&&$J.g.Ga()&&$J.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var N0,T0=10;function C0(e){return!!e.h||!!e.g&&e.g.size>=e.j}function E0(e){return e.h?1:e.g?e.g.size:0}function _0(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function A0(e,t){e.g?e.g.add(t):e.h=t}function R0(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function O0(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Ut(e.g.values());try{for(r.s();!(t=r.n()).done;){var a=t.value;n=n.concat(a.D)}}catch(Rme){r.e(Rme)}finally{r.f()}return n}return JJ(e.i)}function D0(){}function P0(){this.g=new D0}function F0(e,t,n){var r=n||"";try{e0(e,(function(e,n){var a=e;BJ(e)&&(a=JY(e)),t.push(r+n+"="+encodeURIComponent(a))}))}catch(a){throw t.push(r+"type="+encodeURIComponent("_badmap")),a}}function M0(e,t,n,r,a){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,a(r)}catch(i){}}function L0(e){this.l=e.ac||null,this.j=e.jb||!1}function $0(e,t){qY.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=j0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}I0.prototype.cancel=function(){if(this.i=O0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Ut(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(Rme){t.e(Rme)}finally{t.f()}this.g.clear()}},D0.prototype.stringify=function(e){return $J.JSON.stringify(e,void 0)},D0.prototype.parse=function(e){return $J.JSON.parse(e,void 0)},qJ(L0,AQ),L0.prototype.g=function(){return new $0(this.l,this.j)},L0.prototype.i=(N0={},function(){return N0}),qJ($0,qY);var j0=0;function z0(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function B0(e){e.readyState=4,e.l=null,e.j=null,e.A=null,U0(e)}function U0(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(PJ=$0.prototype).open=function(e,t){if(this.readyState!=j0)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,U0(this)},PJ.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||$J).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},PJ.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,B0(this)),this.readyState=j0},PJ.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,U0(this)),this.g&&(this.readyState=3,U0(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof $J.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;z0(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},PJ.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?B0(this):U0(this),3==this.readyState&&z0(this)}},PJ.Va=function(e){this.g&&(this.response=this.responseText=e,B0(this))},PJ.Ua=function(e){this.g&&(this.response=e,B0(this))},PJ.ga=function(){this.g&&B0(this)},PJ.setRequestHeader=function(e,t){this.v.append(e,t)},PJ.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},PJ.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty($0.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var V0=$J.JSON.parse;function W0(e){qY.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=G0,this.K=this.L=!1}qJ(W0,qY);var G0="",Z0=/^https?$/i,H0=["POST","PUT"];function q0(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,K0(e),J0(e)}function K0(e){e.D||(e.D=!0,KY(e,"complete"),KY(e,"error"))}function X0(e){if(e.h&&"undefined"!=typeof LJ&&(!e.C[1]||4!=Q0(e)||2!=e.aa()))if(e.v&&4==Q0(e))lQ(e.Ha,0,e);else if(KY(e,"readystatechange"),4==Q0(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var a;if(a=0===n){var i=String(e.H).match(t0)[1]||null;if(!i&&$J.self&&$J.self.location){var o=$J.self.location.protocol;i=o.substr(0,o.length-1)}a=!Z0.test(i?i.toLowerCase():"")}t=a}if(t)KY(e,"complete"),KY(e,"success");else{e.m=6;try{var s=2<Q0(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.aa()+"]",K0(e)}}finally{J0(e)}}}function J0(e,t){if(e.g){Y0(e);var n=e.g,r=e.C[0]?jJ:null;e.g=null,e.C=null,t||KY(e,"ready");try{n.onreadystatechange=r}catch(a){}}}function Y0(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&($J.clearTimeout(e.A),e.A=null)}function Q0(e){return e.g?e.g.readyState:0}function e1(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case G0:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(j1){return null}}function t1(e){var t="";return _Y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function n1(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=t1(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):s0(e,t,n))}function r1(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function a1(e){this.Ca=0,this.i=[],this.j=new gQ,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=r1("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=r1("baseRetryDelayMs",5e3,e),this.bb=r1("retryDelaySeedMs",1e4,e),this.$a=r1("forwardChannelMaxRetries",2,e),this.ta=r1("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new I0(e&&e.concurrentRequestLimit),this.Fa=new P0,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function i1(e){if(s1(e),3==e.G){var t=e.U++,n=r0(e.F);s0(n,"SID",e.I),s0(n,"RID",t),s0(n,"TYPE","terminate"),l1(e,n),(t=new $Q(e,e.j,t,void 0)).K=2,t.v=u0(r0(n)),n=!1,$J.navigator&&$J.navigator.sendBeacon&&(n=$J.navigator.sendBeacon(t.v.toString(),"")),!n&&$J.Image&&((new Image).src=t.v,n=!0),n||(t.g=w1(t.l,null),t.g.da(t.v)),t.F=Date.now(),qQ(t)}x1(e)}function o1(e){e.g&&(p1(e),e.g.cancel(),e.g=null)}function s1(e){o1(e),e.u&&($J.clearTimeout(e.u),e.u=null),m1(e),e.h.cancel(),e.m&&("number"===typeof e.m&&$J.clearTimeout(e.m),e.m=null)}function u1(e){C0(e.h)||e.m||(e.m=!0,aQ(e.Ja,e),e.C=0)}function c1(e,t){var n;n=t?t.m:e.U++;var r=r0(e.F);s0(r,"SID",e.I),s0(r,"RID",n),s0(r,"AID",e.T),l1(e,r),e.o&&e.s&&n1(r,e.o,e.s),n=new $Q(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=d1(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),A0(e.h,n),VQ(n,r,t)}function l1(e,t){e.ia&&_Y(e.ia,(function(e,n){s0(t,n,e)})),e.l&&e0({},(function(e,n){s0(t,n,e)}))}function d1(e,t,n){n=Math.min(e.i.length,n);var r=e.l?ZJ(e.l.Ra,e.l,e):null;e:for(var a=e.i,i=-1;;){var o=["count="+n];-1==i?0<n?(i=a[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);for(var s=!0,u=0;u<n;u++){var c=a[u].h,l=a[u].g;if(0>(c-=i))i=Math.max(0,a[u].h-100),s=!1;else try{F0(l,o,"req"+c+"_")}catch(O){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function f1(e){e.g||e.u||(e.Z=1,aQ(e.Ia,e),e.A=0)}function h1(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=CQ(ZJ(e.Ia,e),y1(e,e.A)),e.A++,!0)}function p1(e){null!=e.B&&($J.clearTimeout(e.B),e.B=null)}function v1(e){e.g=new $Q(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=r0(e.sa);s0(t,"RID","rpc"),s0(t,"SID",e.I),s0(t,"CI",e.L?"0":"1"),s0(t,"AID",e.T),s0(t,"TYPE","xmlhttp"),l1(e,t),e.o&&e.s&&n1(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=u0(r0(t)),n.s=null,n.P=!0,WQ(n,e)}function m1(e){null!=e.v&&($J.clearTimeout(e.v),e.v=null)}function g1(e,t){var n=null;if(e.g==t){m1(e),p1(e),e.g=null;var r=2}else{if(!_0(e.h,t))return;n=t.D,R0(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var a=e.C;KY(r=kQ(),new TQ(r,n)),u1(e)}else f1(e);else if(3==(a=t.o)||0==a&&0<e.pa||!(1==r&&function(e,t){return!(E0(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=CQ(ZJ(e.Ja,e,t),y1(e,e.C)),e.C++,!0))}(e,t)||2==r&&h1(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),a){case 1:b1(e,5);break;case 4:b1(e,10);break;case 3:b1(e,6);break;default:b1(e,2)}}function y1(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function b1(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=ZJ(e.kb,e);n||(n=new n0("//www.google.com/images/cleardot.gif"),$J.location&&"http"==$J.location.protocol||a0(n,"https"),u0(n)),function(e,t){var n=new gQ;if($J.Image){var r=new Image;r.onload=HJ(M0,n,r,"TestLoadImage: loaded",!0,t),r.onerror=HJ(M0,n,r,"TestLoadImage: error",!1,t),r.onabort=HJ(M0,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=HJ(M0,n,r,"TestLoadImage: timeout",!1,t),$J.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else NQ(2);e.G=0,e.l&&e.l.va(t),x1(e),s1(e)}function x1(e){if(e.G=0,e.la=[],e.l){var t=O0(e.h);0==t.length&&0==e.i.length||(YJ(e.la,t),YJ(e.la,e.i),e.h.i.length=0,JJ(e.i),e.i.length=0),e.l.ua()}}function k1(e,t,n){var r=n instanceof n0?r0(n):new n0(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),i0(r,r.m);else{var a=$J.location;r=a.protocol,t=t?t+"."+a.hostname:a.hostname,a=+a.port;var i=new n0(null,void 0);r&&a0(i,r),t&&(i.g=t),a&&i0(i,a),n&&(i.l=n),r=i}return n=e.D,t=e.za,n&&t&&s0(r,n,t),s0(r,"VER",e.ma),l1(e,r),r}function w1(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new W0(new L0({jb:!0})):new W0(e.ra)).Ka(e.H),t}function S1(){}function I1(){if(cY&&!(10<=Number(wY)))throw Error("Environmental error: no available transport.")}function N1(e,t){qY.call(this),this.g=new a1(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!tY(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!tY(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new E1(this)}function T1(e){FQ.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function C1(){MQ.call(this),this.status=1}function E1(e){this.g=e}(PJ=W0.prototype).Ka=function(e){this.L=e},PJ.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():DQ.g(),this.C=this.u?RQ(this.u):RQ(DQ),this.g.onreadystatechange=ZJ(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void q0(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)n.set(a,r[a]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var i,o=Ut(r.keys());try{for(o.s();!(i=o.n()).done;){var s=i.value;n.set(s,r.get(s))}}catch(Rme){o.e(Rme)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),a=$J.FormData&&e instanceof $J.FormData,!(0<=XJ(H0,t))||r||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,c=Ut(n);try{for(c.s();!(u=c.n()).done;){var l=(0,C.Z)(u.value,2),d=l[0],f=l[1];this.g.setRequestHeader(d,f)}}catch(Rme){c.e(Rme)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Y0(this),0<this.B&&((this.K=function(e){return cY&&xY()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ZJ(this.qa,this)):this.A=lQ(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){q0(this,s)}},PJ.qa=function(){"undefined"!=typeof LJ&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,KY(this,"timeout"),this.abort(8))},PJ.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,KY(this,"complete"),KY(this,"abort"),J0(this))},PJ.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),J0(this,!0)),W0.X.M.call(this)},PJ.Ha=function(){this.s||(this.F||this.v||this.l?X0(this):this.fb())},PJ.fb=function(){X0(this)},PJ.aa=function(){try{return 2<Q0(this)?this.g.status:-1}catch(N0){return-1}},PJ.fa=function(){try{return this.g?this.g.responseText:""}catch(N0){return""}},PJ.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),V0(t)}},PJ.Ea=function(){return this.m},PJ.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(PJ=a1.prototype).ma=8,PJ.G=1,PJ.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new $Q(this,this.j,e,void 0),n=this.s;if(this.S&&(n?OY(n=AY(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,a=0;a<this.i.length;a++){var i=this.i[a];if(void 0===(i="__data__"in i.g&&"string"===typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(r+=i)){r=a;break e}if(4096===r||a===this.i.length-1){r=a+1;break e}}r=1e3}else r=1e3;r=d1(this,t,r),s0(a=r0(this.F),"RID",e),s0(a,"CVER",22),this.D&&s0(a,"X-HTTP-Session-Id",this.D),l1(this,a),n&&(this.N?r="headers="+encodeURIComponent(String(t1(n)))+"&"+r:this.o&&n1(a,this.o,n)),A0(this.h,t),this.Ya&&s0(a,"TYPE","init"),this.O?(s0(a,"$req",r),s0(a,"SID","null"),t.Z=!0,VQ(t,a,null)):VQ(t,a,r),this.G=2}}else 3==this.G&&(e?c1(this,e):0==this.i.length||C0(this.h)||c1(this))},PJ.Ia=function(){if(this.u=null,v1(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=CQ(ZJ(this.eb,this),e)}},PJ.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,NQ(10),o1(this),v1(this))},PJ.cb=function(){null!=this.v&&(this.v=null,o1(this),h1(this),NQ(19))},PJ.kb=function(e){e?(this.j.info("Successfully pinged google.com"),NQ(2)):(this.j.info("Failed to ping google.com"),NQ(1))},(PJ=S1.prototype).xa=function(){},PJ.wa=function(){},PJ.va=function(){},PJ.ua=function(){},PJ.Ra=function(){},I1.prototype.g=function(e,t){return new N1(e,t)},qJ(N1,qY),N1.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;NQ(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=k1(e,null,e.V),u1(e)},N1.prototype.close=function(){i1(this.g)},N1.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=JY(e),e=n);t.i.push(new S0(t.ab++,e)),3==t.G&&u1(t)},N1.prototype.M=function(){this.g.l=null,delete this.j,i1(this.g),delete this.g,N1.X.M.call(this)},qJ(T1,FQ),qJ(C1,MQ),qJ(E1,S1),E1.prototype.xa=function(){KY(this.g,"a")},E1.prototype.wa=function(e){KY(this.g,new T1(e))},E1.prototype.va=function(e){KY(this.g,new C1)},E1.prototype.ua=function(){KY(this.g,"b")},I1.prototype.createWebChannel=I1.prototype.g,N1.prototype.send=N1.prototype.u,N1.prototype.open=N1.prototype.m,N1.prototype.close=N1.prototype.close,EQ.NO_ERROR=0,EQ.TIMEOUT=8,EQ.HTTP_ERROR=6,_Q.COMPLETE="complete",OQ.EventType=PQ,PQ.OPEN="a",PQ.CLOSE="b",PQ.ERROR="c",PQ.MESSAGE="d",qY.prototype.listen=qY.prototype.N,W0.prototype.listenOnce=W0.prototype.O,W0.prototype.getLastError=W0.prototype.Oa,W0.prototype.getLastErrorCode=W0.prototype.Ea,W0.prototype.getStatus=W0.prototype.aa,W0.prototype.getResponseJson=W0.prototype.Sa,W0.prototype.getResponseText=W0.prototype.fa,W0.prototype.send=W0.prototype.da,W0.prototype.setWithCredentials=W0.prototype.Ka;var _1=MJ.createWebChannelTransport=function(){return new I1},A1=MJ.getStatEventTarget=function(){return kQ()},R1=MJ.ErrorCode=EQ,O1=MJ.EventType=_Q,D1=MJ.Event=bQ,P1=MJ.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},F1=MJ.FetchXmlHttpFactory=L0,M1=MJ.WebChannel=OQ,L1=MJ.XhrIo=W0,$1="@firebase/firestore",j1=function(){function e(t){Vt(this,e),this.uid=t}return Zt(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();j1.UNAUTHENTICATED=new j1(null),j1.GOOGLE_CREDENTIALS=new j1("google-credentials-uid"),j1.FIRST_PARTY=new j1("first-party-uid"),j1.MOCK_USER=new j1("mock-user");var z1="9.19.0",B1=new qV("@firebase/firestore");function U1(){return B1.logLevel}function V1(e){if(B1.logLevel<=BV.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(Z1);B1.debug.apply(B1,["Firestore (".concat(z1,"): ").concat(e)].concat((0,Le.Z)(a)))}}function W1(e){if(B1.logLevel<=BV.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(Z1);B1.error.apply(B1,["Firestore (".concat(z1,"): ").concat(e)].concat((0,Le.Z)(a)))}}function G1(e){if(B1.logLevel<=BV.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(Z1);B1.warn.apply(B1,["Firestore (".concat(z1,"): ").concat(e)].concat((0,Le.Z)(a)))}}function Z1(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function H1(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(z1,") INTERNAL ASSERTION FAILED: ")+e;throw W1(t),new Error(t)}function q1(e,t){e||H1()}function K1(e,t){return e}var X1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},J1=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this,e,r)).code=e,a.message=r,a.toString=function(){return"".concat(a.name,": [code=").concat(a.code,"]: ").concat(a.message)},a}return Zt(n)}(SV),Y1=Zt((function e(){var t=this;Vt(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Q1=Zt((function e(t,n){Vt(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),e2=function(){function e(){Vt(this,e)}return Zt(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(j1.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),t2=function(){function e(t){Vt(this,e),this.token=t,this.changeListener=null}return Zt(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),n2=function(){function e(t){Vt(this,e),this.t=t,this.currentUser=j1.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Zt(e,[{key:"start",value:function(e,t){var n=this,r=this.i,a=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},i=new Y1;this.o=function(){n.i++,n.currentUser=n.u(),i.resolve(),i=new Y1,e.enqueueRetryable((function(){return a(n.currentUser)}))};var o=function(){var t=i;e.enqueueRetryable(me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,a(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){V1("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(V1("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Y1)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(V1("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(q1("string"==typeof n.accessToken),new Q1(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return q1(null===e||"string"==typeof e),new j1(e)}}]),e}(),r2=function(){function e(t,n,r){Vt(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=j1.FIRST_PARTY,this.g=new Map}return Zt(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),a2=function(){function e(t,n,r){Vt(this,e),this.h=t,this.l=n,this.m=r}return Zt(e,[{key:"getToken",value:function(){return Promise.resolve(new r2(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(j1.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),i2=Zt((function e(t){Vt(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),o2=function(){function e(t){Vt(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return Zt(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&V1("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,V1("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var a=function(e){V1("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return a(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?a(e):V1("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(q1("string"==typeof t.token),e.T=t.token,new i2(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function s2(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var u2=function(){function e(){Vt(this,e)}return Zt(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=s2(40),a=0;a<r.length;++a)n.length<20&&r[a]<t&&(n+=e.charAt(r[a]%e.length));return n}}]),e}();function c2(e,t){return e<t?-1:e>t?1:0}function l2(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function d2(e){return e+"\0"}var f2=function(){function e(t,n){if(Vt(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new J1(X1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J1(X1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new J1(X1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new J1(X1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Zt(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?c2(this.nanoseconds,e.nanoseconds):c2(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),h2=function(){function e(t){Vt(this,e),this.timestamp=t}return Zt(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new f2(0,0))}},{key:"max",value:function(){return new e(new f2(253402300799,999999999))}}]),e}(),p2=function(){function e(t,n,r){Vt(this,e),void 0===n?n=0:n>t.length&&H1(),void 0===r?r=t.length-n:r>t.length-n&&H1(),this.segments=t,this.offset=n,this.len=r}return Zt(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var a=e.get(r),i=t.get(r);if(a<i)return-1;if(a>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),v2=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];for(var i=0,o=r;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new J1(X1.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,(0,Le.Z)(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(p2),m2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,g2=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return m2.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",a=0,i=function(){if(0===r.length)throw new J1(X1.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;a<e.length;){var s=e[a];if("\\"===s){if(a+1===e.length)throw new J1(X1.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[a+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new J1(X1.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,a+=2}else"`"===s?(o=!o,a++):"."!==s||o?(r+=s,a++):(i(),a++)}if(i(),o)throw new J1(X1.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(p2),y2=function(){function e(t){Vt(this,e),this.path=t}return Zt(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===v2.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(v2.fromString(t))}},{key:"fromName",value:function(t){return new e(v2.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(v2.emptyPath())}},{key:"comparator",value:function(e,t){return v2.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new v2(t.slice()))}}]),e}(),b2=Zt((function e(t,n,r,a){Vt(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=a}));function x2(e){return e.fields.find((function(e){return 2===e.kind}))}function k2(e){return e.fields.filter((function(e){return 2!==e.kind}))}b2.UNKNOWN_ID=-1;var w2=Zt((function e(t,n){Vt(this,e),this.fieldPath=t,this.kind=n}));var S2=function(){function e(t,n){Vt(this,e),this.sequenceNumber=t,this.offset=n}return Zt(e,null,[{key:"empty",value:function(){return new e(0,T2.min())}}]),e}();function I2(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=h2.fromTimestamp(1e9===r?new f2(n+1,0):new f2(n,r));return new T2(a,y2.empty(),t)}function N2(e){return new T2(e.readTime,e.key,-1)}var T2=function(){function e(t,n,r){Vt(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Zt(e,null,[{key:"min",value:function(){return new e(h2.min(),y2.empty(),-1)}},{key:"max",value:function(){return new e(h2.max(),y2.empty(),-1)}}]),e}();function C2(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=y2.comparator(e.documentKey,t.documentKey))?n:c2(e.largestBatchId,t.largestBatchId)}var E2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_2=function(){function e(){Vt(this,e),this.onCommittedListeners=[]}return Zt(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function A2(e){return R2.apply(this,arguments)}function R2(){return R2=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===X1.FAILED_PRECONDITION&&t.message===E2){e.next=2;break}throw t;case 2:V1("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),R2.apply(this,arguments)}var O2=function(){function e(t){var n=this;Vt(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Zt(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&H1(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,a){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,a)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,a)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,a=0,i=!1;t.forEach((function(t){++r,t.next((function(){++a,i&&a===r&&e()}),(function(e){return n(e)}))})),i=!0,a===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),a=Ut(t);try{var i=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(a.s();!(n=a.n()).done;)i()}catch(Rme){a.e(Rme)}finally{a.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,a){r.push(t.call(n,e,a))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var a=t.length,i=new Array(a),o=0,s=function(s){var u=s;n(t[u]).next((function(t){i[u]=t,++o===a&&e(i)}),(function(e){return r(e)}))},u=0;u<a;u++)s(u)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function a(){!0===t()?n().next((function(){a()}),r):e()}()}))}}]),e}(),D2=function(){function e(t,n){var r=this;Vt(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.R=new Y1,this.transaction.oncomplete=function(){r.R.resolve()},this.transaction.onabort=function(){n.error?r.R.reject(new M2(t,n.error)):r.R.resolve()},this.transaction.onerror=function(e){var n=B2(e.target.error);r.R.reject(new M2(t,n))}}return Zt(e,[{key:"v",get:function(){return this.R.promise}},{key:"abort",value:function(e){e&&this.R.reject(e),this.aborted||(V1("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new $2(t)}}],[{key:"open",value:function(t,n,r,a){try{return new e(n,t.transaction(a,r))}catch(t){throw new M2(n,t)}}}]),e}(),P2=function(){function e(t,n,r){Vt(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(gV())&&W1("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Zt(e,[{key:"$",value:function(){var e=me(ye().mark((function e(t){var n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return V1("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var a=indexedDB.open(n.name,n.version);a.onsuccess=function(t){var n=t.target.result;e(n)},a.onblocked=function(){r(new M2(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new J1(X1.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new J1(X1.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new M2(t,n))},a.onupgradeneeded=function(e){V1("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.M(t,a.transaction,e.oldVersion,n.version).next((function(){V1("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=me(ye().mark((function e(t,n,r,a){var i,o,s,u,c,l=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(ye().mark((function e(){var n,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.$(t);case 2:return l.db=e.sent,n=D2.open(l.db,t,i?"readonly":"readwrite",r),o=a(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),O2.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u=e.t1,c="FirebaseError"!==u.name&&o<3,V1("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(u));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return V1("SimpleDb","Removing database:",e),j2(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!wV())return!1;if(e.C())return!0;var t=gV(),n=e.S(t),r=0<n&&n<10,a=e.N(t),i=0<a&&a<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||i)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),F2=function(){function e(t){Vt(this,e),this.L=t,this.q=!1,this.U=null}return Zt(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return j2(this.L.delete())}}]),e}(),M2=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this,X1.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",a}return Zt(n)}(J1);function L2(e){return"IndexedDbTransactionError"===e.name}var $2=function(){function e(t){Vt(this,e),this.store=t}return Zt(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(V1("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(V1("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),j2(n)}},{key:"add",value:function(e){return V1("SimpleDb","ADD",this.store.name,e,e),j2(this.store.add(e))}},{key:"get",value:function(e){var t=this;return j2(this.store.get(e)).next((function(n){return void 0===n&&(n=null),V1("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return V1("SimpleDb","DELETE",this.store.name,e),j2(this.store.delete(e))}},{key:"count",value:function(){return V1("SimpleDb","COUNT",this.store.name),j2(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),a=[];return this.W(r,(function(e,t){a.push(t)})).next((function(){return a}))}var i=this.store.getAll(n.range);return new O2((function(e,t){i.onerror=function(e){t(e.target.error)},i.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new O2((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){V1("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new O2((function(n,r){t.onerror=function(e){var t=B2(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new O2((function(r,a){e.onerror=function(e){a(e.target.error)},e.onsuccess=function(e){var a=e.target.result;if(a){var i=new F2(a),o=t(a.primaryKey,a.value,i);if(o instanceof O2){var s=o.catch((function(e){return i.done(),O2.reject(e)}));n.push(s)}i.isDone?r():null===i.K?a.continue():a.continue(i.K)}else r()}})).next((function(){return O2.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function j2(e){return new O2((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=B2(e.target.error);n(t)}}))}var z2=!1;function B2(e){var t=P2.S(gV());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new J1("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return z2||(z2=!0,setTimeout((function(){throw r}),0)),r}}return e}var U2=function(){function e(t,n){Vt(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return Zt(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;V1("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=V1,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!L2(e.t4)){e.next=17;break}V1("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,A2(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),V2=function(){function e(t,n){Vt(this,e),this.localStore=t,this.persistence=n}return Zt(e,[{key:"nt",value:function(){var e=me(ye().mark((function e(){var t,n=this,r=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,a=t,i=!0;return O2.doWhile((function(){return!0===i&&a>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return V1("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,a).next((function(e){a-=e,r.add(t)}));i=!1}))})).next((function(){return t-a}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(a){return r.localStore.localDocuments.getNextDocuments(e,t,a,n).next((function(n){var i=n.changes;return r.localStore.indexManager.updateIndexEntries(e,i).next((function(){return r.rt(a,n)})).next((function(n){return V1("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return i.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=N2(t);C2(r,n)>0&&(n=r)})),new T2(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),W2=function(){function e(t,n){var r=this;Vt(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return Zt(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function G2(e){return null==e}function Z2(e){return 0===e&&1/e==-1/0}function H2(e){return"number"==typeof e&&Number.isInteger(e)&&!Z2(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function q2(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=X2(t)),t=K2(e.get(n),t);return X2(t)}function K2(e,t){for(var n=t,r=e.length,a=0;a<r;a++){var i=e.charAt(a);switch(i){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=i}}return n}function X2(e){return e+"\x01\x01"}function J2(e){var t=e.length;if(q1(t>=2),2===t)return q1("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),v2.emptyPath();for(var n=t-2,r=[],a="",i=0;i<t;){var o=e.indexOf("\x01",i);switch((o<0||o>n)&&H1(),e.charAt(o+1)){case"\x01":var s=e.substring(i,o),u=void 0;0===a.length?u=s:(u=a+=s,a=""),r.push(u);break;case"\x10":a+=e.substring(i,o),a+="\0";break;case"\x11":a+=e.substring(i,o+1);break;default:H1()}i=o+2}return new v2(r)}W2.ct=-1;var Y2=["userId","batchId"];function Q2(e,t){return[e,q2(t)]}function e3(e,t,n){return[e,q2(t),n]}var t3={},n3=["prefixPath","collectionGroup","readTime","documentId"],r3=["prefixPath","collectionGroup","documentId"],a3=["collectionGroup","readTime","prefixPath","documentId"],i3=["canonicalId","targetId"],o3=["targetId","path"],s3=["path","targetId"],u3=["collectionId","parent"],c3=["indexId","uid"],l3=["uid","sequenceNumber"],d3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],f3=["indexId","uid","orderedDocumentKey"],h3=["userId","collectionPath","documentId"],p3=["userId","collectionPath","largestBatchId"],v3=["userId","collectionGroup","largestBatchId"],m3=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),g3=[].concat((0,Le.Z)(m3),["documentOverlays"]),y3=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],b3=y3,x3=[].concat(b3,["indexConfiguration","indexState","indexEntries"]),k3=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this)).at=e,a.currentSequenceNumber=r,a}return Zt(n)}(_2);function w3(e,t){var n=K1(e);return P2.O(n.at,t)}function S3(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function I3(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function N3(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var T3=function(){function e(t,n){Vt(this,e),this.comparator=t,this.root=n||E3.EMPTY}return Zt(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,E3.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,E3.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new C3(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new C3(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new C3(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new C3(this.root,e,this.comparator,!0)}}]),e}(),C3=function(){function e(t,n,r,a){Vt(this,e),this.isReverse=a,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&a&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Zt(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),E3=function(){function e(t,n,r,a,i){Vt(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=a?a:e.EMPTY,this.right=null!=i?i:e.EMPTY,this.size=this.left.size+1+this.right.size}return Zt(e,[{key:"copy",value:function(t,n,r,a,i){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=i?i:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,a=n(e,r.key);return(r=a<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===a?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,a=this;if(n(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===n(t,a.key)){if(a.right.isEmpty())return e.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw H1();if(this.right.isRed())throw H1();var e=this.left.check();if(e!==this.right.check())throw H1();return e+(this.isRed()?0:1)}}]),e}();E3.EMPTY=null,E3.RED=!0,E3.BLACK=!1,E3.EMPTY=new(function(){function e(){Vt(this,e),this.size=0}return Zt(e,[{key:"key",get:function(){throw H1()}},{key:"value",get:function(){throw H1()}},{key:"color",get:function(){throw H1()}},{key:"left",get:function(){throw H1()}},{key:"right",get:function(){throw H1()}},{key:"copy",value:function(e,t,n,r,a){return this}},{key:"insert",value:function(e,t,n){return new E3(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var _3=function(){function e(t){Vt(this,e),this.comparator=t,this.data=new T3(this.comparator)}return Zt(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new A3(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new A3(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var a=n.getNext().key,i=r.getNext().key;if(0!==this.comparator(a,i))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),A3=function(){function e(t){Vt(this,e),this.iter=t}return Zt(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function R3(e){return e.hasNext()?e.getNext():void 0}var O3=function(){function e(t){Vt(this,e),this.fields=t,t.sort(g2.comparator)}return Zt(e,[{key:"unionWith",value:function(t){var n,r=new _3(g2.comparator),a=Ut(this.fields);try{for(a.s();!(n=a.n()).done;){var i=n.value;r=r.add(i)}}catch(Rme){a.e(Rme)}finally{a.f()}var o,s=Ut(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(Rme){s.e(Rme)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Ut(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(Rme){n.e(Rme)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return l2(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),D3=function(e){Mo(n,e);var t=Bo(n);function n(){var e;return Vt(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return Zt(n)}(uy(Error));var P3=function(e){function t(e){Vt(this,t),this.binaryString=e}return Zt(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return c2(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new D3("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();P3.EMPTY_BYTE_STRING=new P3("");var F3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function M3(e){if(q1(!!e),"string"==typeof e){var t=0,n=F3.exec(e);if(q1(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var a=new Date(e);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:L3(e.seconds),nanos:L3(e.nanos)}}function L3(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function $3(e){return"string"==typeof e?P3.fromBase64String(e):P3.fromUint8Array(e)}function j3(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function z3(e){var t=e.mapValue.fields.__previous_value__;return j3(t)?z3(t):t}function B3(e){var t=M3(e.mapValue.fields.__local_write_time__.timestampValue);return new f2(t.seconds,t.nanos)}var U3=Zt((function e(t,n,r,a,i,o,s,u){Vt(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),V3=function(){function e(t,n){Vt(this,e),this.projectId=t,this.database=n||"(default)"}return Zt(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),W3={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},G3={nullValue:"NULL_VALUE"};function Z3(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?j3(e)?4:o4(e)?9007199254740991:10:H1()}function H3(e,t){if(e===t)return!0;var n=Z3(e);if(n!==Z3(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return B3(e).isEqual(B3(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=M3(e.timestampValue),r=M3(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return $3(e.bytesValue).isEqual($3(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return L3(e.geoPointValue.latitude)===L3(t.geoPointValue.latitude)&&L3(e.geoPointValue.longitude)===L3(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return L3(e.integerValue)===L3(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=L3(e.doubleValue),r=L3(t.doubleValue);return n===r?Z2(n)===Z2(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return l2(e.arrayValue.values||[],t.arrayValue.values||[],H3);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(S3(n)!==S3(r))return!1;for(var a in n)if(n.hasOwnProperty(a)&&(void 0===r[a]||!H3(n[a],r[a])))return!1;return!0}(e,t);default:return H1()}}function q3(e,t){return void 0!==(e.values||[]).find((function(e){return H3(e,t)}))}function K3(e,t){if(e===t)return 0;var n=Z3(e),r=Z3(t);if(n!==r)return c2(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return c2(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=L3(e.integerValue||e.doubleValue),r=L3(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return X3(e.timestampValue,t.timestampValue);case 4:return X3(B3(e),B3(t));case 5:return c2(e.stringValue,t.stringValue);case 6:return function(e,t){var n=$3(e),r=$3(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),a=0;a<n.length&&a<r.length;a++){var i=c2(n[a],r[a]);if(0!==i)return i}return c2(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=c2(L3(e.latitude),L3(t.latitude));return 0!==n?n:c2(L3(e.longitude),L3(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],a=0;a<n.length&&a<r.length;++a){var i=K3(n[a],r[a]);if(i)return i}return c2(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===W3.mapValue&&t===W3.mapValue)return 0;if(e===W3.mapValue)return 1;if(t===W3.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),a=t.fields||{},i=Object.keys(a);r.sort(),i.sort();for(var o=0;o<r.length&&o<i.length;++o){var s=c2(r[o],i[o]);if(0!==s)return s;var u=K3(n[r[o]],a[i[o]]);if(0!==u)return u}return c2(r.length,i.length)}(e.mapValue,t.mapValue);default:throw H1()}}function X3(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return c2(e,t);var n=M3(e),r=M3(t),a=c2(n.seconds,r.seconds);return 0!==a?a:c2(n.nanos,r.nanos)}function J3(e){return Y3(e)}function Y3(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=M3(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?$3(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,y2.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,a=Ut(e.values||[]);try{for(a.s();!(t=a.n()).done;){var i=t.value;r?r=!1:n+=",",n+=Y3(i)}}catch(Rme){a.e(Rme)}finally{a.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,a=Ut(Object.keys(e.fields||{}).sort());try{for(a.s();!(t=a.n()).done;){var i=t.value;r?r=!1:n+=",",n+="".concat(i,":").concat(Y3(e.fields[i]))}}catch(Rme){a.e(Rme)}finally{a.f()}return n+"}"}(e.mapValue):H1();var t,n}function Q3(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function e4(e){return!!e&&"integerValue"in e}function t4(e){return!!e&&"arrayValue"in e}function n4(e){return!!e&&"nullValue"in e}function r4(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function a4(e){return!!e&&"mapValue"in e}function i4(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return I3(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=i4(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=i4(e.arrayValue.values[r]);return n}return Object.assign({},e)}function o4(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function s4(e){return"nullValue"in e?G3:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Q3(V3.empty(),y2.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:H1()}function u4(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Q3(V3.empty(),y2.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?W3:H1()}function c4(e,t){var n=K3(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function l4(e,t){var n=K3(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var d4=function(){function e(t){Vt(this,e),this.value=t}return Zt(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!a4(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=i4(t)}},{key:"setAll",value:function(e){var t=this,n=g2.emptyPath(),r={},a=[];e.forEach((function(e,i){if(!n.isImmediateParentOf(i)){var o=t.getFieldsMap(n);t.applyChanges(o,r,a),r={},a=[],n=i.popLast()}e?r[i.lastSegment()]=i4(e):a.push(i.lastSegment())}));var i=this.getFieldsMap(n);this.applyChanges(i,r,a)}},{key:"delete",value:function(e){var t=this.field(e.popLast());a4(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return H3(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];a4(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){I3(t,(function(t,n){return e[t]=n}));var r,a=Ut(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;delete e[i]}}catch(Rme){a.e(Rme)}finally{a.f()}}},{key:"clone",value:function(){return new e(i4(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function f4(e){var t=[];return I3(e.fields,(function(e,n){var r=new g2([e]);if(a4(n)){var a=f4(n.mapValue).fields;if(0===a.length)t.push(r);else{var i,o=Ut(a);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.push(r.child(s))}}catch(Rme){o.e(Rme)}finally{o.f()}}}else t.push(r)})),new O3(t)}var h4=function(){function e(t,n,r,a,i,o,s){Vt(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.createTime=i,this.data=o,this.documentState=s}return Zt(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(h2.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=d4.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=d4.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=h2.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,h2.min(),h2.min(),h2.min(),d4.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,a){return new e(t,1,n,h2.min(),r,a,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,h2.min(),h2.min(),d4.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,h2.min(),h2.min(),d4.empty(),2)}}]),e}(),p4=Zt((function e(t,n){Vt(this,e),this.position=t,this.inclusive=n}));function v4(e,t,n){for(var r=0,a=0;a<e.position.length;a++){var i=t[a],o=e.position[a];if(r=i.field.isKeyField()?y2.comparator(y2.fromName(o.referenceValue),n.key):K3(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function m4(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!H3(e.position[n],t.position[n]))return!1;return!0}var g4=Zt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Vt(this,e),this.field=t,this.dir=n}));function y4(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var b4=Zt((function e(){Vt(this,e)})),x4=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a){var i;return Vt(this,n),(i=t.call(this)).field=e,i.op=r,i.value=a,i}return Zt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(K3(t,this.value)):null!==t&&Z3(this.value)===Z3(t)&&this.matchesComparison(K3(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return H1()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new A4(e,t,r):"array-contains"===t?new P4(e,r):"in"===t?new F4(e,r):"not-in"===t?new M4(e,r):"array-contains-any"===t?new L4(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new R4(e,n):new O4(e,n)}}]),n}(b4),k4=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this)).filters=e,a.op=r,a.ht=null,a}return Zt(n,[{key:"matches",value:function(e){return w4(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=Ut(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(Rme){n.e(Rme)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(b4);function w4(e){return"and"===e.op}function S4(e){return"or"===e.op}function I4(e){return N4(e)&&w4(e)}function N4(e){var t,n=Ut(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof k4)return!1}}catch(Rme){n.e(Rme)}finally{n.f()}return!0}function T4(e){if(e instanceof x4)return e.field.canonicalString()+e.op.toString()+J3(e.value);if(I4(e))return e.filters.map((function(e){return T4(e)})).join(",");var t=e.filters.map((function(e){return T4(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function C4(e,t){return e instanceof x4?function(e,t){return t instanceof x4&&e.op===t.op&&e.field.isEqual(t.field)&&H3(e.value,t.value)}(e,t):e instanceof k4?function(e,t){return t instanceof k4&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&C4(n,t.filters[r])}),!0)}(e,t):void H1()}function E4(e,t){var n=e.filters.concat(t);return k4.create(n,e.op)}function _4(e){return e instanceof x4?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(J3(e.value))}(e):e instanceof k4?function(e){return e.op.toString()+" {"+e.getFilters().map(_4).join(" ,")+"}"}(e):"Filter"}var A4=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a){var i;return Vt(this,n),(i=t.call(this,e,r,a)).key=y2.fromName(a.referenceValue),i}return Zt(n,[{key:"matches",value:function(e){var t=y2.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(x4),R4=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this,e,"in",r)).keys=D4("in",r),a}return Zt(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(x4),O4=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this,e,"not-in",r)).keys=D4("not-in",r),a}return Zt(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(x4);function D4(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return y2.fromName(e.referenceValue)}))}var P4=function(e){Mo(n,e);var t=Bo(n);function n(e,r){return Vt(this,n),t.call(this,e,"array-contains",r)}return Zt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return t4(t)&&q3(t.arrayValue,this.value)}}]),n}(x4),F4=function(e){Mo(n,e);var t=Bo(n);function n(e,r){return Vt(this,n),t.call(this,e,"in",r)}return Zt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&q3(this.value.arrayValue,t)}}]),n}(x4),M4=function(e){Mo(n,e);var t=Bo(n);function n(e,r){return Vt(this,n),t.call(this,e,"not-in",r)}return Zt(n,[{key:"matches",value:function(e){if(q3(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!q3(this.value.arrayValue,t)}}]),n}(x4),L4=function(e){Mo(n,e);var t=Bo(n);function n(e,r){return Vt(this,n),t.call(this,e,"array-contains-any",r)}return Zt(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!t4(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return q3(t.value.arrayValue,e)}))}}]),n}(x4),$4=Zt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Vt(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=i,this.startAt=o,this.endAt=s,this.ft=null}));function j4(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new $4(e,t,n,r,a,i,o)}function z4(e){var t=K1(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return T4(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),G2(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return J3(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return J3(e)})).join(",")),t.ft=n}return t.ft}function B4(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!y4(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!C4(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!m4(e.startAt,t.startAt)&&m4(e.endAt,t.endAt)}function U4(e){return y2.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function V4(e,t){return e.filters.filter((function(e){return e instanceof x4&&e.field.isEqual(t)}))}function W4(e,t,n){var r,a=G3,i=!0,o=Ut(V4(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=G3,c=!0;switch(s.op){case"<":case"<=":u=s4(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=G3}c4({value:a,inclusive:i},{value:u,inclusive:c})<0&&(a=u,i=c)}}catch(Rme){o.e(Rme)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var d=n.position[l];c4({value:a,inclusive:i},{value:d,inclusive:n.inclusive})<0&&(a=d,i=n.inclusive);break}return{value:a,inclusive:i}}function G4(e,t,n){var r,a=W3,i=!0,o=Ut(V4(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=W3,c=!0;switch(s.op){case">=":case">":u=u4(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=W3}l4({value:a,inclusive:i},{value:u,inclusive:c})>0&&(a=u,i=c)}}catch(Rme){o.e(Rme)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var d=n.position[l];l4({value:a,inclusive:i},{value:d,inclusive:n.inclusive})>0&&(a=d,i=n.inclusive);break}return{value:a,inclusive:i}}var Z4=Zt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Vt(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.dt=null,this.wt=null,this.startAt,this.endAt}));function H4(e,t,n,r,a,i,o,s){return new Z4(e,t,n,r,a,i,o,s)}function q4(e){return new Z4(e)}function K4(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function X4(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function J4(e){var t,n=Ut(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(Rme){n.e(Rme)}finally{n.f()}return null}function Y4(e){return null!==e.collectionGroup}function Q4(e){var t=K1(e);if(null===t.dt){t.dt=[];var n=J4(t),r=X4(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new g4(n)),t.dt.push(new g4(g2.keyField(),"asc"));else{var a,i=!1,o=Ut(t.explicitOrderBy);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.dt.push(s),s.field.isKeyField()&&(i=!0)}}catch(Rme){o.e(Rme)}finally{o.f()}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new g4(g2.keyField(),u))}}}return t.dt}function e5(e){var t=K1(e);if(!t.wt)if("F"===t.limitType)t.wt=j4(t.path,t.collectionGroup,Q4(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],a=Ut(Q4(t));try{for(a.s();!(n=a.n()).done;){var i=n.value,o="desc"===i.dir?"asc":"desc";r.push(new g4(i.field,o))}}catch(Rme){a.e(Rme)}finally{a.f()}var s=t.endAt?new p4(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new p4(t.startAt.position,t.startAt.inclusive):null;t.wt=j4(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.wt}function t5(e,t){t.getFirstInequalityField(),J4(e);var n=e.filters.concat([t]);return new Z4(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function n5(e,t,n){return new Z4(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function r5(e,t){return B4(e5(e),e5(t))&&e.limitType===t.limitType}function a5(e){return"".concat(z4(e5(e)),"|lt:").concat(e.limitType)}function i5(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return _4(e)})).join(", "),"]")),G2(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return J3(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return J3(e)})).join(",")),"Target(".concat(t,")")}(e5(e)),"; limitType=").concat(e.limitType,")")}function o5(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):y2.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Ut(Q4(e));try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!a.field.isKeyField()&&null===t.data.field(a.field))return!1}}catch(Rme){r.e(Rme)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Ut(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(Rme){r.e(Rme)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=v4(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Q4(e),t))&&!(e.endAt&&!function(e,t,n){var r=v4(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Q4(e),t))}(e,t)}function s5(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function u5(e){return function(t,n){var r,a=!1,i=Ut(Q4(e));try{for(i.s();!(r=i.n()).done;){var o=r.value,s=c5(o,t,n);if(0!==s)return s;a=a||o.field.isKeyField()}}catch(Rme){i.e(Rme)}finally{i.f()}return 0}}function c5(e,t,n){var r=e.field.isKeyField()?y2.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),a=n.data.field(e);return null!==r&&null!==a?K3(r,a):H1()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return H1()}}var l5=function(){function e(t,n){Vt(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Zt(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,a=Ut(n);try{for(a.s();!(r=a.n()).done;){var i=(0,C.Z)(r.value,2),o=i[0],s=i[1];if(this.equalsFn(o,e))return s}}catch(Rme){a.e(Rme)}finally{a.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){I3(this.inner,(function(t,n){var r,a=Ut(n);try{for(a.s();!(r=a.n()).done;){var i=(0,C.Z)(r.value,2),o=i[0],s=i[1];e(o,s)}}catch(Rme){a.e(Rme)}finally{a.f()}}))}},{key:"isEmpty",value:function(){return N3(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),d5=new T3(y2.comparator);function f5(){return d5}var h5=new T3(y2.comparator);function p5(){for(var e=h5,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];e=e.insert(o.key,o)}return e}function v5(e){var t=h5;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function m5(){return y5()}function g5(){return y5()}function y5(){return new l5((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var b5=new T3(y2.comparator),x5=new _3(y2.comparator);function k5(){for(var e=x5,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];e=e.add(o)}return e}var w5=new _3(c2);function S5(){return w5}function I5(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Z2(t)?"-0":t}}function N5(e){return{integerValue:""+e}}function T5(e,t){return H2(t)?N5(t):I5(e,t)}var C5=Zt((function e(){Vt(this,e),this._=void 0}));function E5(e,t,n){return e instanceof R5?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof O5?D5(e,t):e instanceof P5?F5(e,t):function(e,t){var n=A5(e,t),r=L5(n)+L5(e._t);return e4(n)&&e4(e._t)?N5(r):I5(e.serializer,r)}(e,t)}function _5(e,t,n){return e instanceof O5?D5(e,t):e instanceof P5?F5(e,t):n}function A5(e,t){return e instanceof M5?e4(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var R5=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n)}(C5),O5=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).elements=e,r}return Zt(n)}(C5);function D5(e,t){var n,r=$5(t),a=Ut(e.elements);try{var i=function(){var e=n.value;r.some((function(t){return H3(t,e)}))||r.push(e)};for(a.s();!(n=a.n()).done;)i()}catch(Rme){a.e(Rme)}finally{a.f()}return{arrayValue:{values:r}}}var P5=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).elements=e,r}return Zt(n)}(C5);function F5(e,t){var n,r=$5(t),a=Ut(e.elements);try{var i=function(){var e=n.value;r=r.filter((function(t){return!H3(t,e)}))};for(a.s();!(n=a.n()).done;)i()}catch(Rme){a.e(Rme)}finally{a.f()}return{arrayValue:{values:r}}}var M5=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this)).serializer=e,a._t=r,a}return Zt(n)}(C5);function L5(e){return L3(e.integerValue||e.doubleValue)}function $5(e){return t4(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var j5=Zt((function e(t,n){Vt(this,e),this.field=t,this.transform=n}));var z5=Zt((function e(t,n){Vt(this,e),this.version=t,this.transformResults=n})),B5=function(){function e(t,n){Vt(this,e),this.updateTime=t,this.exists=n}return Zt(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function U5(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var V5=Zt((function e(){Vt(this,e)}));function W5(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new n6(e.key,B5.none()):new K5(e.key,e.data,B5.none());var n,r=e.data,a=d4.empty(),i=new _3(g2.comparator),o=Ut(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!i.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?a.delete(s):a.set(s,u),i=i.add(s)}}}catch(Rme){o.e(Rme)}finally{o.f()}return new X5(e.key,a,new O3(i.toArray()),B5.none())}function G5(e,t,n){e instanceof K5?function(e,t,n){var r=e.value.clone(),a=Y5(e.fieldTransforms,t,n.transformResults);r.setAll(a),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof X5?function(e,t,n){if(U5(e.precondition,t)){var r=Y5(e.fieldTransforms,t,n.transformResults),a=t.data;a.setAll(J5(e)),a.setAll(r),t.convertToFoundDocument(n.version,a).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Z5(e,t,n,r){return e instanceof K5?function(e,t,n,r){if(!U5(e.precondition,t))return n;var a=e.value.clone(),i=Q5(e.fieldTransforms,r,t);return a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null}(e,t,n,r):e instanceof X5?function(e,t,n,r){if(!U5(e.precondition,t))return n;var a=Q5(e.fieldTransforms,r,t),i=t.data;return i.setAll(J5(e)),i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return U5(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function H5(e,t){var n,r=null,a=Ut(e.fieldTransforms);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=t.data.field(i.field),s=A5(i.transform,o||null);null!=s&&(null===r&&(r=d4.empty()),r.set(i.field,s))}}catch(Rme){a.e(Rme)}finally{a.f()}return r||null}function q5(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&l2(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof O5&&t instanceof O5||e instanceof P5&&t instanceof P5?l2(e.elements,t.elements,H3):e instanceof M5&&t instanceof M5?H3(e._t,t._t):e instanceof R5&&t instanceof R5}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var K5=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Vt(this,n),(i=t.call(this)).key=e,i.value=r,i.precondition=a,i.fieldTransforms=o,i.type=0,i}return Zt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(V5),X5=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a,i){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Vt(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=a,o.precondition=i,o.fieldTransforms=s,o.type=1,o}return Zt(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(V5);function J5(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Y5(e,t,n){var r=new Map;q1(e.length===n.length);for(var a=0;a<n.length;a++){var i=e[a],o=i.transform,s=t.data.field(i.field);r.set(i.field,_5(o,s,n[a]))}return r}function Q5(e,t,n){var r,a=new Map,i=Ut(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);a.set(o.field,E5(s,u,t))}}catch(Rme){i.e(Rme)}finally{i.f()}return a}var e6,t6,n6=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this)).key=e,a.precondition=r,a.type=2,a.fieldTransforms=[],a}return Zt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(V5),r6=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this)).key=e,a.precondition=r,a.type=3,a.fieldTransforms=[],a}return Zt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(V5),a6=function(){function e(t,n,r,a){Vt(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}return Zt(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var a=this.mutations[r];a.key.isEqual(e.key)&&G5(a,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Ut(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.key.isEqual(e.key)&&(t=Z5(a,e,t,this.localWriteTime))}}catch(Rme){r.e(Rme)}finally{r.f()}var i,o=Ut(this.mutations);try{for(o.s();!(i=o.n()).done;){var s=i.value;s.key.isEqual(e.key)&&(t=Z5(s,e,t,this.localWriteTime))}}catch(Rme){o.e(Rme)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=g5();return this.mutations.forEach((function(a){var i=e.get(a.key),o=i.overlayedDocument,s=n.applyToLocalView(o,i.mutatedFields),u=W5(o,s=t.has(a.key)?null:s);null!==u&&r.set(a.key,u),o.isValidDocument()||o.convertToNoDocument(h2.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),k5())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&l2(this.mutations,e.mutations,(function(e,t){return q5(e,t)}))&&l2(this.baseMutations,e.baseMutations,(function(e,t){return q5(e,t)}))}}]),e}(),i6=function(){function e(t,n,r,a){Vt(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}return Zt(e,null,[{key:"from",value:function(t,n,r){q1(t.mutations.length===r.length);for(var a=b5,i=t.mutations,o=0;o<i.length;o++)a=a.insert(i[o].key,r[o].version);return new e(t,n,r,a)}}]),e}(),o6=function(){function e(t,n){Vt(this,e),this.largestBatchId=t,this.mutation=n}return Zt(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),s6=Zt((function e(t){Vt(this,e),this.count=t}));function u6(e){switch(e){default:return H1();case X1.CANCELLED:case X1.UNKNOWN:case X1.DEADLINE_EXCEEDED:case X1.RESOURCE_EXHAUSTED:case X1.INTERNAL:case X1.UNAVAILABLE:case X1.UNAUTHENTICATED:return!1;case X1.INVALID_ARGUMENT:case X1.NOT_FOUND:case X1.ALREADY_EXISTS:case X1.PERMISSION_DENIED:case X1.FAILED_PRECONDITION:case X1.ABORTED:case X1.OUT_OF_RANGE:case X1.UNIMPLEMENTED:case X1.DATA_LOSS:return!0}}function c6(e){if(void 0===e)return W1("GRPC error has no .code"),X1.UNKNOWN;switch(e){case e6.OK:return X1.OK;case e6.CANCELLED:return X1.CANCELLED;case e6.UNKNOWN:return X1.UNKNOWN;case e6.DEADLINE_EXCEEDED:return X1.DEADLINE_EXCEEDED;case e6.RESOURCE_EXHAUSTED:return X1.RESOURCE_EXHAUSTED;case e6.INTERNAL:return X1.INTERNAL;case e6.UNAVAILABLE:return X1.UNAVAILABLE;case e6.UNAUTHENTICATED:return X1.UNAUTHENTICATED;case e6.INVALID_ARGUMENT:return X1.INVALID_ARGUMENT;case e6.NOT_FOUND:return X1.NOT_FOUND;case e6.ALREADY_EXISTS:return X1.ALREADY_EXISTS;case e6.PERMISSION_DENIED:return X1.PERMISSION_DENIED;case e6.FAILED_PRECONDITION:return X1.FAILED_PRECONDITION;case e6.ABORTED:return X1.ABORTED;case e6.OUT_OF_RANGE:return X1.OUT_OF_RANGE;case e6.UNIMPLEMENTED:return X1.UNIMPLEMENTED;case e6.DATA_LOSS:return X1.DATA_LOSS;default:return H1()}}(t6=e6||(e6={}))[t6.OK=0]="OK",t6[t6.CANCELLED=1]="CANCELLED",t6[t6.UNKNOWN=2]="UNKNOWN",t6[t6.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t6[t6.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t6[t6.NOT_FOUND=5]="NOT_FOUND",t6[t6.ALREADY_EXISTS=6]="ALREADY_EXISTS",t6[t6.PERMISSION_DENIED=7]="PERMISSION_DENIED",t6[t6.UNAUTHENTICATED=16]="UNAUTHENTICATED",t6[t6.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t6[t6.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t6[t6.ABORTED=10]="ABORTED",t6[t6.OUT_OF_RANGE=11]="OUT_OF_RANGE",t6[t6.UNIMPLEMENTED=12]="UNIMPLEMENTED",t6[t6.INTERNAL=13]="INTERNAL",t6[t6.UNAVAILABLE=14]="UNAVAILABLE",t6[t6.DATA_LOSS=15]="DATA_LOSS";var l6=function(){function e(){Vt(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return Zt(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return d6}},{key:"getOrCreateInstance",value:function(){return null===d6&&(d6=new e),d6}}]),e}(),d6=null,f6=function(){function e(t,n,r,a,i){Vt(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=i}return Zt(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var a=new Map;return a.set(t,h6.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(h2.min(),a,S5(),f5(),k5())}}]),e}(),h6=function(){function e(t,n,r,a,i){Vt(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=i}return Zt(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,k5(),k5(),k5())}}]),e}(),p6=Zt((function e(t,n,r,a){Vt(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=a})),v6=Zt((function e(t,n){Vt(this,e),this.targetId=t,this.Et=n})),m6=Zt((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P3.EMPTY_BYTE_STRING,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Vt(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a})),g6=function(){function e(){Vt(this,e),this.At=0,this.Rt=x6(),this.vt=P3.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}return Zt(e,[{key:"current",get:function(){return this.bt}},{key:"resumeToken",get:function(){return this.vt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.Pt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}},{key:"Ct",value:function(){var e=k5(),t=k5(),n=k5();return this.Rt.forEach((function(r,a){switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:H1()}})),new h6(this.vt,this.bt,e,t,n)}},{key:"xt",value:function(){this.Pt=!1,this.Rt=x6()}},{key:"Nt",value:function(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"$t",value:function(){this.At-=1}},{key:"Mt",value:function(){this.Pt=!0,this.bt=!0}}]),e}(),y6=function(){function e(t){Vt(this,e),this.Ft=t,this.Bt=new Map,this.Lt=f5(),this.qt=b6(),this.Ut=new _3(c2)}return Zt(e,[{key:"Kt",value:function(e){var t,n=Ut(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(Rme){n.e(Rme)}finally{n.f()}var a,i=Ut(e.removedTargetIds);try{for(i.s();!(a=i.n()).done;){var o=a.value;this.Qt(o,e.key,e.Tt)}}catch(Rme){i.e(Rme)}finally{i.f()}}},{key:"zt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.jt(n);switch(e.state){case 0:t.Wt(n)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||t.removeTarget(n);break;case 3:t.Wt(n)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:t.Wt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:H1()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.Wt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t,n=e.targetId,r=e.Et.count,a=this.Yt(n);if(a){var i=a.target;if(U4(i))if(0===r){var o=new y2(i.path);this.Qt(n,o,h4.newNoDocument(o,h2.min()))}else q1(1===r);else{var s=this.Zt(n);s!==r&&(this.Ht(n),this.Ut=this.Ut.add(n),null===(t=l6.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:s,existenceFilterCount:e.Et.count}))}}}},{key:"Xt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,a){var i=t.Yt(a);if(i){if(r.current&&U4(i.target)){var o=new y2(i.target.path);null!==t.Lt.get(o)||t.te(a,o)||t.Qt(a,o,h4.newNoDocument(o,e))}r.St&&(n.set(a,r.Ct()),r.xt())}}));var r=k5();this.qt.forEach((function(e,n){var a=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(a=!1,!1)})),a&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var a=new f6(e,n,this.Ut,this.Lt,r);return this.Lt=f5(),this.qt=b6(),this.Ut=new _3(c2),a}},{key:"Gt",value:function(e,t){if(this.Wt(e)){var n=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.Wt(e)){var r=this.jt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Zt",value:function(e){var t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.jt(e).Ot()}},{key:"jt",value:function(e){var t=this.Bt.get(e);return t||(t=new g6,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new _3(c2),this.qt=this.qt.insert(e,t)),t}},{key:"Wt",value:function(e){var t=null!==this.Yt(e);return t||V1("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new g6),this.Ft.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}]),e}();function b6(){return new T3(y2.comparator)}function x6(){return new T3(y2.comparator)}var k6={asc:"ASCENDING",desc:"DESCENDING"},w6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},S6={and:"AND",or:"OR"},I6=Zt((function e(t,n){Vt(this,e),this.databaseId=t,this.useProto3Json=n}));function N6(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function T6(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function C6(e,t){return N6(e,t.toTimestamp())}function E6(e){return q1(!!e),h2.fromTimestamp(function(e){var t=M3(e);return new f2(t.seconds,t.nanos)}(e))}function _6(e,t){return function(e){return new v2(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function A6(e){var t=v2.fromString(e);return q1(Q6(t)),t}function R6(e,t){return _6(e.databaseId,t.path)}function O6(e,t){var n=A6(t);if(n.get(1)!==e.databaseId.projectId)throw new J1(X1.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new J1(X1.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new y2(M6(n))}function D6(e,t){return _6(e.databaseId,t)}function P6(e){var t=A6(e);return 4===t.length?v2.emptyPath():M6(t)}function F6(e){return new v2(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function M6(e){return q1(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function L6(e,t,n){return{name:R6(e,t),fields:n.value.mapValue.fields}}function $6(e,t,n){var r=O6(e,t.name),a=E6(t.updateTime),i=t.createTime?E6(t.createTime):h2.min(),o=new d4({mapValue:{fields:t.fields}}),s=h4.newFoundDocument(r,a,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function j6(e,t){return"found"in t?function(e,t){q1(!!t.found),t.found.name,t.found.updateTime;var n=O6(e,t.found.name),r=E6(t.found.updateTime),a=t.found.createTime?E6(t.found.createTime):h2.min(),i=new d4({mapValue:{fields:t.found.fields}});return h4.newFoundDocument(n,r,a,i)}(e,t):"missing"in t?function(e,t){q1(!!t.missing),q1(!!t.readTime);var n=O6(e,t.missing),r=E6(t.readTime);return h4.newNoDocument(n,r)}(e,t):H1()}function z6(e,t){var n;if(t instanceof K5)n={update:L6(e,t.key,t.value)};else if(t instanceof n6)n={delete:R6(e,t.key)};else if(t instanceof X5)n={update:L6(e,t.key,t.data),updateMask:Y6(t.fieldMask)};else{if(!(t instanceof r6))return H1();n={verify:R6(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof R5)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof O5)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof P5)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof M5)return{fieldPath:t.field.canonicalString(),increment:n._t};throw H1()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:C6(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:H1()}(e,t.precondition)),n}function B6(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?B5.updateTime(E6(e.updateTime)):void 0!==e.exists?B5.exists(e.exists):B5.none()}(t.currentDocument):B5.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)q1("REQUEST_TIME"===t.setToServerValue),n=new R5;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new O5(r)}else if("removeAllFromArray"in t){var a=t.removeAllFromArray.values||[];n=new P5(a)}else"increment"in t?n=new M5(e,t.increment):H1();var i=g2.fromServerFormat(t.fieldPath);return new j5(i,n)}(e,t)})):[];if(t.update){t.update.name;var a=O6(e,t.update.name),i=new d4({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new O3(t.map((function(e){return g2.fromServerFormat(e)})))}(t.updateMask);return new X5(a,i,o,n,r)}return new K5(a,i,n,r)}if(t.delete){var s=O6(e,t.delete);return new n6(s,n)}if(t.verify){var u=O6(e,t.verify);return new r6(u,n)}return H1()}function U6(e,t){return{documents:[D6(e,t.path)]}}function V6(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=D6(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=D6(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var a=function(e){if(0!==e.length)return J6(k4.create(e,"and"))}(t.filters);a&&(n.structuredQuery.where=a);var i=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:K6(e.field),direction:Z6(e.dir)}}(e)}))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);var o,s=function(e,t){return e.useProto3Json||G2(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function W6(e){var t=P6(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,a=null;if(r>0){q1(1===r);var i=n.from[0];i.allDescendants?a=i.collectionId:t=t.child(i.collectionId)}var o=[];n.where&&(o=function(e){var t=G6(e);return t instanceof k4&&I4(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new g4(X6(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return G2(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new p4(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new p4(n,t)}(n.endAt)),H4(t,a,s,o,u,"F",c,l)}function G6(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=X6(e.unaryFilter.field);return x4.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=X6(e.unaryFilter.field);return x4.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=X6(e.unaryFilter.field);return x4.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var a=X6(e.unaryFilter.field);return x4.create(a,"!=",{nullValue:"NULL_VALUE"});default:return H1()}}(e):void 0!==e.fieldFilter?function(e){return x4.create(X6(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H1()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return k4.create(e.compositeFilter.filters.map((function(e){return G6(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return H1()}}(e.compositeFilter.op))}(e):H1()}function Z6(e){return k6[e]}function H6(e){return w6[e]}function q6(e){return S6[e]}function K6(e){return{fieldPath:e.canonicalString()}}function X6(e){return g2.fromServerFormat(e.fieldPath)}function J6(e){return e instanceof x4?function(e){if("=="===e.op){if(r4(e.value))return{unaryFilter:{field:K6(e.field),op:"IS_NAN"}};if(n4(e.value))return{unaryFilter:{field:K6(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(r4(e.value))return{unaryFilter:{field:K6(e.field),op:"IS_NOT_NAN"}};if(n4(e.value))return{unaryFilter:{field:K6(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:K6(e.field),op:H6(e.op),value:e.value}}}(e):e instanceof k4?function(e){var t=e.getFilters().map((function(e){return J6(e)}));return 1===t.length?t[0]:{compositeFilter:{op:q6(e.op),filters:t}}}(e):H1()}function Y6(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Q6(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var e8=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h2.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:h2.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:P3.EMPTY_BYTE_STRING;Vt(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return Zt(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),t8=Zt((function e(t){Vt(this,e),this.se=t}));function n8(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:r8(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:R6(e,t.key),fields:t.data.value.mapValue.fields,updateTime:N6(e,t.version.toTimestamp()),createTime:N6(e,t.createTime.toTimestamp())}}(e.se,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:a8(t.version)};else{if(!t.isUnknownDocument())return H1();r.unknownDocument={path:n.path.toArray(),version:a8(t.version)}}return r}function r8(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function a8(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function i8(e){var t=new f2(e.seconds,e.nanoseconds);return h2.fromTimestamp(t)}function o8(e,t){for(var n=(t.baseMutations||[]).map((function(t){return B6(e.se,t)})),r=0;r<t.mutations.length-1;++r){var a=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var i=t.mutations[r+1];a.updateTransforms=i.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return B6(e.se,t)})),s=f2.fromMillis(t.localWriteTimeMs);return new a6(t.batchId,s,n,o)}function s8(e){var t,n,r=i8(e.readTime),a=void 0!==e.lastLimboFreeSnapshotVersion?i8(e.lastLimboFreeSnapshotVersion):h2.min();return void 0!==e.query.documents?(q1(1===(n=e.query).documents.length),t=e5(q4(P6(n.documents[0])))):t=function(e){return e5(W6(e))}(e.query),new e8(t,e.targetId,0,e.lastListenSequenceNumber,r,a,P3.fromBase64String(e.resumeToken))}function u8(e,t){var n,r=a8(t.snapshotVersion),a=a8(t.lastLimboFreeSnapshotVersion);n=U4(t.target)?U6(e.se,t.target):V6(e.se,t.target);var i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:z4(t.target),readTime:r,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:n}}function c8(e){var t=W6({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?n5(t,t.limit,"L"):t}function l8(e,t){return new o6(t.largestBatchId,B6(e.se,t.overlayMutation))}function d8(e,t){var n=t.path.lastSegment();return[e,q2(t.path.popLast()),n]}function f8(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:a8(r.readTime),documentKey:q2(r.documentKey.path),largestBatchId:r.largestBatchId}}var h8=function(){function e(){Vt(this,e)}return Zt(e,[{key:"getBundleMetadata",value:function(e,t){return p8(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:i8(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return p8(e).put({bundleId:(n=t).id,createTime:a8(E6(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return v8(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:c8(t.bundledQuery),readTime:i8(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return v8(e).put(function(e){return{name:e.name,readTime:a8(E6(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function p8(e){return w3(e,"bundles")}function v8(e){return w3(e,"namedQueries")}var m8=function(){function e(t,n){Vt(this,e),this.serializer=t,this.userId=n}return Zt(e,[{key:"getOverlay",value:function(e,t){var n=this;return g8(e).get(d8(this.userId,t)).next((function(e){return e?l8(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=m5();return O2.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,a=[];return n.forEach((function(n,i){var o=new o6(t,i);a.push(r.re(e,o))})),O2.waitFor(a)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,a=new Set;t.forEach((function(e){return a.add(q2(e.getCollectionPath()))}));var i=[];return a.forEach((function(t){var a=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);i.push(g8(e).J("collectionPathOverlayIndex",a))})),O2.waitFor(i)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,a=m5(),i=q2(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return g8(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=Ut(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,o=l8(r.serializer,i);a.set(o.getKey(),o)}}catch(Rme){n.e(Rme)}finally{n.f()}return a}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var a,i=this,o=m5(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return g8(e).Z({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=l8(i.serializer,t);o.size()<r||s.largestBatchId===a?(o.set(s.getKey(),s),a=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"re",value:function(e,t){return g8(e).put(function(e,t,n){var r=d8(t,n.mutation.key),a=(0,C.Z)(r,3);a[0];return{userId:t,collectionPath:a[1],documentId:a[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:z6(e.se,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"ie",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function g8(e){return w3(e,"documentOverlays")}var y8=function(){function e(){Vt(this,e)}return Zt(e,[{key:"oe",value:function(e,t){this.ue(e,t),t.ce()}},{key:"ue",value:function(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(L3(e.integerValue));else if("doubleValue"in e){var n=L3(e.doubleValue);isNaN(n)?this.ae(t,13):(this.ae(t,15),Z2(n)?t.he(0):t.he(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le("".concat(r.seconds||"")),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we($3(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var a=e.geoPointValue;this.ae(t,45),t.he(a.latitude||0),t.he(a.longitude||0)}else"mapValue"in e?o4(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):H1()}},{key:"fe",value:function(e,t){this.ae(t,25),this.ye(e,t)}},{key:"ye",value:function(e,t){t.le(e)}},{key:"me",value:function(e,t){var n=e.fields||{};this.ae(t,55);for(var r=0,a=Object.keys(n);r<a.length;r++){var i=a[r];this.fe(i,t),this.ue(n[i],t)}}},{key:"ge",value:function(e,t){var n=e.values||[];this.ae(t,50);var r,a=Ut(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.ue(i,t)}}catch(Rme){a.e(Rme)}finally{a.f()}}},{key:"_e",value:function(e,t){var n=this;this.ae(t,37),y2.fromName(e).path.forEach((function(e){n.ae(t,60),n.ye(e,t)}))}},{key:"ae",value:function(e,t){e.he(t)}},{key:"de",value:function(e){e.he(2)}}]),e}();function b8(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function x8(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=b8(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}y8.pe=new y8;var k8=function(){function e(){Vt(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Zt(e,[{key:"Ie",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Te(n.value),n=t.next();this.Ee()}},{key:"Ae",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Re(n.value),n=t.next();this.ve()}},{key:"be",value:function(e){var t,n=Ut(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=r.charCodeAt(0);if(a<128)this.Te(a);else if(a<2048)this.Te(960|a>>>6),this.Te(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Te(480|a>>>12),this.Te(128|63&a>>>6),this.Te(128|63&a);else{var i=r.codePointAt(0);this.Te(240|i>>>18),this.Te(128|63&i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i)}}}catch(Rme){n.e(Rme)}finally{n.f()}this.Ee()}},{key:"Pe",value:function(e){var t,n=Ut(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=r.charCodeAt(0);if(a<128)this.Re(a);else if(a<2048)this.Re(960|a>>>6),this.Re(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.Re(480|a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a);else{var i=r.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}}catch(Rme){n.e(Rme)}finally{n.f()}this.ve()}},{key:"Ve",value:function(e){var t=this.Se(e),n=x8(t);this.De(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ce",value:function(e){var t=this.Se(e),n=x8(t);this.De(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"xe",value:function(){this.Ne(255),this.Ne(255)}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Se",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Te",value:function(e){var t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}},{key:"Re",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}},{key:"Ee",value:function(){this.Ne(0),this.Ne(1)}},{key:"ve",value:function(){this.Oe(0),this.Oe(1)}},{key:"Ne",value:function(e){this.De(1),this.buffer[this.position++]=e}},{key:"Oe",value:function(e){this.De(1),this.buffer[this.position++]=~e}},{key:"De",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),w8=function(){function e(t){Vt(this,e),this.Me=t}return Zt(e,[{key:"we",value:function(e){this.Me.Ie(e)}},{key:"le",value:function(e){this.Me.be(e)}},{key:"he",value:function(e){this.Me.Ve(e)}},{key:"ce",value:function(){this.Me.xe()}}]),e}(),S8=function(){function e(t){Vt(this,e),this.Me=t}return Zt(e,[{key:"we",value:function(e){this.Me.Ae(e)}},{key:"le",value:function(e){this.Me.Pe(e)}},{key:"he",value:function(e){this.Me.Ce(e)}},{key:"ce",value:function(){this.Me.ke()}}]),e}(),I8=function(){function e(){Vt(this,e),this.Me=new k8,this.Fe=new w8(this.Me),this.Be=new S8(this.Me)}return Zt(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Le",value:function(e){return 0===e?this.Fe:this.Be}},{key:"$e",value:function(){return this.Me.$e()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),N8=function(){function e(t,n,r,a){Vt(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=a}return Zt(e,[{key:"qe",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function T8(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=C8(e.arrayValue,t.arrayValue))?n:0!==(n=C8(e.directionalValue,t.directionalValue))?n:y2.comparator(e.documentKey,t.documentKey)}function C8(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var E8=function(){function e(t){Vt(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.Ke=[];var n,r=Ut(t.filters);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.isInequality()?this.Ge=a:this.Ke.push(a)}}catch(Rme){r.e(Rme)}finally{r.f()}}return Zt(e,[{key:"Qe",value:function(e){q1(e.collectionGroup===this.collectionId);var t=x2(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=k2(e),r=0,a=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ge){var i=n[r];if(!this.je(this.Ge,i)||!this.We(this.Ue[a++],i))return!1;++r}for(;r<n.length;++r){var o=n[r];if(a>=this.Ue.length||!this.We(this.Ue[a++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=Ut(this.Ke);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(Rme){n.e(Rme)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function _8(e){var t,n;if(q1(e instanceof x4||e instanceof k4),e instanceof x4){if(e instanceof F4){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return x4.create(e.field,"==",t)})))||[];return k4.create(r,"or")}return e}var a=e.filters.map((function(e){return _8(e)}));return k4.create(a,e.op)}function A8(e){if(0===e.getFilters().length)return[];var t=P8(_8(e));return q1(D8(t)),R8(t)||O8(t)?[t]:t.getFilters()}function R8(e){return e instanceof x4}function O8(e){return e instanceof k4&&I4(e)}function D8(e){return R8(e)||O8(e)||function(e){if(e instanceof k4&&S4(e)){var t,n=Ut(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!R8(r)&&!O8(r))return!1}}catch(Rme){n.e(Rme)}finally{n.f()}return!0}return!1}(e)}function P8(e){if(q1(e instanceof x4||e instanceof k4),e instanceof x4)return e;if(1===e.filters.length)return P8(e.filters[0]);var t=e.filters.map((function(e){return P8(e)})),n=k4.create(t,e.op);return D8(n=L8(n))?n:(q1(n instanceof k4),q1(w4(n)),q1(n.filters.length>1),n.filters.reduce((function(e,t){return F8(e,t)})))}function F8(e,t){var n;return q1(e instanceof x4||e instanceof k4),q1(t instanceof x4||t instanceof k4),n=e instanceof x4?t instanceof x4?function(e,t){return k4.create([e,t],"and")}(e,t):M8(e,t):t instanceof x4?M8(t,e):function(e,t){if(q1(e.filters.length>0&&t.filters.length>0),w4(e)&&w4(t))return E4(e,t.getFilters());var n=S4(e)?e:t,r=S4(e)?t:e,a=n.filters.map((function(e){return F8(e,r)}));return k4.create(a,"or")}(e,t),L8(n)}function M8(e,t){if(w4(t))return E4(t,e.getFilters());var n=t.filters.map((function(t){return F8(e,t)}));return k4.create(n,"or")}function L8(e){if(q1(e instanceof x4||e instanceof k4),e instanceof x4)return e;var t=e.getFilters();if(1===t.length)return L8(t[0]);if(N4(e))return e;var n=t.map((function(e){return L8(e)})),r=[];return n.forEach((function(t){t instanceof x4?r.push(t):t instanceof k4&&(t.op===e.op?r.push.apply(r,(0,Le.Z)(t.filters)):r.push(t))})),1===r.length?r[0]:k4.create(r,e.op)}var $8=function(){function e(){Vt(this,e),this.He=new j8}return Zt(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.He.add(t),O2.resolve()}},{key:"getCollectionParents",value:function(e,t){return O2.resolve(this.He.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return O2.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return O2.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return O2.resolve(null)}},{key:"getIndexType",value:function(e,t){return O2.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return O2.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return O2.resolve(null)}},{key:"getMinOffset",value:function(e,t){return O2.resolve(T2.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return O2.resolve(T2.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return O2.resolve()}},{key:"updateIndexEntries",value:function(e,t){return O2.resolve()}}]),e}(),j8=function(){function e(){Vt(this,e),this.index={}}return Zt(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new _3(v2.comparator),a=!r.has(n);return this.index[t]=r.add(n),a}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new _3(v2.comparator)).toArray()}}]),e}(),z8=new Uint8Array(0),B8=function(){function e(t,n){Vt(this,e),this.user=t,this.databaseId=n,this.Je=new j8,this.Ye=new l5((function(e){return z4(e)}),(function(e,t){return B4(e,t)})),this.uid=t.uid||""}return Zt(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Je.has(t)){var r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((function(){n.Je.add(t)}));var i={collectionId:r,parent:q2(a)};return U8(e).put(i)}return O2.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[d2(t),""],!1,!0);return U8(e).j(r).next((function(e){var r,a=Ut(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i.collectionId!==t)break;n.push(J2(i.parent))}}catch(Rme){a.e(Rme)}finally{a.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=W8(e),a=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete a.indexId;var i=r.add(a);if(t.indexState){var o=G8(e);return i.next((function(e){o.put(f8(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=W8(e),r=G8(e),a=V8(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=V8(e),a=!0,i=new Map;return O2.forEach(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){a&&(a=!!e),i.set(t,e)}))})).next((function(){if(a){var e=k5(),o=[];return O2.forEach(i,(function(a,i){var s;V1("IndexedDbIndexManager","Using index ".concat((s=a,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(z4(t)));var u=function(e,t){var n=x2(t);if(void 0===n)return null;var r,a=Ut(V4(e,n.fieldPath));try{for(a.s();!(r=a.n()).done;){var i=r.value;switch(i.op){case"array-contains-any":return i.value.arrayValue.values||[];case"array-contains":return[i.value]}}}catch(Rme){a.e(Rme)}finally{a.f()}return null}(i,a),c=function(e,t){var n,r=new Map,a=Ut(k2(t));try{for(a.s();!(n=a.n()).done;){var i,o=n.value,s=Ut(V4(e,o.fieldPath));try{for(s.s();!(i=s.n()).done;){var u=i.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(Rme){s.e(Rme)}finally{s.f()}}}catch(Rme){a.e(Rme)}finally{a.f()}return null}(i,a),l=function(e,t){var n,r=[],a=!0,i=Ut(k2(t));try{for(i.s();!(n=i.n()).done;){var o=n.value,s=0===o.kind?W4(e,o.fieldPath,e.startAt):G4(e,o.fieldPath,e.startAt);r.push(s.value),a&&(a=s.inclusive)}}catch(Rme){i.e(Rme)}finally{i.f()}return new p4(r,a)}(i,a),d=function(e,t){var n,r=[],a=!0,i=Ut(k2(t));try{for(i.s();!(n=i.n()).done;){var o=n.value,s=0===o.kind?G4(e,o.fieldPath,e.endAt):W4(e,o.fieldPath,e.endAt);r.push(s.value),a&&(a=s.inclusive)}}catch(Rme){i.e(Rme)}finally{i.f()}return new p4(r,a)}(i,a),f=n.tn(a,i,l),h=n.tn(a,i,d),p=n.en(a,i,c),v=n.nn(a.indexId,u,f,l.inclusive,h,d.inclusive,p);return O2.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=y2.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return O2.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:A8(k4.create(e.filters,"and")).map((function(t){return j4(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Ye.set(e,t),t)}},{key:"nn",value:function(e,t,n,r,a,i,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,a.length),c=u/(null!=t?t.length:1),l=[],d=function(u){var d=t?s.sn(t[u/c]):z8,f=s.rn(e,d,n[u%c],r),h=s.on(e,d,a[u%c],i),p=o.map((function(t){return s.rn(e,d,t,!0)}));l.push.apply(l,(0,Le.Z)(s.createRange(f,h,p)))},f=0;f<u;++f)d(f);return l}},{key:"rn",value:function(e,t,n,r){var a=new N8(e,y2.empty(),t,n);return r?a:a.qe()}},{key:"on",value:function(e,t,n,r){var a=new N8(e,y2.empty(),t,n);return r?a.qe():a}},{key:"Xe",value:function(e,t){var n=new E8(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,a=Ut(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;n.Qe(i)&&(!r||i.fields.length>r.fields.length)&&(r=i)}}catch(Rme){a.e(Rme)}finally{a.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,a=this.Ze(t);return O2.forEach(a,(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new _3(g2.comparator),r=!1,a=Ut(e.filters);try{for(a.s();!(t=a.n()).done;){var i,o=Ut(t.value.getFlattenedFilters());try{for(o.s();!(i=o.n()).done;){var s=i.value;s.field.isKeyField()||("array-contains"===s.op||"array-contains-any"===s.op?r=!0:n=n.add(s.field))}}catch(Rme){o.e(Rme)}finally{o.f()}}}catch(Rme){a.e(Rme)}finally{a.f()}var u,c=Ut(e.orderBy);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(Rme){c.e(Rme)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&a.length>1&&2===r?1:r}))}},{key:"un",value:function(e,t){var n,r=new I8,a=Ut(k2(e));try{for(a.s();!(n=a.n()).done;){var i=n.value,o=t.data.field(i.fieldPath);if(null==o)return null;var s=r.Le(i.kind);y8.pe.oe(o,s)}}catch(Rme){a.e(Rme)}finally{a.f()}return r.$e()}},{key:"sn",value:function(e){var t=new I8;return y8.pe.oe(e,t.Le(0)),t.$e()}},{key:"cn",value:function(e,t){var n=new I8;return y8.pe.oe(Q3(this.databaseId,t),n.Le(function(e){var t=k2(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"en",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new I8);var a,i=0,o=Ut(k2(e));try{for(o.s();!(a=o.n()).done;){var s,u=a.value,c=n[i++],l=Ut(r);try{for(l.s();!(s=l.n()).done;){var d=s.value;if(this.an(t,u.fieldPath)&&t4(c))r=this.hn(r,u,c);else{var f=d.Le(u.kind);y8.pe.oe(c,f)}}}catch(Rme){l.e(Rme)}finally{l.f()}}}catch(Rme){o.e(Rme)}finally{o.f()}return this.ln(r)}},{key:"tn",value:function(e,t,n){return this.en(e,t,n.position)}},{key:"ln",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"hn",value:function(e,t,n){var r,a=(0,Le.Z)(e),i=[],o=Ut(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=Ut(a);try{for(c.s();!(s=c.n()).done;){var l=s.value,d=new I8;d.seed(l.$e()),y8.pe.oe(u,d.Le(t.kind)),i.push(d)}}catch(Rme){c.e(Rme)}finally{c.f()}}}catch(Rme){o.e(Rme)}finally{o.f()}return i}},{key:"an",value:function(e,t){return!!e.filters.find((function(e){return e instanceof x4&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=W8(e),a=G8(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return O2.forEach(e,(function(e){return a.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new S2(t.sequenceNumber,new T2(i8(t.readTime),new y2(J2(t.documentKey)),t.largestBatchId)):S2.empty(),r=e.fields.map((function(e){var t=(0,C.Z)(e,2),n=t[0],r=t[1];return new w2(g2.fromServerFormat(n),r)}));return new b2(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:c2(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,a=W8(e),i=G8(e);return this.fn(e).next((function(e){return a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return O2.forEach(t,(function(t){return i.put(f8(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return O2.forEach(t,(function(t,a){var i=r.get(t.collectionGroup);return(i?O2.resolve(i):n.getFieldIndexes(e,t.collectionGroup)).next((function(i){return r.set(t.collectionGroup,i),O2.forEach(i,(function(r){return n.dn(e,t,r).next((function(t){var i=n.wn(a,r);return t.isEqual(i)?O2.resolve():n._n(e,a,r,t,i)}))}))}))}))}},{key:"mn",value:function(e,t,n,r){return V8(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.cn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"gn",value:function(e,t,n,r){return V8(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.cn(n,t.key),t.key.path.toArray()])}},{key:"dn",value:function(e,t,n){var r=V8(e),a=new _3(T8);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.cn(n,t)])},(function(e,r){a=a.add(new N8(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return a}))}},{key:"wn",value:function(e,t){var n=new _3(T8),r=this.un(t,e);if(null==r)return n;var a=x2(t);if(null!=a){var i=e.data.field(a.fieldPath);if(t4(i)){var o,s=Ut(i.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new N8(t.indexId,e.key,this.sn(u),r))}}catch(Rme){s.e(Rme)}finally{s.f()}}}else n=n.add(new N8(t.indexId,e.key,z8,r));return n}},{key:"_n",value:function(e,t,n,r,a){var i=this;V1("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,a){for(var i=e.getIterator(),o=t.getIterator(),s=R3(i),u=R3(o);s||u;){var c=!1,l=!1;if(s&&u){var d=n(s,u);d<0?l=!0:d>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=R3(o)):l?(a(s),s=R3(i)):(s=R3(i),u=R3(o))}}(r,a,T8,(function(r){o.push(i.mn(e,t,n,r))}),(function(r){o.push(i.gn(e,t,n,r))})),O2.waitFor(o)}},{key:"fn",value:function(e){var t=1;return G8(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return T8(e,t)})).filter((function(e,t,n){return!t||0!==T8(e,n[t-1])}));var r=[];r.push(e);var a,i=Ut(n);try{for(i.s();!(a=i.n()).done;){var o=a.value,s=T8(o,e),u=T8(o,t);if(0===s)r[0]=e.qe();else if(s>0&&u<0)r.push(o),r.push(o.qe());else if(u>0)break}}catch(Rme){i.e(Rme)}finally{i.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.yn(r[l],r[l+1]))return[];var d=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,z8,[]],f=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,z8,[]];c.push(IDBKeyRange.bound(d,f))}return c}},{key:"yn",value:function(e,t){return T8(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Z8)}},{key:"getMinOffset",value:function(e,t){var n=this;return O2.mapArray(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){return e||H1()}))})).next(Z8)}}]),e}();function U8(e){return w3(e,"collectionParents")}function V8(e){return w3(e,"indexEntries")}function W8(e){return w3(e,"indexConfiguration")}function G8(e){return w3(e,"indexState")}function Z8(e){q1(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var a=e[r].indexState.offset;C2(a,t)<0&&(t=a),n<a.largestBatchId&&(n=a.largestBatchId)}return new T2(t.readTime,t.documentKey,n)}var H8={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},q8=function(){function e(t,n,r){Vt(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Zt(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function K8(e,t,n){var r=e.store("mutations"),a=e.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Z({range:o},(function(e,t,n){return s++,n.delete()}));i.push(u.next((function(){q1(1===s)})));var c,l=[],d=Ut(n.mutations);try{for(d.s();!(c=d.n()).done;){var f=c.value,h=e3(t,f.key.path,n.batchId);i.push(a.delete(h)),l.push(f.key)}}catch(Rme){d.e(Rme)}finally{d.f()}return O2.waitFor(i).next((function(){return l}))}function X8(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw H1();t=e.noDocument}return JSON.stringify(t).length}q8.DEFAULT_COLLECTION_PERCENTILE=10,q8.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,q8.DEFAULT=new q8(41943040,q8.DEFAULT_COLLECTION_PERCENTILE,q8.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),q8.DISABLED=new q8(-1,0,0);var J8=function(){function e(t,n,r,a){Vt(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=a,this.pn={}}return Zt(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Q8(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var a=this,i=e9(e),o=Q8(e);return o.add({}).next((function(s){q1("number"==typeof s);var u,c=new a6(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return z6(e.se,t)})),a=n.mutations.map((function(t){return z6(e.se,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:a}}(a.serializer,a.userId,c),d=[],f=new _3((function(e,t){return c2(e.canonicalString(),t.canonicalString())})),h=Ut(r);try{for(h.s();!(u=h.n()).done;){var p=u.value,v=e3(a.userId,p.key.path,s);f=f.add(p.key.path.popLast()),d.push(o.put(l)),d.push(i.put(v,t3))}}catch(Rme){h.e(Rme)}finally{h.f()}return f.forEach((function(t){d.push(a.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){a.pn[s]=c.keys()})),O2.waitFor(d).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Q8(e).get(t).next((function(e){return e?(q1(e.userId===n.userId),o8(n.serializer,e)):null}))}},{key:"In",value:function(e,t){var n=this;return this.pn[t]?O2.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.pn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]),i=null;return Q8(e).Z({index:"userMutationsIndex",range:a},(function(e,t,a){t.userId===n.userId&&(q1(t.batchId>=r),i=o8(n.serializer,t)),a.done()})).next((function(){return i}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Q8(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Q8(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return o8(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Q2(this.userId,t.path),a=IDBKeyRange.lowerBound(r),i=[];return e9(e).Z({range:a},(function(r,a,o){var s=(0,C.Z)(r,3),u=s[0],c=s[1],l=s[2],d=J2(c);if(u===n.userId&&t.path.isEqual(d))return Q8(e).get(l).next((function(e){if(!e)throw H1();q1(e.userId===n.userId),i.push(o8(n.serializer,e))}));o.done()})).next((function(){return i}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new _3(c2),a=[];return t.forEach((function(t){var i=Q2(n.userId,t.path),o=IDBKeyRange.lowerBound(i),s=e9(e).Z({range:o},(function(e,a,i){var o=(0,C.Z)(e,3),s=o[0],u=o[1],c=o[2],l=J2(u);s===n.userId&&t.path.isEqual(l)?r=r.add(c):i.done()}));a.push(s)})),O2.waitFor(a).next((function(){return n.Tn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,a=r.length+1,i=Q2(this.userId,r),o=IDBKeyRange.lowerBound(i),s=new _3(c2);return e9(e).Z({range:o},(function(e,t,i){var o=(0,C.Z)(e,3),u=o[0],c=o[1],l=o[2],d=J2(c);u===n.userId&&r.isPrefixOf(d)?d.length===a&&(s=s.add(l)):i.done()})).next((function(){return n.Tn(e,s)}))}},{key:"Tn",value:function(e,t){var n=this,r=[],a=[];return t.forEach((function(t){a.push(Q8(e).get(t).next((function(e){if(null===e)throw H1();q1(e.userId===n.userId),r.push(o8(n.serializer,e))})))})),O2.waitFor(a).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return K8(e.at,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.En(t.batchId)})),O2.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"En",value:function(e){delete this.pn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return O2.resolve();var r=IDBKeyRange.lowerBound([t.userId]),a=[];return e9(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var i=J2(e[1]);a.push(i)}else r.done()})).next((function(){q1(0===a.length)}))}))}},{key:"containsKey",value:function(e,t){return Y8(e,this.userId,t)}},{key:"An",value:function(e){var t=this;return t9(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ie",value:function(t,n,r,a){return q1(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,a)}}]),e}();function Y8(e,t,n){var r=Q2(t,n.path),a=r[1],i=IDBKeyRange.lowerBound(r),o=!1;return e9(e).Z({range:i,Y:!0},(function(e,n,r){var i=(0,C.Z)(e,3),s=i[0],u=i[1];i[2];s===t&&u===a&&(o=!0),r.done()})).next((function(){return o}))}function Q8(e){return w3(e,"mutations")}function e9(e){return w3(e,"documentMutations")}function t9(e){return w3(e,"mutationQueues")}var n9=function(){function e(t){Vt(this,e),this.Rn=t}return Zt(e,[{key:"next",value:function(){return this.Rn+=2,this.Rn}}],[{key:"vn",value:function(){return new e(0)}},{key:"bn",value:function(){return new e(-1)}}]),e}(),r9=function(){function e(t,n){Vt(this,e),this.referenceDelegate=t,this.serializer=n}return Zt(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Pn(e).next((function(n){var r=new n9(n.highestTargetId);return n.highestTargetId=r.next(),t.Vn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Pn(e).next((function(e){return h2.fromTimestamp(new f2(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Pn(e).next((function(a){return a.highestListenSequenceNumber=t,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),r.Vn(e,a)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Sn(e,t).next((function(){return n.Pn(e).next((function(r){return r.targetCount+=1,n.Dn(t,r),n.Vn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Sn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return a9(e).delete(t.targetId)})).next((function(){return n.Pn(e)})).next((function(t){return q1(t.targetCount>0),t.targetCount-=1,n.Vn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,a=0,i=[];return a9(e).Z((function(o,s){var u=s8(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(a++,i.push(r.removeTargetData(e,u)))})).next((function(){return O2.waitFor(i)})).next((function(){return a}))}},{key:"forEachTarget",value:function(e,t){return a9(e).Z((function(e,n){var r=s8(n);t(r)}))}},{key:"Pn",value:function(e){return i9(e).get("targetGlobalKey").next((function(e){return q1(null!==e),e}))}},{key:"Vn",value:function(e,t){return i9(e).put("targetGlobalKey",t)}},{key:"Sn",value:function(e,t){return a9(e).put(u8(this.serializer,t))}},{key:"Dn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=z4(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),a=null;return a9(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var i=s8(n);B4(t,i.target)&&(a=i,r.done())})).next((function(){return a}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,a=[],i=o9(e);return t.forEach((function(t){var o=q2(t.path);a.push(i.put({targetId:n,path:o})),a.push(r.referenceDelegate.addReference(e,n,t))})),O2.waitFor(a)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,a=o9(e);return O2.forEach(t,(function(t){var i=q2(t.path);return O2.waitFor([a.delete([n,i]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=o9(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=o9(e),a=k5();return r.Z({range:n,Y:!0},(function(e,t,n){var r=J2(e[1]),i=new y2(r);a=a.add(i)})).next((function(){return a}))}},{key:"containsKey",value:function(e,t){var n=q2(t.path),r=IDBKeyRange.bound([n],[d2(n)],!1,!0),a=0;return o9(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=(0,C.Z)(e,2),i=r[0];r[1];0!==i&&(a++,n.done())})).next((function(){return a>0}))}},{key:"ne",value:function(e,t){return a9(e).get(t).next((function(e){return e?s8(e):null}))}}]),e}();function a9(e){return w3(e,"targets")}function i9(e){return w3(e,"targetGlobal")}function o9(e){return w3(e,"targetDocuments")}function s9(e,t){var n=(0,C.Z)(e,2),r=n[0],a=n[1],i=(0,C.Z)(t,2),o=i[0],s=i[1],u=c2(r,o);return 0===u?c2(a,s):u}var u9=function(){function e(t){Vt(this,e),this.Cn=t,this.buffer=new _3(s9),this.xn=0}return Zt(e,[{key:"Nn",value:function(){return++this.xn}},{key:"kn",value:function(e){var t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();s9(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),c9=function(){function e(t,n,r){Vt(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.On=null}return Zt(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}},{key:"stop",value:function(){this.On&&(this.On.cancel(),this.On=null)}},{key:"started",get:function(){return null!==this.On}},{key:"$n",value:function(e){var t=this;V1("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.On=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!L2(e.t0)){e.next=12;break}V1("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,A2(e.t0);case 14:return e.next=16,t.$n(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),l9=function(){function e(t,n){Vt(this,e),this.Mn=t,this.params=n}return Zt(e,[{key:"calculateTargetCount",value:function(e,t){return this.Mn.Fn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return O2.resolve(W2.ct);var r=new u9(t);return this.Mn.forEachTarget(e,(function(e){return r.kn(e.sequenceNumber)})).next((function(){return n.Mn.Bn(e,(function(e){return r.kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Mn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Mn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(V1("LruGarbageCollector","Garbage collection skipped; disabled"),O2.resolve(H8)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(V1("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),H8):n.Ln(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Mn.getCacheSize(e)}},{key:"Ln",value:function(e,t){var n,r,a,i,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(V1("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return a=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),U1()<=BV.DEBUG&&V1("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-i)+"ms\n"+"\tRemoved ".concat(a," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),O2.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:e})}))}}]),e}(),d9=function(){function e(t,n){Vt(this,e),this.db=t,this.garbageCollector=function(e,t){return new l9(e,t)}(this,n)}return Zt(e,[{key:"Fn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Bn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Bn",value:function(e,t){return this.Un(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return f9(e,n)}},{key:"removeReference",value:function(e,t,n){return f9(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return f9(e,t)}},{key:"Kn",value:function(e,t){return function(e,t){var n=!1;return t9(e).X((function(r){return Y8(e,r,t).next((function(e){return e&&(n=!0),O2.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[],i=0;return this.Un(e,(function(o,s){if(s<=t){var u=n.Kn(e,o).next((function(t){if(!t)return i++,r.getEntry(e,o).next((function(){return r.removeEntry(o,h2.min()),o9(e).delete([0,q2(o.path)])}))}));a.push(u)}})).next((function(){return O2.waitFor(a)})).next((function(){return r.apply(e)})).next((function(){return i}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return f9(e,t)}},{key:"Un",value:function(e,t){var n,r=o9(e),a=W2.ct;return r.Z({index:"documentTargetsIndex"},(function(e,r){var i=(0,C.Z)(e,2),o=i[0],s=(i[1],r.path),u=r.sequenceNumber;0===o?(a!==W2.ct&&t(new y2(J2(n)),a),a=u,n=s):a=W2.ct})).next((function(){a!==W2.ct&&t(new y2(J2(n)),a)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function f9(e,t){return o9(e).put(function(e,t){return{targetId:0,path:q2(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var h9=function(){function e(){Vt(this,e),this.changes=new l5((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Zt(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,h4.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?O2.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),p9=function(){function e(t){Vt(this,e),this.serializer=t}return Zt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return y9(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return y9(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],r8(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Gn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=h4.newInvalidDocument(t);return y9(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(b9(t))},(function(e,a){r=n.Qn(t,a)})).next((function(){return r}))}},{key:"zn",value:function(e,t){var n=this,r={size:0,document:h4.newInvalidDocument(t)};return y9(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(b9(t))},(function(e,a){r={document:n.Qn(t,a),size:X8(a)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=f5();return this.jn(e,t,(function(e,t){var a=n.Qn(e,t);r=r.insert(e,a)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r=f5(),a=new T3(y2.comparator);return this.jn(e,t,(function(e,t){var i=n.Qn(e,t);r=r.insert(e,i),a=a.insert(e,X8(t))})).next((function(){return{documents:r,Hn:a}}))}},{key:"jn",value:function(e,t,n){if(t.isEmpty())return O2.resolve();var r=new _3(k9);t.forEach((function(e){return r=r.add(e)}));var a=IDBKeyRange.bound(b9(r.first()),b9(r.last())),i=r.getIterator(),o=i.getNext();return y9(e).Z({index:"documentKeyIndex",range:a},(function(e,t,r){for(var a=y2.fromSegments([].concat((0,Le.Z)(t.prefixPath),[t.collectionGroup,t.documentId]));o&&k9(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.G(b9(o)):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var a=this,i=t.path,o=[i.popLast().toArray(),i.lastSegment(),r8(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return y9(e).j(IDBKeyRange.bound(o,s,!0)).next((function(e){var n,i=f5(),o=Ut(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=a.Qn(y2.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);u.isFoundDocument()&&(o5(t,u)||r.has(u.key))&&(i=i.insert(u.key,u))}}catch(Rme){o.e(Rme)}finally{o.f()}return i}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var a=this,i=f5(),o=x9(t,n),s=x9(t,T2.max());return y9(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=a.Qn(y2.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(i=i.insert(o.key,o)).size===r&&n.done()})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new m9(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return g9(e).get("remoteDocumentGlobalKey").next((function(e){return q1(!!e),e}))}},{key:"Gn",value:function(e,t){return g9(e).put("remoteDocumentGlobalKey",t)}},{key:"Qn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=$6(e.se,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=y2.fromSegments(t.noDocument.path),a=i8(t.noDocument.readTime);n=h4.newNoDocument(r,a),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return H1();var i=y2.fromSegments(t.unknownDocument.path),o=i8(t.unknownDocument.version);n=h4.newUnknownDocument(i,o)}return t.readTime&&n.setReadTime(function(e){var t=new f2(e[0],e[1]);return h2.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(h2.min()))return n}return h4.newInvalidDocument(e)}}]),e}();function v9(e){return new p9(e)}var m9=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this)).Jn=e,a.trackRemovals=r,a.Yn=new l5((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),a}return Zt(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,a=new _3((function(e,t){return c2(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(i,o){var s=t.Yn.get(i);if(n.push(t.Jn.removeEntry(e,i,s.readTime)),o.isValidDocument()){var u=n8(t.Jn.serializer,o);a=a.add(i.path.popLast());var c=X8(u);r+=c-s.size,n.push(t.Jn.addEntry(e,i,u))}else if(r-=s.size,t.trackRemovals){var l=n8(t.Jn.serializer,o.convertToNoDocument(h2.min()));n.push(t.Jn.addEntry(e,i,l))}})),a.forEach((function(r){n.push(t.Jn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Jn.updateMetadata(e,r)),O2.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Jn.zn(e,t).next((function(e){return n.Yn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Jn.Wn(e,t).next((function(e){var t=e.documents;return e.Hn.forEach((function(e,r){n.Yn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(h9);function g9(e){return w3(e,"remoteDocumentGlobal")}function y9(e){return w3(e,"remoteDocumentsV14")}function b9(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function x9(e,t){var n=t.documentKey.path.toArray();return[e,r8(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function k9(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),a=0,i=0;i<n.length-2&&i<r.length-2;++i)if(a=c2(n[i],r[i]))return a;return(a=c2(n.length,r.length))||((a=c2(n[n.length-2],r[r.length-2]))||c2(n[n.length-1],r[r.length-1]))}var w9=Zt((function e(t,n){Vt(this,e),this.overlayedDocument=t,this.mutatedFields=n})),S9=function(){function e(t,n,r,a){Vt(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}return Zt(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(a){return r=a,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Z5(r.mutation,e,O3.empty(),f2.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,k5()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k5(),a=m5();return this.populateOverlays(e,a,t).next((function(){return n.computeViews(e,t,a,r).next((function(e){var t=p5();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=m5();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,k5())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var a=f5(),i=y5(),o=y5();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof X5)?a=a.insert(t.key,t):void 0!==o?(i.set(t.key,o.mutation.getFieldMask()),Z5(o.mutation,t,o.mutation.getFieldMask(),f2.now())):i.set(t.key,O3.empty())})),this.recalculateAndSaveOverlays(e,a).next((function(e){return e.forEach((function(e,t){return i.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new w9(t,null!==(n=i.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=y5(),a=new T3((function(e,t){return e-t})),i=k5();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,i=Ut(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var i=t.get(n);if(null!==i){var o=r.get(n)||O3.empty();o=e.applyToLocalView(i,o),r.set(n,o);var s=(a.get(e.batchId)||k5()).add(n);a=a.insert(e.batchId,s)}}))};for(i.s();!(n=i.n()).done;)o()}catch(Rme){i.e(Rme)}finally{i.f()}})).next((function(){for(var o=[],s=a.getReverseIterator(),u=function(){var a=s.getNext(),u=a.key,c=a.value,l=g5();c.forEach((function(e){if(!i.has(e)){var n=W5(t.get(e),r.get(e));null!==n&&l.set(e,n),i=i.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return O2.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return y2.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Y4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var a=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(i){var o=r-i.size>0?a.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):O2.resolve(m5()),s=-1,u=i;return o.next((function(t){return O2.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?O2.resolve():a.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return a.populateOverlays(e,t,i)})).next((function(){return a.computeViews(e,u,t,k5())})).next((function(e){return{batchId:s,changes:v5(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new y2(t)).next((function(e){var t=p5();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,a=t.collectionGroup,i=p5();return this.indexManager.getCollectionParents(e,a).next((function(o){return O2.forEach(o,(function(o){var s=function(e,t){return new Z4(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(a));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){i=i.insert(e,t)}))}))})).next((function(){return i}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(i){return r=i,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,h4.newInvalidDocument(r)))}));var n=p5();return e.forEach((function(e,a){var i=r.get(e);void 0!==i&&Z5(i.mutation,a,O3.empty(),f2.now()),o5(t,a)&&(n=n.insert(e,a))})),n}))}}]),e}(),I9=function(){function e(t){Vt(this,e),this.serializer=t,this.Zn=new Map,this.Xn=new Map}return Zt(e,[{key:"getBundleMetadata",value:function(e,t){return O2.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:E6(n.createTime)}),O2.resolve()}},{key:"getNamedQuery",value:function(e,t){return O2.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:c8(e.bundledQuery),readTime:E6(e.readTime)}}(t)),O2.resolve()}}]),e}(),N9=function(){function e(){Vt(this,e),this.overlays=new T3(y2.comparator),this.ts=new Map}return Zt(e,[{key:"getOverlay",value:function(e,t){return O2.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=m5();return O2.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,a){r.re(e,t,a)})),O2.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,a=this.ts.get(n);return void 0!==a&&(a.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ts.delete(n)),O2.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=m5(),a=t.length+1,i=new y2(t.child("")),o=this.overlays.getIteratorFrom(i);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===a&&s.largestBatchId>n&&r.set(s.getKey(),s)}return O2.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var a=new T3((function(e,t){return e-t})),i=this.overlays.getIterator();i.hasNext();){var o=i.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=a.get(o.largestBatchId);null===s&&(s=m5(),a=a.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=m5(),c=a.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return O2.resolve(u)}},{key:"re",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var a=this.ts.get(r.largestBatchId).delete(n.key);this.ts.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new o6(t,n));var i=this.ts.get(t);void 0===i&&(i=k5(),this.ts.set(t,i)),this.ts.set(t,i.add(n.key))}}]),e}(),T9=function(){function e(){Vt(this,e),this.es=new _3(C9.ns),this.ss=new _3(C9.rs)}return Zt(e,[{key:"isEmpty",value:function(){return this.es.isEmpty()}},{key:"addReference",value:function(e,t){var n=new C9(e,t);this.es=this.es.add(n),this.ss=this.ss.add(n)}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.us(new C9(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"hs",value:function(e){var t=this,n=new y2(new v2([])),r=new C9(n,e),a=new C9(n,e+1),i=[];return this.ss.forEachInRange([r,a],(function(e){t.us(e),i.push(e.key)})),i}},{key:"ls",value:function(){var e=this;this.es.forEach((function(t){return e.us(t)}))}},{key:"us",value:function(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}},{key:"fs",value:function(e){var t=new y2(new v2([])),n=new C9(t,e),r=new C9(t,e+1),a=k5();return this.ss.forEachInRange([n,r],(function(e){a=a.add(e.key)})),a}},{key:"containsKey",value:function(e){var t=new C9(e,0),n=this.es.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),C9=function(){function e(t,n){Vt(this,e),this.key=t,this.ds=n}return Zt(e,null,[{key:"ns",value:function(e,t){return y2.comparator(e.key,t.key)||c2(e.ds,t.ds)}},{key:"rs",value:function(e,t){return c2(e.ds,t.ds)||y2.comparator(e.key,t.key)}}]),e}(),E9=function(){function e(t,n){Vt(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this._s=new _3(C9.ns)}return Zt(e,[{key:"checkEmpty",value:function(e){return O2.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var a=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var i=new a6(a,t,n,r);this.mutationQueue.push(i);var o,s=Ut(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this._s=this._s.add(new C9(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(Rme){s.e(Rme)}finally{s.f()}return O2.resolve(i)}},{key:"lookupMutationBatch",value:function(e,t){return O2.resolve(this.gs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ys(n),a=r<0?0:r;return O2.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return O2.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return O2.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new C9(t,0),a=new C9(t,Number.POSITIVE_INFINITY),i=[];return this._s.forEachInRange([r,a],(function(e){var t=n.gs(e.ds);i.push(t)})),O2.resolve(i)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new _3(c2);return t.forEach((function(e){var t=new C9(e,0),a=new C9(e,Number.POSITIVE_INFINITY);n._s.forEachInRange([t,a],(function(e){r=r.add(e.ds)}))})),O2.resolve(this.ps(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,a=n;y2.isDocumentKey(a)||(a=a.child(""));var i=new C9(new y2(a),0),o=new _3(c2);return this._s.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ds)),!0)}),i),O2.resolve(this.ps(o))}},{key:"ps",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.gs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;q1(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();var r=this._s;return O2.forEach(t.mutations,(function(a){var i=new C9(a.key,t.batchId);return r=r.delete(i),n.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((function(){n._s=r}))}},{key:"En",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new C9(t,0),r=this._s.firstAfterOrEqual(n);return O2.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,O2.resolve()}},{key:"Is",value:function(e,t){return this.ys(e)}},{key:"ys",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"gs",value:function(e){var t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),_9=function(){function e(t){Vt(this,e),this.Ts=t,this.docs=new T3(y2.comparator),this.size=0}return Zt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),a=r?r.size:0,i=this.Ts(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return O2.resolve(n?n.document.mutableCopy():h4.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=f5();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():h4.newInvalidDocument(e))})),O2.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var a=f5(),i=t.path,o=new y2(i.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||C2(N2(l),n)<=0||(r.has(l.key)||o5(t,l))&&(a=a.insert(l.key,l.mutableCopy()))}return O2.resolve(a)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){H1()}},{key:"Es",value:function(e,t){return O2.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new A9(this)}},{key:"getSize",value:function(e){return O2.resolve(this.size)}}]),e}(),A9=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).Jn=e,r}return Zt(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,a){a.isValidDocument()?n.push(t.Jn.addEntry(e,a)):t.Jn.removeEntry(r)})),O2.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Jn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Jn.getEntries(e,t)}}]),n}(h9),R9=function(){function e(t){Vt(this,e),this.persistence=t,this.As=new l5((function(e){return z4(e)}),B4),this.lastRemoteSnapshotVersion=h2.min(),this.highestTargetId=0,this.Rs=0,this.vs=new T9,this.targetCount=0,this.bs=n9.vn()}return Zt(e,[{key:"forEachTarget",value:function(e,t){return this.As.forEach((function(e,n){return t(n)})),O2.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return O2.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return O2.resolve(this.Rs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),O2.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Rs&&(this.Rs=t),O2.resolve()}},{key:"Sn",value:function(e){this.As.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new n9(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Sn(t),this.targetCount+=1,O2.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Sn(t),O2.resolve()}},{key:"removeTargetData",value:function(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,O2.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,a=0,i=[];return this.As.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.As.delete(o),i.push(r.removeMatchingKeysForTargetId(e,s.targetId)),a++)})),O2.waitFor(i).next((function(){return a}))}},{key:"getTargetCount",value:function(e){return O2.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.As.get(t)||null;return O2.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.vs.os(t,n),O2.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.vs.cs(t,n);var r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((function(t){a.push(r.markPotentiallyOrphaned(e,t))})),O2.waitFor(a)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.vs.hs(t),O2.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.vs.fs(t);return O2.resolve(n)}},{key:"containsKey",value:function(e,t){return O2.resolve(this.vs.containsKey(t))}}]),e}(),O9=function(){function e(t,n){var r=this;Vt(this,e),this.Ps={},this.overlays={},this.Vs=new W2(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=t(this),this.Ds=new R9(this),this.indexManager=new $8,this.remoteDocumentCache=new _9((function(e){return r.referenceDelegate.Cs(e)})),this.serializer=new t8(n),this.xs=new I9(this.serializer)}return Zt(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ss=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ss}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new N9,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ps[e.toKey()];return n||(n=new E9(t,this.referenceDelegate),this.Ps[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;V1("MemoryPersistence","Starting transaction:",e);var a=new D9(this.Vs.next());return this.referenceDelegate.Ns(),n(a).next((function(e){return r.referenceDelegate.ks(a).next((function(){return e}))})).toPromise().then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return O2.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),D9=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Zt(n)}(_2),P9=function(){function e(t){Vt(this,e),this.persistence=t,this.$s=new T9,this.Ms=null}return Zt(e,[{key:"Bs",get:function(){if(this.Ms)return this.Ms;throw H1()}},{key:"addReference",value:function(e,t,n){return this.$s.addReference(n,t),this.Bs.delete(n.toString()),O2.resolve()}},{key:"removeReference",value:function(e,t,n){return this.$s.removeReference(n,t),this.Bs.add(n.toString()),O2.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Bs.add(t.toString()),O2.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.$s.hs(t.targetId).forEach((function(e){return n.Bs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Bs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ns",value:function(){this.Ms=new Set}},{key:"ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O2.forEach(this.Bs,(function(r){var a=y2.fromPath(r);return t.Ls(e,a).next((function(e){e||n.removeEntry(a,h2.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ls(e,t).next((function(e){e?n.Bs.delete(t.toString()):n.Bs.add(t.toString())}))}},{key:"Cs",value:function(e){return 0}},{key:"Ls",value:function(e,t){var n=this;return O2.or([function(){return O2.resolve(n.$s.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Fs",value:function(t){return new e(t)}}]),e}(),F9=function(){function e(t){Vt(this,e),this.serializer=t}return Zt(e,[{key:"M",value:function(e,t,n,r){var a=this,i=new D2("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Y2,{unique:!0}),e.createObjectStore("documentMutations")}(e),M9(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=O2.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),M9(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:h2.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Y2,{unique:!0});var r=t.store("mutations"),a=n.map((function(e){return r.put(e)}));return O2.waitFor(a)}))}(e,i)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return a.qs(i)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),a.Us(i)}))),n<7&&r>=7&&(o=o.next((function(){return a.Ks(i)}))),n<8&&r>=8&&(o=o.next((function(){return a.Gs(e,i)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return a.Qs(i)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:h3});t.createIndex("collectionPathOverlayIndex",p3,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",v3,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:n3});t.createIndex("documentKeyIndex",r3),t.createIndex("collectionGroupIndex",a3)}(e)})).next((function(){return a.zs(e,i)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return a.js(e,i)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:c3}).createIndex("sequenceNumberIndex",l3,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:d3}).createIndex("documentKeyIndex",f3,{unique:!1})}(e)}))),o}},{key:"Us",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=X8(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return O2.forEach(n,(function(n){var a=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",a).next((function(r){return O2.forEach(r,(function(r){q1(r.userId===n.userId);var a=o8(t.serializer,r);return K8(e,n.userId,a).next((function(){}))}))}))}))}))}},{key:"Ks",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,a){var i=new v2(n),o=function(e){return[0,q2(e)]}(i);r.push(t.get(o).next((function(n){return n?O2.resolve():function(n){return t.put({targetId:0,path:q2(n),sequenceNumber:e.highestListenSequenceNumber})}(i)})))})).next((function(){return O2.waitFor(r)}))}))}},{key:"Gs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:u3});var n=t.store("collectionParents"),r=new j8,a=function(e){if(r.add(e)){var t=e.lastSegment(),a=e.popLast();return n.put({collectionId:t,parent:q2(a)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new v2(e);return a(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=(0,C.Z)(e,3),r=(n[0],n[1]),i=(n[2],J2(r));return a(i.popLast())}))}))}},{key:"Qs",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var a=s8(r),i=u8(t.serializer,a);return n.put(i)}))}},{key:"zs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var a,i=t.store("remoteDocumentsV14"),o=(a=n,a.document?new y2(v2.fromString(a.document.name).popFirst(5)):a.noDocument?y2.fromSegments(a.noDocument.path):a.unknownDocument?y2.fromSegments(a.unknownDocument.path):H1()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(s))})).next((function(){return O2.waitFor(r)}))}},{key:"js",value:function(e,t){var n=this,r=t.store("mutations"),a=v9(this.serializer),i=new O9(P9.Fs,this.serializer.se);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,a=null!==(t=r.get(e.userId))&&void 0!==t?t:k5();o8(n.serializer,e).keys().forEach((function(e){return a=a.add(e)})),r.set(e.userId,a)})),O2.forEach(r,(function(e,r){var o=new j1(r),s=m8.ie(n.serializer,o),u=i.getIndexManager(o),c=J8.ie(o,n.serializer,u,i.referenceDelegate);return new S9(a,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new k3(t,W2.ct),e).next()}))}))}}]),e}();function M9(e){e.createObjectStore("targetDocuments",{keyPath:o3}).createIndex("documentTargetsIndex",s3,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",i3,{unique:!0}),e.createObjectStore("targetGlobal")}var L9="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$9=function(){function e(t,n,r,a,i,o,s,u,c,l){var d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Vt(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Ws=i,this.window=o,this.document=s,this.Hs=c,this.Js=l,this.Ys=d,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=function(e){return Promise.resolve()},!e.D())throw new J1(X1.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new d9(this,a),this.si=n+"main",this.serializer=new t8(u),this.ii=new P2(this.si,this.Ys,new F9(this.serializer)),this.Ds=new r9(this.referenceDelegate,this.serializer),this.remoteDocumentCache=v9(this.serializer),this.xs=new h8,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===l&&W1("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Zt(e,[{key:"start",value:function(){var e=this;return this.oi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new J1(X1.FAILED_PRECONDITION,L9);return e.ui(),e.ci(),e.ai(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ds.getHighestSequenceNumber(t)}))})).then((function(t){e.Vs=new W2(t,e.Hs)})).then((function(){e.Ss=!0})).catch((function(t){return e.ii&&e.ii.close(),Promise.reject(t)}))}},{key:"hi",value:function(e){var t=this;return this.ni=function(){var n=me(ye().mark((function n(r){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ii.B(function(){var t=me(ye().mark((function t(n){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget(me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.oi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"oi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return z9(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.li(t).next((function(t){t||(e.isPrimary=!1,e.Ws.enqueueRetryable((function(){return e.ni(!1)})))}))})).next((function(){return e.fi(t)})).next((function(n){return e.isPrimary&&!n?e.di(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(L2(t))return V1("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return V1("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Ws.enqueueRetryable((function(){return e.ni(t)})),e.isPrimary=t}))}},{key:"li",value:function(e){var t=this;return j9(e).get("owner").next((function(e){return O2.resolve(t._i(e))}))}},{key:"mi",value:function(e){return z9(e).delete(this.clientId)}},{key:"gi",value:function(){var e=me(ye().mark((function e(){var t,n,r,a,i=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.yi(this.ei,18e5)){e.next=6;break}return this.ei=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=w3(e,"clientMetadata");return t.j().next((function(e){var n=i.pi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return O2.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ri){n=Ut(t);try{for(n.s();!(r=n.n()).done;)a=r.value,this.ri.removeItem(this.Ii(a.clientId))}catch(Rme){n.e(Rme)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ai",value:function(){var e=this;this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.oi().then((function(){return e.gi()})).then((function(){return e.ai()}))}))}},{key:"_i",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"fi",value:function(e){var t=this;return this.Js?O2.resolve(!0):j9(e).get("owner").next((function(n){if(null!==n&&t.yi(n.leaseTimestampMs,5e3)&&!t.Ti(n.ownerId)){if(t._i(n)&&t.networkEnabled)return!0;if(!t._i(n)){if(!n.allowTabSynchronization)throw new J1(X1.FAILED_PRECONDITION,L9);return!1}}return!(!t.networkEnabled||!t.inForeground)||z9(e).j().next((function(e){return void 0===t.pi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,a=t.networkEnabled===e.networkEnabled;if(n||r&&a)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&V1("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=me(ye().mark((function e(){var t=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ss=!1,this.Ei(),this.ti&&(this.ti.cancel(),this.ti=null),this.Ai(),this.Ri(),e.next=7,this.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new k3(e,W2.ct);return t.di(n).next((function(){return t.mi(n)}))}));case 7:this.ii.close(),this.vi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(e,t){var n=this;return e.filter((function(e){return n.yi(e.updateTimeMs,t)&&!n.Ti(e.clientId)}))}},{key:"bi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return z9(t).j().next((function(t){return e.pi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ss}},{key:"getMutationQueue",value:function(e,t){return J8.ie(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new B8(e,this.serializer.se.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return m8.ie(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;V1("IndexedDbPersistence","Starting transaction:",e);var a,i,o="readonly"===t?"readonly":"readwrite",s=15===(a=this.Ys)?x3:14===a?b3:13===a?y3:12===a?g3:11===a?m3:void H1();return this.ii.runTransaction(e,o,s,(function(a){return i=new k3(a,r.Vs?r.Vs.next():W2.ct),"readwrite-primary"===t?r.li(i).next((function(e){return!!e||r.fi(i)})).next((function(t){if(!t)throw W1("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Ws.enqueueRetryable((function(){return r.ni(!1)})),new J1(X1.FAILED_PRECONDITION,E2);return n(i)})).next((function(e){return r.wi(i).next((function(){return e}))})):r.Pi(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Pi",value:function(e){var t=this;return j9(e).get("owner").next((function(e){if(null!==e&&t.yi(e.leaseTimestampMs,5e3)&&!t.Ti(e.ownerId)&&!t._i(e)&&!(t.Js||t.allowTabSynchronization&&e.allowTabSynchronization))throw new J1(X1.FAILED_PRECONDITION,L9)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return j9(e).put("owner",t)}},{key:"di",value:function(e){var t=this,n=j9(e);return n.get("owner").next((function(e){return t._i(e)?(V1("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):O2.resolve()}))}},{key:"yi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(W1("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ui",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=function(){e.Ws.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.oi()}))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ai",value:function(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}},{key:"ci",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ei();var e=/(?:Version|Mobile)\/1[456]/;!yV()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.Ws.enterRestrictedMode(!0),t.Ws.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"Ri",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ti",value:function(e){var t;try{var n=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return V1("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return W1("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ei",value:function(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(qJ){W1("Failed to set zombie client id.",qJ)}}},{key:"vi",value:function(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch(qJ){}}},{key:"Ii",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return P2.D()}}]),e}();function j9(e){return w3(e,"owner")}function z9(e){return w3(e,"clientMetadata")}function B9(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var U9=function(){function e(t,n,r,a){Vt(this,e),this.targetId=t,this.fromCache=n,this.Vi=r,this.Si=a}return Zt(e,null,[{key:"Di",value:function(t,n){var r,a=k5(),i=k5(),o=Ut(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:a=a.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}}catch(Rme){o.e(Rme)}finally{o.f()}return new e(t,n.fromCache,a,i)}}]),e}(),V9=function(){function e(){Vt(this,e),this.Ci=!1}return Zt(e,[{key:"initialize",value:function(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var a=this;return this.Ni(e,t).next((function(i){return i||a.ki(e,t,r,n)})).next((function(n){return n||a.Oi(e,t)}))}},{key:"Ni",value:function(e,t){var n=this;if(K4(t))return O2.resolve(null);var r=e5(t);return this.indexManager.getIndexType(e,r).next((function(a){return 0===a?null:(null!==t.limit&&1===a&&(t=n5(t,null,"F"),r=e5(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(a){var i=k5.apply(void 0,(0,Le.Z)(a));return n.xi.getDocuments(e,i).next((function(a){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.$i(t,a);return n.Mi(t,o,i,r.readTime)?n.Ni(e,n5(t,null,"F")):n.Fi(e,o,t,r)}))}))})))}))}},{key:"ki",value:function(e,t,n,r){var a=this;return K4(t)||r.isEqual(h2.min())?this.Oi(e,t):this.xi.getDocuments(e,n).next((function(i){var o=a.$i(t,i);return a.Mi(t,o,n,r)?a.Oi(e,t):(U1()<=BV.DEBUG&&V1("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),i5(t)),a.Fi(e,o,t,I2(r,-1)))}))}},{key:"$i",value:function(e,t){var n=new _3(u5(e));return t.forEach((function(t,r){o5(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return U1()<=BV.DEBUG&&V1("QueryEngine","Using full collection scan to execute query:",i5(t)),this.xi.getDocumentsMatchingQuery(e,t,T2.min())}},{key:"Fi",value:function(e,t,n,r){return this.xi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),W9=function(){function e(t,n,r,a){Vt(this,e),this.persistence=t,this.Bi=n,this.serializer=a,this.Li=new T3(c2),this.qi=new l5((function(e){return z4(e)}),B4),this.Ui=new Map,this.Ki=t.getRemoteDocumentCache(),this.Ds=t.getTargetCache(),this.xs=t.getBundleCache(),this.Gi(r)}return Zt(e,[{key:"Gi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new S9(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Li)}))}}]),e}();function G9(e,t,n,r){return new W9(e,t,n,r)}function Z9(e,t){return H9.apply(this,arguments)}function H9(){return H9=me(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=K1(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(a){return t=a,r.Gi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var a,i=[],o=[],s=k5(),u=Ut(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;i.push(c.batchId);var l,d=Ut(c.mutations);try{for(d.s();!(l=d.n()).done;){var f=l.value;s=s.add(f.key)}}catch(Rme){d.e(Rme)}finally{d.f()}}}catch(Rme){u.e(Rme)}finally{u.f()}var h,p=Ut(n);try{for(p.s();!(h=p.n()).done;){var v=h.value;o.push(v.batchId);var m,g=Ut(v.mutations);try{for(g.s();!(m=g.n()).done;){var y=m.value;s=s.add(y.key)}}catch(Rme){g.e(Rme)}finally{g.f()}}}catch(Rme){p.e(Rme)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{Qi:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),H9.apply(this,arguments)}function q9(e,t){var n=K1(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),a=n.Ki.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var a=n.batch,i=a.keys(),o=O2.resolve();return i.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var i=n.docVersions.get(e);q1(null!==i),t.version.compareTo(i)<0&&(a.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,a)}))}(n,e,t,a).next((function(){return a.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=k5(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function K9(e){var t=K1(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ds.getLastRemoteSnapshotVersion(e)}))}function X9(e,t){var n=K1(e),r=t.snapshotVersion,a=n.Li;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var i=n.Ki.newChangeBuffer({trackRemovals:!0});a=n.Li;var o=[];t.targetChanges.forEach((function(i,s){var u=a.get(s);if(u){o.push(n.Ds.removeMatchingKeys(e,i.removedDocuments,s).next((function(){return n.Ds.addMatchingKeys(e,i.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(P3.EMPTY_BYTE_STRING,h2.min()).withLastLimboFreeSnapshotVersion(h2.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),a=a.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,i)&&o.push(n.Ds.updateTargetData(e,c))}}));var s=f5(),u=k5();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(J9(e,i,t.documentUpdates).next((function(e){s=e.zi,u=e.ji}))),!r.isEqual(h2.min())){var c=n.Ds.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ds.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return O2.waitFor(o).next((function(){return i.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Li=a,e}))}function J9(e,t,n){var r=k5(),a=k5();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=f5();return n.forEach((function(n,i){var o=e.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(a=a.add(n)),i.isNoDocument()&&i.version.isEqual(h2.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):V1("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)})),{zi:r,ji:a}}))}function Y9(e,t){var n=K1(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Q9(e,t){var n=K1(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ds.getTargetData(e,t).next((function(a){return a?(r=a,O2.resolve(r)):n.Ds.allocateTargetId(e).next((function(a){return r=new e8(t,a,0,e.currentSequenceNumber),n.Ds.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Li.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Li=n.Li.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function e7(e,t,n){return t7.apply(this,arguments)}function t7(){return t7=me(ye().mark((function e(t,n,r){var a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=K1(t),i=a.Li.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,a.persistence.runTransaction("Release target",o,(function(e){return a.persistence.referenceDelegate.removeTarget(e,i)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),L2(e.t1)){e.next=12;break}throw e.t1;case 12:V1("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:a.Li=a.Li.remove(n),a.qi.delete(i.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),t7.apply(this,arguments)}function n7(e,t,n){var r=K1(e),a=h2.min(),i=k5();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=K1(e),a=r.qi.get(n);return void 0!==a?O2.resolve(r.Li.get(a)):r.Ds.getTargetData(t,n)}(r,e,e5(t)).next((function(t){if(t)return a=t.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(e,t.targetId).next((function(e){i=e}))})).next((function(){return r.Bi.getDocumentsMatchingQuery(e,t,n?a:h2.min(),n?i:k5())})).next((function(e){return i7(r,s5(t),e),{documents:e,Wi:i}}))}))}function r7(e,t){var n=K1(e),r=K1(n.Ds),a=n.Li.get(t);return a?Promise.resolve(a.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function a7(e,t){var n=K1(e),r=n.Ui.get(t)||h2.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ki.getAllFromCollectionGroup(e,t,I2(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return i7(n,t,e),e}))}function i7(e,t,n){var r=e.Ui.get(t)||h2.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ui.set(t,r)}function o7(e,t,n,r){return s7.apply(this,arguments)}function s7(){return s7=me(ye().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,h,p;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=K1(t),o=k5(),s=f5(),u=Ut(r);try{for(u.s();!(c=u.n()).done;)l=c.value,d=n.Hi(l.metadata.name),l.document&&(o=o.add(d)),(f=n.Ji(l)).setReadTime(n.Yi(l.metadata.readTime)),s=s.insert(d,f)}catch(Rme){u.e(Rme)}finally{u.f()}return h=i.Ki.newChangeBuffer({trackRemovals:!0}),e.next=7,Q9(i,function(e){return e5(q4(v2.fromString("__bundle__/docs/".concat(e))))}(a));case 7:return p=e.sent,e.abrupt("return",i.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return J9(e,h,s).next((function(t){return h.apply(e),t})).next((function(t){return i.Ds.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return i.Ds.addMatchingKeys(e,o,p.targetId)})).next((function(){return i.localDocuments.getLocalViewOfDocuments(e,t.zi,t.ji)})).next((function(){return t.zi}))}))})));case 9:case"end":return e.stop()}}),e)}))),s7.apply(this,arguments)}function u7(e,t){return c7.apply(this,arguments)}function c7(){return c7=me(ye().mark((function e(t,n){var r,a,i,o=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:k5(),e.next=3,Q9(t,e5(c8(n.bundledQuery)));case 3:return a=e.sent,i=K1(t),e.abrupt("return",i.persistence.runTransaction("Save named query","readwrite",(function(e){var t=E6(n.readTime);if(a.snapshotVersion.compareTo(t)>=0)return i.xs.saveNamedQuery(e,n);var o=a.withResumeToken(P3.EMPTY_BYTE_STRING,t);return i.Li=i.Li.insert(o.targetId,o),i.Ds.updateTargetData(e,o).next((function(){return i.Ds.removeMatchingKeysForTargetId(e,a.targetId)})).next((function(){return i.Ds.addMatchingKeys(e,r,a.targetId)})).next((function(){return i.xs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),c7.apply(this,arguments)}function l7(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function d7(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function f7(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var h7=function(){function e(t,n,r,a){Vt(this,e),this.user=t,this.batchId=n,this.state=r,this.error=a}return Zt(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var a,i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&((o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new J1(i.error.code,i.error.message))),o?new e(t,n,i.state,a):(W1("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),p7=function(){function e(t,n,r){Vt(this,e),this.targetId=t,this.state=n,this.error=r}return Zt(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,a=JSON.parse(n),i="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return i&&a.error&&((i="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(r=new J1(a.error.code,a.error.message))),i?new e(t,a.state,r):(W1("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),v7=function(){function e(t,n){Vt(this,e),this.clientId=t,this.activeTargetIds=n}return Zt(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),a="object"==typeof r&&r.activeTargetIds instanceof Array,i=S5(),o=0;a&&o<r.activeTargetIds.length;++o)a=H2(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return a?new e(t,i):(W1("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),m7=function(){function e(t,n){Vt(this,e),this.clientId=t,this.onlineState=n}return Zt(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(W1("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),g7=function(){function e(){Vt(this,e),this.activeTargetIds=S5()}return Zt(e,[{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),y7=function(){function e(t,n,r,a,i){Vt(this,e),this.window=t,this.Ws=n,this.persistenceKey=r,this.nr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new T3(c2),this.started=!1,this.ur=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.cr=l7(this.persistenceKey,this.nr),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.rr=this.rr.insert(this.nr,new g7),this.hr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.lr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.dr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}return Zt(e,[{key:"start",value:function(){var e=me(ye().mark((function e(){var t,n,r,a,i,o,s,u,c,l,d,f=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.bi();case 2:t=e.sent,n=Ut(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((a=r.value)!==this.nr){e.next=10;break}return e.abrupt("continue",12);case 10:(i=this.getItem(l7(this.persistenceKey,a)))&&(o=v7.Zi(a,i))&&(this.rr=this.rr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.mr(),(s=this.storage.getItem(this.wr))&&(u=this.gr(s))&&this.yr(u),c=Ut(this.ur);try{for(c.s();!(l=c.n()).done;)d=l.value,this.ir(d)}catch(Rme){c.e(Rme)}finally{c.f()}this.ur=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.pr(this.rr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.rr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ir(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ir(e,t,n),this.Tr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(f7(this.persistenceKey,e));if(n){var r=p7.Zi(e,n);r&&(t=r.state)}}return this.Er.tr(e),this.mr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Er.er(e),this.mr()}},{key:"isLocalQueryTarget",value:function(e){return this.Er.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(f7(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Ar(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Tr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Rr(e)}},{key:"notifyBundleLoaded",value:function(e){this.vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return V1("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){V1("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){V1("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ir",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(V1("SharedClientState","EVENT",n.key,n.newValue),n.key===this.cr)return void W1("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable(me(ye().mark((function e(){var r,a,i,o,s,u,c;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.hr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.br(n.key),e.abrupt("return",t.Pr(r,null));case 6:if(!(a=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Pr(a.clientId,a));case 9:e.next=41;break;case 11:if(!t.lr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(i=t.Sr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Dr(i));case 16:e.next=41;break;case 18:if(!t.dr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Cr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Nr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.gr(n.newValue))){e.next=30;break}return e.abrupt("return",t.yr(s));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}u=function(e){var t=W2.ct;if(null!=e)try{var n=JSON.parse(e);q1("number"==typeof n),t=n}catch(e){W1("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==W2.ct&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return c=t.kr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Or(e)})));case 41:e.next=44;break;case 43:t.ur.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Er",get:function(){return this.rr.get(this.nr)}},{key:"mr",value:function(){this.setItem(this.cr,this.Er.Xi())}},{key:"Ir",value:function(e,t,n){var r=new h7(this.currentUser,e,t,n),a=d7(this.persistenceKey,this.currentUser,e);this.setItem(a,r.Xi())}},{key:"Tr",value:function(e){var t=d7(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Rr",value:function(e){var t={clientId:this.nr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Ar",value:function(e,t,n){var r=f7(this.persistenceKey,e),a=new p7(e,t,n);this.setItem(r,a.Xi())}},{key:"vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"br",value:function(e){var t=this.hr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.br(e);return v7.Zi(n,t)}},{key:"Sr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]),a=void 0!==n[2]?n[2]:null;return h7.Zi(new j1(a),r,t)}},{key:"Cr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]);return p7.Zi(r,t)}},{key:"gr",value:function(e){return m7.Zi(e)}},{key:"kr",value:function(e){return JSON.parse(e)}},{key:"Dr",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:V1("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Nr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"Pr",value:function(e,t){var n=this,r=t?this.rr.insert(e,t):this.rr.remove(e),a=this.pr(this.rr),i=this.pr(r),o=[],s=[];return i.forEach((function(e){a.has(e)||o.push(e)})),a.forEach((function(e){i.has(e)||s.push(e)})),this.syncEngine.Fr(o,s).then((function(){n.rr=r}))}},{key:"yr",value:function(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"pr",value:function(e){var t=S5();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),b7=function(){function e(){Vt(this,e),this.Br=new g7,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Zt(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Br.tr(e),this.Lr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Lr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Br.er(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Lr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Br.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Br=new g7,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),x7=function(){function e(){Vt(this,e)}return Zt(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),k7=function(){function e(){var t=this;Vt(this,e),this.Ur=function(){return t.Kr()},this.Gr=function(){return t.Qr()},this.zr=[],this.jr()}return Zt(e,[{key:"qr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}},{key:"Kr",value:function(){V1("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Ut(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(Rme){t.e(Rme)}finally{t.f()}}},{key:"Qr",value:function(){V1("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Ut(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(Rme){t.e(Rme)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),w7=null;function S7(){return null===w7?w7=268435456+Math.round(2147483648*Math.random()):w7++,"0x"+w7.toString(16)}var I7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},N7=function(){function e(t){Vt(this,e),this.Wr=t.Wr,this.Hr=t.Hr}return Zt(e,[{key:"Jr",value:function(e){this.Yr=e}},{key:"Zr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.eo=e}},{key:"close",value:function(){this.Hr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"no",value:function(){this.Yr()}},{key:"so",value:function(e){this.Xr(e)}},{key:"io",value:function(e){this.eo(e)}}]),e}(),T7="WebChannelConnection",C7=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Zt(n,[{key:"lo",value:function(e,t,n,r){var a=S7();return new Promise((function(i,o){var s=new L1;s.setWithCredentials(!0),s.listenOnce(O1.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case R1.NO_ERROR:var t=s.getResponseJson();V1(T7,"XHR for RPC '".concat(e,"' ").concat(a," received:"),JSON.stringify(t)),i(t);break;case R1.TIMEOUT:V1(T7,"RPC '".concat(e,"' ").concat(a," timed out")),o(new J1(X1.DEADLINE_EXCEEDED,"Request time out"));break;case R1.HTTP_ERROR:var n=s.getStatus();if(V1(T7,"RPC '".concat(e,"' ").concat(a," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(X1).indexOf(t)>=0?t:X1.UNKNOWN}(u.status);o(new J1(c,u.message))}else o(new J1(X1.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new J1(X1.UNAVAILABLE,"Connection failed."));break;default:H1()}}finally{V1(T7,"RPC '".concat(e,"' ").concat(a," completed."))}}));var u=JSON.stringify(r);V1(T7,"RPC '".concat(e,"' ").concat(a," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=S7(),a=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=_1(),o=A1(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new F1({})),this.ho(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var u=a.join("");V1(T7,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),s);var c=i.createWebChannel(u,s),l=!1,d=!1,f=new N7({Wr:function(t){d?V1(T7,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(V1(T7,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),V1(T7,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Hr:function(){return c.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(c,M1.EventType.OPEN,(function(){d||V1(T7,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),h(c,M1.EventType.CLOSE,(function(){d||(d=!0,V1(T7,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.so())})),h(c,M1.EventType.ERROR,(function(t){d||(d=!0,G1(T7,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.so(new J1(X1.UNAVAILABLE,"The operation could not be completed")))})),h(c,M1.EventType.MESSAGE,(function(t){var n;if(!d){var a=t.data[0];q1(!!a);var i=a,o=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(o){V1(T7,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=e6[e];if(void 0!==t)return c6(t)}(s),l=o.message;void 0===u&&(u=X1.INTERNAL,l="Unknown error status: "+s+" with message "+o.message),d=!0,f.so(new J1(u,l)),c.close()}else V1(T7,"RPC '".concat(e,"' stream ").concat(r," received:"),a),f.io(a)}})),h(o,D1.STAT_EVENT,(function(t){t.stat===P1.PROXY?V1(T7,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===P1.NOPROXY&&V1(T7,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){f.no()}),0),f}}]),n}(function(){function e(t){Vt(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.ro=n+"://"+t.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Zt(e,[{key:"uo",get:function(){return!1}},{key:"co",value:function(e,t,n,r,a){var i=S7(),o=this.ao(e,t);V1("RestConnection","Sending RPC '".concat(e,"' ").concat(i,":"),o,n);var s={};return this.ho(s,r,a),this.lo(e,o,s,n).then((function(t){return V1("RestConnection","Received RPC '".concat(e,"' ").concat(i,": "),t),t}),(function(t){throw G1("RestConnection","RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,a,i){return this.co(e,t,n,r,a)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+z1,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=I7[e];return"".concat(this.ro,"/v1/").concat(t,":").concat(n)}}]),e}());function E7(){return"undefined"!=typeof window?window:null}function _7(){return"undefined"!=typeof document?document:null}function A7(e){return new I6(e,!0)}var R7=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Vt(this,e),this.Ws=t,this.timerId=n,this._o=r,this.mo=a,this.yo=i,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return Zt(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),a=Math.max(0,n-r);a>0&&V1("ExponentialBackoff","Backing off for ".concat(a," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Ws.enqueueAfterDelay(this.timerId,a,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}},{key:"vo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),O7=function(){function e(t,n,r,a,i,o,s,u){Vt(this,e),this.Ws=t,this.bo=r,this.Po=a,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new R7(t,n)}return Zt(e,[{key:"xo",value:function(){return 1===this.state||5===this.state||this.No()}},{key:"No",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.ko()}},{key:"stop",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.xo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.Co.reset()}},{key:"$o",value:function(){var e=this;this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,(function(){return e.Mo()})))}},{key:"Fo",value:function(e){this.Bo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.No()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"close",value:function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Bo(),this.Lo(),this.Co.cancel(),this.Vo++,4!==t?this.Co.reset():n&&n.code===X1.RESOURCE_EXHAUSTED?(W1(n.toString()),W1("Using maximum backoff delay to prevent overloading the backend."),this.Co.Eo()):n&&n.code===X1.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=(0,C.Z)(t,2),a=r[0],i=r[1];e.Vo===n&&e.Ko(a,i)}),(function(n){t((function(){var t=new J1(X1.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Go(t)}))}))}},{key:"Ko",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr((function(){r((function(){return n.state=2,n.Do=n.Ws.enqueueAfterDelay(n.Po,1e4,(function(){return n.No()&&(n.state=3),Promise.resolve()})),n.listener.Jr()}))})),this.stream.Zr((function(e){r((function(){return n.Go(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"ko",value:function(){var e=this;this.state=5,this.Co.Ao(me(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Go",value:function(e){return V1("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Ws.enqueueAndForget((function(){return t.Vo===e?n():(V1("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),D7=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a,i,o,s){var u;return Vt(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,i,s)).serializer=o,u}return Zt(n,[{key:"Qo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Co.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:H1()}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(q1(void 0===t||"string"==typeof t),P3.fromBase64String(t||"")):(q1(void 0===t||t instanceof Uint8Array),P3.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?X1.UNKNOWN:c6(e.code);return new J1(t,e.message||"")}(o);n=new m6(r,a,i,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=O6(e,u.document.name),l=E6(u.document.updateTime),d=u.document.createTime?E6(u.document.createTime):h2.min(),f=new d4({mapValue:{fields:u.document.fields}}),h=h4.newFoundDocument(c,l,d,f),p=u.targetIds||[],v=u.removedTargetIds||[];n=new p6(p,v,h.key,h)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var g=O6(e,m.document),y=m.readTime?E6(m.readTime):h2.min(),b=h4.newNoDocument(g,y),x=m.removedTargetIds||[];n=new p6([],x,b.key,b)}else if("documentRemove"in t){t.documentRemove;var k=t.documentRemove;k.document;var w=O6(e,k.document),S=k.removedTargetIds||[];n=new p6([],S,w,null)}else{if(!("filter"in t))return H1();t.filter;var I=t.filter;I.targetId;var N=I.count||0,T=new s6(N),C=I.targetId;n=new v6(C,T)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return h2.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?h2.min():t.readTime?E6(t.readTime):h2.min()}(e);return this.listener.zo(t,n)}},{key:"jo",value:function(e){var t={};t.database=F6(this.serializer),t.addTarget=function(e,t){var n,r=t.target;return(n=U4(r)?{documents:U6(e,r)}:{query:V6(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=T6(e,t.resumeToken):t.snapshotVersion.compareTo(h2.min())>0&&(n.readTime=N6(e,t.snapshotVersion.toTimestamp())),n}(this.serializer,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return H1()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=F6(this.serializer),t.removeTarget=e,this.Fo(t)}}]),n}(O7),P7=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a,i,o,s){var u;return Vt(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,i,s)).serializer=o,u.Ho=!1,u}return Zt(n,[{key:"Jo",get:function(){return this.Ho}},{key:"start",value:function(){this.Ho=!1,this.lastStreamToken=void 0,jx(Lo(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Ho&&this.Yo([])}},{key:"Qo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(q1(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();var t=function(e,t){return e&&e.length>0?(q1(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?E6(e.updateTime):E6(t);return n.isEqual(h2.min())&&(n=E6(t)),new z5(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=E6(e.commitTime);return this.listener.Zo(n,t)}return q1(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}},{key:"tu",value:function(){var e={};e.database=F6(this.serializer),this.Fo(e)}},{key:"Yo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return z6(t.serializer,e)}))};this.Fo(n)}}]),n}(O7),F7=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a,i){var o;return Vt(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=a,o.serializer=i,o.eu=!1,o}return Zt(n,[{key:"nu",value:function(){if(this.eu)throw new J1(X1.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var i=(0,C.Z)(a,2),o=i[0],s=i[1];return r.connection.co(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===X1.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new J1(X1.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var a=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var o=(0,C.Z)(i,2),s=o[0],u=o[1];return a.connection.fo(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===X1.UNAUTHENTICATED&&(a.authCredentials.invalidateToken(),a.appCheckCredentials.invalidateToken()),e):new J1(X1.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.eu=!0}}]),n}(function(){return Zt((function e(){Vt(this,e)}))}());var M7=function(){function e(t,n){Vt(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}return Zt(e,[{key:"ou",value:function(){var e=this;0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.iu=null,e.cu("Backend didn't respond within 10 seconds."),e.uu("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.uu("Offline")))}},{key:"set",value:function(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}},{key:"uu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"cu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ru?(W1(t),this.ru=!1):V1("OnlineStateTracker",t)}},{key:"hu",value:function(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}]),e}(),L7=Zt((function e(t,n,r,a,i){var o=this;Vt(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=i,this._u.qr((function(e){r.enqueueAndForget(me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=q7(o),!e.t0){e.next=5;break}return V1("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=K1(t)).du.add(4),e.next=4,z7(n);case 4:return n.mu.set("Unknown"),n.du.delete(4),e.next=8,$7(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.mu=new M7(r,a)}));function $7(e){return j7.apply(this,arguments)}function j7(){return j7=me(ye().mark((function e(t){var n,r,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!q7(t)){e.next=18;break}n=Ut(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),j7.apply(this,arguments)}function z7(e){return B7.apply(this,arguments)}function B7(){return B7=me(ye().mark((function e(t){var n,r,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ut(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return a=r.value,e.next=7,a(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),B7.apply(this,arguments)}function U7(e,t){var n=K1(e);n.fu.has(t.targetId)||(n.fu.set(t.targetId,t),H7(n)?Z7(n):See(n).No()&&W7(n,t))}function V7(e,t){var n=K1(e),r=See(n);n.fu.delete(t),r.No()&&G7(n,t),0===n.fu.size&&(r.No()?r.$o():q7(n)&&n.mu.set("Unknown"))}function W7(e,t){e.gu.Ot(t.targetId),See(e).jo(t)}function G7(e,t){e.gu.Ot(t),See(e).Wo(t)}function Z7(e){e.gu=new y6({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.fu.get(t)||null}}),See(e).start(),e.mu.ou()}function H7(e){return q7(e)&&!See(e).xo()&&e.fu.size>0}function q7(e){return 0===K1(e).du.size}function K7(e){e.gu=void 0}function X7(e){return J7.apply(this,arguments)}function J7(){return J7=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fu.forEach((function(e,n){W7(t,e)}));case 1:case"end":return e.stop()}}),e)}))),J7.apply(this,arguments)}function Y7(e,t){return Q7.apply(this,arguments)}function Q7(){return Q7=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K7(t),H7(t)?(t.mu.au(n),Z7(t)):t.mu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Q7.apply(this,arguments)}function eee(e,t,n){return tee.apply(this,arguments)}function tee(){return tee=me(ye().mark((function e(t,n,r){var a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mu.set("Online"),!(n instanceof m6&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=me(ye().mark((function e(t,n){var r,a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,a=Ut(n.targetIds),e.prev=2,a.s();case 4:if((i=a.n()).done){e.next=14;break}if(o=i.value,e.t0=t.fu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.fu.delete(o),t.gu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),a.e(e.t1);case 19:return e.prev=19,a.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),V1("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,nee(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof p6?t.gu.Kt(n):n instanceof v6?t.gu.Jt(n):t.gu.zt(n),r.isEqual(h2.min())){e.next=29;break}return e.prev=14,e.next=17,K9(t.localStore);case 17:if(a=e.sent,e.t1=r.compareTo(a)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.gu.Xt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var a=e.fu.get(r);a&&e.fu.set(r,a.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.fu.get(t);if(n){e.fu.set(t,n.withResumeToken(P3.EMPTY_BYTE_STRING,n.snapshotVersion)),G7(e,t);var r=new e8(n.target,t,1,n.sequenceNumber);W7(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),V1("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,nee(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),tee.apply(this,arguments)}function nee(e,t,n){return ree.apply(this,arguments)}function ree(){return ree=me(ye().mark((function e(t,n,r){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L2(n)){e.next=2;break}throw n;case 2:return t.du.add(1),e.next=5,z7(t);case 5:t.mu.set("Offline"),r||(r=function(){return K9(t.localStore)}),t.asyncQueue.enqueueRetryable(me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V1("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.du.delete(1),e.next=6,$7(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),ree.apply(this,arguments)}function aee(e,t){return t().catch((function(n){return nee(e,n,t)}))}function iee(e){return oee.apply(this,arguments)}function oee(){return oee=me(ye().mark((function e(t){var n,r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=K1(t),r=Iee(n),a=n.lu.length>0?n.lu[n.lu.length-1].batchId:-1;case 2:if(!see(n)){e.next=19;break}return e.prev=3,e.next=6,Y9(n.localStore,a);case 6:if(null!==(i=e.sent)){e.next=10;break}return 0===n.lu.length&&r.$o(),e.abrupt("break",19);case 10:a=i.batchId,uee(n,i),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,nee(n,e.t0);case 17:e.next=2;break;case 19:cee(n)&&lee(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),oee.apply(this,arguments)}function see(e){return q7(e)&&e.lu.length<10}function uee(e,t){e.lu.push(t);var n=Iee(e);n.No()&&n.Jo&&n.Yo(t.mutations)}function cee(e){return q7(e)&&!Iee(e).xo()&&e.lu.length>0}function lee(e){Iee(e).start()}function dee(e){return fee.apply(this,arguments)}function fee(){return fee=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Iee(t).tu();case 1:case"end":return e.stop()}}),e)}))),fee.apply(this,arguments)}function hee(e){return pee.apply(this,arguments)}function pee(){return pee=me(ye().mark((function e(t){var n,r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Iee(t),r=Ut(t.lu);try{for(r.s();!(a=r.n()).done;)i=a.value,n.Yo(i.mutations)}catch(Rme){r.e(Rme)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),pee.apply(this,arguments)}function vee(e,t,n){return mee.apply(this,arguments)}function mee(){return mee=me(ye().mark((function e(t,n,r){var a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.lu.shift(),i=i6.from(a,n,r),e.next=3,aee(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}));case 3:return e.next=5,iee(t);case 5:case"end":return e.stop()}}),e)}))),mee.apply(this,arguments)}function gee(e,t){return yee.apply(this,arguments)}function yee(){return yee=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Iee(t).Jo,!e.t0){e.next=4;break}return e.next=4,function(){var e=me(ye().mark((function e(t,n){var r,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u6(a=n.code)||a===X1.ABORTED){e.next=7;break}return r=t.lu.shift(),Iee(t).Oo(),e.next=5,aee(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,iee(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:cee(t)&&lee(t);case 5:case"end":return e.stop()}}),e)}))),yee.apply(this,arguments)}function bee(e,t){return xee.apply(this,arguments)}function xee(){return xee=me(ye().mark((function e(t,n){var r,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=K1(t)).asyncQueue.verifyOperationInProgress(),V1("RemoteStore","RemoteStore received new credentials"),a=q7(r),r.du.add(3),e.next=6,z7(r);case 6:return a&&r.mu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.du.delete(3),e.next=12,$7(r);case 12:case"end":return e.stop()}}),e)}))),xee.apply(this,arguments)}function kee(e,t){return wee.apply(this,arguments)}function wee(){return wee=me(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=K1(t),!n){e.next=7;break}return r.du.delete(2),e.next=5,$7(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.du.add(2),e.next=12,z7(r);case 12:r.mu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),wee.apply(this,arguments)}function See(e){return e.yu||(e.yu=function(e,t,n){var r=K1(e);return r.nu(),new D7(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:X7.bind(null,e),Zr:Y7.bind(null,e),zo:eee.bind(null,e)}),e.wu.push(function(){var t=me(ye().mark((function t(n){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.yu.Oo(),H7(e)?Z7(e):e.mu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.yu.stop();case 6:K7(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}function Iee(e){return e.pu||(e.pu=function(e,t,n){var r=K1(e);return r.nu(),new P7(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:dee.bind(null,e),Zr:gee.bind(null,e),Xo:hee.bind(null,e),Zo:vee.bind(null,e)}),e.wu.push(function(){var t=me(ye().mark((function t(n){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.pu.Oo(),t.next=4,iee(e);case 4:t.next=9;break;case 6:return t.next=8,e.pu.stop();case 8:e.lu.length>0&&(V1("RemoteStore","Stopping write stream with ".concat(e.lu.length," pending writes")),e.lu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}var Nee=function(){function e(t,n,r,a,i){Vt(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=i,this.deferred=new Y1,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Zt(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new J1(X1.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,a,i){var o=new e(t,n,Date.now()+r,a,i);return o.start(r),o}}]),e}();function Tee(e,t){if(W1("AsyncQueue","".concat(t,": ").concat(e)),L2(e))return new J1(X1.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Cee=function(){function e(t){Vt(this,e),this.comparator=t?function(e,n){return t(e,n)||y2.comparator(e.key,n.key)}:function(e,t){return y2.comparator(e.key,t.key)},this.keyedMap=p5(),this.sortedSet=new T3(this.comparator)}return Zt(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var a=n.getNext().key,i=r.getNext().key;if(!a.isEqual(i))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Eee=function(){function e(){Vt(this,e),this.Iu=new T3(y2.comparator)}return Zt(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Iu.get(t);n?0!==e.type&&3===n.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==n.type?this.Iu=this.Iu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Iu=this.Iu.remove(t):1===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):H1():this.Iu=this.Iu.insert(t,e)}},{key:"Tu",value:function(){var e=[];return this.Iu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),_ee=function(){function e(t,n,r,a,i,o,s,u,c){Vt(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return Zt(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&r5(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,a,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Cee.emptySet(n),o,r,a,!0,!1,i)}}]),e}(),Aee=Zt((function e(){Vt(this,e),this.Eu=void 0,this.listeners=[]})),Ree=Zt((function e(){Vt(this,e),this.queries=new l5((function(e){return a5(e)}),r5),this.onlineState="Unknown",this.Au=new Set}));function Oee(e,t){return Dee.apply(this,arguments)}function Dee(){return Dee=me(ye().mark((function e(t,n){var r,a,i,o,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=K1(t),a=n.query,i=!1,(o=r.queries.get(a))||(i=!0,o=new Aee),!i){e.next=13;break}return e.prev=3,e.next=6,r.onListen(a);case 6:o.Eu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Tee(e.t0,"Initialization of query '".concat(i5(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(a,o),o.listeners.push(n),n.Ru(r.onlineState),o.Eu&&n.vu(o.Eu)&&$ee(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Dee.apply(this,arguments)}function Pee(e,t){return Fee.apply(this,arguments)}function Fee(){return Fee=me(ye().mark((function e(t,n){var r,a,i,o,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=K1(t),a=n.query,i=!1,(o=r.queries.get(a))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),!i){e.next=6;break}return e.abrupt("return",(r.queries.delete(a),r.onUnlisten(a)));case 6:case"end":return e.stop()}}),e)}))),Fee.apply(this,arguments)}function Mee(e,t){var n,r=K1(e),a=!1,i=Ut(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=Ut(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.vu(o)&&(a=!0)}}catch(Rme){l.e(Rme)}finally{l.f()}u.Eu=o}}}catch(Rme){i.e(Rme)}finally{i.f()}a&&$ee(r)}function Lee(e,t,n){var r=K1(e),a=r.queries.get(t);if(a){var i,o=Ut(a.listeners);try{for(o.s();!(i=o.n()).done;){i.value.onError(n)}}catch(Rme){o.e(Rme)}finally{o.f()}}r.queries.delete(t)}function $ee(e){e.Au.forEach((function(e){e.next()}))}var jee=function(){function e(t,n,r){Vt(this,e),this.query=t,this.bu=n,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return Zt(e,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Ut(e.docChanges);try{for(r.s();!(t=r.n()).done;){var a=t.value;3!==a.type&&n.push(a)}}catch(Rme){r.e(Rme)}finally{r.f()}e=new _ee(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var i=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),i=!0):this.Du(e,this.onlineState)&&(this.Cu(e),i=!0),this.Vu=e,i}},{key:"onError",value:function(e){this.bu.error(e)}},{key:"Ru",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}},{key:"Du",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.xu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Su",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Cu",value:function(e){e=_ee.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}]),e}(),zee=function(){function e(t,n){Vt(this,e),this.Nu=t,this.byteLength=n}return Zt(e,[{key:"ku",value:function(){return"metadata"in this.Nu}}]),e}(),Bee=function(){function e(t){Vt(this,e),this.serializer=t}return Zt(e,[{key:"Hi",value:function(e){return O6(this.serializer,e)}},{key:"Ji",value:function(e){return e.metadata.exists?$6(this.serializer,e.document,!1):h4.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}},{key:"Yi",value:function(e){return E6(e)}}]),e}(),Uee=function(){function e(t,n,r){Vt(this,e),this.Ou=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Vee(t)}return Zt(e,[{key:"$u",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;var n=v2.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new Bee(this.serializer),a=Ut(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.metadata.queries){var o,s=r.Hi(i.metadata.name),u=Ut(i.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||k5()).add(s);n.set(c,l)}}catch(Rme){u.e(Rme)}finally{u.f()}}}}catch(Rme){a.e(Rme)}finally{a.f()}return n}},{key:"complete",value:function(){var e=me(ye().mark((function e(){var t,n,r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o7(this.localStore,new Bee(this.serializer),this.documents,this.Ou.id);case 2:t=e.sent,n=this.Mu(this.documents),r=Ut(this.queries),e.prev=5,r.s();case 7:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=11,u7(this.localStore,i,n.get(i.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Fu:this.collectionGroups,Bu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Vee(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Wee=Zt((function e(t){Vt(this,e),this.key=t})),Gee=Zt((function e(t){Vt(this,e),this.key=t})),Zee=function(){function e(t,n){Vt(this,e),this.query=t,this.Lu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=k5(),this.mutatedKeys=k5(),this.Ku=u5(t),this.Gu=new Cee(this.Ku)}return Zt(e,[{key:"Qu",get:function(){return this.Lu}},{key:"zu",value:function(e,t){var n=this,r=t?t.ju:new Eee,a=t?t.Gu:this.Gu,i=t?t.mutatedKeys:this.mutatedKeys,o=a,s=!1,u="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,c="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((function(e,t){var l=a.get(e),d=o5(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),h=!!d&&(d.hasLocalMutations||n.mutatedKeys.has(d.key)&&d.hasCommittedMutations),p=!1;l&&d?l.data.isEqual(d.data)?f!==h&&(r.track({type:3,doc:d}),p=!0):n.Wu(l,d)||(r.track({type:2,doc:d}),p=!0,(u&&n.Ku(d,u)>0||c&&n.Ku(d,c)<0)&&(s=!0)):!l&&d?(r.track({type:0,doc:d}),p=!0):l&&!d&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(d?(o=o.add(d),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),i=i.delete(l.key),r.track({type:1,doc:l})}return{Gu:o,ju:r,Mi:s,mutatedKeys:i}}},{key:"Wu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,a=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var i=e.ju.Tu();i.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H1()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var o=t?this.Ju():[],s=0===this.Uu.size&&this.current?1:0,u=s!==this.qu;return this.qu=s,0!==i.length||u?{snapshot:new _ee(this.query,e.Gu,a,i,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),Yu:o}:{Yu:o}}},{key:"Ru",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new Eee,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}},{key:"Zu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.Uu;this.Uu=k5(),this.Gu.forEach((function(t){e.Zu(t.key)&&(e.Uu=e.Uu.add(t.key))}));var n=[];return t.forEach((function(t){e.Uu.has(t)||n.push(new Gee(t))})),this.Uu.forEach((function(e){t.has(e)||n.push(new Wee(e))})),n}},{key:"Xu",value:function(e){this.Lu=e.Wi,this.Uu=k5();var t=this.zu(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return _ee.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),Hee=Zt((function e(t,n,r){Vt(this,e),this.query=t,this.targetId=n,this.view=r})),qee=Zt((function e(t){Vt(this,e),this.key=t,this.ec=!1})),Kee=function(){function e(t,n,r,a,i,o){Vt(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new l5((function(e){return a5(e)}),r5),this.ic=new Map,this.rc=new Set,this.oc=new T3(y2.comparator),this.uc=new Map,this.cc=new T9,this.ac={},this.hc=new Map,this.lc=n9.bn(),this.onlineState="Unknown",this.fc=void 0}return Zt(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function Xee(e,t){return Jee.apply(this,arguments)}function Jee(){return Jee=me(ye().mark((function e(t,n){var r,a,i,o,s,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vte(t),!(o=r.sc.get(n))){e.next=6;break}a=o.targetId,r.sharedClientState.addLocalQueryTarget(a),i=o.view.tc(),e.next=15;break;case 6:return e.next=8,Q9(r.localStore,e5(n));case 8:return s=e.sent,r.isPrimaryClient&&U7(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),a=s.targetId,e.next=14,Yee(r,n,a,"current"===u,s.resumeToken);case 14:i=e.sent;case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)}))),Jee.apply(this,arguments)}function Yee(e,t,n,r,a){return Qee.apply(this,arguments)}function Qee(){return Qee=me(ye().mark((function e(t,n,r,a,i){var o,s,u,c,l,d;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=me(ye().mark((function e(t,n,r,a){var i,o,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.view.zu(r),e.t0=i.Mi,!e.t0){e.next=6;break}return e.next=5,n7(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.zu(t,i)}));case 5:i=e.sent;case 6:return o=a&&a.targetChanges.get(n.targetId),s=n.view.applyChanges(i,t.isPrimaryClient,o),e.abrupt("return",(bte(t,n.targetId,s.Yu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,n7(t.localStore,n,!0);case 3:return o=e.sent,s=new Zee(n,o.Wi),u=s.zu(o.documents),c=h6.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==t.onlineState,i),l=s.applyChanges(u,t.isPrimaryClient,c),bte(t,r,l.Yu),d=new Hee(n,r,s),e.abrupt("return",(t.sc.set(n,d),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Qee.apply(this,arguments)}function ete(e,t){return tte.apply(this,arguments)}function tte(){return tte=me(ye().mark((function e(t,n){var r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=K1(t),a=r.sc.get(n),!((i=r.ic.get(a.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(a.targetId,i.filter((function(e){return!r5(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(a.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(a.targetId),e.t0){e.next=9;break}return e.next=9,e7(r.localStore,a.targetId,!1).then((function(){r.sharedClientState.clearQueryState(a.targetId),V7(r.remoteStore,a.targetId),gte(r,a.targetId)})).catch(A2);case 9:e.next=14;break;case 11:return gte(r,a.targetId),e.next=14,e7(r.localStore,a.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),tte.apply(this,arguments)}function nte(e,t,n){return rte.apply(this,arguments)}function rte(){return rte=me(ye().mark((function e(t,n,r){var a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Wte(t),e.prev=1,e.next=4,function(e,t){var n,r,a=K1(e),i=f2.now(),o=t.reduce((function(e,t){return e.add(t.key)}),k5());return a.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=f5(),u=k5();return a.Ki.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return a.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=Ut(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=H5(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new X5(c.key,l,f4(l.value.mapValue),B5.exists(!0)))}}catch(Rme){u.e(Rme)}finally{u.f()}return a.mutationQueue.addMutationBatch(e,i,s,t)})).next((function(t){r=t;var i=t.applyToLocalDocumentSet(n,u);return a.documentOverlayCache.saveOverlays(e,t.batchId,i)}))})).then((function(){return{batchId:r.batchId,changes:v5(n)}}))}(a.localStore,n);case 4:return i=e.sent,a.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new T3(c2)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(a,i.batchId,r),e.next=9,wte(a,i.changes);case 9:return e.next=11,iee(a.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Tee(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),rte.apply(this,arguments)}function ate(e,t){return ite.apply(this,arguments)}function ite(){return ite=me(ye().mark((function e(t,n){var r,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=K1(t),e.prev=1,e.next=4,X9(r.localStore,n);case 4:return a=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(q1(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?q1(n.ec):e.removedDocuments.size>0&&(q1(n.ec),n.ec=!1))})),e.next=8,wte(r,a,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,A2(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),ite.apply(this,arguments)}function ote(e,t,n){var r=K1(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var a=[];r.sc.forEach((function(e,n){var r=n.view.Ru(t);r.snapshot&&a.push(r.snapshot)})),function(e,t){var n=K1(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var a,i=Ut(n.listeners);try{for(i.s();!(a=i.n()).done;){a.value.Ru(t)&&(r=!0)}}catch(Rme){i.e(Rme)}finally{i.f()}})),r&&$ee(n)}(r.eventManager,t),a.length&&r.nc.zo(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function ste(e,t,n){return ute.apply(this,arguments)}function ute(){return ute=me(ye().mark((function e(t,n,r){var a,i,o,s,u,c;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=K1(t)).sharedClientState.updateQueryState(n,"rejected",r),i=a.uc.get(n),!(o=i&&i.key)){e.next=14;break}return s=(s=new T3(y2.comparator)).insert(o,h4.newNoDocument(o,h2.min())),u=k5().add(o),c=new f6(h2.min(),new Map,new _3(c2),s,u),e.next=9,ate(a,c);case 9:a.oc=a.oc.remove(o),a.uc.delete(n),kte(a),e.next=16;break;case 14:return e.next=16,e7(a.localStore,n,!1).then((function(){return gte(a,n,r)})).catch(A2);case 16:case"end":return e.stop()}}),e)}))),ute.apply(this,arguments)}function cte(e,t){return lte.apply(this,arguments)}function lte(){return lte=me(ye().mark((function e(t,n){var r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=K1(t),a=n.batch.batchId,e.prev=1,e.next=4,q9(r.localStore,n);case 4:return i=e.sent,mte(r,a,null),vte(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),e.next=10,wte(r,i);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,A2(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),lte.apply(this,arguments)}function dte(e,t,n){return fte.apply(this,arguments)}function fte(){return fte=me(ye().mark((function e(t,n,r){var a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=K1(t),e.prev=1,e.next=4,function(e,t){var n=K1(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return q1(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(a.localStore,n);case 4:return i=e.sent,mte(a,n,r),vte(a,n),a.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,wte(a,i);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,A2(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),fte.apply(this,arguments)}function hte(e,t){return pte.apply(this,arguments)}function pte(){return pte=me(ye().mark((function e(t,n){var r,a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q7((r=K1(t)).remoteStore)||V1("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=K1(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(a=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(i=r.hc.get(a)||[]).push(n),r.hc.set(a,i),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Tee(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),pte.apply(this,arguments)}function vte(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function mte(e,t,n){var r=K1(e),a=r.ac[r.currentUser.toKey()];if(a){var i=a.get(t);i&&(n?i.reject(n):i.resolve(),a=a.remove(t)),r.ac[r.currentUser.toKey()]=a}}function gte(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,a=Ut(e.ic.get(t));try{for(a.s();!(r=a.n()).done;){var i=r.value;e.sc.delete(i),n&&e.nc.wc(i,n)}}catch(Rme){a.e(Rme)}finally{a.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.hs(t).forEach((function(t){e.cc.containsKey(t)||yte(e,t)}))}function yte(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(V7(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),kte(e))}function bte(e,t,n){var r,a=Ut(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;i instanceof Wee?(e.cc.addReference(i.key,t),xte(e,i)):i instanceof Gee?(V1("SyncEngine","Document no longer in limbo: "+i.key),e.cc.removeReference(i.key,t),e.cc.containsKey(i.key)||yte(e,i.key)):H1()}}catch(Rme){a.e(Rme)}finally{a.f()}}function xte(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(V1("SyncEngine","New document in limbo: "+n),e.rc.add(r),kte(e))}function kte(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new y2(v2.fromString(t)),r=e.lc.next();e.uc.set(r,new qee(n)),e.oc=e.oc.insert(n,r),U7(e.remoteStore,new e8(e5(q4(n.path)),r,2,W2.ct))}}function wte(e,t,n){return Ste.apply(this,arguments)}function Ste(){return Ste=me(ye().mark((function e(t,n,r){var a,i,o,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=K1(t),i=[],o=[],s=[],e.t0=a.sc.isEmpty(),e.t0){e.next=9;break}return a.sc.forEach((function(e,t){s.push(a.dc(t,n,r).then((function(e){if((e||r)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);var n=U9.Di(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return a.nc.zo(i),e.next=9,function(){var e=me(ye().mark((function e(t,n){var r,a,i,o,s,u,c,l;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=K1(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return O2.forEach(n,(function(t){return O2.forEach(t.Vi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return O2.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),L2(e.t0)){e.next=10;break}throw e.t0;case 10:V1("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:a=Ut(n);try{for(a.s();!(i=a.n()).done;)o=i.value,s=o.targetId,o.fromCache||(u=r.Li.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Li=r.Li.insert(s,l))}catch(Rme){a.e(Rme)}finally{a.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(a.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Ste.apply(this,arguments)}function Ite(e,t){return Nte.apply(this,arguments)}function Nte(){return Nte=me(ye().mark((function e(t,n){var r,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=K1(t)).currentUser.isEqual(n)){e.next=11;break}return V1("SyncEngine","User change. New user:",n.toKey()),e.next=5,Z9(r.localStore,n);case 5:return a=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new J1(X1.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,a.removedBatchIds,a.addedBatchIds),e.next=11,wte(r,a.Qi);case 11:case"end":return e.stop()}}),e)}))),Nte.apply(this,arguments)}function Tte(e,t){var n=K1(e),r=n.uc.get(t);if(r&&r.ec)return k5().add(r.key);var a=k5(),i=n.ic.get(t);if(!i)return a;var o,s=Ut(i);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.sc.get(u);a=a.unionWith(c.view.Qu)}}catch(Rme){s.e(Rme)}finally{s.f()}return a}function Cte(e,t){return Ete.apply(this,arguments)}function Ete(){return Ete=me(ye().mark((function e(t,n){var r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=K1(t),e.next=3,n7(r.localStore,n.query,!0);case 3:return a=e.sent,i=n.view.Xu(a),e.abrupt("return",(r.isPrimaryClient&&bte(r,n.targetId,i.Yu),i));case 6:case"end":return e.stop()}}),e)}))),Ete.apply(this,arguments)}function _te(e,t){return Ate.apply(this,arguments)}function Ate(){return Ate=me(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=K1(t),e.abrupt("return",a7(r.localStore,n).then((function(e){return wte(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Ate.apply(this,arguments)}function Rte(e,t,n,r){return Ote.apply(this,arguments)}function Ote(){return Ote=me(ye().mark((function e(t,n,r,a){var i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=K1(t),e.next=3,function(e,t){var n=K1(e),r=K1(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.In(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):O2.resolve(null)}))}))}(i.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,iee(i.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(mte(i,n,a||null),vte(i,n),function(e,t){K1(K1(e).mutationQueue).En(t)}(i.localStore,n)):H1();case 11:return e.next=13,wte(i,o);case 13:e.next=16;break;case 15:V1("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Ote.apply(this,arguments)}function Dte(e,t){return Pte.apply(this,arguments)}function Pte(){return Pte=me(ye().mark((function e(t,n){var r,a,i,o,s,u,c,l;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Vte(r=K1(t)),Wte(r),!0!==n||!0===r.fc){e.next=13;break}return a=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Fte(r,a.toArray());case 5:return i=e.sent,r.fc=!0,e.next=9,kee(r.remoteStore,!0);case 9:o=Ut(i);try{for(o.s();!(s=o.n()).done;)u=s.value,U7(r.remoteStore,u)}catch(Rme){o.e(Rme)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.fc){e.next=25;break}return c=[],l=Promise.resolve(),r.ic.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return gte(r,t),e7(r.localStore,t,!0)})),V7(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Fte(r,c);case 21:return function(e){var t=K1(e);t.uc.forEach((function(e,n){V7(t.remoteStore,n)})),t.cc.ls(),t.uc=new Map,t.oc=new T3(y2.comparator)}(r),r.fc=!1,e.next=25,kee(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Pte.apply(this,arguments)}function Fte(e,t,n){return Mte.apply(this,arguments)}function Mte(){return Mte=me(ye().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,h,p,v,m,g;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=K1(t),i=[],o=[],s=Ut(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(d=a.ic.get(c))||0===d.length){e.next=34;break}return e.next=11,Q9(a.localStore,e5(d[0]));case 11:l=e.sent,f=Ut(d),e.prev=13,f.s();case 15:if((h=f.n()).done){e.next=24;break}return p=h.value,v=a.sc.get(p),e.next=20,Cte(a,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,r7(a.localStore,c);case 36:return g=e.sent,e.next=39,Q9(a.localStore,g);case 39:return l=e.sent,e.next=42,Yee(a,Lte(g),c,!1,l.resumeToken);case 42:i.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(a.nc.zo(o),i));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Mte.apply(this,arguments)}function Lte(e){return H4(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function $te(e){var t=K1(e);return K1(K1(t.localStore).persistence).bi()}function jte(e,t,n,r){return zte.apply(this,arguments)}function zte(){return zte=me(ye().mark((function e(t,n,r,a){var i,o,s,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=K1(t)).fc){e.next=3;break}return e.abrupt("return",void V1("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=i.ic.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,a7(i.localStore,s5(o[0]));case 10:return s=e.sent,u=f6.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,P3.EMPTY_BYTE_STRING),e.next=14,wte(i,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,e7(i.localStore,n,!0);case 17:return gte(i,n,a),e.abrupt("break",20);case 19:H1();case 20:case"end":return e.stop()}}),e)}))),zte.apply(this,arguments)}function Bte(e,t,n){return Ute.apply(this,arguments)}function Ute(){return Ute=me(ye().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Vte(t)).fc){e.next=45;break}i=Ut(n),e.prev=3,i.s();case 5:if((o=i.n()).done){e.next=21;break}if(s=o.value,!a.ic.has(s)){e.next=10;break}return V1("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,r7(a.localStore,s);case 12:return u=e.sent,e.next=15,Q9(a.localStore,u);case 15:return c=e.sent,e.next=18,Yee(a,Lte(u),c.targetId,!1,c.resumeToken);case 18:U7(a.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),i.e(e.t0);case 26:return e.prev=26,i.f(),e.finish(26);case 29:l=Ut(r),e.prev=30,f=ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.value,e.t0=a.ic.has(t),!e.t0){e.next=5;break}return e.next=5,e7(a.localStore,t,!1).then((function(){V7(a.remoteStore,t),gte(a,t)})).catch(A2);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((d=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Ute.apply(this,arguments)}function Vte(e){var t=K1(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ate.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tte.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ste.bind(null,t),t.nc.zo=Mee.bind(null,t.eventManager),t.nc.wc=Lee.bind(null,t.eventManager),t}function Wte(e){var t=K1(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=cte.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=dte.bind(null,t),t}function Gte(e,t,n){var r=K1(e);(function(){var e=me(ye().mark((function e(t,n,r){var a,i,o,s,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return a=e.sent,e.next=6,function(e,t){var n=K1(e),r=E6(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.xs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,a);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(a)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Vee(a)),i=new Uee(a,t.localStore,n.serializer),e.next=15,n._c();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,i.$u(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n._c();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,i.complete();case 28:return u=e.sent,e.next=31,wte(t,u.Bu,void 0);case 31:return e.next=33,function(e,t){var n=K1(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.xs.saveBundleMetadata(e,t)}))}(t.localStore,a);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Fu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(G1("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Zte=function(){function e(){Vt(this,e),this.synchronizeTabs=!1}return Zt(e,[{key:"initialize",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=A7(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return G9(this.persistence,new V9,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new O9(P9.Fs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new b7}},{key:"terminate",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Hte=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a){var i;return Vt(this,n),(i=t.call(this)).mc=e,i.cacheSizeBytes=r,i.forceOwnership=a,i.synchronizeTabs=!1,i}return Zt(n,[{key:"initialize",value:function(){var e=me(ye().mark((function e(t){var r=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jx(Lo(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.mc.initialize(this,t);case 4:return e.next=6,Wte(this.mc.syncEngine);case 6:return e.next=8,iee(this.mc.remoteStore);case 8:return e.next=10,this.persistence.hi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return G9(this.persistence,new V9,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new c9(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new V2(t,this.persistence);return new U2(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=B9(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?q8.withCacheSize(this.cacheSizeBytes):q8.DEFAULT;return new $9(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,E7(),_7(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new b7}}]),n}(Zte),qte=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this,e,r,!1)).mc=e,a.cacheSizeBytes=r,a.synchronizeTabs=!0,a}return Zt(n,[{key:"initialize",value:function(){var e=me(ye().mark((function e(t){var r,a=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jx(Lo(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.mc.syncEngine,e.t0=this.sharedClientState instanceof y7,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:Rte.bind(null,r),Mr:jte.bind(null,r),Fr:Bte.bind(null,r),bi:$te.bind(null,r),Or:_te.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.hi(function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dte(a.mc.syncEngine,t);case 2:a.gcScheduler&&(t&&!a.gcScheduler.started?a.gcScheduler.start():t||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(t&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():t||a.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=E7();if(!y7.D(t))throw new J1(X1.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=B9(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new y7(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Hte),Kte=function(){function e(){Vt(this,e)}return Zt(e,[{key:"initialize",value:function(){var e=me(ye().mark((function e(t,n){var r=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return ote(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ite.bind(null,this.syncEngine),e.next=12,kee(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Ree}},{key:"createDatastore",value:function(e){var t,n=A7(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new C7(t));return function(e,t,n,r){return new F7(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,a,i,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,a=function(e){return ote(o.syncEngine,e,0)},i=k7.D()?new k7:new x7,new L7(t,n,r,a,i)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,a,i,o){var s=new Kee(e,t,n,r,a,i);return o&&(s.fc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=K1(t),V1("RemoteStore","RemoteStore shutting down."),n.du.add(5),e.next=5,z7(n);case 5:n._u.shutdown(),n.mu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Xte(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return me(ye().mark((function r(){var a;return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return a={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,a));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var Jte=function(){function e(t){Vt(this,e),this.observer=t,this.muted=!1}return Zt(e,[{key:"next",value:function(e){this.observer.next&&this.gc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.gc(this.observer.error,e):W1("Uncaught Error in snapshot listener:",e.toString())}},{key:"yc",value:function(){this.muted=!0}},{key:"gc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Yte=function(){function e(t,n){var r=this;Vt(this,e),this.Ic=t,this.serializer=n,this.metadata=new Y1,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then((function(e){e&&e.ku()?r.metadata.resolve(e.Nu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Nu))))}),(function(e){return r.metadata.reject(e)}))}return Zt(e,[{key:"close",value:function(){return this.Ic.cancel()}},{key:"getMetadata",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_c",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ec());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ec",value:function(){var e=me(ye().mark((function e(){var t,n,r,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ac();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Tc.decode(t),r=Number(n),isNaN(r)&&this.Rc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return a=e.sent,e.abrupt("return",new zee(JSON.parse(a),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ac",value:function(){var e=me(ye().mark((function e(){var t,n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.bc()<0)){e.next=7;break}return e.next=3,this.Pc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.bc())<0&&this.Rc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Pc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Rc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Tc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Rc",value:function(e){throw this.Ic.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Pc",value:function(){var e=me(ye().mark((function e(){var t,n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ic.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Qte=function(){function e(t){Vt(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Zt(e,[{key:"lookup",value:function(){var e=me(ye().mark((function e(t){var n,r=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new J1(X1.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=me(ye().mark((function e(t,n){var r,a,i,o,s,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=K1(t),a=F6(r.serializer)+"/documents",i={documents:n.map((function(e){return R6(r.serializer,e)}))},e.next=5,r.fo("BatchGetDocuments",a,i,n.length);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=j6(r.serializer,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());q1(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new n6(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=me(ye().mark((function e(){var t,n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=y2.fromPath(t);n.mutations.push(new r6(r,n.precondition(r)))})),e.next=7,function(){var e=me(ye().mark((function e(t,n){var r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=K1(t),a=F6(r.serializer)+"/documents",i={writes:n.map((function(e){return z6(r.serializer,e)}))},e.next=3,r.co("Commit",a,i);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw H1();t=h2.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new J1(X1.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(h2.min())?B5.exists(!1):B5.updateTime(t):B5.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(h2.min()))throw new J1(X1.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return B5.updateTime(t)}return B5.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),ene=function(){function e(t,n,r,a,i){Vt(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=a,this.deferred=i,this.Vc=r.maxAttempts,this.Co=new R7(this.asyncQueue,"transaction_retry")}return Zt(e,[{key:"run",value:function(){this.Vc-=1,this.Sc()}},{key:"Sc",value:function(){var e=this;this.Co.Ao(me(ye().mark((function t(){var n,r;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Qte(e.datastore),(r=e.Dc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Cc(t)}))}))})).catch((function(t){e.Cc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Dc",value:function(e){try{var t=this.updateFunction(e);return!G2(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Cc",value:function(e){var t=this;this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!u6(t)}return!1}}]),e}(),tne=function(){function e(t,n,r,a){var i=this;Vt(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=j1.UNAUTHENTICATED,this.clientId=u2.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V1("FirestoreClient","Received user=",t.uid),e.next=3,i.authCredentialListener(t);case 3:i.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return V1("FirestoreClient","Received new app check token=",e),i.appCheckCredentialListener(e,i.user)}))}return Zt(e,[{key:"getConfiguration",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new J1(X1.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Y1;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(me(ye().mark((function n(){var r;return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Tee(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function nne(e,t){return rne.apply(this,arguments)}function rne(){return rne=me(ye().mark((function e(t,n){var r,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),V1("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:a=r.initialUser,t.setCredentialChangeListener(function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a.isEqual(t),e.t0){e.next=5;break}return e.next=4,Z9(n.localStore,t);case 4:a=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),rne.apply(this,arguments)}function ane(e,t){return ine.apply(this,arguments)}function ine(){return ine=me(ye().mark((function e(t,n){var r,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,sne(t);case 3:return r=e.sent,V1("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return a=e.sent,e.next=10,n.initialize(r,a);case 10:t.setCredentialChangeListener((function(e){return bee(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return bee(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),ine.apply(this,arguments)}function one(e){return"FirebaseError"===e.name?e.code===X1.FAILED_PRECONDITION||e.code===X1.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function sne(e){return une.apply(this,arguments)}function une(){return une=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return V1("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,nne(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),one(n=e.t0)){e.next=13;break}throw n;case 13:return G1("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,nne(t,new Zte);case 16:e.next=21;break;case 18:return V1("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,nne(t,new Zte);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),une.apply(this,arguments)}function cne(e){return lne.apply(this,arguments)}function lne(){return lne=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return V1("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,ane(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return V1("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,ane(t,new Kte);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),lne.apply(this,arguments)}function dne(e){return sne(e).then((function(e){return e.persistence}))}function fne(e){return sne(e).then((function(e){return e.localStore}))}function hne(e){return cne(e).then((function(e){return e.remoteStore}))}function pne(e){return cne(e).then((function(e){return e.syncEngine}))}function vne(e){return cne(e).then((function(e){return e.datastore}))}function mne(e){return gne.apply(this,arguments)}function gne(){return gne=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cne(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Xee.bind(null,n.syncEngine),r.onUnlisten=ete.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),gne.apply(this,arguments)}function yne(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Y1;return e.asyncQueue.enqueueAndForget(me(ye().mark((function a(){return ye().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=function(e,t,n,r,a){var i=new Jte({next:function(i){t.enqueueAndForget((function(){return Pee(e,o)}));var s=i.docs.has(n);!s&&i.fromCache?a.reject(new J1(X1.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&i.fromCache&&r&&"server"===r.source?a.reject(new J1(X1.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):a.resolve(i)},error:function(e){return a.reject(e)}}),o=new jee(q4(n.path),i,{includeMetadataChanges:!0,xu:!0});return Oee(e,o)},a.next=3,mne(e);case 3:return a.t1=a.sent,a.t2=e.asyncQueue,a.t3=t,a.t4=n,a.t5=r,a.abrupt("return",(0,a.t0)(a.t1,a.t2,a.t3,a.t4,a.t5));case 9:case"end":return a.stop()}}),a)})))),r.promise}function bne(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Y1;return e.asyncQueue.enqueueAndForget(me(ye().mark((function a(){return ye().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=function(e,t,n,r,a){var i=new Jte({next:function(n){t.enqueueAndForget((function(){return Pee(e,o)})),n.fromCache&&"server"===r.source?a.reject(new J1(X1.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):a.resolve(n)},error:function(e){return a.reject(e)}}),o=new jee(n,i,{includeMetadataChanges:!0,xu:!0});return Oee(e,o)},a.next=3,mne(e);case 3:return a.t1=a.sent,a.t2=e.asyncQueue,a.t3=t,a.t4=n,a.t5=r,a.abrupt("return",(0,a.t0)(a.t1,a.t2,a.t3,a.t4,a.t5));case 9:case"end":return a.stop()}}),a)})))),r.promise}var xne=new Map;function kne(e,t,n){if(!n)throw new J1(X1.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function wne(e,t,n,r){if(!0===t&&!0===r)throw new J1(X1.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Sne(e){if(!y2.isDocumentKey(e))throw new J1(X1.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ine(e){if(y2.isDocumentKey(e))throw new J1(X1.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Nne(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":H1()}function Tne(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new J1(X1.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Nne(e);throw new J1(X1.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Cne(e,t){if(t<=0)throw new J1(X1.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Ene=function(){function e(t){var n;if(Vt(this,e),void 0===t.host){if(void 0!==t.ssl)throw new J1(X1.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new J1(X1.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,wne("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Zt(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),_ne=function(){function e(t,n,r,a){Vt(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ene({}),this._settingsFrozen=!1}return Zt(e,[{key:"app",get:function(){if(!this._app)throw new J1(X1.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new J1(X1.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ene(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new e2;switch(e.type){case"firstParty":return new a2(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new J1(X1.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=xne.get(e);t&&(V1("ComponentProvider","Removing Datastore"),xne.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Ane(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(e=Tne(e,_ne))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==t&&G1("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},i),{host:"".concat(t,":").concat(n),ssl:!1})),a.mockUserToken){var o,s;if("string"==typeof a.mockUserToken)o=a.mockUserToken,s=j1.MOCK_USER;else{o=mV(a.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=a.mockUserToken.sub||a.mockUserToken.user_id;if(!u)throw new J1(X1.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new j1(u)}e._authCredentials=new t2(new Q1(o,s))}}var Rne=function(){function e(t,n,r){Vt(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Zt(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Dne(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),One=function(){function e(t,n,r){Vt(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Zt(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Dne=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a){var i;return Vt(this,n),(i=t.call(this,e,r,q4(a)))._path=a,i.type="collection",i}return Zt(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Rne(this.firestore,null,new y2(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(One);function Pne(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(e=MV(e),kne("collection","path",t),e instanceof _ne){var i=v2.fromString.apply(v2,[t].concat(r));return Ine(i),new Dne(e,null,i)}if(!(e instanceof Rne||e instanceof Dne))throw new J1(X1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(v2.fromString.apply(v2,[t].concat(r)));return Ine(o),new Dne(e.firestore,null,o)}function Fne(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(e=MV(e),1===arguments.length&&(t=u2.A()),kne("doc","path",t),e instanceof _ne){var i=v2.fromString.apply(v2,[t].concat(r));return Sne(i),new Rne(e,null,new y2(i))}if(!(e instanceof Rne||e instanceof Dne))throw new J1(X1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(v2.fromString.apply(v2,[t].concat(r)));return Sne(o),new Rne(e.firestore,e instanceof Dne?e.converter:null,new y2(o))}function Mne(e,t){return e=MV(e),t=MV(t),(e instanceof Rne||e instanceof Dne)&&(t instanceof Rne||t instanceof Dne)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Lne(e,t){return e=MV(e),t=MV(t),e instanceof One&&t instanceof One&&e.firestore===t.firestore&&r5(e._query,t._query)&&e.converter===t.converter}var $ne=function(){function e(){var t=this;Vt(this,e),this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new R7(this,"async_queue_retry"),this.qc=function(){var e=_7();e&&V1("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Co.vo()};var n=_7();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qc)}return Zt(e,[{key:"isShuttingDown",get:function(){return this.Oc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Uc(),this.Kc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;var t=_7();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Uc(),this.Oc)return new Promise((function(){}));var n=new Y1;return this.Kc((function(){return t.Oc&&t.Bc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.kc.push(e),t.Gc()}))}},{key:"Gc",value:function(){var e=me(ye().mark((function e(){var t=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.kc.length){e.next=14;break}return e.prev=1,e.next=4,this.kc[0]();case 4:this.kc.shift(),this.Co.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),L2(e.t0)){e.next=12;break}throw e.t0;case 12:V1("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.kc.length>0&&this.Co.Ao((function(){return t.Gc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(e){var t=this,n=this.Nc.then((function(){return t.Fc=!0,e().catch((function(e){t.Mc=e,t.Fc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw W1("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Fc=!1,e}))}));return this.Nc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);var a=Nee.createAndSchedule(this,e,t,n,(function(e){return r.Qc(e)}));return this.$c.push(a),a}},{key:"Uc",value:function(){this.Mc&&H1()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Nc,e.next=3,t;case 3:if(t!==this.Nc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"jc",value:function(e){var t,n=Ut(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(Rme){n.e(Rme)}finally{n.f()}return!1}},{key:"Wc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Ut(t.$c);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.skipDelay(),"all"!==e&&a.timerId===e)break}}catch(Rme){r.e(Rme)}finally{r.f()}return t.zc()}))}},{key:"Hc",value:function(e){this.Lc.push(e)}},{key:"Qc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function jne(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,a=Ut(["next","error","complete"]);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i in r&&"function"==typeof r[i])return!0}}catch(Rme){a.e(Rme)}finally{a.f()}return!1}(e)}var zne=function(){function e(){Vt(this,e),this._progressObserver={},this._taskCompletionResolver=new Y1,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Zt(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Bne=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a,i){var o;return Vt(this,n),(o=t.call(this,e,r,a,i)).type="firestore",o._queue=new $ne,o._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]",o}return Zt(n,[{key:"_terminate",value:function(){return this._firestoreClient||Vne(this),this._firestoreClient.terminate()}}]),n}(_ne);function Une(e){return e._firestoreClient||Vne(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Vne(e){var t,n,r,a=e._freezeSettings(),i=function(e,t,n,r){return new U3(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,a);e._firestoreClient=new tne(e._authCredentials,e._appCheckCredentials,e._queue,i),(null===(n=a.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=a.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.cache.kind,_offline:a.cache._offlineComponentProvider,_online:a.cache._onlineComponentProvider})}function Wne(e,t,n){var r=new Y1;return e.asyncQueue.enqueue(me(ye().mark((function a(){var i;return ye().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,nne(e,n);case 3:return a.next=5,ane(e,t);case 5:r.resolve(),a.next=14;break;case 8:if(a.prev=8,a.t0=a.catch(0),one(i=a.t0)){a.next=13;break}throw i;case 13:G1("Error enabling indexeddb cache. Falling back to memory cache: "+i),r.reject(i);case 14:case"end":return a.stop()}}),a,null,[[0,8]])})))).then((function(){return r.promise}))}function Gne(e){return function(e){return e.asyncQueue.enqueue(me(ye().mark((function t(){var n,r;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dne(e);case 2:return n=t.sent,t.next=5,hne(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=K1(e);return t.du.delete(0),$7(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Une(e=Tne(e,Bne)))}function Zne(e){return function(e){return e.asyncQueue.enqueue(me(ye().mark((function t(){var n,r;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dne(e);case 2:return n=t.sent,t.next=5,hne(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=K1(t)).du.add(0),e.next=4,z7(n);case 4:n.mu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Une(e=Tne(e,Bne)))}function Hne(e,t){var n=Une(e=Tne(e,Bne)),r=new zne;return function(e,t,n,r){var a=function(e,t){return function(e,t){return new Yte(e,t)}(function(e,t){if(e instanceof Uint8Array)return Xte(e,t);if(e instanceof ArrayBuffer)return Xte(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,A7(t));e.asyncQueue.enqueueAndForget(me(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Gte,t.next=3,pne(e);case 3:t.t1=t.sent,t.t2=a,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function qne(e,t){return function(e,t){return e.asyncQueue.enqueue(me(ye().mark((function n(){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=K1(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.xs.getNamedQuery(e,t)}))},n.next=3,fne(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Une(e=Tne(e,Bne)),t).then((function(t){return t?new One(e,null,t.query):null}))}function Kne(e){if(e._initialized||e._terminated)throw new J1(X1.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Xne=function(){function e(t){Vt(this,e),this._byteString=t}return Zt(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(P3.fromBase64String(t))}catch(t){throw new J1(X1.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(P3.fromUint8Array(t))}}]),e}(),Jne=function(){function e(){Vt(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0;a<n.length;++a)if(0===n[a].length)throw new J1(X1.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new g2(n)}return Zt(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Yne=Zt((function e(t){Vt(this,e),this._methodName=t})),Qne=function(){function e(t,n){if(Vt(this,e),!isFinite(t)||t<-90||t>90)throw new J1(X1.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new J1(X1.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Zt(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return c2(this._lat,e._lat)||c2(this._long,e._long)}}]),e}(),ere=/^__.*__$/,tre=function(){function e(t,n,r){Vt(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Zt(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new X5(e,this.data,this.fieldMask,t,this.fieldTransforms):new K5(e,this.data,t,this.fieldTransforms)}}]),e}(),nre=function(){function e(t,n,r){Vt(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Zt(e,[{key:"toMutation",value:function(e,t){return new X5(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function rre(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H1()}}var are=function(){function e(t,n,r,a,i,o){Vt(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,void 0===i&&this.Jc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Zt(e,[{key:"path",get:function(){return this.settings.path}},{key:"Yc",get:function(){return this.settings.Yc}},{key:"Zc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Xc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.ea(e),r}},{key:"na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.Jc(),r}},{key:"sa",value:function(e){return this.Zc({path:void 0,ta:!0})}},{key:"ia",value:function(e){return Ire(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Jc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ea(this.path.get(e))}},{key:"ea",value:function(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(rre(this.Yc)&&ere.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}]),e}(),ire=function(){function e(t,n,r){Vt(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||A7(t)}return Zt(e,[{key:"ua",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new are({Yc:e,methodName:t,oa:n,path:g2.emptyPath(),ta:!1,ra:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function ore(e){var t=e._freezeSettings(),n=A7(e._databaseId);return new ire(e._databaseId,!!t.ignoreUndefinedProperties,n)}function sre(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ua(i.merge||i.mergeFields?2:0,t,n,a);xre("Data must be an object, but it was:",o,r);var s,u,c=yre(r,o);if(i.merge)s=new O3(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){var l,d=[],f=Ut(i.mergeFields);try{for(f.s();!(l=f.n()).done;){var h=l.value,p=kre(t,h,n);if(!o.contains(p))throw new J1(X1.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Nre(d,p)||d.push(p)}}catch(Rme){f.e(Rme)}finally{f.f()}s=new O3(d),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new tre(new d4(c),s,u)}var ure=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Yc)throw 1===e.Yc?e.ia("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ia("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Yne);function cre(e,t,n){return new are({Yc:3,oa:t.settings.oa,methodName:e._methodName,ta:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var lre=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"_toFieldTransform",value:function(e){return new j5(e.path,new R5)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Yne),dre=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this,e)).ca=r,a}return Zt(n,[{key:"_toFieldTransform",value:function(e){var t=cre(this,e,!0),n=this.ca.map((function(e){return gre(e,t)})),r=new O5(n);return new j5(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Yne),fre=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this,e)).ca=r,a}return Zt(n,[{key:"_toFieldTransform",value:function(e){var t=cre(this,e,!0),n=this.ca.map((function(e){return gre(e,t)})),r=new P5(n);return new j5(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Yne),hre=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this,e)).aa=r,a}return Zt(n,[{key:"_toFieldTransform",value:function(e){var t=new M5(e.serializer,T5(e.serializer,this.aa));return new j5(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Yne);function pre(e,t,n,r){var a=e.ua(1,t,n);xre("Data must be an object, but it was:",a,r);var i=[],o=d4.empty();I3(r,(function(e,r){var s=Sre(t,e,n);r=MV(r);var u=a.na(s);if(r instanceof ure)i.push(s);else{var c=gre(r,u);null!=c&&(i.push(s),o.set(s,c))}}));var s=new O3(i);return new nre(o,s,a.fieldTransforms)}function vre(e,t,n,r,a,i){var o=e.ua(1,t,n),s=[kre(t,r,n)],u=[a];if(i.length%2!=0)throw new J1(X1.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<i.length;c+=2)s.push(kre(t,i[c])),u.push(i[c+1]);for(var l=[],d=d4.empty(),f=s.length-1;f>=0;--f)if(!Nre(l,s[f])){var h=s[f],p=u[f];p=MV(p);var v=o.na(h);if(p instanceof ure)l.push(h);else{var m=gre(p,v);null!=m&&(l.push(h),d.set(h,m))}}var g=new O3(l);return new nre(d,g,o.fieldTransforms)}function mre(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return gre(n,e.ua(r?4:3,t))}function gre(e,t){if(bre(e=MV(e)))return xre("Unsupported field value:",t,e),yre(e,t);if(e instanceof Yne)return function(e,t){if(!rre(t.Yc))throw t.ia("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ia("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ta&&4!==t.Yc)throw t.ia("Nested arrays are not supported");return function(e,t){var n,r=[],a=0,i=Ut(e);try{for(i.s();!(n=i.n()).done;){var o=gre(n.value,t.sa(a));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),a++}}catch(Rme){i.e(Rme)}finally{i.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=MV(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return T5(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=f2.fromDate(e);return{timestampValue:N6(t.serializer,n)}}if(e instanceof f2){var r=new f2(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:N6(t.serializer,r)}}if(e instanceof Qne)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Xne)return{bytesValue:T6(t.serializer,e._byteString)};if(e instanceof Rne){var a=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(a))throw t.ia("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(a.projectId,"/").concat(a.database));return{referenceValue:_6(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ia("Unsupported field value: ".concat(Nne(e)))}(e,t)}function yre(e,t){var n={};return N3(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):I3(e,(function(e,r){var a=gre(r,t.Xc(e));null!=a&&(n[e]=a)})),{mapValue:{fields:n}}}function bre(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof f2||e instanceof Qne||e instanceof Xne||e instanceof Rne||e instanceof Yne)}function xre(e,t,n){if(!bre(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Nne(n);throw"an object"===r?t.ia(e+" a custom object"):t.ia(e+" "+r)}}function kre(e,t,n){if((t=MV(t))instanceof Jne)return t._internalPath;if("string"==typeof t)return Sre(e,t);throw Ire("Field path arguments must be of type string or ",e,!1,void 0,n)}var wre=new RegExp("[~\\*/\\[\\]]");function Sre(e,t,n){if(t.search(wre)>=0)throw Ire("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return sy(Jne,(0,Le.Z)(t.split(".")))._internalPath}catch(r){throw Ire("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ire(e,t,n,r,a){var i=r&&!r.isEmpty(),o=void 0!==a,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(i||o)&&(u+=" (found",i&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(a)),u+=")"),new J1(X1.INVALID_ARGUMENT,s+e+u)}function Nre(e,t){return e.some((function(e){return e.isEqual(t)}))}var Tre=function(){function e(t,n,r,a,i){Vt(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=i}return Zt(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Rne(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Cre(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Ere("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Cre=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"data",value:function(){return jx(Lo(n.prototype),"data",this).call(this)}}]),n}(Tre);function Ere(e,t){return"string"==typeof t?Sre(e,t):t instanceof Jne?t._internalPath:t._delegate._internalPath}function _re(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new J1(X1.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Are=Zt((function e(){Vt(this,e)})),Rre=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n)}(Are);function Ore(e,t){for(var n=[],r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];t instanceof Are&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Pre})).length,n=e.filter((function(e){return e instanceof Dre})).length;if(t>1||t>0&&n>0)throw new J1(X1.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(a));var o,s=Ut(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;e=u._apply(e)}}catch(Rme){s.e(Rme)}finally{s.f()}return e}var Dre=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a){var i;return Vt(this,n),(i=t.call(this))._field=e,i._op=r,i._value=a,i.type="where",i}return Zt(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Zre(e._query,t),new One(e.firestore,e.converter,t5(e._query,t))}},{key:"_parse",value:function(e){var t=ore(e.firestore),n=function(e,t,n,r,a,i,o){var s;if(a.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new J1(X1.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){Gre(o,i);var u,c=[],l=Ut(o);try{for(l.s();!(u=l.n()).done;){var d=u.value;c.push(Wre(r,e,d))}}catch(Rme){l.e(Rme)}finally{l.f()}s={arrayValue:{values:c}}}else s=Wre(r,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Gre(o,i),s=mre(n,"where",o,"in"===i||"not-in"===i);return x4.create(a,i,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Rre);var Pre=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this)).type=e,a._queryConstraints=r,a}return Zt(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:k4.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,a=Ut(t.getFlattenedFilters());try{for(a.s();!(n=a.n()).done;){var i=n.value;Zre(r,i),r=t5(r,i)}}catch(Rme){a.e(Rme)}finally{a.f()}}(e._query,t),new One(e.firestore,e.converter,t5(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Are);var Fre=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this))._field=e,a._direction=r,a.type="orderBy",a}return Zt(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new J1(X1.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new J1(X1.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new g4(t,n);return function(e,t){if(null===X4(e)){var n=J4(e);null!==n&&Hre(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new One(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Z4(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Rre);var Mre=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a){var i;return Vt(this,n),(i=t.call(this)).type=e,i._limit=r,i._limitType=a,i}return Zt(n,[{key:"_apply",value:function(e){return new One(e.firestore,e.converter,n5(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Rre);var Lre=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a){var i;return Vt(this,n),(i=t.call(this)).type=e,i._docOrFields=r,i._inclusive=a,i}return Zt(n,[{key:"_apply",value:function(e){var t=Vre(e,this.type,this._docOrFields,this._inclusive);return new One(e.firestore,e.converter,function(e,t){return new Z4(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Rre);function $re(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Lre._create("startAt",t,!0)}function jre(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Lre._create("startAfter",t,!1)}var zre=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a){var i;return Vt(this,n),(i=t.call(this)).type=e,i._docOrFields=r,i._inclusive=a,i}return Zt(n,[{key:"_apply",value:function(e){var t=Vre(e,this.type,this._docOrFields,this._inclusive);return new One(e.firestore,e.converter,function(e,t){return new Z4(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Rre);function Bre(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zre._create("endBefore",t,!1)}function Ure(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zre._create("endAt",t,!0)}function Vre(e,t,n,r){if(n[0]=MV(n[0]),n[0]instanceof Tre)return function(e,t,n,r,a){if(!r)throw new J1(X1.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var i,o=[],s=Ut(Q4(e));try{for(s.s();!(i=s.n()).done;){var u=i.value;if(u.field.isKeyField())o.push(Q3(t,r.key));else{var c=r.data.field(u.field);if(j3(c))throw new J1(X1.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new J1(X1.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(Rme){s.e(Rme)}finally{s.f()}return new p4(o,a)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var a=ore(e.firestore);return function(e,t,n,r,a,i){var o=e.explicitOrderBy;if(a.length>o.length)throw new J1(X1.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<a.length;u++){var c=a[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new J1(X1.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Y4(e)&&-1!==c.indexOf("/"))throw new J1(X1.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(v2.fromString(c));if(!y2.isDocumentKey(l))throw new J1(X1.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var d=new y2(l);s.push(Q3(t,d))}else{var f=mre(n,r,c);s.push(f)}}return new p4(s,i)}(e._query,e.firestore._databaseId,a,t,n,r)}function Wre(e,t,n){if("string"==typeof(n=MV(n))){if(""===n)throw new J1(X1.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y4(t)&&-1!==n.indexOf("/"))throw new J1(X1.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(v2.fromString(n));if(!y2.isDocumentKey(r))throw new J1(X1.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Q3(e,new y2(r))}if(n instanceof Rne)return Q3(e,n._key);throw new J1(X1.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Nne(n),"."))}function Gre(e,t){if(!Array.isArray(e)||0===e.length)throw new J1(X1.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Zre(e,t){if(t.isInequality()){var n=J4(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new J1(X1.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var a=X4(e);null!==a&&Hre(e,r,a)}var i=function(e,t){var n,r=Ut(e);try{for(r.s();!(n=r.n()).done;){var a,i=Ut(n.value.getFlattenedFilters());try{for(i.s();!(a=i.n()).done;){var o=a.value;if(t.indexOf(o.op)>=0)return o.op}}catch(Rme){i.e(Rme)}finally{i.f()}}}catch(Rme){r.e(Rme)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new J1(X1.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new J1(X1.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}function Hre(e,t,n){if(!n.isEqual(t))throw new J1(X1.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var qre=function(){function e(){Vt(this,e)}return Zt(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Z3(e)){case 0:return null;case 1:return e.booleanValue;case 2:return L3(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($3(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw H1()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return I3(e.fields,(function(e,a){r[e]=n.convertValue(a,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Qne(L3(e.latitude),L3(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=z3(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(B3(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=M3(e);return new f2(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=v2.fromString(e);q1(Q6(n));var r=new V3(n.get(1),n.get(3)),a=new y2(n.popFirst(5));return r.isEqual(t)||W1("Document ".concat(a," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),a}}]),e}();function Kre(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Xre=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).firestore=e,r}return Zt(n,[{key:"convertBytes",value:function(e){return new Xne(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rne(this.firestore,null,t)}}]),n}(qre);var Jre=function(){function e(t,n){Vt(this,e),this.hasPendingWrites=t,this.fromCache=n}return Zt(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Yre=function(e){Mo(n,e);var t=Bo(n);function n(e,r,a,i,o,s){var u;return Vt(this,n),(u=t.call(this,e,r,a,i,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return Zt(n,[{key:"exists",value:function(){return jx(Lo(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Qre(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Ere("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Tre),Qre=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return jx(Lo(n.prototype),"data",this).call(this,e)}}]),n}(Yre),eae=function(){function e(t,n,r,a){Vt(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new Jre(a.hasPendingWrites,a.fromCache),this.query=r}return Zt(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Qre(n._firestore,n._userDataWriter,r.key,r,new Jre(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new J1(X1.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Qre(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Jre(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Qre(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Jre(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),a=-1,i=-1;return 0!==t.type&&(a=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(i=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:tae(t.type),doc:n,oldIndex:a,newIndex:i}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function tae(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H1()}}function nae(e,t){return e instanceof Yre&&t instanceof Yre?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof eae&&t instanceof eae&&e._firestore===t._firestore&&Lne(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var rae=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).firestore=e,r}return Zt(n,[{key:"convertBytes",value:function(e){return new Xne(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rne(this.firestore,null,t)}}]),n}(qre);function aae(e){e=Tne(e,Rne);var t=Tne(e.firestore,Bne),n=Une(t),r=new rae(t);return function(e,t){var n=new Y1;return e.asyncQueue.enqueueAndForget(me(ye().mark((function r(){return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=me(ye().mark((function e(t,n,r){var a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=K1(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(a=e.sent).isFoundDocument()?r.resolve(a):a.isNoDocument()?r.resolve(null):r.reject(new J1(X1.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),i=Tee(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(i);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,fne(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Yre(t,r,e._key,n,new Jre(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function iae(e){e=Tne(e,One);var t=Tne(e.firestore,Bne),n=Une(t),r=new rae(t);return function(e,t){var n=new Y1;return e.asyncQueue.enqueueAndForget(me(ye().mark((function r(){return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=me(ye().mark((function e(t,n,r){var a,i,o,s,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n7(t,n,!0);case 3:a=e.sent,i=new Zee(n,a.Wi),o=i.zu(a.documents),s=i.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=Tee(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,fne(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new eae(t,r,e,n)}))}function oae(e,t,n){e=Tne(e,Rne);var r=Tne(e.firestore,Bne),a=Kre(e.converter,t,n);return lae(r,[sre(ore(r),"setDoc",e._key,a,null!==e.converter,n).toMutation(e._key,B5.none())])}function sae(e,t,n){e=Tne(e,Rne);for(var r=Tne(e.firestore,Bne),a=ore(r),i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return lae(r,[("string"==typeof(t=MV(t))||t instanceof Jne?vre(a,"updateDoc",e._key,t,n,o):pre(a,"updateDoc",e._key,t)).toMutation(e._key,B5.exists(!0))])}function uae(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a,i,o;e=MV(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||jne(n[u])||(s=n[u],u++);var c,l,d,f={includeMetadataChanges:s.includeMetadataChanges};if(jne(n[u])){var h=n[u];n[u]=null===(a=h.next)||void 0===a?void 0:a.bind(h),n[u+1]=null===(i=h.error)||void 0===i?void 0:i.bind(h),n[u+2]=null===(o=h.complete)||void 0===o?void 0:o.bind(h)}if(e instanceof Rne)l=Tne(e.firestore,Bne),d=q4(e._key.path),c={next:function(t){n[u]&&n[u](dae(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=Tne(e,One);l=Tne(p.firestore,Bne),d=p._query;var v=new rae(l);c={next:function(e){n[u]&&n[u](new eae(l,v,p,e))},error:n[u+1],complete:n[u+2]},_re(e._query)}return function(e,t,n,r){var a=new Jte(r),i=new jee(t,a,n);return e.asyncQueue.enqueueAndForget(me(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Oee,t.next=3,mne(e);case 3:return t.t1=t.sent,t.t2=i,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){a.yc(),e.asyncQueue.enqueueAndForget(me(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Pee,t.next=3,mne(e);case 3:return t.t1=t.sent,t.t2=i,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Une(l),d,f,c)}function cae(e,t){return function(e,t){var n=new Jte(t);return e.asyncQueue.enqueueAndForget(me(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){K1(e).Au.add(t),t.next()},t.next=3,mne(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.yc(),e.asyncQueue.enqueueAndForget(me(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){K1(e).Au.delete(t)},t.next=3,mne(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Une(e=Tne(e,Bne)),jne(t)?t:{next:t})}function lae(e,t){return function(e,t){var n=new Y1;return e.asyncQueue.enqueueAndForget(me(ye().mark((function r(){return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=nte,r.next=3,pne(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Une(e),t)}function dae(e,t,n){var r=n.docs.get(t._key),a=new rae(e);return new Yre(e,a,t._key,r,new Jre(n.hasPendingWrites,n.fromCache),t.converter)}var fae={maxAttempts:5},hae=function(){function e(t,n){Vt(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ore(t)}return Zt(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=pae(e,this._firestore),a=Kre(r.converter,t,n),i=sre(this._dataReader,"WriteBatch.set",r._key,a,null!==r.converter,n);return this._mutations.push(i.toMutation(r._key,B5.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,a=pae(e,this._firestore),i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return r="string"==typeof(t=MV(t))||t instanceof Jne?vre(this._dataReader,"WriteBatch.update",a._key,t,n,o):pre(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(r.toMutation(a._key,B5.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=pae(e,this._firestore);return this._mutations=this._mutations.concat(new n6(t._key,B5.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new J1(X1.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function pae(e,t){if((e=MV(e)).firestore!==t)throw new J1(X1.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var vae=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this,e,r))._firestore=e,a}return Zt(n,[{key:"get",value:function(e){var t=this,r=pae(e,this._firestore),a=new rae(this._firestore);return jx(Lo(n.prototype),"get",this).call(this,e).then((function(e){return new Yre(t._firestore,a,r._key,e._document,new Jre(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Vt(this,e),this._firestore=t,this._transaction=n,this._dataReader=ore(t)}return Zt(e,[{key:"get",value:function(e){var t=this,n=pae(e,this._firestore),r=new Xre(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return H1();var a=e[0];if(a.isFoundDocument())return new Tre(t._firestore,r,a.key,a,n.converter);if(a.isNoDocument())return new Tre(t._firestore,r,n._key,null,n.converter);throw H1()}))}},{key:"set",value:function(e,t,n){var r=pae(e,this._firestore),a=Kre(r.converter,t,n),i=sre(this._dataReader,"Transaction.set",r._key,a,null!==r.converter,n);return this._transaction.set(r._key,i),this}},{key:"update",value:function(e,t,n){for(var r,a=pae(e,this._firestore),i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return r="string"==typeof(t=MV(t))||t instanceof Jne?vre(this._dataReader,"Transaction.update",a._key,t,n,o):pre(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,r),this}},{key:"delete",value:function(e){var t=pae(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function mae(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new dre("arrayUnion",t)}function gae(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fre("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){z1=e}(OW),NW(new LV("firestore",(function(e,n){var r=n.instanceIdentifier,a=n.options,i=e.getProvider("app").getImmediate(),o=new Bne(new n2(e.getProvider("auth-internal")),new o2(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new J1(X1.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new V3(e.options.projectId,t)}(i,r),i);return a=Object.assign({useFetchStreams:t},a),o._setSettings(a),o}),"PUBLIC").setMultipleInstances(!0)),$W($1,"3.10.0",e),$W($1,"3.10.0","esm2017")}();function yae(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new J1("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function bae(){if("undefined"===typeof Uint8Array)throw new J1("unimplemented","Uint8Arrays are not available in this environment.")}function xae(){if("undefined"==typeof atob)throw new J1("unimplemented","Blobs are unavailable in Firestore in this environment.")}var kae=function(){function e(t){Vt(this,e),this._delegate=t}return Zt(e,[{key:"toBase64",value:function(){return xae(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return bae(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return xae(),new e(Xne.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return bae(),new e(Xne.fromUint8Array(t))}}]),e}();function wae(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,a=Ut(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i in r&&"function"===typeof r[i])return!0}}catch(Rme){a.e(Rme)}finally{a.f()}return!1}(e,["next","error","complete"])}var Sae=function(){function e(){Vt(this,e)}return Zt(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Kne(e=Tne(e,Bne));var n=Une(e);if(n._uninitializedComponentsProvider)throw new J1(X1.FAILED_PRECONDITION,"SDK cache is already specified.");G1("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),a=new Kte;return Wne(n,a,new Hte(a,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Kne(e=Tne(e,Bne));var t=Une(e);if(t._uninitializedComponentsProvider)throw new J1(X1.FAILED_PRECONDITION,"SDK cache is already specified.");G1("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new Kte;return Wne(t,r,new qte(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new J1(X1.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Y1;return e._queue.enqueueAndForgetEvenWhileRestricted(me(ye().mark((function n(){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P2.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,P2.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(B9(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Iae=function(){function e(t,n,r){var a=this;Vt(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return a.terminate()}},t instanceof V3||(this._appCompat=t)}return Zt(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||G1("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ane(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Gne(this._delegate)}},{key:"disableNetwork",value:function(){return Zne(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&wne("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Y1;return e.asyncQueue.enqueueAndForget(me(ye().mark((function n(){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=hte,n.next=3,pne(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Une(e=Tne(e,Bne)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return cae(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new J1("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new $ae(this,Pne(this._delegate,e))}catch(t){throw Aae(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new _ae(this,Fne(this._delegate,e))}catch(t){throw Aae(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Fae(this,function(e,t){if(e=Tne(e,_ne),kne("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new J1(X1.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new One(e,null,function(e){return new Z4(v2.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Aae(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=Tne(e,Bne);var r=Object.assign(Object.assign({},fae),n);return function(e){if(e.maxAttempts<1)throw new J1(X1.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Y1;return e.asyncQueue.enqueueAndForget(me(ye().mark((function a(){var i;return ye().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,vne(e);case 2:i=a.sent,new ene(e.asyncQueue,i,n,t,r).run();case 4:case"end":return a.stop()}}),a)})))),r.promise}(Une(e),(function(n){return t(new vae(e,n))}),r)}(this._delegate,(function(n){return e(new Tae(t,n))}))}},{key:"batch",value:function(){var e=this;return Une(this._delegate),new Cae(new hae(this._delegate,(function(t){return lae(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Hne(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return qne(this._delegate,e).then((function(e){return e?new Fae(t,e):null}))}}]),e}(),Nae=function(e){Mo(n,e);var t=Bo(n);function n(e){var r;return Vt(this,n),(r=t.call(this)).firestore=e,r}return Zt(n,[{key:"convertBytes",value:function(e){return new kae(new Xne(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return _ae.forKey(t,this.firestore,null)}}]),n}(qre);var Tae=function(){function e(t,n){Vt(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Nae(t)}return Zt(e,[{key:"get",value:function(e){var t=this,n=jae(e);return this._delegate.get(n).then((function(e){return new Dae(t._firestore,new Yre(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=jae(e);return n?(yae("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),i=3;i<r;i++)a[i-3]=arguments[i];var o,s=jae(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(a));return this}},{key:"delete",value:function(e){var t=jae(e);return this._delegate.delete(t),this}}]),e}(),Cae=function(){function e(t){Vt(this,e),this._delegate=t}return Zt(e,[{key:"set",value:function(e,t,n){var r=jae(e);return n?(yae("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),i=3;i<r;i++)a[i-3]=arguments[i];var o,s=jae(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(a));return this}},{key:"delete",value:function(e){var t=jae(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Eae=function(){function e(t,n,r){Vt(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Zt(e,[{key:"fromFirestore",value:function(e,t){var n=new Qre(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Pae(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,a=r.get(t);a||(a=new WeakMap,r.set(t,a));var i=a.get(n);return i||(i=new e(t,new Nae(t),n),a.set(n,i)),i}}]),e}();Eae.INSTANCES=new WeakMap;var _ae=function(){function e(t,n){Vt(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Nae(t)}return Zt(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new $ae(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new $ae(this.firestore,Pne(this._delegate,e))}catch(t){throw Aae(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=MV(e))instanceof Rne&&Mne(this._delegate,e)}},{key:"set",value:function(e,t){t=yae("DocumentReference.set",t);try{return t?oae(this._delegate,e,t):oae(this._delegate,e)}catch(n){throw Aae(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];try{return 1===arguments.length?sae(this._delegate,e):sae.apply(void 0,[this._delegate,e,t].concat(r))}catch(i){throw Aae(i,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return lae(Tne(e.firestore,Bne),[new n6(e._key,B5.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=Rae(n),i=Oae(n,(function(t){return new Dae(e.firestore,new Yre(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return uae(this._delegate,a,i)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?aae(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Tne(e,Rne);var t=Tne(e.firestore,Bne);return yne(Une(t),e._key,{source:"server"}).then((function(n){return dae(t,e,n)}))}(this._delegate):function(e){e=Tne(e,Rne);var t=Tne(e.firestore,Bne);return yne(Une(t),e._key).then((function(n){return dae(t,e,n)}))}(this._delegate),t.then((function(e){return new Dae(n.firestore,new Yre(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Eae.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new J1("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Rne(n._delegate,r,new y2(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Rne(n._delegate,r,t))}}]),e}();function Aae(e,t,n){return e.message=e.message.replace(t,n),e}function Rae(e){var t,n=Ut(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!wae(r))return r}}catch(Rme){n.e(Rme)}finally{n.f()}return{}}function Oae(e,t){var n,r,a;return{next:function(e){a.next&&a.next(t(e))},error:null===(n=(a=wae(e[0])?e[0]:wae(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}var Dae=function(){function e(t,n){Vt(this,e),this._firestore=t,this._delegate=n}return Zt(e,[{key:"ref",get:function(){return new _ae(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return nae(this._delegate,e._delegate)}}]),e}(),Pae=function(e){Mo(n,e);var t=Bo(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||H1()}(void 0!==t),t}}]),n}(Dae),Fae=function(){function e(t,n){Vt(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Nae(t)}return Zt(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Ore(this._delegate,function(e,t,n){var r=t,a=Ere("where",e);return Dre._create(a,r,n)}(t,n,r)))}catch(a){throw Aae(a,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Ore(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ere("orderBy",e);return Fre._create(n,t)}(t,n)))}catch(r){throw Aae(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Ore(this._delegate,function(e){return Cne("limit",e),Mre._create("limit",e,"F")}(t)))}catch(n){throw Aae(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Ore(this._delegate,function(e){return Cne("limitToLast",e),Mre._create("limitToLast",e,"L")}(t)))}catch(n){throw Aae(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Ore(this._delegate,$re.apply(void 0,arguments)))}catch(t){throw Aae(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Ore(this._delegate,jre.apply(void 0,arguments)))}catch(t){throw Aae(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Ore(this._delegate,Bre.apply(void 0,arguments)))}catch(t){throw Aae(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Ore(this._delegate,Ure.apply(void 0,arguments)))}catch(t){throw Aae(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Lne(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?iae(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Tne(e,One);var t=Tne(e.firestore,Bne),n=Une(t),r=new rae(t);return bne(n,e._query,{source:"server"}).then((function(n){return new eae(t,r,e,n)}))}(this._delegate):function(e){e=Tne(e,One);var t=Tne(e.firestore,Bne),n=Une(t),r=new rae(t);return _re(e._query),bne(n,e._query).then((function(n){return new eae(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Lae(n.firestore,new eae(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=Rae(n),i=Oae(n,(function(t){return new Lae(e.firestore,new eae(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return uae(this._delegate,a,i)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Eae.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Mae=function(){function e(t,n){Vt(this,e),this._firestore=t,this._delegate=n}return Zt(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Pae(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Lae=function(){function e(t,n){Vt(this,e),this._firestore=t,this._delegate=n}return Zt(e,[{key:"query",get:function(){return new Fae(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new Pae(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Mae(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Pae(n._firestore,r))}))}},{key:"isEqual",value:function(e){return nae(this._delegate,e._delegate)}}]),e}(),$ae=function(e){Mo(n,e);var t=Bo(n);function n(e,r){var a;return Vt(this,n),(a=t.call(this,e,r)).firestore=e,a._delegate=r,a}return Zt(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new _ae(this.firestore,e):null}},{key:"doc",value:function(e){try{return new _ae(this.firestore,void 0===e?Fne(this._delegate):Fne(this._delegate,e))}catch(t){throw Aae(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Tne(e.firestore,Bne),r=Fne(e),a=Kre(e.converter,t);return lae(n,[sre(ore(e.firestore),"addDoc",r._key,a,null!==e.converter,{}).toMutation(r._key,B5.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new _ae(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Mne(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Eae.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Fae);function jae(e){return Tne(e,Rne)}var zae,Bae=function(){function e(){Vt(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=sy(Jne,n)}return Zt(e,[{key:"isEqual",value:function(e){return(e=MV(e))instanceof Jne&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(g2.keyField().canonicalString())}}]),e}(),Uae=function(){function e(t){Vt(this,e),this._delegate=t}return Zt(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new lre("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new ure("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=mae.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=gae.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new hre("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Vae={Firestore:Iae,GeoPoint:Qne,Timestamp:f2,Blob:kae,Transaction:Tae,WriteBatch:Cae,DocumentReference:_ae,DocumentSnapshot:Dae,Query:Fae,QueryDocumentSnapshot:Pae,QuerySnapshot:Lae,CollectionReference:$ae,FieldPath:Bae,FieldValue:Uae,setLogLevel:function(e){!function(e){B1.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};function Wae(){return window}(function(e,t){e.INTERNAL.registerComponent(new LV("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Vae)))})(zae=DJ,(function(e,t){return new Iae(e,t,new Sae)})),zae.registerVersion("@firebase/firestore-compat","0.3.6");function Gae(e,t,n){return Zae.apply(this,arguments)}function Zae(){return Zae=me(ye().mark((function e(t,n,r){var a,i,o,s,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Wae(),o=i.BuildInfo,CG(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Yae(n.sessionId);case 4:return s=e.sent,u={},OZ()?u.ibi=o.packageName:_Z()?u.apn=o.packageName:xG(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",uJ(t,r,n.type,void 0,null!==(a=n.eventId)&&void 0!==a?a:void 0,u));case 10:case"end":return e.stop()}}),e)}))),Zae.apply(this,arguments)}function Hae(){return Hae=me(ye().mark((function e(t){var n,r,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Wae(),r=n.BuildInfo,a={},OZ()?a.iosBundleId=r.packageName:_Z()?a.androidPackageName=r.packageName:xG(t,"operation-not-supported-in-this-environment"),e.next=5,$X(t,a);case 5:case"end":return e.stop()}}),e)}))),Hae.apply(this,arguments)}function qae(e){var t=Wae().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var a=null;r?t.plugins.browsertab.openUrl(e):a=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gV();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(a)}))}))}function Kae(e,t,n){return Xae.apply(this,arguments)}function Xae(){return Xae=me(ye().mark((function e(t,n,r){var a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Wae(),i=a.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,a){var s=null;function u(){var t;e();var n=null===(t=i.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){a(kG(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),_Z()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Xae.apply(this,arguments)}function Jae(e){var t,n,r,a,i,o,s,u,c,l,d=Wae();NG("function"===typeof(null===(t=null===d||void 0===d?void 0:d.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),NG("undefined"!==typeof(null===(n=null===d||void 0===d?void 0:d.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),NG("function"===typeof(null===(i=null===(a=null===(r=null===d||void 0===d?void 0:d.cordova)||void 0===r?void 0:r.plugins)||void 0===a?void 0:a.browsertab)||void 0===i?void 0:i.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),NG("function"===typeof(null===(u=null===(s=null===(o=null===d||void 0===d?void 0:d.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),NG("function"===typeof(null===(l=null===(c=null===d||void 0===d?void 0:d.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Yae(e){return Qae.apply(this,arguments)}function Qae(){return(Qae=me(ye().mark((function e(t){var n,r,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=eie(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,a=Array.from(new Uint8Array(r)),e.abrupt("return",a.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eie(e){if(CG(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var tie=function(e){Mo(n,e);var t=Bo(n);function n(){var e;return Vt(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Zt(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),jx(Lo(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(FX);function nie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:sie(),postBody:null,tenantId:e.tenantId,error:kG(e,"no-auth-event")}}function rie(e,t){return uie()._set(cie(e),t)}function aie(e){return iie.apply(this,arguments)}function iie(){return iie=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uie()._get(cie(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,uie()._remove(cie(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),iie.apply(this,arguments)}function oie(e,t){var n,r,a=function(e){var t=lie(e),n=t.link?decodeURIComponent(t.link):void 0,r=lie(n).link,a=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return lie(a).link||a||r||n||e}(t);if(a.includes("/__/auth/callback")){var i=lie(a),o=i.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(i.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?kG(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:a,postBody:null}}return null}function sie(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function uie(){return _G(Qq)}function cie(e){return wZ("authEvent",e.config.apiKey,e.name)}function lie(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=nv(e.split("?"));t[0];return RV(t.slice(1).join("?"))}var die=function(){function e(){Vt(this,e),this._redirectPersistence=tK,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=RX,this._overrideRedirectResult=xX}return Zt(e,[{key:"_initialize",value:function(){var e=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new tie(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){xG(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=me(ye().mark((function e(t,n,r,a){var i,o,s,u;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Jae(t),e.next=3,this._initialize(t);case 3:return i=e.sent,e.next=6,i.initialized();case 6:return i.resetRedirect(),pX.clear(),e.next=10,this._originValidation(t);case 10:return o=nie(t,r,a),e.next=13,rie(t,o);case 13:return e.next=15,Gae(t,o,n);case 15:return s=e.sent,e.next=18,qae(s);case 18:return u=e.sent,e.abrupt("return",Kae(t,i,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Hae.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Wae(),r=n.universalLinks,a=n.handleOpenURL,i=n.BuildInfo,o=setTimeout(me(ye().mark((function n(){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,aie(e);case 2:t.onEvent(hie());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=me(ye().mark((function n(r){var a,i;return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,aie(e);case 3:a=n.sent,i=null,a&&(null===r||void 0===r?void 0:r.url)&&(i=oie(a,r.url)),t.onEvent(i||hie());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=a,c="".concat(i.packageName.toLowerCase(),"://");Wae().handleOpenURL=function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),fie=die;function hie(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:kG("no-auth-event")}}function pie(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function vie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gV();return!("file:"!==pie()&&"ionic:"!==pie()&&"capacitor:"!==pie()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function mie(){return kV()&&11===(null===document||void 0===document?void 0:document.documentMode)}function gie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gV();return/Edge\/\d+/.test(e)}function yie(){try{var e=self.localStorage,t=aK();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gV();return mie()||gie(e)}()||wV()}catch(n){return bie()&&wV()}return!1}function bie(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function xie(){return("http:"===pie()||"https:"===pie()||bV()||vie())&&!(xV()||yV())&&yie()&&!bie()}function kie(){return vie()&&"undefined"!==typeof document}function wie(){return Sie.apply(this,arguments)}function Sie(){return(Sie=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kie()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Iie={LOCAL:"local",NONE:"none",SESSION:"session"},Nie=NG,Tie="persistence";function Cie(e,t){Nie(Object.values(Iie).includes(t),e,"invalid-persistence-type"),xV()?Nie(t!==Iie.SESSION,e,"unsupported-persistence-type"):yV()?Nie(t===Iie.NONE,e,"unsupported-persistence-type"):bie()?Nie(t===Iie.NONE||t===Iie.LOCAL&&wV(),e,"unsupported-persistence-type"):Nie(t===Iie.NONE||yie(),e,"unsupported-persistence-type")}function Eie(e){return _ie.apply(this,arguments)}function _ie(){return _ie=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Aie(),r=wZ(Tie,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),_ie.apply(this,arguments)}function Aie(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Rie=NG,Oie=function(){function e(){Vt(this,e),this.browserResolver=_G(dJ),this.cordovaResolver=_G(fie),this.underlyingResolver=null,this._redirectPersistence=tK,this._completeRedirectFn=RX,this._overrideRedirectResult=xX}return Zt(e,[{key:"_initialize",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=me(ye().mark((function e(t,n,r,a){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,a));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=me(ye().mark((function e(t,n,r,a){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,a));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return kie()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Rie(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,wie();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Die(e){return e.unwrap()}function Pie(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new jie(e,function(e,t){var n,r=MV(e),a=t;return NG(t.customData.operationType,r,"argument-error"),NG(null===(n=a.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Vq._fromError(r,a)}(e,t));else if(r){var a=Fie(t),i=t;a&&(i.credential=a,i.tenantId=r.tenantId||void 0,i.email=r.email||void 0,i.phoneNumber=r.phoneNumber||void 0)}}function Fie(e){var t=(e instanceof SV?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof SV)&&"temporaryProof"in t&&"phoneNumber"in t)return QK.credentialFromResult(e);var n,r=t.providerId;if(!r||r===oG)return null;switch(r){case iG:n=AH;break;case rG:n=_H;break;case aG:n=RH;break;case sG:n=PH;break;default:var a=t.oauthIdToken,i=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return i||o||a||s?s?r.startsWith("saml.")?OH._create(r,s):mH._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:a,accessToken:i}):new EH(r).credential({idToken:a,accessToken:i,rawNonce:u}):null}return e instanceof SV?n.credentialFromError(e):n.credentialFromResult(e)}function Mie(e,t){return t.catch((function(t){throw t instanceof SV&&Pie(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Fie(t)),additionalUserInfo:jq(e),user:zie.getOrCreate(r)}}))}function Lie(e,t){return $ie.apply(this,arguments)}function $ie(){return $ie=me(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Mie(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),$ie.apply(this,arguments)}var jie=function(){function e(t,n){Vt(this,e),this.resolver=n,this.auth=t.wrapped()}return Zt(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Mie(Die(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),zie=function(){function e(t){Vt(this,e),this._delegate=t,this.multiFactor=function(e){var t=MV(e);return Kq.has(t)||Kq.set(t,qq._fromUser(t)),Kq.get(t)}(t)}return Zt(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mie(this.auth,tq(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lie(this.auth,HK(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mie(this.auth,dX(this._delegate,t,Oie)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eie(jZ(this.auth));case 2:return e.abrupt("return",CX(this._delegate,t,Oie));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mie(this.auth,rq(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Lie(this.auth,function(e,t,n){return KK.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Mie(this.auth,function(e,t,n){return lX.apply(this,arguments)}(this._delegate,e,Oie))}},{key:"reauthenticateWithRedirect",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eie(jZ(this.auth));case 2:return e.abrupt("return",NX(this._delegate,t,Oie));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Tq.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VH(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Rq(MV(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Rq(MV(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return YK.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Aq.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Cq.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();zie.USER_MAP=new WeakMap;var Bie=NG,Uie=function(){function e(t,n){if(Vt(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Bie(r,"invalid-api-key",{appName:t.name}),Bie(r,"invalid-api-key",{appName:t.name});var a="undefined"!==typeof window?Oie:void 0;this._delegate=n.initialize({options:{persistence:Wie(r,t.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(vG),this.linkUnderlyingAuth()}return Zt(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?zie.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){BZ(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return pq.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return vq(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return hq.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=me(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mie(this._delegate,yq(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Nq.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=IH.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bie(xie(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,_X(this._delegate,Oie);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Mie(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){jZ(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Vie(e,t,n),a=r.next,i=r.error,o=r.complete;return this._delegate.onAuthStateChanged(a,i,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Vie(e,t,n),a=r.next,i=r.error,o=r.complete;return this._delegate.onIdTokenChanged(a,i,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return kq.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return fq.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Cie(this._delegate,t),e.t0=t,e.next=e.t0===Iie.SESSION?4:e.t0===Iie.LOCAL?6:e.t0===Iie.NONE?11:13;break;case 4:return n=tK,e.abrupt("break",14);case 6:return e.next=8,_G(IK)._isAvailable();case 8:return r=e.sent,n=r?IK:Qq,e.abrupt("break",14);case 11:return n=kZ,e.abrupt("break",14);case 13:return e.abrupt("return",xG("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Mie(this._delegate,function(e){return jH.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Mie(this._delegate,QH(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Mie(this._delegate,function(e,t){return sq.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Mie(this._delegate,xq(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Mie(this._delegate,function(e,t,n){return wq.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Lie(this._delegate,GK(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bie(xie(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Mie(this._delegate,uX(this._delegate,t,Oie)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Bie(xie(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Eie(this._delegate);case 3:return e.abrupt("return",SX(this._delegate,t,Oie));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return gq.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Vie(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var a=r;return{next:function(e){return a(e&&zie.getOrCreate(e))},error:t,complete:n}}function Wie(e,t){var n=function(e,t){var n=Aie();if(!n)return[];var r=wZ(Tie,e,t);switch(n.getItem(r)){case Iie.NONE:return[kZ];case Iie.LOCAL:return[IK,tK];case Iie.SESSION:return[tK];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(IK)||n.push(IK),"undefined"!==typeof window)for(var r=0,a=[Qq,tK];r<a.length;r++){var i=a[r];n.includes(i)||n.push(i)}return n.includes(kZ)||n.push(kZ),n}Uie.Persistence=Iie;var Gie=function(){function e(){Vt(this,e),this.providerId="phone",this._delegate=new QK(Die(DJ.auth()))}return Zt(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return QK.credential(e,t)}}]),e}();Gie.PHONE_SIGN_IN_METHOD=QK.PHONE_SIGN_IN_METHOD,Gie.PROVIDER_ID=QK.PROVIDER_ID;var Zie=NG,Hie=function(){function e(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:DJ.app();Vt(this,e),Zie(null===(r=a.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:a.name}),this._delegate=new UK(t,n,a.auth()),this.type=this._delegate.type}return Zt(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new LV("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Uie(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:uG,PASSWORD_RESET:cG,RECOVER_EMAIL:lG,REVERT_SECOND_FACTOR_ADDITION:dG,VERIFY_AND_CHANGE_EMAIL:fG,VERIFY_EMAIL:hG}},EmailAuthProvider:NH,FacebookAuthProvider:_H,GithubAuthProvider:RH,GoogleAuthProvider:AH,OAuthProvider:EH,SAMLAuthProvider:DH,PhoneAuthProvider:Gie,PhoneMultiFactorGenerator:pJ,RecaptchaVerifier:Hie,TwitterAuthProvider:PH,Auth:Uie,AuthCredential:WZ,Error:SV}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.3.7")}(DJ);$W("firebase","9.19.1","app");var qie=DW({apiKey:"AIzaSyAHfjTf5ifpu8qbAO2ZqercPS1FCi0IgBA",authDomain:"npk-gfg.firebaseapp.com",projectId:"npk-gfg",storageBucket:"npk-gfg.appspot.com",messagingSenderId:"636391408051",appId:"1:636391408051:web:38aa1788f99c60fe300bc6",measurementId:"G-D3NXKK8STW"}),Kie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PW(),t=TW(e,"auth");if(t.isInitialized())return t.getImmediate();var n=AG(e,{popupRedirectResolver:dJ,persistence:[IK,Qq,tK]}),r=pV("authTokenSyncURL");if(r){var a=TJ(r);Bq(n,a,(function(){return a(n.currentUser)})),zq(n,(function(e){return a(e)}))}var i=fV("auth");return i&&BZ(n,"http://".concat(i)),n}(qie),Xie=(0,N.createContext)();function Jie(e){var t=e.children,n=(0,N.useState)({}),r=(0,C.Z)(n,2),a=r[0],i=r[1];return(0,N.useEffect)((function(){var e=function(e,t,n,r){return MV(e).onAuthStateChanged(t,n,r)}(Kie,(function(e){console.log("Auth",e),i(e)}));return function(){e()}}),[]),(0,be.jsx)(Xie.Provider,{value:{user:a,logIn:function(e,t){return xq(Kie,e,t)},signUp:function(e,t){return yq(Kie,e,t)},logOut:function(){return function(e){return MV(e).signOut()}(Kie)},googleSignIn:function(){var e=new AH;return uX(Kie,e)},setUpRecaptha:function(e){var t=new UK("recaptcha-container",{},Kie);return t.render(),GK(Kie,e,t)}},children:t})}function Yie(){return(0,N.useContext)(Xie)}function Qie(e,t){return function(){return e.apply(t,arguments)}}var eoe=Object.prototype.toString,toe=Object.getPrototypeOf,noe=function(e){return function(t){var n=eoe.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null)),roe=function(e){return e=e.toLowerCase(),function(t){return noe(t)===e}},aoe=function(e){return function(t){return typeof t===e}},ioe=Array.isArray,ooe=aoe("undefined");var soe=roe("ArrayBuffer");var uoe=aoe("string"),coe=aoe("function"),loe=aoe("number"),doe=function(e){return null!==e&&"object"===typeof e},foe=function(e){if("object"!==noe(e))return!1;var t=toe(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},hoe=roe("Date"),poe=roe("File"),voe=roe("Blob"),moe=roe("FileList"),goe=roe("URLSearchParams");function yoe(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.allOwnKeys,o=void 0!==i&&i;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),ioe(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var s,u=o?Object.getOwnPropertyNames(e):Object.keys(e),c=u.length;for(n=0;n<c;n++)s=u[n],t.call(null,e[s],s,e)}}function boe(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),a=r.length;a-- >0;)if(t===(n=r[a]).toLowerCase())return n;return null}var xoe="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,koe=function(e){return!ooe(e)&&e!==xoe};var woe,Soe=(woe="undefined"!==typeof Uint8Array&&toe(Uint8Array),function(e){return woe&&e instanceof woe}),Ioe=roe("HTMLFormElement"),Noe=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),Toe=roe("RegExp"),Coe=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};yoe(n,(function(n,a){!1!==t(n,a,e)&&(r[a]=n)})),Object.defineProperties(e,r)},Eoe="abcdefghijklmnopqrstuvwxyz",_oe="0123456789",Aoe={DIGIT:_oe,ALPHA:Eoe,ALPHA_DIGIT:Eoe+Eoe.toUpperCase()+_oe};var Roe={isArray:ioe,isArrayBuffer:soe,isBuffer:function(e){return null!==e&&!ooe(e)&&null!==e.constructor&&!ooe(e.constructor)&&coe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||eoe.call(e)===t||coe(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&soe(e.buffer)},isString:uoe,isNumber:loe,isBoolean:function(e){return!0===e||!1===e},isObject:doe,isPlainObject:foe,isUndefined:ooe,isDate:hoe,isFile:poe,isBlob:voe,isRegExp:Toe,isFunction:coe,isStream:function(e){return doe(e)&&coe(e.pipe)},isURLSearchParams:goe,isTypedArray:Soe,isFileList:moe,forEach:yoe,merge:function e(){for(var t=koe(this)&&this||{},n=t.caseless,r={},a=function(t,a){var i=n&&boe(r,a)||a;foe(r[i])&&foe(t)?r[i]=e(r[i],t):foe(t)?r[i]=e({},t):ioe(t)?r[i]=t.slice():r[i]=t},i=0,o=arguments.length;i<o;i++)arguments[i]&&yoe(arguments[i],a);return r},extend:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.allOwnKeys;return yoe(t,(function(t,r){n&&coe(t)?e[r]=Qie(t,n):e[r]=t}),{allOwnKeys:a}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var a,i,o,s={};if(t=t||{},null==e)return t;do{for(i=(a=Object.getOwnPropertyNames(e)).length;i-- >0;)o=a[i],r&&!r(o,e,t)||s[o]||(t[o]=e[o],s[o]=!0);e=!1!==n&&toe(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:noe,kindOfTest:roe,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(ioe(e))return e;var t=e.length;if(!loe(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var a=n.value;t.call(e,a[0],a[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Ioe,hasOwnProperty:Noe,hasOwnProp:Noe,reduceDescriptors:Coe,freezeMethods:function(e){Coe(e,(function(t,n){if(coe(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];coe(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return ioe(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:boe,global:xoe,isContextDefined:koe,ALPHABET:Aoe,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Aoe.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&coe(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(doe(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var a=ioe(n)?[]:{};return yoe(n,(function(t,n){var i=e(t,r+1);!ooe(i)&&(a[n]=i)})),t[r]=void 0,a}}return n}(e,0)}};function Ooe(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a)}Roe.inherits(Ooe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Roe.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Doe=Ooe.prototype,Poe={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){Poe[e]={value:e}})),Object.defineProperties(Ooe,Poe),Object.defineProperty(Doe,"isAxiosError",{value:!0}),Ooe.from=function(e,t,n,r,a,i){var o=Object.create(Doe);return Roe.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),Ooe.call(o,e.message,t,n,r,a),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};var Foe=Ooe;function Moe(e){return Roe.isPlainObject(e)||Roe.isArray(e)}function Loe(e){return Roe.endsWith(e,"[]")?e.slice(0,-2):e}function $oe(e,t,n){return e?e.concat(t).map((function(e,t){return e=Loe(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var joe=Roe.toFlatObject(Roe,{},null,(function(e){return/^is[A-Z]/.test(e)}));var zoe=function(e,t,n){if(!Roe.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=Roe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Roe.isUndefined(t[e])}))).metaTokens,a=n.visitor||c,i=n.dots,o=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Roe.isSpecCompliantForm(t);if(!Roe.isFunction(a))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(Roe.isDate(e))return e.toISOString();if(!s&&Roe.isBlob(e))throw new Foe("Blob is not supported. Use a Buffer instead.");return Roe.isArrayBuffer(e)||Roe.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,a){var s=e;if(e&&!a&&"object"===typeof e)if(Roe.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Roe.isArray(e)&&function(e){return Roe.isArray(e)&&!e.some(Moe)}(e)||(Roe.isFileList(e)||Roe.endsWith(n,"[]"))&&(s=Roe.toArray(e)))return n=Loe(n),s.forEach((function(e,r){!Roe.isUndefined(e)&&null!==e&&t.append(!0===o?$oe([n],r,i):null===o?n:n+"[]",u(e))})),!1;return!!Moe(e)||(t.append($oe(a,n,i),u(e)),!1)}var l=[],d=Object.assign(joe,{defaultVisitor:c,convertValue:u,isVisitable:Moe});if(!Roe.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Roe.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),Roe.forEach(n,(function(n,i){!0===(!(Roe.isUndefined(n)||null===n)&&a.call(t,n,Roe.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])})),l.pop()}}(e),t};function Boe(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Uoe(e,t){this._pairs=[],e&&zoe(e,this,t)}var Voe=Uoe.prototype;Voe.append=function(e,t){this._pairs.push([e,t])},Voe.toString=function(e){var t=e?function(t){return e.call(this,t,Boe)}:Boe;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var Woe=Uoe;function Goe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Zoe(e,t,n){if(!t)return e;var r,a=n&&n.encode||Goe,i=n&&n.serialize;if(r=i?i(t,n):Roe.isURLSearchParams(t)?t.toString():new Woe(t,n).toString(a)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var Hoe=function(){function e(){Vt(this,e),this.handlers=[]}return Zt(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){Roe.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),qoe=Hoe,Koe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xoe={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Woe,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var Joe=function(e){function t(e,n,r,a){var i=e[a++],o=Number.isFinite(+i),s=a>=e.length;return i=!i&&Roe.isArray(r)?r.length:i,s?(Roe.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!o):(r[i]&&Roe.isObject(r[i])||(r[i]=[]),t(e,n,r[i],a)&&Roe.isArray(r[i])&&(r[i]=function(e){var t,n,r={},a=Object.keys(e),i=a.length;for(t=0;t<i;t++)r[n=a[t]]=e[n];return r}(r[i])),!o)}if(Roe.isFormData(e)&&Roe.isFunction(e.entries)){var n={};return Roe.forEachEntry(e,(function(e,r){t(function(e){return Roe.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null},Yoe={"Content-Type":void 0};var Qoe={transitional:Koe,adapter:["xhr","http"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",a=r.indexOf("application/json")>-1,i=Roe.isObject(e);if(i&&Roe.isHTMLForm(e)&&(e=new FormData(e)),Roe.isFormData(e))return a&&a?JSON.stringify(Joe(e)):e;if(Roe.isArrayBuffer(e)||Roe.isBuffer(e)||Roe.isStream(e)||Roe.isFile(e)||Roe.isBlob(e))return e;if(Roe.isArrayBufferView(e))return e.buffer;if(Roe.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return zoe(e,new Xoe.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Xoe.isNode&&Roe.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=Roe.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return zoe(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return i||a?(t.setContentType("application/json",!1),function(e,t,n){if(Roe.isString(e))try{return(t||JSON.parse)(e),Roe.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Qoe.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&Roe.isString(e)&&(n&&!this.responseType||r)){var a=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(i){if(a){if("SyntaxError"===i.name)throw Foe.from(i,Foe.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xoe.classes.FormData,Blob:Xoe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Roe.forEach(["delete","get","head"],(function(e){Qoe.headers[e]={}})),Roe.forEach(["post","put","patch"],(function(e){Qoe.headers[e]=Roe.merge(Yoe)}));var ese=Qoe,tse=Roe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),nse=Symbol("internals");function rse(e){return e&&String(e).trim().toLowerCase()}function ase(e){return!1===e||null==e?e:Roe.isArray(e)?e.map(ase):String(e)}function ise(e,t,n,r,a){return Roe.isFunction(r)?r.call(this,t,n):(a&&(t=n),Roe.isString(t)?Roe.isString(r)?-1!==t.indexOf(r):Roe.isRegExp(r)?r.test(t):void 0:void 0)}var ose=function(e,t){function n(e){Vt(this,n),e&&this.set(e)}return Zt(n,[{key:"set",value:function(e,t,n){var r=this;function a(e,t,n){var a=rse(t);if(!a)throw new Error("header name must be a non-empty string");var i=Roe.findKey(r,a);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=ase(e))}var i=function(e,t){return Roe.forEach(e,(function(e,n){return a(e,n,t)}))};return Roe.isPlainObject(e)||e instanceof this.constructor?i(e,t):Roe.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?i(function(e){var t,n,r,a={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||a[t]&&tse[t]||("set-cookie"===t?a[t]?a[t].push(n):a[t]=[n]:a[t]=a[t]?a[t]+", "+n:n)})),a}(e),t):null!=e&&a(t,e,n),this}},{key:"get",value:function(e,t){if(e=rse(e)){var n=Roe.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(Roe.isFunction(t))return t.call(this,r,n);if(Roe.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=rse(e)){var n=Roe.findKey(this,e);return!(!n||void 0===this[n]||t&&!ise(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function a(e){if(e=rse(e)){var a=Roe.findKey(n,e);!a||t&&!ise(0,n[a],a,t)||(delete n[a],r=!0)}}return Roe.isArray(e)?e.forEach(a):a(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var a=t[n];e&&!ise(0,this[a],a,e,!0)||(delete this[a],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return Roe.forEach(this,(function(r,a){var i=Roe.findKey(n,a);if(i)return t[i]=ase(r),void delete t[a];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(a):String(a).trim();o!==a&&delete t[a],t[o]=ase(r),n[o]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return Roe.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&Roe.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=(0,C.Z)(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[nse]=this[nse]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=rse(e);t[r]||(!function(e,t){var n=Roe.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,a){return this[r].call(this,t,e,n,a)},configurable:!0})}))}(n,e),t[r]=!0)}return Roe.isArray(e)?e.forEach(r):r(e),this}}]),n}();ose.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Roe.freezeMethods(ose.prototype),Roe.freezeMethods(ose);var sse=ose;function use(e,t){var n=this||ese,r=t||n,a=sse.from(r.headers),i=r.data;return Roe.forEach(e,(function(e){i=e.call(n,i,a.normalize(),t?t.status:void 0)})),a.normalize(),i}function cse(e){return!(!e||!e.__CANCEL__)}function lse(e,t,n){Foe.call(this,null==e?"canceled":e,Foe.ERR_CANCELED,t,n),this.name="CanceledError"}Roe.inherits(lse,Foe,{__CANCEL__:!0});var dse=lse;var fse=Xoe.isStandardBrowserEnv?{write:function(e,t,n,r,a,i){var o=[];o.push(e+"="+encodeURIComponent(t)),Roe.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Roe.isString(r)&&o.push("path="+r),Roe.isString(a)&&o.push("domain="+a),!0===i&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function hse(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var pse=Xoe.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=Roe.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var vse=function(e,t){e=e||10;var n,r=new Array(e),a=new Array(e),i=0,o=0;return t=void 0!==t?t:1e3,function(s){var u=Date.now(),c=a[o];n||(n=u),r[i]=s,a[i]=u;for(var l=o,d=0;l!==i;)d+=r[l++],l%=e;if((i=(i+1)%e)===o&&(o=(o+1)%e),!(u-n<t)){var f=c&&u-c;return f?Math.round(1e3*d/f):void 0}}};function mse(e,t){var n=0,r=vse(50,250);return function(a){var i=a.loaded,o=a.lengthComputable?a.total:void 0,s=i-n,u=r(s);n=i;var c={loaded:i,total:o,progress:o?i/o:void 0,bytes:s,rate:u||void 0,estimated:u&&o&&i<=o?(o-i)/u:void 0,event:a};c[t?"download":"upload"]=!0,e(c)}}var gse="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,a=e.data,i=sse.from(e.headers).normalize(),o=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}Roe.isFormData(a)&&(Xoe.isStandardBrowserEnv||Xoe.isStandardBrowserWebWorkerEnv)&&i.setContentType(!1);var u=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(c+":"+l))}var d=hse(e.baseURL,e.url);function f(){if(u){var r=sse.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Foe("Request failed with status code "+n.status,[Foe.ERR_BAD_REQUEST,Foe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),s()}),(function(e){n(e),s()}),{data:o&&"text"!==o&&"json"!==o?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}}if(u.open(e.method.toUpperCase(),Zoe(d,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=f:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(f)},u.onabort=function(){u&&(n(new Foe("Request aborted",Foe.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new Foe("Network Error",Foe.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||Koe;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Foe(t,r.clarifyTimeoutError?Foe.ETIMEDOUT:Foe.ECONNABORTED,e,u)),u=null},Xoe.isStandardBrowserEnv){var h=(e.withCredentials||pse(d))&&e.xsrfCookieName&&fse.read(e.xsrfCookieName);h&&i.set(e.xsrfHeaderName,h)}void 0===a&&i.setContentType(null),"setRequestHeader"in u&&Roe.forEach(i.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),Roe.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),o&&"json"!==o&&(u.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",mse(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",mse(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){u&&(n(!t||t.type?new dse(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(d);p&&-1===Xoe.protocols.indexOf(p)?n(new Foe("Unsupported protocol "+p+":",Foe.ERR_BAD_REQUEST,e)):u.send(a||null)}))},yse={http:null,xhr:gse};Roe.forEach(yse,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));var bse=function(e){for(var t,n,r=(e=Roe.isArray(e)?e:[e]).length,a=0;a<r&&(t=e[a],!(n=Roe.isString(t)?yse[t.toLowerCase()]:t));a++);if(!n){if(!1===n)throw new Foe("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(Roe.hasOwnProp(yse,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!Roe.isFunction(n))throw new TypeError("adapter is not a function");return n};function xse(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new dse(null,e)}function kse(e){return xse(e),e.headers=sse.from(e.headers),e.data=use.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),bse(e.adapter||ese.adapter)(e).then((function(t){return xse(e),t.data=use.call(e,e.transformResponse,t),t.headers=sse.from(t.headers),t}),(function(t){return cse(t)||(xse(e),t&&t.response&&(t.response.data=use.call(e,e.transformResponse,t.response),t.response.headers=sse.from(t.response.headers))),Promise.reject(t)}))}var wse=function(e){return e instanceof sse?e.toJSON():e};function Sse(e,t){t=t||{};var n={};function r(e,t,n){return Roe.isPlainObject(e)&&Roe.isPlainObject(t)?Roe.merge.call({caseless:n},e,t):Roe.isPlainObject(t)?Roe.merge({},t):Roe.isArray(t)?t.slice():t}function a(e,t,n){return Roe.isUndefined(t)?Roe.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function i(e,t){if(!Roe.isUndefined(t))return r(void 0,t)}function o(e,t){return Roe.isUndefined(t)?Roe.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,a,i){return i in t?r(n,a):i in e?r(void 0,n):void 0}var u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:function(e,t){return a(wse(e),wse(t),!0)}};return Roe.forEach(Object.keys(e).concat(Object.keys(t)),(function(r){var i=u[r]||a,o=i(e[r],t[r],r);Roe.isUndefined(o)&&i!==s||(n[r]=o)})),n}var Ise="1.3.5",Nse={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Nse[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var Tse={};Nse.transitional=function(e,t,n){function r(e,t){return"[Axios v1.3.5] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,a,i){if(!1===e)throw new Foe(r(a," has been removed"+(t?" in "+t:"")),Foe.ERR_DEPRECATED);return t&&!Tse[a]&&(Tse[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,a,i)}};var Cse={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Foe("options must be an object",Foe.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),a=r.length;a-- >0;){var i=r[a],o=t[i];if(o){var s=e[i],u=void 0===s||o(s,i,e);if(!0!==u)throw new Foe("option "+i+" must be "+u,Foe.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Foe("Unknown option "+i,Foe.ERR_BAD_OPTION)}},validators:Nse},Ese=Cse.validators,_se=function(){function e(t){Vt(this,e),this.defaults=t,this.interceptors={request:new qoe,response:new qoe}}return Zt(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n,r=t=Sse(this.defaults,t),a=r.transitional,i=r.paramsSerializer,o=r.headers;void 0!==a&&Cse.assertOptions(a,{silentJSONParsing:Ese.transitional(Ese.boolean),forcedJSONParsing:Ese.transitional(Ese.boolean),clarifyTimeoutError:Ese.transitional(Ese.boolean)},!1),null!=i&&(Roe.isFunction(i)?t.paramsSerializer={serialize:i}:Cse.assertOptions(i,{encode:Ese.function,serialize:Ese.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=o&&Roe.merge(o.common,o[t.method]))&&Roe.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete o[e]})),t.headers=sse.concat(n,o);var s=[],u=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(u=u&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));var c,l=[];this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));var d,f=0;if(!u){var h=[kse.bind(this),void 0];for(h.unshift.apply(h,s),h.push.apply(h,l),d=h.length,c=Promise.resolve(t);f<d;)c=c.then(h[f++],h[f++]);return c}d=s.length;var p=t;for(f=0;f<d;){var v=s[f++],m=s[f++];try{p=v(p)}catch(g){m.call(this,g);break}}try{c=kse.call(this,p)}catch(g){return Promise.reject(g)}for(f=0,d=l.length;f<d;)c=c.then(l[f++],l[f++]);return c}},{key:"getUri",value:function(e){return Zoe(hse((e=Sse(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();Roe.forEach(["delete","get","head","options"],(function(e){_se.prototype[e]=function(t,n){return this.request(Sse(n||{},{method:e,url:t,data:(n||{}).data}))}})),Roe.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,a){return this.request(Sse(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}_se.prototype[e]=t(),_se.prototype[e+"Form"]=t(!0)}));var Ase=_se,Rse=function(){function e(t){if(Vt(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,a){r.reason||(r.reason=new dse(e,t,a),n(r.reason))}))}return Zt(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t;return{token:new e((function(e){t=e})),cancel:t}}}]),e}(),Ose=Rse;var Dse={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Dse).forEach((function(e){var t=(0,C.Z)(e,2),n=t[0],r=t[1];Dse[r]=n}));var Pse=Dse;var Fse=function e(t){var n=new Ase(t),r=Qie(Ase.prototype.request,n);return Roe.extend(r,Ase.prototype,n,{allOwnKeys:!0}),Roe.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Sse(t,n))},r}(ese);Fse.Axios=Ase,Fse.CanceledError=dse,Fse.CancelToken=Ose,Fse.isCancel=cse,Fse.VERSION=Ise,Fse.toFormData=zoe,Fse.AxiosError=Foe,Fse.Cancel=Fse.CanceledError,Fse.all=function(e){return Promise.all(e)},Fse.spread=function(e){return function(t){return e.apply(null,t)}},Fse.isAxiosError=function(e){return Roe.isObject(e)&&!0===e.isAxiosError},Fse.mergeConfig=Sse,Fse.AxiosHeaders=sse,Fse.formToJSON=function(e){return Joe(Roe.isHTMLForm(e)?new FormData(e):e)},Fse.HttpStatusCode=Pse,Fse.default=Fse;var Mse=Fse,Lse=function(e){var t=e.host,n=H(),r=Yie().user,a=(0,N.useState)([]),i=(0,C.Z)(a,2),o=i[0],s=i[1],u=function(){var e=me(ye().mark((function e(){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mse.post("".concat(t,"/api/file/getdata"),{},{headers:{"auth-token":nV.get("auth-Tokennpk")}});case 2:n=e.sent,r=n.data,s(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,N.useEffect)((function(){r&&nV.get("auth-Tokennpk")||n("/login"),u()}),[]),(0,be.jsx)("div",{className:"bg-gray-50 mb-12",children:(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{className:"dark:text-gray-700 text-lg pt-7 text-center font-semibold",children:"Activity Dashboard"}),(0,be.jsx)("div",{children:(0,be.jsx)("section",{class:"w-fit mx-auto grid grid-cols-1 lg:grid-cols-3 md:grid-cols-2 justify-items-center justify-center gap-y-20 gap-x-14 mt-10 mb-5",children:o.map((function(e){return(0,be.jsxs)("div",{class:"w-72 bg-white shadow-md rounded-xl duration-500 hover:scale-105 hover:shadow-xl",children:[(0,be.jsx)("img",{src:"".concat(t,"/image/").concat(e.filename)}),(0,be.jsxs)("div",{class:"px-4 py-3 w-72",children:[(0,be.jsx)("p",{children:"Category"}),(0,be.jsx)("p",{class:"text-lg font-bold text-black truncate block capitalize",children:e.category}),(0,be.jsxs)("div",{class:"flex items-center justify-between",children:[(0,be.jsx)("p",{children:"Probability"}),(0,be.jsxs)("p",{class:"text-lg font-semibold text-black cursor-auto my-3",children:[(100*e.probability).toFixed(2),"%"]})]})]})]})}))})})]})})},$se=n(5644),jse=n.n($se),zse=n(1452),Bse=n.n(zse),Use=n(810),Vse=n.n(Use),Wse=n(1323),Gse=n.n(Wse),Zse="react-avatar/",Hse="failing",qse=function(){try{return"localStorage"in window&&window.localStorage}catch(Rme){return!1}}(),Kse=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Vt(this,e);var n=t.cachePrefix,r=void 0===n?Zse:n,a=t.sourceTTL,i=void 0===a?6048e5:a,o=t.sourceSize,s=void 0===o?20:o;this.cachePrefix=r,this.sourceTTL=i,this.sourceSize=s}return Zt(e,[{key:"set",value:function(e,t){if(qse){t=Bse()(t);try{localStorage.setItem(this.cachePrefix+e,t)}catch(n){console.error(n)}}}},{key:"get",value:function(e){if(!qse)return null;var t=localStorage.getItem(this.cachePrefix+e);return t?JSON.parse(t):null}},{key:"sourceFailed",value:function(e){var t=this.get(Hse)||[];return(t=Vse()(t).call(t,(function(t){var n=t.expires>0&&t.expires<Date.now(),r=t===e||t.url==e;return!n&&!r}))).unshift({url:e,expires:Date.now()+this.sourceTTL}),t=Gse()(t).call(t,0,this.sourceSize-1),this.set(Hse,t)}},{key:"hasSourceFailedBefore",value:function(e){return(this.get(Hse)||[]).some((function(t){var n=t.expires>0&&t.expires<Date.now();return(t===e||t.url==e)&&!n}))}}]),e}(),Xse=new Kse,Jse=n(8561),Yse=n.n(Jse),Qse=n(3195),eue=n.n(Qse),tue=n(2007),nue=n.n(tue),rue=(n(70),n(3243)),aue=n.n(rue),iue=n(6186),oue=n.n(iue),sue=n(1551),uue=n.n(sue),cue=n(4045),lue=n.n(cue)()();var due=["#A62A21","#7e3794","#0B51C1","#3A6024","#A81563","#B3003C"],fue=/^([-+]?(?:\d+(?:\.\d+)?|\.\d+))([a-z]{2,4}|%)?$/;function hue(e,t){for(var n,r=aue()(n=(0,Le.Z)(e)).call(n,(function(e){return e.charCodeAt(0)})),a=r.length,i=a%(t-1)+1,o=oue()(r).call(r,(function(e,t){return e+t}))%t,s=r[0]%t,u=0;u<a;u++)s=(i*s+o)%t;return s}function pue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:due;if(!e)return"transparent";var n=hue(e,t.length);return t[n]}function vue(e){e=""+e;var t=fue.exec(e)||[],n=(0,C.Z)(t,3),r=n[1],a=void 0===r?0:r,i=n[2],o=void 0===i?"px":i;return{value:uue()(a),str:a+o,unit:o}}function mue(e){return e=vue(e),e=isNaN(e.value)?512:"px"===e.unit?e.value:0===e.value?0:512,lue&&(e*=2),e}function gue(e,t){var n,r,a,i=t.maxInitials;return Gse()(n=Vse()(r=aue()(a=e.split(/\s/)).call(a,(function(e){return e.substring(0,1).toUpperCase()}))).call(r,(function(e){return!!e}))).call(n,0,i).join("").toUpperCase()}var yue={};function bue(e,t){if(yue[t])yue[t].push(e);else{var n=yue[t]=[e];setTimeout((function(){delete yue[t],n.forEach((function(e){return e()}))}),t)}}function xue(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,a=t;r<a.length;r++){var i=a[r];if(i||""===i)return i;if(!1===i||null===i)return null}}function kue(e){return!0===e?"100%":!1!==e?e:void 0}function wue(e){var t=function(){if("undefined"===typeof Reflect||!Yse())return!1;if(Yse().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Yse()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lo(e);if(t){var a=Lo(this).constructor;n=Yse()(r,arguments,a)}else n=r.apply(this,arguments);return zo(this,n)}}var Sue={cache:Xse,colors:due,initials:gue,avatarRedirectUrl:null},Iue=eue()(Sue),Nue=N.createContext&&N.createContext(),Tue=!Nue,Cue=Tue?null:Nue.Consumer,Eue=N.forwardRef||function(e){return e},_ue=function(e){Mo(n,e);var t=wue(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"_getContext",value:function(){var e=this,t={};return Iue.forEach((function(n){"undefined"!==typeof e.props[n]&&(t[n]=e.props[n])})),t}},{key:"render",value:function(){var e=this.props.children;return Tue?N.Children.only(e):N.createElement(Nue.Provider,{value:this._getContext()},N.Children.only(e))}}]),n}(N.Component);(0,De.Z)(_ue,"displayName","ConfigProvider"),(0,De.Z)(_ue,"propTypes",{cache:nue().object,colors:nue().arrayOf(nue().string),initials:nue().func,avatarRedirectUrl:nue().string,children:nue().node});var Aue=function(e){function t(t,n){if(Tue){var r=n&&n.reactAvatar;return N.createElement(e,(0,E.Z)({},Sue,r,t))}return N.createElement(Cue,null,(function(r){return N.createElement(e,(0,E.Z)({ref:n},Sue,r,t))}))}return t.contextTypes=_ue.childContextTypes,Eue(t)};Tue&&(_ue.childContextTypes={reactAvatar:nue().object},_ue.prototype.getChildContext=function(){return{reactAvatar:this._getContext()}});var Rue=n(6363),Oue=n.n(Rue),Due=n(5162),Pue=n.n(Due),Fue=n(6829),Mue=n.n(Fue),Lue=n(1063),$ue=n.n(Lue),jue=n(8597),zue=n.n(jue),Bue=function(){function e(){Vt(this,e),this.sourcePointer=0,this.active=!0,this.fetch=null}return Zt(e,[{key:"isActive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.internal===this&&(!!this.fetch&&!0===this.active)}}]),e}();function Uue(e,t){var n=eue()(e);if(Oue()){var r=Oue()(e);t&&(r=Vse()(r).call(r,(function(t){return Pue()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uue(Object(n),!0).forEach((function(t){(0,De.Z)(e,t,n[t])})):Mue()?$ue()(e,Mue()(n)):Uue(Object(n)).forEach((function(t){zue()(e,t,Pue()(n,t))}))}return e}function Wue(e){var t=function(){if("undefined"===typeof Reflect||!Yse())return!1;if(Yse().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Yse()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lo(e);if(t){var a=Lo(this).constructor;n=Yse()(r,arguments,a)}else n=r.apply(this,arguments);return zo(this,n)}}function Gue(e,t){var n=eue()(e);if(Oue()){var r=Oue()(e);t&&(r=Vse()(r).call(r,(function(t){return Pue()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zue(e){var t=function(){if("undefined"===typeof Reflect||!Yse())return!1;if(Yse().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Yse()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lo(e);if(t){var a=Lo(this).constructor;n=Yse()(r,arguments,a)}else n=r.apply(this,arguments);return zo(this,n)}}var Hue=function(e){Mo(n,e);var t=Zue(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.unstyled,r=e.round,a=e.style,i=e.avatar,o=e.onClick,s=e.children,u=i.sourceName,c=vue(this.props.size),l=n?null:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gue(Object(n),!0).forEach((function(t){(0,De.Z)(e,t,n[t])})):Mue()?$ue()(e,Mue()(n)):Gue(Object(n)).forEach((function(t){zue()(e,t,Pue()(n,t))}))}return e}({display:"inline-block",verticalAlign:"middle",width:c.str,height:c.str,borderRadius:kue(r),fontFamily:"Helvetica, Arial, sans-serif"},a),d=[t,"sb-avatar"];if(u){var f=u.toLowerCase().replace(/[^a-z0-9-]+/g,"-").replace(/^-+|-+$/g,"");d.push("sb-avatar--"+f)}return N.createElement("div",{className:d.join(" "),onClick:o,style:l},s)}}]),n}(N.PureComponent);function que(e){var t=function(){if("undefined"===typeof Reflect||!Yse())return!1;if(Yse().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Yse()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lo(e);if(t){var a=Lo(this).constructor;n=Yse()(r,arguments,a)}else n=r.apply(this,arguments);return zo(this,n)}}(0,De.Z)(Hue,"propTypes",{className:nue().string,round:nue().oneOfType([nue().bool,nue().string]),style:nue().object,size:nue().oneOfType([nue().number,nue().string]),unstyled:nue().bool,avatar:nue().object,onClick:nue().func,children:nue().node});var Kue=function(e){Mo(n,e);var t=que(n);function n(){return Vt(this,n),t.apply(this,arguments)}return Zt(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.round,r=e.unstyled,a=e.alt,i=e.title,o=e.name,s=e.value,u=e.avatar,c=vue(this.props.size),l=r?null:{maxWidth:"100%",width:c.str,height:c.str,borderRadius:kue(n)};return N.createElement(Hue,this.props,N.createElement("img",{className:t+" sb-avatar__image",width:c.str,height:c.str,style:l,src:u.src,alt:xue(a,o||s),title:xue(i,o||s),onError:u.onRenderFailed}))}}]),n}(N.PureComponent);(0,De.Z)(Kue,"propTypes",{alt:nue().oneOfType([nue().string,nue().bool]),title:nue().oneOfType([nue().string,nue().bool]),name:nue().string,value:nue().string,avatar:nue().object,className:nue().string,unstyled:nue().bool,round:nue().oneOfType([nue().bool,nue().string,nue().number]),size:nue().oneOfType([nue().number,nue().string])}),(0,De.Z)(Kue,"defaultProps",{className:"",round:!1,size:100,unstyled:!1});var Xue=n(1168),Jue=n.n(Xue);function Yue(e){var t=function(){if("undefined"===typeof Reflect||!Yse())return!1;if(Yse().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Yse()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lo(e);if(t){var a=Lo(this).constructor;n=Yse()(r,arguments,a)}else n=r.apply(this,arguments);return zo(this,n)}}var Que=function(e){Mo(n,e);var t=Yue(n);function n(){var e,r;Vt(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,Jue()(e=[this]).call(e,i)),(0,De.Z)(je(r),"_scaleTextNode",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=r.props,a=n.unstyled,i=n.textSizeRatio,o=n.textMarginRatio,s=n.avatar;if(r._node=e,e&&e.parentNode&&!a&&!s.src&&r._mounted){var u=e.parentNode,c=u.parentNode,l=u.getBoundingClientRect(),d=l.width,f=l.height;if(0!=d||0!=f){if(!c.style.fontSize){var h=f/i;c.style.fontSize="".concat(h,"px")}u.style.fontSize=null;var p=e.getBoundingClientRect(),v=p.width;if(!(v<0)){var m=d*(1-2*o);v>m&&(u.style.fontSize="calc(1em * ".concat(m/v,")"))}}else{var g=Math.min(1.5*t,500);bue((function(){return r._scaleTextNode(e,g)}),g)}}})),r}return Zt(n,[{key:"componentDidMount",value:function(){this._mounted=!0,this._scaleTextNode(this._node)}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.round,r=e.unstyled,a=e.title,i=e.name,o=e.value,s=e.avatar,u=vue(this.props.size),c=r?null:{width:u.str,height:u.str,lineHeight:"initial",textAlign:"center",color:this.props.fgColor,background:s.color,borderRadius:kue(n)},l=r?null:{display:"table",tableLayout:"fixed",width:"100%",height:"100%"},d=r?null:{display:"table-cell",verticalAlign:"middle",fontSize:"100%",whiteSpace:"nowrap"},f=[s.value,this.props.size].join("");return N.createElement(Hue,this.props,N.createElement("div",{className:t+" sb-avatar__text",style:c,title:xue(a,i||o)},N.createElement("div",{style:l},N.createElement("span",{style:d},N.createElement("span",{ref:this._scaleTextNode,key:f},s.value)))))}}]),n}(N.PureComponent);(0,De.Z)(Que,"propTypes",{name:nue().string,value:nue().string,avatar:nue().object,title:nue().oneOfType([nue().string,nue().bool]),className:nue().string,unstyled:nue().bool,fgColor:nue().string,textSizeRatio:nue().number,textMarginRatio:nue().number,round:nue().oneOfType([nue().bool,nue().string,nue().number]),size:nue().oneOfType([nue().number,nue().string])}),(0,De.Z)(Que,"defaultProps",{className:"",fgColor:"#FFF",round:!1,size:100,textSizeRatio:3,textMarginRatio:.15,unstyled:!1});var ece=n(3329),tce=n.n(ece),nce=Zt((function e(t){var n=this;Vt(this,e),(0,De.Z)(this,"props",null),(0,De.Z)(this,"isCompatible",(function(){return!!n.props.email||!!n.props.md5Email})),(0,De.Z)(this,"get",(function(e){var t=n.props,r=t.md5Email||tce()(t.email),a=mue(t.size),i="https://secure.gravatar.com/avatar/".concat(r,"?d=404");a&&(i+="&s=".concat(a)),e({sourceName:"gravatar",src:i})})),this.props=t}));(0,De.Z)(nce,"propTypes",{email:nue().string,md5Email:nue().string});var rce=Zt((function e(t){var n=this;Vt(this,e),(0,De.Z)(this,"props",null),(0,De.Z)(this,"isCompatible",(function(){return!!n.props.facebookId})),(0,De.Z)(this,"get",(function(e){var t,r=n.props.facebookId,a=mue(n.props.size),i="https://graph.facebook.com/".concat(r,"/picture");a&&(i+=Jue()(t="?width=".concat(a,"&height=")).call(t,a)),e({sourceName:"facebook",src:i})})),this.props=t}));(0,De.Z)(rce,"propTypes",{facebookId:nue().string});var ace=Zt((function e(t){var n=this;Vt(this,e),(0,De.Z)(this,"props",null),(0,De.Z)(this,"isCompatible",(function(){return!!n.props.githubHandle})),(0,De.Z)(this,"get",(function(e){var t=n.props.githubHandle,r=mue(n.props.size),a="https://avatars.githubusercontent.com/".concat(t,"?v=4");r&&(a+="&s=".concat(r)),e({sourceName:"github",src:a})})),this.props=t}));(0,De.Z)(ace,"propTypes",{githubHandle:nue().string});var ice=Zt((function e(t){var n=this;Vt(this,e),(0,De.Z)(this,"props",null),(0,De.Z)(this,"isCompatible",(function(){return!!n.props.skypeId})),(0,De.Z)(this,"get",(function(e){var t=n.props.skypeId;e({sourceName:"skype",src:"https://api.skype.com/users/".concat(t,"/profile/avatar")})})),this.props=t}));(0,De.Z)(ice,"propTypes",{skypeId:nue().string});var oce=function(){function e(t){var n=this;Vt(this,e),(0,De.Z)(this,"props",null),(0,De.Z)(this,"isCompatible",(function(){return!!(n.props.name||n.props.value||n.props.email)})),(0,De.Z)(this,"get",(function(e){var t=n.getValue();if(!t)return e(null);e({sourceName:"text",value:t,color:n.getColor()})})),this.props=t}return Zt(e,[{key:"getInitials",value:function(){var e=this.props,t=e.name,n=e.initials;return"string"===typeof n?n:"function"===typeof n?n(t,this.props):gue(t,this.props)}},{key:"getValue",value:function(){return this.props.name?this.getInitials():this.props.value?this.props.value:null}},{key:"getColor",value:function(){var e=this.props,t=e.color,n=e.colors,r=e.name,a=e.email,i=e.value;return t||pue(r||a||i,n)}}]),e}();(0,De.Z)(oce,"propTypes",{color:nue().string,name:nue().string,value:nue().string,email:nue().string,maxInitials:nue().number,initials:nue().oneOfType([nue().string,nue().func])});var sce=Zt((function e(t){var n=this;Vt(this,e),(0,De.Z)(this,"props",null),(0,De.Z)(this,"isCompatible",(function(){return!!n.props.src})),(0,De.Z)(this,"get",(function(e){e({sourceName:"src",src:n.props.src})})),this.props=t}));(0,De.Z)(sce,"propTypes",{src:nue().string});var uce=Zt((function e(t){var n=this;Vt(this,e),(0,De.Z)(this,"props",null),(0,De.Z)(this,"icon","\u2737"),(0,De.Z)(this,"isCompatible",(function(){return!0})),(0,De.Z)(this,"get",(function(e){var t=n.props,r=t.color,a=t.colors;e({sourceName:"icon",value:n.icon,color:r||pue(n.icon,a)})})),this.props=t}));function cce(e,t){var n;return n=Zt((function n(r){var a=this;Vt(this,n),(0,De.Z)(this,"props",null),(0,De.Z)(this,"isCompatible",(function(){return!!a.props.avatarRedirectUrl&&!!a.props[t]})),(0,De.Z)(this,"get",(function(n){var r,i,o,s=a.props.avatarRedirectUrl,u=mue(a.props.size),c=s.replace(/\/*$/,"/"),l=a.props[t],d=u?"size=".concat(u):"",f=Jue()(r=Jue()(i=Jue()(o="".concat(c)).call(o,e,"/")).call(i,l,"?")).call(r,d);n({sourceName:e,src:f})})),this.props=r})),(0,De.Z)(n,"propTypes",(0,De.Z)({},t,nue().oneOfType([nue().string,nue().number]))),n}(0,De.Z)(uce,"propTypes",{color:nue().string});var lce=cce("twitter","twitterHandle"),dce=cce("vkontakte","vkontakteId"),fce=cce("instagram","instagramId"),hce=function(e){var t=function(e){var t=e.sources,n=void 0===t?[]:t,r=oue()(n).call(n,(function(e,t){return jse()(e,t.propTypes)}),{}),a=function(e){Mo(a,e);var t=Wue(a);function a(e){var r;return Vt(this,a),r=t.call(this,e),(0,De.Z)(je(r),"_createFetcher",(function(e){return function(t){var a=r.props.cache;if(e.isActive(r.state)){t&&"error"===t.type&&a.sourceFailed(t.target.src);var i=e.sourcePointer;if(n.length!==i){var o=n[i];e.sourcePointer++,function(e,t,n){var r=t.cache,a=new e(t);if(!a.isCompatible(t))return n();a.get((function(e){e&&e.src&&r.hasSourceFailedBefore(e.src)||!e?n():n(e)}))}(o,r.props,(function(t){if(!t)return setTimeout(e.fetch,0);e.isActive(r.state)&&(t=Vue({src:null,value:null,color:null},t),r.setState((function(n){return e.isActive(n)?t:{}})))}))}}}})),(0,De.Z)(je(r),"fetch",(function(){var e=new Bue;e.fetch=r._createFetcher(e),r.setState({internal:e},e.fetch)})),r.state={internal:null,src:null,value:null,color:e.color},r}return Zt(a,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"componentDidUpdate",value:function(e){var t=!1;for(var n in r)t=t||e[n]!==this.props[n];t&&setTimeout(this.fetch,0)}},{key:"componentWillUnmount",value:function(){this.state.internal&&(this.state.internal.active=!1)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.propertyName,r=this.state,a=r.src,i=r.value,o=r.color,s=r.sourceName,u=r.internal,c={src:a,value:i,color:o,sourceName:s,onRenderFailed:function(){return u&&u.fetch()}};if("function"===typeof t)return t(c);var l=N.Children.only(t);return N.cloneElement(l,(0,De.Z)({},n,c))}}]),a}(N.PureComponent);return(0,De.Z)(a,"displayName","AvatarDataProvider"),(0,De.Z)(a,"propTypes",Vue(Vue({},r),{},{cache:nue().object,propertyName:nue().string})),(0,De.Z)(a,"defaultProps",{propertyName:"avatar"}),(0,De.Z)(a,"Cache",Kse),(0,De.Z)(a,"ConfigProvider",_ue),jse()(Aue(a),{ConfigProvider:_ue,Cache:Kse})}(e),n=Aue(N.forwardRef((function(e,n){return N.createElement(t,(0,E.Z)({},e,{propertyName:"avatar"}),(function(t){var r=t.src?Kue:Que;return N.createElement(r,(0,E.Z)({},e,{avatar:t,ref:n}))}))})));return jse()(n,{getRandomColor:pue,ConfigProvider:_ue,Cache:Kse})}({sources:[rce,cce("google","googleId"),ace,lce,fce,dce,ice,nce,sce,oce,uce]}),pce=function(e){var t=e.host,n=(0,N.useState)(""),r=(0,C.Z)(n,2),a=r[0],i=r[1],o=(0,N.useState)(""),s=(0,C.Z)(o,2),u=s[0],c=s[1],l=(0,N.useState)(""),d=(0,C.Z)(l,2),f=d[0],h=d[1],p=(0,N.useState)(""),v=(0,C.Z)(p,2),m=v[0],g=v[1],y=(0,N.useState)(""),b=(0,C.Z)(y,2),x=b[0],k=b[1],w=(0,N.useState)(""),S=(0,C.Z)(w,2),I=S[0],T=S[1],E=function(){var e=me(ye().mark((function e(){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mse.post("".concat(t,"/api/auth/getuser"),{},{headers:{"auth-token":nV.get("auth-Tokennpk")}});case 2:n=e.sent,r=n.data,i(r.user.name),c(r.user.phone);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=Yie(),A=_.logOut,R=_.user,O=H(),D=function(){var e=me(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A();case 3:nV.remove("auth-Tokennpk"),O("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,N.useEffect)((function(){R&&nV.get("auth-Tokennpk")?(E(),P()):O("/login")}),[]);var P=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(){var e=me(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://nominatim.openstreetmap.org/reverse?format=jsonv2&zoom=18&addressdetails=1&lat=".concat(t.coords.latitude,"&lon=").concat(t.coords.longitude));case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,h(r.address.road),g(r.address.state_district),k(r.address.state),T(r.address.country);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):alert("Geolocation is not supported by this browser.")};return(0,be.jsx)("div",{className:"flex items-center min-h-screen  p-4 bg-gray-100 lg:justify-center",children:(0,be.jsx)("div",{className:" mb-8  flex flex-col w-full overflow-hidden bg-white rounded-md shadow-lg max md:flex-row md:flex-1 lg:max-w-screen-md",children:(0,be.jsxs)("div",{className:"p-5 bg-white md:flex-1",children:[(0,be.jsx)("h3",{className:"my-4 text-2xl text-center font-semibold text-gray-700",children:"Account Information"}),(0,be.jsxs)("div",{className:"flex flex-col space-y-5 justify-center items-center",children:[(0,be.jsx)("div",{children:(0,be.jsx)(hce,{name:a})}),(0,be.jsxs)("div",{className:"grid grid-cols-2 w-[50vw]  gap-4",children:[(0,be.jsx)("div",{className:"font-bold text-lg ",children:"Name"}),(0,be.jsx)("div",{className:"font-semibold text-lg",children:a})]}),(0,be.jsxs)("div",{className:"grid grid-cols-2 w-[50vw]   gap-4",children:[(0,be.jsx)("div",{className:"font-bold text-lg  ",children:"Phone"}),(0,be.jsx)("div",{className:"font-semibold text-lg",children:u})]}),(0,be.jsxs)("div",{className:"grid grid-cols-2 w-[50vw] gap-4",children:[(0,be.jsx)("div",{className:"font-bold text-lg ",children:"Address"}),(0,be.jsxs)("div",{className:"font-semibold text-lg ",children:[f,", ",m,", ",x,", ",I]})]}),(0,be.jsx)("div",{class:"w-72 bg-white shadow-md rounded-xl duration-500 hover:scale-105 hover:shadow-xl",children:(0,be.jsxs)(pe,{to:"/activity",children:[(0,be.jsx)("img",{src:"https://images.unsplash.com/photo-1492496913980-501348b61469?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8OHx8ZmFybXxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=500&q=60",alt:"Product",class:"h-40 w-72 object-cover rounded-t-xl"}),(0,be.jsx)("div",{class:"px-4 py-3 w-72",children:(0,be.jsx)("p",{class:"text-lg font-bold text-black truncate block capitalize",children:"Your Activity"})})]})}),(0,be.jsx)("div",{children:(0,be.jsx)("button",{onClick:D,type:"submit",className:" px-4 py-2 text-lg font-semibold text-white transition-colors duration-300 bg-blue-500 rounded-md shadow hover:bg-blue-600 focus:outline-none focus:ring-blue-200 focus:ring-4 mx-auto items-center",children:"Log out"})})]})]})})})};var vce=function(e){var t=e.cropdata,n=e.setCropdata,r=e.change,a=e.host,i=(0,N.useState)(""),o=(0,C.Z)(i,2),s=o[0],u=o[1],c=(0,N.useState)(""),l=(0,C.Z)(c,2),d=(l[0],l[1]),f=Yie().user,h=H(),p=(0,N.useState)(!1),v=(0,C.Z)(p,2),m=(v[0],v[1],function(){var e=me(ye().mark((function e(){var t,n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mse.post("".concat(a,"/api/auth/getuser"),{},{headers:{"auth-token":nV.get("auth-Tokennpk")}});case 2:t=e.sent,n=t.data,u(n.user.name),d(n.user.phone);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),g=function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rT("cropmodel/model.json");case 2:t=e.sent,console.log(t),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(){var e=me(ye().mark((function e(r){var a,i,o,s,u,c,l,d,f,h,p,v,m,g,y,b,x,k;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(r.coords.latitude,"&lon=").concat(r.coords.longitude,"&appid=1ae67afbcfd2c8ace165befd341a1d70&units=metric"));case 2:return d=e.sent,e.next=5,d.json();case 5:return f=e.sent,e.next=8,fetch("https://nominatim.openstreetmap.org/reverse?format=jsonv2&zoom=18&addressdetails=1&lat=".concat(r.coords.latitude,"&lon=").concat(r.coords.longitude));case 8:return h=e.sent,e.next=11,h.json();case 11:return p=e.sent,v=(new Date).toString().split(" ")[1].toUpperCase(),console.log(v),m=null===p||void 0===p||null===(a=p.address)||void 0===a||null===(i=a.state)||void 0===i||null===(o=i.split(" "))||void 0===o||null===(s=o.join(""))||void 0===s||null===(u=s.toString())||void 0===u?void 0:u.toUpperCase(),g=rV[m][v],console.log(g),y=Ps([[50.55,53.36,48.14,null===f||void 0===f||null===(c=f.main)||void 0===c?void 0:c.temp,null===f||void 0===f||null===(l=f.main)||void 0===l?void 0:l.humidity,.77,g]]),e.next=20,t.predict(y).data();case 20:b=e.sent,x=b,console.log(x),k=Array.from(x).map((function(e,t){return{probability:e,className:zt[t]}})).sort((function(e,t){return t.probability-e.probability})),console.log(k),n(k[0]);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):alert("Geolocation is not supported by this browser.");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,N.useEffect)((function(){if(!nV.get("auth-Tokennpk")||!f)return h("/login");r||g(),m()}),[]),(0,be.jsxs)("div",{className:"container m-auto  mb-[5rem] bg-gray-50",children:[(0,be.jsxs)("div",{className:"font-semibold text-xl pt-6 px-5  mb-7",children:["Welcome, ",(0,be.jsx)("span",{className:"font-bold text-green-900",children:s})]}),(0,be.jsx)(xe,{}),(0,be.jsx)(Pt,{recommended:t,host:a}),(0,be.jsxs)("div",{className:"grid grid-cols-2 gap-2  px-5 bg-gray-50",children:[(0,be.jsx)("div",{onClick:function(){return h("/disease_predictor")},children:(0,be.jsx)(Mt,{})}),(0,be.jsx)("div",{children:(0,be.jsx)(Lt,{})})]})]})};var mce=function(){var e=Z();return Yie().user,(0,be.jsx)("div",{children:(0,be.jsx)("nav",{className:"bg-white dark:bg-white w-full z-20 top-0 left-0 border-b border-transparent ",children:(0,be.jsxs)("div",{className:" flex flex-wrap items-center justify-between mx-auto p-4",children:[(0,be.jsx)("div",{children:(0,be.jsx)(pe,{to:"/",className:"flex items-center",children:(0,be.jsx)("img",{src:"Images/NPKlogo.png",className:"h-[3rem] mr-3",alt:"NPK Logo"})})}),nV.get("auth-Tokennpk")?(0,be.jsx)(be.Fragment,{children:"/"===e.pathname||"/login"===e.pathname?(0,be.jsx)(pe,{to:"/dashboard",className:"text-black border-2 border-green-400 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-4 py-2 text-center mr-3 md:mr-0",children:"Dashboard"}):(0,be.jsx)(be.Fragment,{})}):(0,be.jsx)("div",{className:"flex md:order-2",children:(0,be.jsx)(pe,{to:"/login",className:"text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg text-sm px-4 py-2 text-center mr-3 md:mr-0 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800",children:"Login"})})]})})})},gce=n(6165),yce=n.n(gce),bce={ext:"ext.",country:"Phone number country",phone:"Phone",AB:"Abkhazia",AC:"Ascension Island",AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"\xc5land Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barth\xe9lemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Congo, Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Cote d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cape Verde",CW:"Cura\xe7ao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands",FM:"Federated States of Micronesia",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"North Korea",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Laos",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova",ME:"Montenegro",MF:"Saint Martin (French Part)",MG:"Madagascar",MH:"Marshall Islands",MK:"North Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",OS:"South Ossetia",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestine",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Serbia",RU:"Russia",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten",SY:"Syria",SZ:"Swaziland",TA:"Tristan da Cunha",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See (Vatican City State)",VC:"Saint Vincent and the Grenadines",VE:"Venezuela",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",XK:"Kosovo",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe",ZZ:"International"},xce=tue.shape({country_calling_codes:tue.object.isRequired,countries:tue.object.isRequired}),kce=tue.objectOf(tue.string),wce=n(1694),Sce=n.n(wce);function Ice(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Nce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nce(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tce(e,t){for(var n,r=0,a=Ice(t.split(""));!(n=a()).done;){n.value===e&&r++}return r}function Cce(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ",a=e.length,i=Tce("(",e),o=Tce(")",e),s=i-o;s>0&&a<t.length;)e+=t[a].replace(n,r),")"===t[a]&&s--,a++;return e}function Ece(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return _ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _ce(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ace(e,t,n){"string"===typeof n&&(n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",n=arguments.length>2?arguments[2]:void 0;if(!e)return function(e){return{text:e}};var r=Tce(t,e);return function(a){if(!a)return{text:"",template:e};for(var i,o=0,s="",u=Ece(e.split(""));!(i=u()).done;){var c=i.value;if(c===t){if(s+=a[o],++o===a.length&&a.length<r)break}else s+=c}return n&&(s=Cce(s,e)),{text:s,template:e}}}(n));var r=n(e)||{},a=r.text,i=r.template;if(void 0===a&&(a=e),i)if(void 0===t)t=a.length;else{for(var o=0,s=!1,u=-1;o<a.length&&o<i.length;){if(a[o]!==i[o]){if(0===t){s=!0,t=o;break}u=o,t--}o++}s||(t=u+1)}return{text:a,caret:t}}var Rce=8,Oce=46;function Dce(e,t){void 0!==t&&(!function(){if("undefined"!==typeof navigator)return Pce.test(navigator.userAgent)}()?e.setSelectionRange(t,t):setTimeout((function(){return e.setSelectionRange(t,t)}),0))}var Pce=/Android/i;function Fce(e,t,n,r,a){if(!t.hasAttribute("readonly")){var i=function(e){switch(e.keyCode){case Rce:return"Backspace";case Oce:return"Delete"}}(e);switch(i){case"Delete":case"Backspace":e.preventDefault();var o=function(e){if(e.selectionStart!==e.selectionEnd)return{start:e.selectionStart,end:e.selectionEnd}}(t);return o?(Mce(t,o),Lce(t,n,r,void 0,a)):Lce(t,n,r,i,a)}}}function Mce(e,t){var n=e.value;n=n.slice(0,t.start)+n.slice(t.end),e.value=n,Dce(e,t.start)}function Lce(e,t,n,r,a){var i=function(e,t,n){for(var r="",a=0,i=0;i<e.length;){var o=n(e[i],r);void 0!==o&&(r+=o,void 0!==t&&(t===i?a=r.length-1:t>i&&(a=r.length))),i++}return void 0===t&&(a=r.length),{value:r,caret:a}}(e.value,e.selectionStart,t),o=i.value,s=i.caret;if(r){var u=function(e,t,n){switch(n){case"Backspace":t>0&&(e=e.slice(0,t-1)+e.slice(t),t--);break;case"Delete":e=e.slice(0,t)+e.slice(t+1)}return{value:e,caret:t}}(o,s,r);o=u.value,s=u.caret}var c=Ace(o,s,n),l=c.text;s=c.caret,e.value=l,Dce(e,s),a(o)}var $ce=["value","parse","format","inputComponent","onChange","onKeyDown"];function jce(){return jce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jce.apply(this,arguments)}function zce(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Bce(e,t){var n=e.value,r=e.parse,a=e.format,i=e.inputComponent,o=e.onChange,s=e.onKeyDown,u=zce(e,$ce),c=(0,N.useRef)(),l=(0,N.useCallback)((function(e){c.current=e,t&&("function"===typeof t?t(e):t.current=e)}),[t]),d=(0,N.useCallback)((function(e){return function(e,t,n,r,a){Lce(t,n,r,void 0,a)}(0,c.current,r,a,o)}),[c,r,a,o]),f=(0,N.useCallback)((function(e){return s&&s(e),Fce(e,c.current,r,a,o)}),[c,r,a,o,s]);return N.createElement(i,jce({},u,{ref:l,value:a(Vce(n)?"":n).text,onKeyDown:f,onChange:d}))}(Bce=N.forwardRef(Bce)).propTypes={parse:tue.func.isRequired,format:tue.func.isRequired,inputComponent:tue.elementType.isRequired,type:tue.string.isRequired,value:tue.string,onChange:tue.func.isRequired,onKeyDown:tue.func,onCut:tue.func,onPaste:tue.func},Bce.defaultProps={inputComponent:"input",type:"text"};var Uce=Bce;function Vce(e){return void 0===e||null===e}function Wce(e,t){e=e.split("-"),t=t.split("-");for(var n=e[0].split("."),r=t[0].split("."),a=0;a<3;a++){var i=Number(n[a]),o=Number(r[a]);if(i>o)return 1;if(o>i)return-1;if(!isNaN(i)&&isNaN(o))return 1;if(isNaN(i)&&!isNaN(o))return-1}return e[1]&&t[1]?e[1]>t[1]?1:e[1]<t[1]?-1:0:!e[1]&&t[1]?1:e[1]&&!t[1]?-1:0}function Gce(e){return Gce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gce(e)}function Zce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qce(e,t,n){return t&&Hce(e.prototype,t),n&&Hce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Kce=" ext. ",Xce=/^\d+$/,Jce=function(){function e(t){Zce(this,e),function(e){if(!e)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!rle(e)||!rle(e.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(rle(e)?"an object of shape: { "+Object.keys(e).join(", ")+" }":"a "+ale(e)+": "+e,"."))}(t),this.metadata=t,sle.call(this,t)}return qce(e,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter((function(e){return"001"!==e}))}},{key:"getCountryMetadata",value:function(e){return this.metadata.countries[e]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(e){return void 0!==this.getCountryMetadata(e)}},{key:"hasCallingCode",value:function(e){if(this.getCountryCodesForCallingCode(e))return!0;if(this.nonGeographic()){if(this.nonGeographic()[e])return!0}else{var t=this.countryCallingCodes()[e];if(t&&1===t.length&&"001"===t[0])return!0}}},{key:"isNonGeographicCallingCode",value:function(e){return this.nonGeographic()?!!this.nonGeographic()[e]:!this.getCountryCodesForCallingCode(e)}},{key:"country",value:function(e){return this.selectNumberingPlan(e)}},{key:"selectNumberingPlan",value:function(e,t){if(e&&Xce.test(e)&&(t=e,e=null),e&&"001"!==e){if(!this.hasCountry(e))throw new Error("Unknown country: ".concat(e));this.numberingPlan=new Yce(this.getCountryMetadata(e),this)}else if(t){if(!this.hasCallingCode(t))throw new Error("Unknown calling code: ".concat(t));this.numberingPlan=new Yce(this.getNumberingPlanMetadata(t),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(e){var t=this.countryCallingCodes()[e];if(t){if(1===t.length&&3===t[0].length)return;return t}}},{key:"getCountryCodeForCallingCode",value:function(e){var t=this.getCountryCodesForCallingCode(e);if(t)return t[0]}},{key:"getNumberingPlanMetadata",value:function(e){var t=this.getCountryCodeForCallingCode(e);if(t)return this.getCountryMetadata(t);if(this.nonGeographic()){var n=this.nonGeographic()[e];if(n)return n}else{var r=this.countryCallingCodes()[e];if(r&&1===r.length&&"001"===r[0])return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(e){return this.numberingPlan.type(e)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(e){return this.selectNumberingPlan(e)}},{key:"hasSelectedNumberingPlan",value:function(){return void 0!==this.numberingPlan}}]),e}(),Yce=function(){function e(t,n){Zce(this,e),this.globalMetadataObject=n,this.metadata=t,sle.call(this,n.metadata)}return qce(e,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(e){return e[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var e=this,t=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return t.map((function(t){return new Qce(t,e)}))}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(e){return e[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return(!this.types()||0!==this.types().length)&&!!this.types()}},{key:"type",value:function(e){if(this.hasTypes()&&nle(this.types(),e))return new tle(nle(this.types(),e),this)}},{key:"ext",value:function(){return this.v1||this.v2?Kce:this.metadata[13]||Kce}}]),e}(),Qce=function(){function e(t,n){Zce(this,e),this._format=t,this.metadata=n}return qce(e,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!(!this.nationalPrefixFormattingRule()||ele.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),e}(),ele=/^\(?\$1\)?$/,tle=function(){function e(t,n){Zce(this,e),this.type=t,this.metadata=n}return qce(e,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),e}();function nle(e,t){switch(t){case"FIXED_LINE":return e[0];case"MOBILE":return e[1];case"TOLL_FREE":return e[2];case"PREMIUM_RATE":return e[3];case"PERSONAL_NUMBER":return e[4];case"VOICEMAIL":return e[5];case"UAN":return e[6];case"PAGER":return e[7];case"VOIP":return e[8];case"SHARED_COST":return e[9]}}var rle=function(e){return"object"===Gce(e)},ale=function(e){return Gce(e)};function ile(e,t){if((t=new Jce(t)).hasCountry(e))return t.country(e).countryCallingCode();throw new Error("Unknown country: ".concat(e))}function ole(e,t){return void 0!==t.countries[e]}function sle(e){var t=e.version;"number"===typeof t?(this.v1=1===t,this.v2=2===t,this.v3=3===t,this.v4=4===t):t?-1===Wce(t,"1.2.0")?this.v2=!0:-1===Wce(t,"1.7.35")?this.v3=!0:this.v4=!0:this.v1=!0}function ule(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return cle(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cle(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cle(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lle(e,t){return dle(e,void 0,t)}function dle(e,t,n){var r=n.type(t),a=r&&r.possibleLengths()||n.possibleLengths();if(!a)return"IS_POSSIBLE";if("FIXED_LINE_OR_MOBILE"===t){if(!n.type("FIXED_LINE"))return dle(e,"MOBILE",n);var i=n.type("MOBILE");i&&(a=function(e,t){for(var n,r=e.slice(),a=ule(t);!(n=a()).done;){var i=n.value;e.indexOf(i)<0&&r.push(i)}return r.sort((function(e,t){return e-t}))}(a,i.possibleLengths()))}else if(t&&!r)return"INVALID_LENGTH";var o=e.length,s=a[0];return s===o?"IS_POSSIBLE":s>o?"TOO_SHORT":a[a.length-1]<o?"TOO_LONG":a.indexOf(o,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function fle(e,t){return"IS_POSSIBLE"===lle(e,t)}function hle(e,t){return e=e||"",new RegExp("^(?:"+t+")$").test(e)}function ple(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return vle(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vle(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vle(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mle=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function gle(e,t,n){if(t=t||{},e.country){(n=new Jce(n)).selectNumberingPlan(e.country,e.countryCallingCode);var r=t.v2?e.nationalNumber:e.phone;if(hle(r,n.nationalNumberPattern())){if(yle(r,"FIXED_LINE",n))return n.type("MOBILE")&&""===n.type("MOBILE").pattern()?"FIXED_LINE_OR_MOBILE":n.type("MOBILE")?yle(r,"MOBILE",n)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE":"FIXED_LINE_OR_MOBILE";for(var a,i=ple(mle);!(a=i()).done;){var o=a.value;if(yle(r,o,n))return o}}}}function yle(e,t,n){return!(!(t=n.type(t))||!t.pattern())&&(!(t.possibleLengths()&&t.possibleLengths().indexOf(e.length)<0)&&hle(e,t.pattern()))}function ble(e,t,n){var r=new Jce(n).getCountryCodesForCallingCode(e);return r?r.filter((function(e){return function(e,t,n){var r=new Jce(n);if(r.selectNumberingPlan(t),r.numberingPlan.possibleLengths().indexOf(e.length)>=0)return!0;return!1}(t,e,n)})):[]}var xle="0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9",kle="".concat("-\u2010-\u2015\u2212\u30fc\uff0d").concat("\uff0f/").concat("\uff0e.").concat(" \xa0\xad\u200b\u2060\u3000").concat("()\uff08\uff09\uff3b\uff3d\\[\\]").concat("~\u2053\u223c\uff5e");function wle(e){return e.replace(new RegExp("[".concat(kle,"]+"),"g")," ").trim()}var Sle=/(\$\d)/;function Ile(e,t,n){var r=n.useInternationalFormat,a=n.withNationalPrefix,i=(n.carrierCode,n.metadata,e.replace(new RegExp(t.pattern()),r?t.internationalFormat():a&&t.nationalPrefixFormattingRule()?t.format().replace(Sle,t.nationalPrefixFormattingRule()):t.format()));return r?wle(i):i}var Nle=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function Tle(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Cle(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cle(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cle(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ele(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ele(Object(n),!0).forEach((function(t){Ale(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ele(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ale(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rle={formatExtension:function(e,t,n){return"".concat(e).concat(n.ext()).concat(t)}};function Ole(e,t,n,r){if(n=n?_le(_le({},Rle),n):Rle,r=new Jce(r),e.country&&"001"!==e.country){if(!r.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));r.country(e.country)}else{if(!e.countryCallingCode)return e.phone||"";r.selectNumberingPlan(e.countryCallingCode)}var a,i=r.countryCallingCode(),o=n.v2?e.nationalNumber:e.phone;switch(t){case"NATIONAL":return o?Ple(a=Dle(o,e.carrierCode,"NATIONAL",r,n),e.ext,r,n.formatExtension):"";case"INTERNATIONAL":return o?(a=Dle(o,null,"INTERNATIONAL",r,n),Ple(a="+".concat(i," ").concat(a),e.ext,r,n.formatExtension)):"+".concat(i);case"E.164":return"+".concat(i).concat(o);case"RFC3966":return function(e){var t=e.number,n=e.ext;if(!t)return"";if("+"!==t[0])throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(t).concat(n?";ext="+n:"")}({number:"+".concat(i).concat(o),ext:e.ext});case"IDD":if(!n.fromCountry)return;var s=function(e,t,n,r,a){if(ile(r,a.metadata)===n){var i=Dle(e,t,"NATIONAL",a);return"1"===n?n+" "+i:i}var o=function(e,t,n){var r=new Jce(n);return r.selectNumberingPlan(e,t),r.defaultIDDPrefix()?r.defaultIDDPrefix():Nle.test(r.IDDPrefix())?r.IDDPrefix():void 0}(r,void 0,a.metadata);if(o)return"".concat(o," ").concat(n," ").concat(Dle(e,null,"INTERNATIONAL",a))}(o,e.carrierCode,i,n.fromCountry,r);return Ple(s,e.ext,r,n.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(t,'"'))}}function Dle(e,t,n,r,a){var i=function(e,t){for(var n,r=Tle(e);!(n=r()).done;){var a=n.value;if(a.leadingDigitsPatterns().length>0){var i=a.leadingDigitsPatterns()[a.leadingDigitsPatterns().length-1];if(0!==t.search(i))continue}if(hle(t,a.pattern()))return a}}(r.formats(),e);return i?Ile(e,i,{useInternationalFormat:"INTERNATIONAL"===n,withNationalPrefix:!i.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!a||!1!==a.nationalPrefix,carrierCode:t,metadata:r}):e}function Ple(e,t,n,r){return t?r(e,t,n):e}function Fle(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mle(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fle(Object(n),!0).forEach((function(t){Lle(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fle(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lle(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var jle=function(){function e(t,n,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new TypeError("`country` or `countryCallingCode` not passed");if(!n)throw new TypeError("`nationalNumber` not passed");if(!r)throw new TypeError("`metadata` not passed");var a=function(e,t){var n,r,a=new Jce(t);i=e,/^[A-Z]{2}$/.test(i)?(n=e,a.selectNumberingPlan(n),r=a.countryCallingCode()):r=e;var i;return{country:n,countryCallingCode:r}}(t,r),i=a.country,o=a.countryCallingCode;this.country=i,this.countryCallingCode=o,this.nationalNumber=n,this.number="+"+this.countryCallingCode+this.nationalNumber,this.metadata=r}var t,n,r;return t=e,n=[{key:"setExt",value:function(e){this.ext=e}},{key:"getPossibleCountries",value:function(){return this.country?[this.country]:ble(this.countryCallingCode,this.nationalNumber,this.metadata)}},{key:"isPossible",value:function(){return function(e,t,n){if(void 0===t&&(t={}),n=new Jce(n),t.v2){if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");n.selectNumberingPlan(e.countryCallingCode)}else{if(!e.phone)return!1;if(e.country){if(!n.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));n.country(e.country)}else{if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");n.selectNumberingPlan(e.countryCallingCode)}}if(n.possibleLengths())return fle(e.phone||e.nationalNumber,n);if(e.countryCallingCode&&n.isNonGeographicCallingCode(e.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}(this,{v2:!0},this.metadata)}},{key:"isValid",value:function(){return function(e,t,n){return t=t||{},(n=new Jce(n)).selectNumberingPlan(e.country,e.countryCallingCode),n.hasTypes()?void 0!==gle(e,t,n.metadata):hle(t.v2?e.nationalNumber:e.phone,n.nationalNumberPattern())}(this,{v2:!0},this.metadata)}},{key:"isNonGeographic",value:function(){return new Jce(this.metadata).isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(e){return this.number===e.number&&this.ext===e.ext}},{key:"getType",value:function(){return gle(this,{v2:!0},this.metadata)}},{key:"format",value:function(e,t){return Ole(this,e,t?Mle(Mle({},t),{},{v2:!0}):{v2:!0},this.metadata)}},{key:"formatNational",value:function(e){return this.format("NATIONAL",e)}},{key:"formatInternational",value:function(e){return this.format("INTERNATIONAL",e)}},{key:"getURI",value:function(e){return this.format("RFC3966",e)}}],n&&$le(t.prototype,n),r&&$le(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function zle(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ble=function(){function e(t){var n=t.onCountryChange,r=t.onCallingCodeChange;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onCountryChange=n,this.onCallingCodeChange=r}var t,n,r;return t=e,n=[{key:"reset",value:function(e){var t=e.country,n=e.callingCode;this.international=!1,this.IDDPrefix=void 0,this.missingPlus=void 0,this.callingCode=void 0,this.digits="",this.resetNationalSignificantNumber(),this.initCountryAndCallingCode(t,n)}},{key:"resetNationalSignificantNumber",value:function(){this.nationalSignificantNumber=this.getNationalDigits(),this.nationalSignificantNumberMatchesInput=!0,this.nationalPrefix=void 0,this.carrierCode=void 0,this.complexPrefixBeforeNationalSignificantNumber=void 0}},{key:"update",value:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];this[r]=e[r]}}},{key:"initCountryAndCallingCode",value:function(e,t){this.setCountry(e),this.setCallingCode(t)}},{key:"setCountry",value:function(e){this.country=e,this.onCountryChange(e)}},{key:"setCallingCode",value:function(e){this.callingCode=e,this.onCallingCodeChange(e,this.country)}},{key:"startInternationalNumber",value:function(e,t){this.international=!0,this.initCountryAndCallingCode(e,t)}},{key:"appendDigits",value:function(e){this.digits+=e}},{key:"appendNationalSignificantNumberDigits",value:function(e){this.nationalSignificantNumber+=e}},{key:"getNationalDigits",value:function(){return this.international?this.digits.slice((this.IDDPrefix?this.IDDPrefix.length:0)+(this.callingCode?this.callingCode.length:0)):this.digits}},{key:"getDigitsWithoutInternationalPrefix",value:function(){return this.international&&this.IDDPrefix?this.digits.slice(this.IDDPrefix.length):this.digits}}],n&&zle(t.prototype,n),r&&zle(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ule(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Vle(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vle(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vle(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wle="x",Gle=new RegExp(Wle);function Zle(e,t){if(t<1)return"";for(var n="";t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}function Hle(e,t){return")"===e[t]&&t++,function(e){var t=[],n=0;for(;n<e.length;)"("===e[n]?t.push(n):")"===e[n]&&t.pop(),n++;var r=0,a="";t.push(e.length);for(var i=0,o=t;i<o.length;i++){var s=o[i];a+=e.slice(r,s),r=s+1}return a}(e.slice(0,t))}function qle(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Kle(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kle(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Kle(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xle={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","\uff10":"0","\uff11":"1","\uff12":"2","\uff13":"3","\uff14":"4","\uff15":"5","\uff16":"6","\uff17":"7","\uff18":"8","\uff19":"9","\u0660":"0","\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u06f0":"0","\u06f1":"1","\u06f2":"2","\u06f3":"3","\u06f4":"4","\u06f5":"5","\u06f6":"6","\u06f7":"7","\u06f8":"8","\u06f9":"9"};function Jle(e){return Xle[e]}function Yle(e){for(var t,n="",r=qle(e.split(""));!(t=r()).done;){var a=Jle(t.value);a&&(n+=a)}return n}function Qle(e,t,n){var r=n.metadata,a=n.shouldTryNationalPrefixFormattingRule,i=n.getSeparatorAfterNationalPrefix;if(new RegExp("^(?:".concat(t.pattern(),")$")).test(e.nationalSignificantNumber))return function(e,t,n){var r=n.metadata,a=n.shouldTryNationalPrefixFormattingRule,i=n.getSeparatorAfterNationalPrefix;e.nationalSignificantNumber,e.international,e.nationalPrefix,e.carrierCode;if(a(t)){var o=ede(e,t,{useNationalPrefixFormattingRule:!0,getSeparatorAfterNationalPrefix:i,metadata:r});if(o)return o}return ede(e,t,{useNationalPrefixFormattingRule:!1,getSeparatorAfterNationalPrefix:i,metadata:r})}(e,t,{metadata:r,shouldTryNationalPrefixFormattingRule:a,getSeparatorAfterNationalPrefix:i})}function ede(e,t,n){var r=n.metadata,a=n.useNationalPrefixFormattingRule,i=n.getSeparatorAfterNationalPrefix,o=Ile(e.nationalSignificantNumber,t,{carrierCode:e.carrierCode,useInternationalFormat:e.international,withNationalPrefix:a,metadata:r});if(a||(e.nationalPrefix?o=e.nationalPrefix+i(t)+o:e.complexPrefixBeforeNationalSignificantNumber&&(o=e.complexPrefixBeforeNationalSignificantNumber+" "+o)),function(e,t){return Yle(e)===t.getNationalDigits()}(o,e))return o}function tde(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nde=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"parse",value:function(e){if(this.context=[{or:!0,instructions:[]}],this.parsePattern(e),1!==this.context.length)throw new Error("Non-finalized contexts left when pattern parse ended");var t=this.context[0],n=t.branches,r=t.instructions;if(n)return{op:"|",args:n.concat([ode(r)])};if(0===r.length)throw new Error("Pattern is required");return 1===r.length?r[0]:r}},{key:"startContext",value:function(e){this.context.push(e)}},{key:"endContext",value:function(){this.context.pop()}},{key:"getContext",value:function(){return this.context[this.context.length-1]}},{key:"parsePattern",value:function(e){if(!e)throw new Error("Pattern is required");var t=e.match(ide);if(t){var n=t[1],r=e.slice(0,t.index),a=e.slice(t.index+n.length);switch(n){case"(?:":r&&this.parsePattern(r),this.startContext({or:!0,instructions:[],branches:[]});break;case")":if(!this.getContext().or)throw new Error('")" operator must be preceded by "(?:" operator');if(r&&this.parsePattern(r),0===this.getContext().instructions.length)throw new Error('No instructions found after "|" operator in an "or" group');var i=this.getContext().branches;i.push(ode(this.getContext().instructions)),this.endContext(),this.getContext().instructions.push({op:"|",args:i});break;case"|":if(!this.getContext().or)throw new Error('"|" operator can only be used inside "or" groups');if(r&&this.parsePattern(r),!this.getContext().branches){if(1!==this.context.length)throw new Error('"branches" not found in an "or" group context');this.getContext().branches=[]}this.getContext().branches.push(ode(this.getContext().instructions)),this.getContext().instructions=[];break;case"[":r&&this.parsePattern(r),this.startContext({oneOfSet:!0});break;case"]":if(!this.getContext().oneOfSet)throw new Error('"]" operator must be preceded by "[" operator');this.endContext(),this.getContext().instructions.push({op:"[]",args:rde(r)});break;default:throw new Error("Unknown operator: ".concat(n))}a&&this.parsePattern(a)}else{if(ade.test(e))throw new Error("Illegal characters found in a pattern: ".concat(e));this.getContext().instructions=this.getContext().instructions.concat(e.split(""))}}}])&&tde(t.prototype,n),r&&tde(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rde(e){for(var t=[],n=0;n<e.length;){if("-"===e[n]){if(0===n||n===e.length-1)throw new Error("Couldn't parse a one-of set pattern: ".concat(e));for(var r=e[n-1].charCodeAt(0)+1,a=e[n+1].charCodeAt(0)-1,i=r;i<=a;)t.push(String.fromCharCode(i)),i++}else t.push(e[n]);n++}return t}var ade=/[\(\)\[\]\?\:\|]/,ide=new RegExp("(\\||\\(\\?\\:|\\)|\\[|\\])");function ode(e){return 1===e.length?e[0]:e}function sde(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ude(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ude(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ude(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cde(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var lde=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.matchTree=(new nde).parse(t)}var t,n,r;return t=e,n=[{key:"match",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.allowOverflow;if(!e)throw new Error("String is required");var r=dde(e.split(""),this.matchTree,!0);if(r&&r.match&&delete r.matchedChars,!r||!r.overflow||n)return r}}],n&&cde(t.prototype,n),r&&cde(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function dde(e,t,n){if("string"===typeof t){var r=e.join("");return 0===t.indexOf(r)?e.length===t.length?{match:!0,matchedChars:e}:{partialMatch:!0}:0===r.indexOf(t)?n&&e.length>t.length?{overflow:!0}:{match:!0,matchedChars:e.slice(0,t.length)}:void 0}if(Array.isArray(t)){for(var a=e.slice(),i=0;i<t.length;){var o=dde(a,t[i],n&&i===t.length-1);if(!o)return;if(o.overflow)return o;if(!o.match){if(o.partialMatch)return{partialMatch:!0};throw new Error("Unsupported match result:\n".concat(JSON.stringify(o,null,2)))}if(0===(a=a.slice(o.matchedChars.length)).length)return i===t.length-1?{match:!0,matchedChars:e}:{partialMatch:!0};i++}return n?{overflow:!0}:{match:!0,matchedChars:e.slice(0,e.length-a.length)}}switch(t.op){case"|":for(var s,u,c=sde(t.args);!(u=c()).done;){var l=dde(e,u.value,n);if(l){if(l.overflow)return l;if(l.match)return{match:!0,matchedChars:l.matchedChars};if(!l.partialMatch)throw new Error("Unsupported match result:\n".concat(JSON.stringify(l,null,2)));s=!0}}return s?{partialMatch:!0}:void 0;case"[]":for(var d,f=sde(t.args);!(d=f()).done;){var h=d.value;if(e[0]===h)return 1===e.length?{match:!0,matchedChars:e}:n?{overflow:!0}:{match:!0,matchedChars:[h]}}return;default:throw new Error("Unsupported instruction tree: ".concat(t))}}function fde(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return hde(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hde(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hde(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pde(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var vde=Zle("9",15),mde=/[- ]/,gde=function(){return/\[([^\[\]])*\]/g},yde=function(){return/\d(?=[^,}][^,}])/g},bde=new RegExp("["+kle+"]*\\$1["+kle+"]*(\\$\\d["+kle+"]*)*$"),xde=function(){function e(t){t.state;var n=t.metadata;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metadata=n,this.resetFormat()}var t,n,r;return t=e,n=[{key:"resetFormat",value:function(){this.chosenFormat=void 0,this.template=void 0,this.nationalNumberTemplate=void 0,this.populatedNationalNumberTemplate=void 0,this.populatedNationalNumberTemplatePosition=-1}},{key:"reset",value:function(e,t){this.resetFormat(),e?(this.isNANP="1"===e.callingCode(),this.matchingFormats=e.formats(),t.nationalSignificantNumber&&this.narrowDownMatchingFormats(t)):(this.isNANP=void 0,this.matchingFormats=[])}},{key:"format",value:function(e,t){var n=this;if(function(e,t){return"IS_POSSIBLE"===lle(e,t)}(t.nationalSignificantNumber,this.metadata))for(var r,a=fde(this.matchingFormats);!(r=a()).done;){var i=r.value,o=Qle(t,i,{metadata:this.metadata,shouldTryNationalPrefixFormattingRule:function(e){return n.shouldTryNationalPrefixFormattingRule(e,{international:t.international,nationalPrefix:t.nationalPrefix})},getSeparatorAfterNationalPrefix:function(e){return n.getSeparatorAfterNationalPrefix(e)}});if(o)return this.resetFormat(),this.chosenFormat=i,this.setNationalNumberTemplate(o.replace(/\d/g,Wle),t),this.populatedNationalNumberTemplate=o,this.populatedNationalNumberTemplatePosition=this.template.lastIndexOf(Wle),o}return this.formatNationalNumberWithNextDigits(e,t)}},{key:"formatNationalNumberWithNextDigits",value:function(e,t){var n=this.chosenFormat,r=this.chooseFormat(t);if(r)return r===n?this.formatNextNationalNumberDigits(e):this.formatNextNationalNumberDigits(t.getNationalDigits())}},{key:"narrowDownMatchingFormats",value:function(e){var t=this,n=e.nationalSignificantNumber,r=e.nationalPrefix,a=e.international,i=n,o=i.length-3;o<0&&(o=0),this.matchingFormats=this.matchingFormats.filter((function(e){return t.formatSuits(e,a,r)&&t.formatMatches(e,i,o)})),this.chosenFormat&&-1===this.matchingFormats.indexOf(this.chosenFormat)&&this.resetFormat()}},{key:"formatSuits",value:function(e,t,n){return!(n&&!e.usesNationalPrefix()&&!e.nationalPrefixIsOptionalWhenFormattingInNationalFormat())&&!(!t&&!n&&e.nationalPrefixIsMandatoryWhenFormattingInNationalFormat())}},{key:"formatMatches",value:function(e,t,n){var r=e.leadingDigitsPatterns().length;if(0===r)return!0;n=Math.min(n,r-1);var a=e.leadingDigitsPatterns()[n];if(t.length<3)try{return void 0!==new lde(a).match(t,{allowOverflow:!0})}catch(i){return console.error(i),!0}return new RegExp("^(".concat(a,")")).test(t)}},{key:"getFormatFormat",value:function(e,t){return t?e.internationalFormat():e.format()}},{key:"chooseFormat",value:function(e){for(var t,n=this,r=function(){var r=t.value;return n.chosenFormat===r?"break":bde.test(n.getFormatFormat(r,e.international))?n.createTemplateForFormat(r,e)?(n.chosenFormat=r,"break"):(n.matchingFormats=n.matchingFormats.filter((function(e){return e!==r})),"continue"):"continue"},a=fde(this.matchingFormats.slice());!(t=a()).done;){var i=r();if("break"===i)break}return this.chosenFormat||this.resetFormat(),this.chosenFormat}},{key:"createTemplateForFormat",value:function(e,t){if(!(e.pattern().indexOf("|")>=0)){var n=this.getTemplateForFormat(e,t);return n?(this.setNationalNumberTemplate(n,t),!0):void 0}}},{key:"getSeparatorAfterNationalPrefix",value:function(e){return this.isNANP||e&&e.nationalPrefixFormattingRule()&&mde.test(e.nationalPrefixFormattingRule())?" ":""}},{key:"getInternationalPrefixBeforeCountryCallingCode",value:function(e,t){var n=e.IDDPrefix,r=e.missingPlus;return n?t&&!1===t.spacing?n:n+" ":r?"":"+"}},{key:"getTemplate",value:function(e){if(this.template){for(var t=-1,n=0,r=e.international?this.getInternationalPrefixBeforeCountryCallingCode(e,{spacing:!1}):"";n<r.length+e.getDigitsWithoutInternationalPrefix().length;)t=this.template.indexOf(Wle,t+1),n++;return Hle(this.template,t+1)}}},{key:"setNationalNumberTemplate",value:function(e,t){this.nationalNumberTemplate=e,this.populatedNationalNumberTemplate=e,this.populatedNationalNumberTemplatePosition=-1,t.international?this.template=this.getInternationalPrefixBeforeCountryCallingCode(t).replace(/[\d\+]/g,Wle)+Zle(Wle,t.callingCode.length)+" "+e:this.template=e}},{key:"getTemplateForFormat",value:function(e,t){var n=t.nationalSignificantNumber,r=t.international,a=t.nationalPrefix,i=t.complexPrefixBeforeNationalSignificantNumber,o=e.pattern();o=o.replace(gde(),"\\d").replace(yde(),"\\d");var s=vde.match(o)[0];if(!(n.length>s.length)){var u=new RegExp("^"+o+"$"),c=n.replace(/\d/g,"9");u.test(c)&&(s=c);var l,d=this.getFormatFormat(e,r);if(this.shouldTryNationalPrefixFormattingRule(e,{international:r,nationalPrefix:a})){var f=d.replace(Sle,e.nationalPrefixFormattingRule());if(Yle(e.nationalPrefixFormattingRule())===(a||"")+Yle("$1")&&(d=f,l=!0,a))for(var h=a.length;h>0;)d=d.replace(/\d/,Wle),h--}var p=s.replace(new RegExp(o),d).replace(new RegExp("9","g"),Wle);return l||(i?p=Zle(Wle,i.length)+" "+p:a&&(p=Zle(Wle,a.length)+this.getSeparatorAfterNationalPrefix(e)+p)),r&&(p=wle(p)),p}}},{key:"formatNextNationalNumberDigits",value:function(e){var t=function(e,t,n){for(var r,a=Ule(n.split(""));!(r=a()).done;){var i=r.value;if(e.slice(t+1).search(Gle)<0)return;t=e.search(Gle),e=e.replace(Gle,i)}return[e,t]}(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition,e);if(t)return this.populatedNationalNumberTemplate=t[0],this.populatedNationalNumberTemplatePosition=t[1],Hle(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition+1);this.resetFormat()}},{key:"shouldTryNationalPrefixFormattingRule",value:function(e,t){var n=t.international,r=t.nationalPrefix;if(e.nationalPrefixFormattingRule()){var a=e.usesNationalPrefix();if(a&&r||!a&&!n)return!0}}}],n&&pde(t.prototype,n),r&&pde(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),kde=new RegExp("([0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9])");function wde(e,t,n,r){if(t){var a=new Jce(r);a.selectNumberingPlan(t,n);var i=new RegExp(a.IDDPrefix());if(0===e.search(i)){var o=(e=e.slice(e.match(i)[0].length)).match(kde);if(!(o&&null!=o[1]&&o[1].length>0&&"0"===o[1]))return e}}}function Sde(e,t){if(e&&t.numberingPlan.nationalPrefixForParsing()){var n=new RegExp("^(?:"+t.numberingPlan.nationalPrefixForParsing()+")"),r=n.exec(e);if(r){var a,i,o,s=r.length-1,u=s>0&&r[s];if(t.nationalPrefixTransformRule()&&u)a=e.replace(n,t.nationalPrefixTransformRule()),s>1&&(i=r[1]);else{var c=r[0];a=e.slice(c.length),u&&(i=r[1])}if(u){var l=e.indexOf(r[1]);e.slice(0,l)===t.numberingPlan.nationalPrefix()&&(o=t.numberingPlan.nationalPrefix())}else o=r[0];return{nationalNumber:a,nationalPrefix:o,carrierCode:i}}}return{nationalNumber:e}}function Ide(e,t){var n=Sde(e,t),r=n.carrierCode,a=n.nationalNumber;if(a!==e){if(!function(e,t,n){if(hle(e,n.nationalNumberPattern())&&!hle(t,n.nationalNumberPattern()))return!1;return!0}(e,a,t))return{nationalNumber:e};if(t.possibleLengths()&&!function(e,t){switch(lle(e,t)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}(a,t))return{nationalNumber:e}}return{nationalNumber:a,carrierCode:r}}function Nde(e,t,n,r){var a=t?ile(t,r):n;if(0===e.indexOf(a)){(r=new Jce(r)).selectNumberingPlan(t,n);var i=e.slice(a.length),o=Ide(i,r).nationalNumber,s=Ide(e,r).nationalNumber;if(!hle(s,r.nationalNumberPattern())&&hle(o,r.nationalNumberPattern())||"TOO_LONG"===lle(s,r))return{countryCallingCode:a,number:i}}return{number:e}}function Tde(e,t,n,r){if(!e)return{};var a;if("+"!==e[0]){var i=wde(e,t,n,r);if(!i||i===e){if(t||n){var o=Nde(e,t,n,r),s=o.countryCallingCode,u=o.number;if(s)return{countryCallingCodeSource:"FROM_NUMBER_WITHOUT_PLUS_SIGN",countryCallingCode:s,number:u}}return{number:e}}a=!0,e="+"+i}if("0"===e[1])return{};r=new Jce(r);for(var c=2;c-1<=3&&c<=e.length;){var l=e.slice(1,c);if(r.hasCallingCode(l))return r.selectNumberingPlan(l),{countryCallingCodeSource:a?"FROM_NUMBER_WITH_IDD":"FROM_NUMBER_WITH_PLUS_SIGN",countryCallingCode:l,number:e.slice(c)};c++}return{}}function Cde(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(Rme){s=!0,a=Rme}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ede(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ede(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ede(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ade=new RegExp("^"+("["+kle+"0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]+")+"$","i"),Rde="(?:[+\uff0b]["+kle+"0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]*|["+kle+"0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]+)",Ode=new RegExp("[^"+kle+"0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]+.*$"),Dde=/[^\d\[\]]/,Pde=function(){function e(t){var n=t.defaultCountry,r=t.defaultCallingCode,a=t.metadata,i=t.onNationalSignificantNumberChange;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultCountry=n,this.defaultCallingCode=r,this.metadata=a,this.onNationalSignificantNumberChange=i}var t,n,r;return t=e,(n=[{key:"input",value:function(e,t){var n,r=function(e){var t=Cde(function(e){var t=function(e){var t,n=e.search(Rde);if(!(n<0))return"+"===(e=e.slice(n))[0]&&(t=!0,e=e.slice("+".length)),e=e.replace(Ode,""),t&&(e="+"+e),e}(e)||"";return"+"===t[0]?[t.slice("+".length),!0]:[t]}(e),2),n=t[0],r=t[1];return Ade.test(n)||(n=""),[n,r]}(e),a=Cde(r,2),i=a[0],o=a[1],s=Yle(i);return o&&(t.digits||(t.startInternationalNumber(),s||(n=!0))),s&&this.inputDigits(s,t),{digits:s,justLeadingPlus:n}}},{key:"inputDigits",value:function(e,t){var n=t.digits,r=n.length<3&&n.length+e.length>=3;if(t.appendDigits(e),r&&this.extractIddPrefix(t),this.isWaitingForCountryCallingCode(t)){if(!this.extractCountryCallingCode(t))return}else t.appendNationalSignificantNumberDigits(e);t.international||this.hasExtractedNationalSignificantNumber||this.extractNationalSignificantNumber(t.getNationalDigits(),(function(e){return t.update(e)}))}},{key:"isWaitingForCountryCallingCode",value:function(e){var t=e.international,n=e.callingCode;return t&&!n}},{key:"extractCountryCallingCode",value:function(e){var t=Tde("+"+e.getDigitsWithoutInternationalPrefix(),this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),n=t.countryCallingCode,r=t.number;if(n)return e.setCallingCode(n),e.update({nationalSignificantNumber:r}),!0}},{key:"reset",value:function(e){if(e){this.hasSelectedNumberingPlan=!0;var t=e._nationalPrefixForParsing();this.couldPossiblyExtractAnotherNationalSignificantNumber=t&&Dde.test(t)}else this.hasSelectedNumberingPlan=void 0,this.couldPossiblyExtractAnotherNationalSignificantNumber=void 0}},{key:"extractNationalSignificantNumber",value:function(e,t){if(this.hasSelectedNumberingPlan){var n=Sde(e,this.metadata),r=n.nationalPrefix,a=n.nationalNumber,i=n.carrierCode;if(a!==e)return this.onExtractedNationalNumber(r,i,a,e,t),!0}}},{key:"extractAnotherNationalSignificantNumber",value:function(e,t,n){if(!this.hasExtractedNationalSignificantNumber)return this.extractNationalSignificantNumber(e,n);if(this.couldPossiblyExtractAnotherNationalSignificantNumber){var r=Sde(e,this.metadata),a=r.nationalPrefix,i=r.nationalNumber,o=r.carrierCode;if(i!==t)return this.onExtractedNationalNumber(a,o,i,e,n),!0}}},{key:"onExtractedNationalNumber",value:function(e,t,n,r,a){var i,o,s=r.lastIndexOf(n);if(s>=0&&s===r.length-n.length){o=!0;var u=r.slice(0,s);u!==e&&(i=u)}a({nationalPrefix:e,carrierCode:t,nationalSignificantNumber:n,nationalSignificantNumberMatchesInput:o,complexPrefixBeforeNationalSignificantNumber:i}),this.hasExtractedNationalSignificantNumber=!0,this.onNationalSignificantNumberChange()}},{key:"reExtractNationalSignificantNumber",value:function(e){return!!this.extractAnotherNationalSignificantNumber(e.getNationalDigits(),e.nationalSignificantNumber,(function(t){return e.update(t)}))||(this.extractIddPrefix(e)||this.fixMissingPlus(e)?(this.extractCallingCodeAndNationalSignificantNumber(e),!0):void 0)}},{key:"extractIddPrefix",value:function(e){var t=e.international,n=e.IDDPrefix,r=e.digits;if(e.nationalSignificantNumber,!t&&!n){var a=wde(r,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata);return void 0!==a&&a!==r?(e.update({IDDPrefix:r.slice(0,r.length-a.length)}),this.startInternationalNumber(e,{country:void 0,callingCode:void 0}),!0):void 0}}},{key:"fixMissingPlus",value:function(e){if(!e.international){var t=Nde(e.digits,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),n=t.countryCallingCode;if(t.number,n)return e.update({missingPlus:!0}),this.startInternationalNumber(e,{country:e.country,callingCode:n}),!0}}},{key:"startInternationalNumber",value:function(e,t){var n=t.country,r=t.callingCode;e.startInternationalNumber(n,r),e.nationalSignificantNumber&&(e.resetNationalSignificantNumber(),this.onNationalSignificantNumberChange(),this.hasExtractedNationalSignificantNumber=void 0)}},{key:"extractCallingCodeAndNationalSignificantNumber",value:function(e){this.extractCountryCallingCode(e)&&this.extractNationalSignificantNumber(e.getNationalDigits(),(function(t){return e.update(t)}))}}])&&_de(t.prototype,n),r&&_de(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Fde(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Mde(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mde(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Mde(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lde(e,t,n){var r=n.getCountryCodesForCallingCode(e);if(r)return 1===r.length?r[0]:function(e,t,n){n=new Jce(n);for(var r,a=Fde(e);!(r=a()).done;){var i=r.value;if(n.country(i),n.leadingDigits()){if(t&&0===t.search(n.leadingDigits()))return i}else if(gle({phone:t,country:i},void 0,n.metadata))return i}}(r,t,n.metadata)}function $de(e){return $de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$de(e)}function jde(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(Rme){s=!0,a=Rme}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return zde(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zde(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zde(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bde(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ude=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metadata=new Jce(n);var r=jde(this.getCountryAndCallingCode(t),2),a=r[0],i=r[1];this.defaultCountry=a,this.defaultCallingCode=i,this.reset()}var t,n,r;return t=e,(n=[{key:"getCountryAndCallingCode",value:function(e){var t,n;return e&&("object"===$de(e)?(t=e.defaultCountry,n=e.defaultCallingCode):t=e),t&&!this.metadata.hasCountry(t)&&(t=void 0),[t,n]}},{key:"input",value:function(e){var t=this.parser.input(e,this.state),n=t.digits;if(t.justLeadingPlus)this.formattedOutput="+";else if(n){var r;if(this.determineTheCountryIfNeeded(),this.state.nationalSignificantNumber&&this.formatter.narrowDownMatchingFormats(this.state),this.metadata.hasSelectedNumberingPlan()&&(r=this.formatter.format(n,this.state)),void 0===r&&this.parser.reExtractNationalSignificantNumber(this.state)){this.determineTheCountryIfNeeded();var a=this.state.getNationalDigits();a&&(r=this.formatter.format(a,this.state))}this.formattedOutput=r?this.getFullNumber(r):this.getNonFormattedNumber()}return this.formattedOutput}},{key:"reset",value:function(){var e=this;return this.state=new Ble({onCountryChange:function(t){e.country=t},onCallingCodeChange:function(t,n){e.metadata.selectNumberingPlan(n,t),e.formatter.reset(e.metadata.numberingPlan,e.state),e.parser.reset(e.metadata.numberingPlan)}}),this.formatter=new xde({state:this.state,metadata:this.metadata}),this.parser=new Pde({defaultCountry:this.defaultCountry,defaultCallingCode:this.defaultCallingCode,metadata:this.metadata,state:this.state,onNationalSignificantNumberChange:function(){e.determineTheCountryIfNeeded(),e.formatter.reset(e.metadata.numberingPlan,e.state)}}),this.state.reset({country:this.defaultCountry,callingCode:this.defaultCallingCode}),this.formattedOutput="",this}},{key:"isInternational",value:function(){return this.state.international}},{key:"getCallingCode",value:function(){if(this.isInternational())return this.state.callingCode}},{key:"getCountryCallingCode",value:function(){return this.getCallingCode()}},{key:"getCountry",value:function(){if(this.state.digits)return this._getCountry()}},{key:"_getCountry",value:function(){var e=this.state.country;return e}},{key:"determineTheCountryIfNeeded",value:function(){this.state.country&&!this.isCountryCallingCodeAmbiguous()||this.determineTheCountry()}},{key:"getFullNumber",value:function(e){var t=this;if(this.isInternational()){var n=function(e){return t.formatter.getInternationalPrefixBeforeCountryCallingCode(t.state,{spacing:!!e})+e},r=this.state.callingCode;return n(r?e?"".concat(r," ").concat(e):r:"".concat(this.state.getDigitsWithoutInternationalPrefix()))}return e}},{key:"getNonFormattedNationalNumberWithPrefix",value:function(){var e=this.state,t=e.nationalSignificantNumber,n=e.complexPrefixBeforeNationalSignificantNumber,r=e.nationalPrefix,a=t,i=n||r;return i&&(a=i+a),a}},{key:"getNonFormattedNumber",value:function(){var e=this.state.nationalSignificantNumberMatchesInput;return this.getFullNumber(e?this.getNonFormattedNationalNumberWithPrefix():this.state.getNationalDigits())}},{key:"getNonFormattedTemplate",value:function(){var e=this.getNonFormattedNumber();if(e)return e.replace(/[\+\d]/g,Wle)}},{key:"isCountryCallingCodeAmbiguous",value:function(){var e=this.state.callingCode,t=this.metadata.getCountryCodesForCallingCode(e);return t&&t.length>1}},{key:"determineTheCountry",value:function(){this.state.setCountry(Lde(this.isInternational()?this.state.callingCode:this.defaultCallingCode,this.state.nationalSignificantNumber,this.metadata))}},{key:"getNumberValue",value:function(){var e=this.state,t=e.digits,n=e.callingCode,r=e.country,a=e.nationalSignificantNumber;if(t)return this.isInternational()?n?"+"+n+a:"+"+t:r||n?"+"+(r?this.metadata.countryCallingCode():n)+a:void 0}},{key:"getNumber",value:function(){var e=this.state,t=e.nationalSignificantNumber,n=e.carrierCode,r=e.callingCode,a=this._getCountry();if(t&&(a||r)){var i=new jle(a||r,t,this.metadata.metadata);return n&&(i.carrierCode=n),i}}},{key:"isPossible",value:function(){var e=this.getNumber();return!!e&&e.isPossible()}},{key:"isValid",value:function(){var e=this.getNumber();return!!e&&e.isValid()}},{key:"getNationalNumber",value:function(){return this.state.nationalSignificantNumber}},{key:"getChars",value:function(){return(this.state.international?"+":"")+this.state.digits}},{key:"getTemplate",value:function(){return this.formatter.getTemplate(this.state)||this.getNonFormattedTemplate()||""}}])&&Bde(t.prototype,n),r&&Bde(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Vde(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Wde(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wde(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wde(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gde(e){for(var t,n="",r=Vde(e.split(""));!(t=r()).done;){n+=Zde(t.value,n)||""}return n}function Zde(e,t){if("+"===e){if(t)return;return"+"}return Jle(e)}function Hde(e){var t=e.country,n=e.international,r=e.withCountryCallingCode,a=e.metadata;return t&&n&&!r?"+".concat(ile(t,a)):""}function qde(e,t){return t&&" "===(e=e.slice(t.length))[0]&&(e=e.slice(1)),e}var Kde=["country","international","withCountryCallingCode","metadata"];function Xde(){return Xde=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xde.apply(this,arguments)}function Jde(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Yde=function(e){function t(e,t){var n=e.country,r=e.international,a=e.withCountryCallingCode,i=e.metadata,o=Jde(e,Kde),s=(0,N.useCallback)((function(e){var t=new Ude(n,i),o=Hde({country:n,international:r,withCountryCallingCode:a,metadata:i}),s=t.input(o+e),u=t.getTemplate();return o&&(s=qde(s,o),u&&(u=qde(u,o))),{text:s,template:u}}),[n,i]);return N.createElement(Uce,Xde({},o,{ref:t,parse:Zde,format:s}))}return(t=N.forwardRef(t)).propTypes={value:tue.string.isRequired,onChange:tue.func.isRequired,country:tue.string,international:tue.bool,withCountryCallingCode:tue.bool,metadata:tue.object.isRequired},t.defaultProps={metadata:e},t}();var Qde=["value","onChange","country","international","withCountryCallingCode","metadata","inputComponent"];function efe(){return efe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},efe.apply(this,arguments)}function tfe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var nfe=function(e){function t(e,t){var n=e.value,r=e.onChange,a=e.country,i=e.international,o=e.withCountryCallingCode,s=e.metadata,u=e.inputComponent,c=tfe(e,Qde),l=Hde({country:a,international:i,withCountryCallingCode:o,metadata:s}),d=(0,N.useCallback)((function(e){var t=Gde(e.target.value);t===n&&(0===rfe(l,t,a,s).indexOf(e.target.value)&&(t=t.slice(0,-1)));r(t)}),[l,n,r,a,s]);return N.createElement(u,efe({},c,{ref:t,value:rfe(l,n,a,s),onChange:d}))}return(t=N.forwardRef(t)).propTypes={value:tue.string.isRequired,onChange:tue.func.isRequired,country:tue.string,international:tue.bool,withCountryCallingCode:tue.bool,metadata:tue.object.isRequired,inputComponent:tue.elementType.isRequired},t.defaultProps={metadata:e,inputComponent:"input"},t}();function rfe(e,t,n,r){return qde(function(e,t,n){return n||(n=t,t=void 0),new Ude(t,n).input(e)}(e+t,n,r),e)}function afe(e){return String.fromCodePoint(127397+e.toUpperCase().charCodeAt(0))}var ife=["value","onChange","options"],ofe=["value","options","className","iconComponent","getIconAspectRatio","arrowComponent","unicodeFlags"];function sfe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ufe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ufe(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ufe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cfe(){return cfe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cfe.apply(this,arguments)}function lfe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function dfe(e){var t=e.value,n=e.onChange,r=e.options,a=lfe(e,ife),i=(0,N.useCallback)((function(e){var t=e.target.value;n("ZZ"===t?void 0:t)}),[n]);(0,N.useMemo)((function(){return pfe(r,t)}),[r,t]);return N.createElement("select",cfe({},a,{value:t||"ZZ",onChange:i}),r.map((function(e){var t=e.value,n=e.label,r=e.divider;return N.createElement("option",{key:r?"|":t||"ZZ",value:r?"|":t||"ZZ",disabled:!!r,style:r?ffe:void 0},n)})))}dfe.propTypes={value:tue.string,onChange:tue.func.isRequired,options:tue.arrayOf(tue.shape({value:tue.string,label:tue.string,divider:tue.bool})).isRequired};var ffe={fontSize:"1px",backgroundColor:"currentColor",color:"inherit"};function hfe(e){var t,n=e.value,r=e.options,a=e.className,i=e.iconComponent,o=(e.getIconAspectRatio,e.arrowComponent),s=e.unicodeFlags,u=lfe(e,ofe),c=(0,N.useMemo)((function(){return pfe(r,n)}),[r,n]);return N.createElement("div",{className:"PhoneInputCountry"},N.createElement(dfe,cfe({},u,{value:n,options:r,className:wce("PhoneInputCountrySelect",a)})),s&&n&&N.createElement("div",{className:"PhoneInputCountryIconUnicode"},afe((t=n)[0])+afe(t[1])),!(s&&n)&&N.createElement(i,{"aria-hidden":!0,country:n,label:c&&c.label,aspectRatio:s?1:void 0}),N.createElement(o,null))}function pfe(e,t){for(var n,r=sfe(e);!(n=r()).done;){var a=n.value;if(!a.divider&&a.value===t)return a}}hfe.propTypes={iconComponent:tue.elementType,arrowComponent:tue.elementType.isRequired,unicodeFlags:tue.bool},hfe.defaultProps={arrowComponent:function(){return N.createElement("div",{className:"PhoneInputCountrySelectArrow"})}};var vfe=["country","countryName","flags","flagUrl"];function mfe(){return mfe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mfe.apply(this,arguments)}function gfe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function yfe(e){var t=e.country,n=e.countryName,r=e.flags,a=e.flagUrl,i=gfe(e,vfe);return r&&r[t]?r[t]({title:n}):N.createElement("img",mfe({},i,{alt:n,role:n?void 0:"presentation",src:a.replace("{XX}",t).replace("{xx}",t.toLowerCase())}))}yfe.propTypes={country:tue.string.isRequired,countryName:tue.string.isRequired,flags:tue.objectOf(tue.elementType),flagUrl:tue.string.isRequired};var bfe=["aspectRatio"],xfe=["title"],kfe=["title"];function wfe(){return wfe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wfe.apply(this,arguments)}function Sfe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ife(e){var t=e.aspectRatio,n=Sfe(e,bfe);return 1===t?N.createElement(Tfe,n):N.createElement(Nfe,n)}function Nfe(e){var t=e.title,n=Sfe(e,xfe);return N.createElement("svg",wfe({},n,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 75 50"}),N.createElement("title",null,t),N.createElement("g",{className:"PhoneInputInternationalIconGlobe",stroke:"currentColor",fill:"none",strokeWidth:"2",strokeMiterlimit:"10"},N.createElement("path",{strokeLinecap:"round",d:"M47.2,36.1C48.1,36,49,36,50,36c7.4,0,14,1.7,18.5,4.3"}),N.createElement("path",{d:"M68.6,9.6C64.2,12.3,57.5,14,50,14c-7.4,0-14-1.7-18.5-4.3"}),N.createElement("line",{x1:"26",y1:"25",x2:"74",y2:"25"}),N.createElement("line",{x1:"50",y1:"1",x2:"50",y2:"49"}),N.createElement("path",{strokeLinecap:"round",d:"M46.3,48.7c1.2,0.2,2.5,0.3,3.7,0.3c13.3,0,24-10.7,24-24S63.3,1,50,1S26,11.7,26,25c0,2,0.3,3.9,0.7,5.8"}),N.createElement("path",{strokeLinecap:"round",d:"M46.8,48.2c1,0.6,2.1,0.8,3.2,0.8c6.6,0,12-10.7,12-24S56.6,1,50,1S38,11.7,38,25c0,1.4,0.1,2.7,0.2,4c0,0.1,0,0.2,0,0.2"})),N.createElement("path",{className:"PhoneInputInternationalIconPhone",stroke:"none",fill:"currentColor",d:"M12.4,17.9c2.9-2.9,5.4-4.8,0.3-11.2S4.1,5.2,1.3,8.1C-2,11.4,1.1,23.5,13.1,35.6s24.3,15.2,27.5,11.9c2.8-2.8,7.8-6.3,1.4-11.5s-8.3-2.6-11.2,0.3c-2,2-7.2-2.2-11.7-6.7S10.4,19.9,12.4,17.9z"}))}function Tfe(e){var t=e.title,n=Sfe(e,kfe);return N.createElement("svg",wfe({},n,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50"}),N.createElement("title",null,t),N.createElement("g",{className:"PhoneInputInternationalIconGlobe",stroke:"currentColor",fill:"none",strokeWidth:"2",strokeLinecap:"round"},N.createElement("path",{d:"M8.45,13A21.44,21.44,0,1,1,37.08,41.56"}),N.createElement("path",{d:"M19.36,35.47a36.9,36.9,0,0,1-2.28-13.24C17.08,10.39,21.88.85,27.8.85s10.72,9.54,10.72,21.38c0,6.48-1.44,12.28-3.71,16.21"}),N.createElement("path",{d:"M17.41,33.4A39,39,0,0,1,27.8,32.06c6.62,0,12.55,1.5,16.48,3.86"}),N.createElement("path",{d:"M44.29,8.53c-3.93,2.37-9.86,3.88-16.49,3.88S15.25,10.9,11.31,8.54"}),N.createElement("line",{x1:"27.8",y1:"0.85",x2:"27.8",y2:"34.61"}),N.createElement("line",{x1:"15.2",y1:"22.23",x2:"49.15",y2:"22.23"})),N.createElement("path",{className:"PhoneInputInternationalIconPhone",stroke:"transparent",fill:"currentColor",d:"M9.42,26.64c2.22-2.22,4.15-3.59.22-8.49S3.08,17,.93,19.17c-2.49,2.48-.13,11.74,9,20.89s18.41,11.5,20.89,9c2.15-2.15,5.91-4.77,1-8.71s-6.27-2-8.49.22c-1.55,1.55-5.48-1.69-8.86-5.08S7.87,28.19,9.42,26.64Z"}))}function Cfe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Efe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Efe(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Efe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _fe(e,t){return!!ole(e,t)||(console.error("Country not found: ".concat(e)),!1)}function Afe(e,t){return e&&0===(e=e.filter((function(e){return _fe(e,t)}))).length&&(e=void 0),e}function Rfe(e){return new Jce(e).getCountries()}Ife.propTypes={title:tue.string.isRequired,aspectRatio:tue.number},Nfe.propTypes={title:tue.string.isRequired},Tfe.propTypes={title:tue.string.isRequired};var Ofe=["country","label","aspectRatio"];function Dfe(){return Dfe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dfe.apply(this,arguments)}function Pfe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ffe(e){var t=e.flags,n=e.flagUrl,r=e.flagComponent,a=e.internationalIcon;function i(e){var i=e.country,o=e.label,s=e.aspectRatio,u=Pfe(e,Ofe),c=a===Ife?s:void 0;return N.createElement("div",Dfe({},u,{className:wce("PhoneInputCountryIcon",{"PhoneInputCountryIcon--square":1===c,"PhoneInputCountryIcon--border":i})}),i?N.createElement(r,{country:i,countryName:o,flags:t,flagUrl:n,className:"PhoneInputCountryIconImg"}):N.createElement(a,{title:o,aspectRatio:c,className:"PhoneInputCountryIconImg"}))}return i.propTypes={country:tue.string,label:tue.string.isRequired,aspectRatio:tue.number},i}Ffe({flagUrl:"https://purecatamphetamine.github.io/country-flag-icons/3x2/{XX}.svg",flagComponent:yfe,internationalIcon:Ife});function Mfe(e){return Mfe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mfe(e)}function Lfe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jfe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(Rme){s=!0,a=Rme}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return zfe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zfe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zfe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bfe(e){var t,n,r,a=jfe(Array.prototype.slice.call(e),4),i=a[0],o=a[1],s=a[2],u=a[3];if("string"!==typeof i)throw new TypeError("A text for parsing must be a string.");if(t=i,o&&"string"!==typeof o){if(!Ufe(o))throw new Error("Invalid second argument: ".concat(o));s?(n=o,r=s):r=o}else u?(n=s,r=u):(n=void 0,r=s),o&&(n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lfe(Object(n),!0).forEach((function(t){$fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lfe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({defaultCountry:o},n));return{text:t,options:n,metadata:r}}var Ufe=function(e){return"object"===Mfe(e)};function Vfe(e){return Vfe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vfe(e)}function Wfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gfe(e,t){if(t&&("object"===Vfe(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Zfe(e)}function Zfe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hfe(e){var t="function"===typeof Map?new Map:void 0;return Hfe=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return qfe(e,arguments,Jfe(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Xfe(n,e)},Hfe(e)}function qfe(e,t,n){return qfe=Kfe()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&Xfe(a,n.prototype),a},qfe.apply(null,arguments)}function Kfe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Xfe(e,t){return Xfe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Xfe(e,t)}function Jfe(e){return Jfe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Jfe(e)}var Yfe=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xfe(e,t)}(i,e);var t,n,r,a=function(e){var t=Kfe();return function(){var n,r=Jfe(e);if(t){var a=Jfe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Gfe(this,n)}}(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),Object.setPrototypeOf(Zfe(t),i.prototype),t.name=t.constructor.name,t}return t=i,n&&Wfe(t.prototype,n),r&&Wfe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(Hfe(Error)),Qfe=function(e){return"([".concat(xle,"]{1,").concat(e,"})")};function ehe(e){var t="#?";return";ext="+Qfe("20")+"|"+("[ \xa0\\t,]*(?:e?xt(?:ensi(?:o\u0301?|\xf3))?n?|\uff45?\uff58\uff54\uff4e?|\u0434\u043e\u0431|anexo)[:\\.\uff0e]?[ \xa0\\t,-]*"+Qfe("20")+t)+"|"+("[ \xa0\\t,]*(?:[x\uff58#\uff03~\uff5e]|int|\uff49\uff4e\uff54)[:\\.\uff0e]?[ \xa0\\t,-]*"+Qfe("9")+t)+"|"+("[- ]+"+Qfe("6")+"#")+"|"+("[ \xa0\\t]*(?:,{2}|;)[:\\.\uff0e]?[ \xa0\\t,-]*"+Qfe("15")+t)+"|"+("[ \xa0\\t]*(?:,)+[:\\.\uff0e]?[ \xa0\\t,-]*"+Qfe("9")+t)}var the="[+\uff0b]{0,1}(?:["+kle+"]*["+"0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]){3,}["+kle+"0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]*",nhe=new RegExp("^[+\uff0b]{0,1}(?:["+kle+"]*["+"0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]){1,2}$","i"),rhe=the+"(?:"+ehe()+")?",ahe=new RegExp("^[0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]{2}$|^"+rhe+"$","i");var ihe=new RegExp("(?:"+ehe()+")$","i");var ohe=new RegExp("^\\+([0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]|[\\-\\.\\(\\)]?)*[0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]([0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]|[\\-\\.\\(\\)]?)*$","g"),she=new RegExp("^([0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]+((\\-)*[0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9])*\\.)*[a-zA-Z]+((\\-)*[0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9])*\\.?$","g"),uhe="tel:",che=";phone-context=";function lhe(e,t){var n,r=t.extractFormattedPhoneNumber,a=function(e){var t=e.indexOf(che);if(t<0)return null;var n=t+che.length;if(n>=e.length)return"";var r=e.indexOf(";",n);return r>=0?e.substring(n,r):e.substring(n)}(e);if(!function(e){return null===e||0!==e.length&&(ohe.test(e)||she.test(e))}(a))throw new Yfe("NOT_A_NUMBER");if(null===a)n=r(e)||"";else{n="","+"===a.charAt(0)&&(n+=a);var i,o=e.indexOf(uhe);i=o>=0?o+uhe.length:0;var s=e.indexOf(che);n+=e.substring(i,s)}var u=n.indexOf(";isub=");if(u>0&&(n=n.substring(0,u)),""!==n)return n}var dhe=new RegExp("[+\uff0b0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9]"),fhe=new RegExp("[^0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9#]+$");function hhe(e,t,n){if(t=t||{},n=new Jce(n),t.defaultCountry&&!n.hasCountry(t.defaultCountry)){if(t.v2)throw new Yfe("INVALID_COUNTRY");throw new Error("Unknown country: ".concat(t.defaultCountry))}var r=function(e,t,n){var r=lhe(e,{extractFormattedPhoneNumber:function(e){return function(e,t,n){if(!e)return;if(e.length>250){if(n)throw new Yfe("TOO_LONG");return}if(!1===t)return e;var r=e.search(dhe);if(r<0)return;return e.slice(r).replace(fhe,"")}(e,n,t)}});if(!r)return{};if(!function(e){return e.length>=2&&ahe.test(e)}(r))return function(e){return nhe.test(e)}(r)?{error:"TOO_SHORT"}:{};var a=function(e){var t=e.search(ihe);if(t<0)return{};for(var n=e.slice(0,t),r=e.match(ihe),a=1;a<r.length;){if(r[a])return{number:n,ext:r[a]};a++}}(r);if(a.ext)return a;return{number:r}}(e,t.v2,t.extract),a=r.number,i=r.ext,o=r.error;if(!a){if(t.v2){if("TOO_SHORT"===o)throw new Yfe("TOO_SHORT");throw new Yfe("NOT_A_NUMBER")}return{}}var s=function(e,t,n,r){var a,i=Tde(Gde(e),t,n,r.metadata),o=i.countryCallingCodeSource,s=i.countryCallingCode,u=i.number;if(s)r.selectNumberingPlan(s);else{if(!u||!t&&!n)return{};r.selectNumberingPlan(t,n),t&&(a=t),s=n||ile(t,r.metadata)}if(!u)return{countryCallingCodeSource:o,countryCallingCode:s};var c=Ide(Gde(u),r),l=c.nationalNumber,d=c.carrierCode,f=Lde(s,l,r);f&&(a=f,"001"===f||r.country(a));return{country:a,countryCallingCode:s,countryCallingCodeSource:o,nationalNumber:l,carrierCode:d}}(a,t.defaultCountry,t.defaultCallingCode,n),u=s.country,c=s.nationalNumber,l=s.countryCallingCode,d=s.countryCallingCodeSource,f=s.carrierCode;if(!n.hasSelectedNumberingPlan()){if(t.v2)throw new Yfe("INVALID_COUNTRY");return{}}if(!c||c.length<2){if(t.v2)throw new Yfe("TOO_SHORT");return{}}if(c.length>17){if(t.v2)throw new Yfe("TOO_LONG");return{}}if(t.v2){var h=new jle(l,c,n.metadata);return u&&(h.country=u),f&&(h.carrierCode=f),i&&(h.ext=i),h.__countryCallingCodeSource=d,h}var p=!!(t.extended?n.hasSelectedNumberingPlan():u)&&hle(c,n.nationalNumberPattern());return t.extended?{country:u,countryCallingCode:l,carrierCode:f,valid:p,possible:!!p||!(!0!==t.extended||!n.possibleLengths()||!fle(c,n)),phone:c,ext:i}:p?function(e,t,n){var r={country:e,phone:t};n&&(r.ext=n);return r}(u,c,i):{}}function phe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vhe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?phe(Object(n),!0).forEach((function(t){mhe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):phe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mhe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ghe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yhe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ghe(Object(n),!0).forEach((function(t){bhe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ghe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bhe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xhe(e,t,n){t&&t.defaultCountry&&!ole(t.defaultCountry,n)&&(t=yhe(yhe({},t),{},{defaultCountry:void 0}));try{return function(e,t,n){return hhe(e,vhe(vhe({},t),{},{v2:!0}),n)}(e,t,n)}catch(r){if(!(r instanceof Yfe))throw r}}function khe(e,t){return"+"+ile(e,t)}function whe(e,t){return function(){var e=Bfe(arguments),t=e.text,n=e.options,r=e.metadata;return xhe(t,n,r)}(e||"",t)}function She(e,t){var n=t.prevCountry,r=t.newCountry,a=t.metadata,i=t.useNationalFormat;if(n===r)return e;if(!e)return i?"":khe(r,a);if(r){if("+"===e[0]){if(i)return 0===e.indexOf("+"+ile(r,a))?function(e,t,n){if(t){var r="+"+ile(t,n);if(e.length<r.length){if(0===r.indexOf(e))return""}else if(0===e.indexOf(r))return e.slice(r.length)}for(var a=0,i=Object.keys(n.country_calling_codes);a<i.length;a++){var o=i[a];if(e.indexOf(o)==="+".length)return e.slice("+".length+o.length)}return""}(e,r,a):"";if(n){var o=khe(r,a);return 0===e.indexOf(o)?e:o}var s=khe(r,a);return 0===e.indexOf(s)?e:s}}else if("+"!==e[0])return Ihe(e,n,a)||"";return e}function Ihe(e,t,n){if(e){if("+"===e[0]){if("+"===e)return;var r=new Ude(t,n);return r.input(e),r.getNumberValue()}if(t){var a=_he(e,t,n);return"+".concat(ile(t,n)).concat(a||"")}}}function Nhe(e,t,n){var r=_he(e,t,n);if(r){var a=r.length-function(e,t){return(t=new Jce(t)).selectNumberingPlan(e),t.numberingPlan.possibleLengths()[t.numberingPlan.possibleLengths().length-1]}(t,n);if(a>0)return e.slice(0,e.length-a)}return e}function The(e,t){var n=t.country,r=t.countries,a=t.required,i=t.metadata;if("+"===e)return n;var o=function(e,t){var n=new Ude(null,t);return n.input(e),n.getCountry()}(e,i);return o&&(!r||r.indexOf(o)>=0)?o:!n||a||Ahe(e,n,i)?n:void 0}function Che(e,t,n){if(0===e.indexOf(khe(t,n))){var r=new Ude(t,n);r.input(e);var a=r.getNumber();return a?a.formatNational().replace(/\D/g,""):""}return e.replace(/\D/g,"")}function Ehe(e,t,n){return String.prototype.localeCompare?e.localeCompare(t,n):e<t?-1:e>t?1:0}function _he(e,t,n){var r=new Ude(t,n);r.input(e);var a=r.getNumber();return a&&a.nationalNumber}function Ahe(e,t,n){for(var r=khe(t,n),a=0;a<e.length&&a<r.length;){if(e[a]!==r[a])return!1;a++}return!0}function Rhe(e){var t=e.value,n=e.phoneNumber,r=e.defaultCountry,a=e.international,i=e.useNationalFormat,o=e.metadata;return(!1===a||i)&&n&&n.country?function(e){return e.formatNational().replace(/\D/g,"")}(n):!t&&a&&r?khe(r,o):t}function Ohe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dhe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ohe(Object(n),!0).forEach((function(t){Phe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ohe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Phe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fhe(e,t){return null===e&&(e=void 0),null===t&&(t=void 0),e===t}function Mhe(e){return Mhe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mhe(e)}var Lhe=["name","disabled","readOnly","autoComplete","style","className","inputRef","inputComponent","numberInputProps","smartCaret","countrySelectComponent","countrySelectProps","containerComponent","defaultCountry","countries","countryOptionsOrder","labels","flags","flagComponent","flagUrl","addInternationalOption","internationalIcon","displayInitialValueAsLocalNumber","initialValueFormat","onCountryChange","limitMaxLength","countryCallingCodeEditable","focusInputOnCountrySelection","reset","metadata","international","locales"];function $he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jhe(){return jhe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jhe.apply(this,arguments)}function zhe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Bhe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Uhe(e,t){return Uhe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Uhe(e,t)}function Vhe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zhe(e);if(t){var a=Zhe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Whe(this,n)}}function Whe(e,t){if(t&&("object"===Mhe(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ghe(e)}function Ghe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zhe(e){return Zhe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zhe(e)}function Hhe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qhe=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uhe(e,t)}(i,e);var t,n,r,a=Vhe(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Hhe(Ghe(t=a.call(this,e)),"setInputRef",(function(e){t.inputRef.current=e;var n=t.props.inputRef;n&&("function"===typeof n?n(e):n.current=e)})),Hhe(Ghe(t),"isCountrySupportedWithError",(function(e){return _fe(e,t.props.metadata)})),Hhe(Ghe(t),"onCountryChange",(function(e){var n=t.props,r=n.international,a=n.metadata,i=n.onChange,o=n.focusInputOnCountrySelection,s=t.state,u=She(s.phoneDigits,{prevCountry:s.country,newCountry:e,metadata:a,useNationalFormat:!r}),c=Ihe(u,e,a);o&&t.inputRef.current.focus(),t.setState({country:e,hasUserSelectedACountry:!0,phoneDigits:u,value:c},(function(){i(c)}))})),Hhe(Ghe(t),"onChange",(function(e){var n=t.props,r=n.defaultCountry,a=n.onChange,i=n.addInternationalOption,o=n.international,s=n.limitMaxLength,u=n.countryCallingCodeEditable,c=n.metadata,l=t.state,d=l.countries,f=function(e,t){var n,r=t.prevPhoneDigits,a=t.country,i=t.defaultCountry,o=t.countryRequired,s=t.getAnyCountry,u=t.countries,c=t.international,l=t.limitMaxLength,d=t.countryCallingCodeEditable,f=t.metadata;if(c&&!1===d){var h,p=khe(a,f);if(0!==e.indexOf(p))return e&&"+"!==e[0]?h=Ihe(e=p+e,a,f):e=p,{phoneDigits:e,value:h,country:a}}return!1===c&&a&&e&&"+"===e[0]&&(e=Che(e,a,f)),e&&a&&l&&(e=Nhe(e,a,f)),!e||"+"===e[0]||a&&!c||(e="+"+e),!e&&r&&"+"===r[0]&&(a=c?void 0:i),"+"===e&&r&&"+"===r[0]&&r.length>"+".length&&(a=void 0),e&&(n="+"===e[0]&&("+"===e||a&&0===khe(a,f).indexOf(e))?void 0:Ihe(e,a,f)),n&&(a=The(n,{country:a,countries:u,metadata:f}),!1===c&&a&&e&&"+"===e[0]&&(n=Ihe(e=Che(e,a,f),a,f))),!a&&o&&(a=i||s()),{phoneDigits:e,country:a,value:n}}(e,{prevPhoneDigits:l.phoneDigits,country:l.country,countryRequired:!i,defaultCountry:r,getAnyCountry:function(){return t.getFirstSupportedCountry({countries:d})},countries:d,international:o,limitMaxLength:s,countryCallingCodeEditable:u,metadata:c}),h=f.phoneDigits,p=f.country,v=f.value,m={phoneDigits:h,value:v,country:p};!1===u&&(v||h!==t.state.phoneDigits||(m.forceRerender={})),t.setState(m,(function(){return a(v)}))})),Hhe(Ghe(t),"_onFocus",(function(){return t.setState({isFocused:!0})})),Hhe(Ghe(t),"_onBlur",(function(){return t.setState({isFocused:!1})})),Hhe(Ghe(t),"onFocus",(function(e){t._onFocus();var n=t.props.onFocus;n&&n(e)})),Hhe(Ghe(t),"onBlur",(function(e){var n=t.props.onBlur;t._onBlur(),n&&n(e)})),Hhe(Ghe(t),"onCountryFocus",(function(e){t._onFocus();var n=t.props.countrySelectProps;if(n){var r=n.onFocus;r&&r(e)}})),Hhe(Ghe(t),"onCountryBlur",(function(e){t._onBlur();var n=t.props.countrySelectProps;if(n){var r=n.onBlur;r&&r(e)}})),t.inputRef=N.createRef();var n=t.props,r=n.value,o=(n.labels,n.international),s=n.addInternationalOption,u=n.displayInitialValueAsLocalNumber,c=n.initialValueFormat,l=n.metadata,d=t.props,f=d.defaultCountry,h=d.countries;f&&(t.isCountrySupportedWithError(f)||(f=void 0)),h=Afe(h,l);var p=whe(r,l);t.CountryIcon=Ffe(t.props);var v=function(e){var t,n=e.value,r=e.phoneNumber,a=e.defaultCountry,i=e.getAnyCountry,o=e.countries,s=e.required,u=e.metadata;return r&&r.country?t=r.country:a&&(n&&!Ahe(n,a,u)||(t=a)),o&&o.indexOf(t)<0&&(t=void 0),!t&&s&&o&&o.length>0&&(t=i()),t}({value:r,phoneNumber:p,defaultCountry:f,required:!s,countries:h||Rfe(l),getAnyCountry:function(){return t.getFirstSupportedCountry({countries:h})},metadata:l});return t.state={props:t.props,country:v,countries:h,phoneDigits:Rhe({value:r,phoneNumber:p,defaultCountry:f,international:o,useNationalFormat:u||"national"===c,metadata:l}),value:r},t}return t=i,n=[{key:"componentDidMount",value:function(){var e=this.props.onCountryChange,t=this.props.defaultCountry,n=this.state.country;e&&(t&&(this.isCountrySupportedWithError(t)||(t=void 0)),n!==t&&e(n))}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.onCountryChange,r=this.state.country;n&&r!==t.country&&n(r)}},{key:"getCountrySelectOptions",value:function(e){var t=e.countries,n=this.props,r=n.international,a=n.countryCallingCodeEditable,i=n.countryOptionsOrder,o=n.addInternationalOption,s=n.labels,u=n.locales,c=n.metadata;return this.useMemoCountrySelectOptions((function(){return function(e,t){if(!t)return e;for(var n,r=[],a=[],i=r,o=Cfe(t);!(n=o()).done;){var s=n.value;"|"===s?i.push({divider:!0}):"..."===s||"\u2026"===s?i=a:function(){var t=void 0;t="\ud83c\udf10"===s?void 0:s;var n=e.indexOf(e.filter((function(e){return e.value===t}))[0]),r=e[n];e.splice(n,1),i.push(r)}()}return r.concat(e).concat(a)}(function(e){var t=e.countries,n=e.countryNames,r=e.addInternationalOption,a=e.compareStringsLocales,i=e.compareStrings;i||(i=Ehe);var o=t.map((function(e){return{value:e,label:n[e]||e}}));return o.sort((function(e,t){return i(e.label,t.label,a)})),r&&o.unshift({label:n.ZZ}),o}({countries:t||Rfe(c),countryNames:s,addInternationalOption:(!r||!1!==a)&&o,compareStringsLocales:u}),function(e,t){if(e&&(e=e.filter((function(e){switch(e){case"\ud83c\udf10":case"|":case"...":case"\u2026":return!0;default:return _fe(e,t)}}))).length>0)return e}(i,c))}),[t,i,o,s,c])}},{key:"useMemoCountrySelectOptions",value:function(e,t){return this.countrySelectOptionsMemoDependencies&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;){if(e[n]!==t[n])return!1;n++}return!0}(t,this.countrySelectOptionsMemoDependencies)||(this.countrySelectOptionsMemo=e(),this.countrySelectOptionsMemoDependencies=t),this.countrySelectOptionsMemo}},{key:"getFirstSupportedCountry",value:function(e){var t=e.countries;return this.getCountrySelectOptions({countries:t})[0].value}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.disabled,r=e.readOnly,a=e.autoComplete,i=e.style,o=e.className,s=(e.inputRef,e.inputComponent),u=e.numberInputProps,c=e.smartCaret,l=e.countrySelectComponent,d=e.countrySelectProps,f=e.containerComponent,h=(e.defaultCountry,e.countries,e.countryOptionsOrder,e.labels),p=(e.flags,e.flagComponent,e.flagUrl,e.addInternationalOption,e.internationalIcon,e.displayInitialValueAsLocalNumber,e.initialValueFormat,e.onCountryChange,e.limitMaxLength,e.countryCallingCodeEditable,e.focusInputOnCountrySelection,e.reset,e.metadata),v=(e.international,e.locales,zhe(e,Lhe)),m=this.state,g=m.country,y=m.countries,b=m.phoneDigits,x=m.isFocused,k=c?Yde:nfe,w=this.getCountrySelectOptions({countries:y});return N.createElement(f,{style:i,className:wce(o,"PhoneInput",{"PhoneInput--focus":x,"PhoneInput--disabled":n,"PhoneInput--readOnly":r})},N.createElement(l,jhe({name:t?"".concat(t,"Country"):void 0,"aria-label":h.country},d,{value:g,options:w,onChange:this.onCountryChange,onFocus:this.onCountryFocus,onBlur:this.onCountryBlur,disabled:n||d&&d.disabled,readOnly:r||d&&d.readOnly,iconComponent:this.CountryIcon})),N.createElement(k,jhe({ref:this.setInputRef,type:"tel",autoComplete:a},u,v,{name:t,metadata:p,country:g,value:b||"",onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,disabled:n,readOnly:r,inputComponent:s,className:wce("PhoneInputInput",u&&u.className,v.className)})))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$he(Object(n),!0).forEach((function(t){Hhe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({props:e},function(e,t,n){var r=e.metadata,a=e.countries,i=e.defaultCountry,o=e.value,s=e.reset,u=e.international,c=e.displayInitialValueAsLocalNumber,l=e.initialValueFormat,d=t.defaultCountry,f=t.value,h=t.reset,p=(n.country,n.value),v=n.hasUserSelectedACountry,m=function(e){return Rhe(Dhe(Dhe({},e),{},{international:u,useNationalFormat:c||"national"===l,metadata:r}))};if(s!==h)return{phoneDigits:m({value:void 0,defaultCountry:i}),value:void 0,country:i,hasUserSelectedACountry:void 0};if(i!==d){var g=!i||_fe(i,r),y=!p||u&&p===m({value:void 0,defaultCountry:d});if(!v&&g&&!o&&y)return{country:i,phoneDigits:m({value:void 0,defaultCountry:i}),value:void 0}}if(!Fhe(o,f)&&!Fhe(o,p)){var b,x,k;if(o){b=whe(o,r);var w=Afe(a,r);b&&b.country?(!w||w.indexOf(b.country)>=0)&&(x=b.country):x=The(o,{country:void 0,countries:w,metadata:r})}return o||(k={hasUserSelectedACountry:void 0}),Dhe(Dhe({},k),{},{phoneDigits:m({phoneNumber:b,value:o,defaultCountry:i}),value:o,country:o?x:i})}}(e,t.props,t))}}],n&&Bhe(t.prototype,n),r&&Bhe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(N.PureComponent),Khe=N.forwardRef((function(e,t){return N.createElement(qhe,jhe({},e,{inputRef:t}))}));Khe.propTypes={value:tue.string,onChange:tue.func.isRequired,onFocus:tue.func,onBlur:tue.func,disabled:tue.bool,readOnly:tue.bool,autoComplete:tue.string.isRequired,initialValueFormat:tue.oneOf(["national"]),displayInitialValueAsLocalNumber:tue.bool,defaultCountry:tue.string,countries:tue.arrayOf(tue.string),labels:kce.isRequired,locales:tue.oneOfType([tue.string,tue.arrayOf(tue.string)]),flagUrl:tue.string.isRequired,flags:tue.objectOf(tue.elementType),flagComponent:tue.elementType.isRequired,addInternationalOption:tue.bool.isRequired,internationalIcon:tue.elementType.isRequired,countryOptionsOrder:tue.arrayOf(tue.string),style:tue.object,className:tue.string,countrySelectComponent:tue.elementType.isRequired,countrySelectProps:tue.object,inputComponent:tue.elementType.isRequired,containerComponent:tue.elementType.isRequired,numberInputProps:tue.object,smartCaret:tue.bool.isRequired,international:tue.bool,limitMaxLength:tue.bool.isRequired,countryCallingCodeEditable:tue.bool.isRequired,metadata:xce.isRequired,onCountryChange:tue.func,focusInputOnCountrySelection:tue.bool.isRequired},Khe.defaultProps={autoComplete:"tel",countrySelectComponent:hfe,flagComponent:yfe,flagUrl:"https://purecatamphetamine.github.io/country-flag-icons/3x2/{XX}.svg",internationalIcon:Ife,inputComponent:"input",containerComponent:"div",reset:tue.any,smartCaret:!0,addInternationalOption:!0,limitMaxLength:!1,countryCallingCodeEditable:!0,focusInputOnCountrySelection:!0};var Xhe=Khe;function Jhe(){return Jhe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jhe.apply(this,arguments)}function Yhe(e){var t=N.forwardRef((function(e,t){return N.createElement(Xhe,Jhe({ref:t},e))}));return t.propTypes={metadata:xce.isRequired,labels:kce.isRequired},t.defaultProps={metadata:e,labels:bce},t}Yhe();var Qhe=Yhe({version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([457]\\d{6})$|1","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2457]\\d{6})$|1","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"([267]\\d{6})$|1","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"(183[12])|0",0,0,0,[["(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|3(?:[0-3589]\\d|4[0-578]|6[1-9]|7[0-35-9])|7(?:[013-57-9]\\d|2[0-8]))\\d{3}|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4]))|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:79[01]|83[0-389]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[016-9]|7[02-8]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:28|4[14]|5)|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|22"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[047]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","[24-689]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]]]],BL:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:395|76[018])\\d|475[01])\\d{4}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","(?:[2-467]\\d\\d|8001)\\d{5}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[23]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([3-8]\\d{6})$|1","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-79]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|3[178]|50|68|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[125-9]|33|44|66|77|88)|622)[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:79[01]|83[0-389]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[016-9]|7[02-8]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","[189]\\d{8}|[1-68]\\d{6}",[7,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","1[127]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-689]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","10(?:10|9[56])|2[0-57-9](?:100|9[56])"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"(1(?:[12]\\d|79)\\d\\d)|0",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:60\\d\\d|9101)\\d{6}|(?:1\\d|3)\\d{9}",[10,11],[["(\\d{3})(\\d{7})","$1 $2",["6"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|91"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0(4(?:[14]4|56)|[579])?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","[27]\\d{6,7}|[34]\\d{5,7}|(?:5|8\\d\\d)\\d{7}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["5"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:79[01]|83[0-389]|93[0-6])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[016-9]|7[02-8]|8[0-24-9]|9[0-27-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[0568]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[189]"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d)(\\d{4,9})","$1 $2",["[2568][1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["[12]00|[368]|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[1245]|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0235])|4(?:[0-5]\\d\\d|69[7-9]|70[0-579])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d\\d|1(?:[0-7]\\d\\d|8(?:[02]\\d|1[0-246-9])))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","[56]94\\d{6}|(?:80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[56]|9[47]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"([25-9]\\d{5})$|0","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d|60)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1289]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:395|76[018])\\d|475[01])\\d{4}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"([3-9]\\d{6})$|1","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","9008\\d{3}|(?:[2-467]\\d\\d|862)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-46-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-5]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","(?:[2-489]\\d|55)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","(?:(?:00[1-9]|8\\d)\\d{4}|[1-36])\\d{6}|00\\d{10}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([25-8]\\d{5})$|0","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}"],["3[1-9]\\d{8}|3[2-9]\\d{7}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],0,0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([0-24-8]\\d{5})$|0","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97[7-9]))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51|63)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9]|636)|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9]|636[457-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[27-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9])|5(?:2|3[045]|4[0-369]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|49|51|6(?:[0-24]|36|5[0-3589]|72|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:49|55|83)[29]|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|7[015-9]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17|3[015-9]))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9(?:[019]|4[1-3]|6(?:[0-47-9]|5[01346-9])))|3(?:[29]|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[23]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|72|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|829(?:2|66)|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|(?:[235-8]\\d|99)\\d{7}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[013-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"([2-8]\\d{6})$|1","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"(1001)|0"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:[25]\\d|33|77|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[4-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(8-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"8 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(8-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(8-$1)",1]],"8",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{5})(\\d{4})","$1-$2",["5(?:29|38)","5(?:29[1289]|389)","529(?:1[1-46-9]|2[013-8]|90)|5(?:298|389)[0-46-9]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9]|9)|892","5(?:2(?:[2-49]|8[235-9])|3[5-9]|9)|892"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5293[01]\\d{4}|5(?:2(?:[0-25-7]\\d|3[1-578]|4[02-46-8]|8[0235-7]|9[0-289])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[0189]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[017]\\d|2[0-2]|6[0-8]|8[0-3]))\\d{6}"],["80\\d{7}"],["89\\d{7}"],0,0,0,0,["592(?:4[0-2]|93)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|30|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5]))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:395|76[018])\\d|475[01])\\d{4}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"([24-9]\\d{6})$|0","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","670$1",0,"670"],MQ:["596","00","596\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"([34]\\d{6})$|1","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[34679]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","1(?:(?:[27]2|44|99)[1-9]|65[0-689])\\d{7}|(?:1(?:[01]\\d|2[13-9]|[35][1-9]|4[0-35-9]|6[0-46-9]|7[013-9]|8[1-79]|9[1-8])|[2-9]\\d)\\d{8}",[10,11],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],0,1],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],0,1],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],0,1]],"01",0,"0(?:[12]|4[45])|1",0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[04]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","(?:[124-7]|9\\d{3})\\d{6}|[1-9]\\d{7}|[78]\\d{9,13}",[7,8,10,11,12,13,14],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-7]|8[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[489]|59"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-7]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[47]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[29]\\d{7,9}|50\\d{5}(?:\\d{2,3})?|6[0-35-9]\\d{6}|7\\d{7,8}|8\\d{4,9}|(?:11\\d|[34])\\d{7}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-579]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|[89]0","50(?:[0367]|88)|[89]0"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[59]|80"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7|86"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","[45]\\d{5}|(?:708|80\\d)\\d{6}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-6])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[16]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]]],RE:["262","00","(?:26|[689]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,0,[["26(?:2\\d\\d|3(?:0\\d|1[0-3]))\\d{4}"],["(?:69(?:2\\d\\d|3(?:0[0-46]|1[013]|2[0-2]|3[0-39]|4\\d|5[0-5]|6[0-6]|7[0-27]|8[0-8]|9[0-479]))|9(?:399[0-2]|4790|76(?:2[27]|3[0-37]|9\\d)))\\d{4}"],["80\\d{7}"],["89[1-37-9]\\d{6}"],0,0,0,0,0,["8(?:1[019]|2[0156]|84|90)\\d{6}"]]],RO:["40","00","(?:[2378]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[237-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","(?:[1-6]|[7-9]\\d\\d)\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","800\\d{4}|(?:[249]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-6]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|[57]9)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3478]|64|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6(?:0[5-7]|[1-35-9])|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|[89]00\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"(5\\d{6})$|1","721$1",0,"721"],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"([2-479]\\d{6})$|1","649$1",0,"649"],TD:["235","00|16","(?:22|[69]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2679]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","(?:00|[1-57-9]\\d)\\d{7}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[34]7|91[78]"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3[1-5]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","[1-6]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["6"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|616)","5(?:[0-59]|6161)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-46-8]\\d{6})$|1","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["(?:47220[01]|5(?:05(?:[2-57-9]\\d\\d|6(?:[0-35-9]\\d|4[46]))|57200))\\d{4}|(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[01356]|3[0-24679]|4[167]|5[0-2]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],UY:["598","0(?:0|1[3-9]\\d)","(?:0004|4)\\d{9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[7,8,10,13],[["(\\d{3})(\\d{4})","$1 $2",["405|8|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["4"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","810","(?:33|[5-79]\\d|88)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[35-9]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-578]\\d{6})$|1","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[69]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[3578]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","[23]\\d{7,8}|(?:4\\d\\d|[89]00)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[23]"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","(?:(?:(?:26|63)9|80\\d)\\d\\d|93980)\\d{4}",[9],0,"0",0,0,0,0,"269|63|9398"],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|63|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[35-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"[0-36-9]\\d{8}",[9],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-36-9]"]]],0,0,0,0,0,0,[0,["[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,0,0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[013-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}});function epe(e,t){if(null==e)return{};var n,r,a=(0,ke.Z)(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}n(2176);function tpe(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function npe(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function rpe(e,t){return Object.keys(t).reduce((function(n,r){var a,i=n,o=i[tpe(r)],s=i[r],u=(0,ke.Z)(i,[tpe(r),r].map(npe)),c=t[r],l=function(e,t,n){var r=(0,N.useRef)(void 0!==e),a=(0,N.useState)(t),i=a[0],o=a[1],s=void 0!==e,u=r.current;return r.current=s,!s&&u&&i!==t&&o(t),[s?e:i,(0,N.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];n&&n.apply(void 0,[e].concat(r)),o(e)}),[n])]}(s,o,e[c]),d=l[0],f=l[1];return(0,E.Z)({},u,((a={})[r]=d,a[c]=f,a))}),e)}function ape(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function ipe(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function ope(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}ape.__suppressDeprecationWarning=!0,ipe.__suppressDeprecationWarning=!0,ope.__suppressDeprecationWarning=!0;var spe=function(e){var t=(0,N.useRef)(e);return(0,N.useEffect)((function(){t.current=e}),[e]),t};function upe(e){var t=spe(e);return(0,N.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}var cpe="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product;"undefined"!==typeof document||cpe?N.useLayoutEffect:N.useEffect,new WeakMap;var lpe=["as","disabled"];function dpe(e){var t=e.tagName,n=e.disabled,r=e.href,a=e.target,i=e.rel,o=e.role,s=e.onClick,u=e.tabIndex,c=void 0===u?0:u,l=e.type;t||(t=null!=r||null!=a||null!=i?"a":"button");var d={tagName:t};if("button"===t)return[{type:l||"button",disabled:n},d];var f=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==s||s(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:c,href:r,target:"a"===t?a:void 0,"aria-disabled":n||void 0,rel:"a"===t?i:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},d]}var fpe=N.forwardRef((function(e,t){var n=e.as,r=e.disabled,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,lpe),i=dpe(Object.assign({tagName:n,disabled:r},a)),o=(0,C.Z)(i,2),s=o[0],u=o[1].tagName;return(0,be.jsx)(u,Object.assign({},a,s,{ref:t}))}));fpe.displayName="Button";var hpe=["onKeyDown"];var ppe=N.forwardRef((function(e,t){var n,r=e.onKeyDown,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,hpe),i=dpe(Object.assign({tagName:"a"},a)),o=(0,C.Z)(i,1)[0],s=upe((function(e){o.onKeyDown(e),null==r||r(e)}));return(n=a.href)&&"#"!==n.trim()&&"button"!==a.role?(0,be.jsx)("a",Object.assign({ref:t},a,{onKeyDown:r})):(0,be.jsx)("a",Object.assign({ref:t},a,o,{onKeyDown:s}))}));ppe.displayName="Anchor";var vpe=ppe,mpe=["xxl","xl","lg","md","sm","xs"],gpe=N.createContext({prefixes:{},breakpoints:mpe,minBreakpoint:"xs"});gpe.Consumer,gpe.Provider;function ype(e,t){var n=(0,N.useContext)(gpe).prefixes;return e||n[t]||t}var bpe=!1,xpe="unmounted",kpe="exited",wpe="entering",Spe="entered",Ipe="exiting",Npe=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(a=kpe,r.appearStatus=wpe):a=Spe:a=t.unmountOnExit||t.mountOnEnter?xpe:kpe,r.state={status:a},r.nextCallback=null,r}Be(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===xpe?{status:kpe}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==wpe&&n!==Spe&&(t=wpe):n!==wpe&&n!==Spe||(t=Ipe)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===wpe){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:T.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===kpe&&this.setState({status:xpe})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[T.findDOMNode(this),r],i=a[0],o=a[1],s=this.getTimeouts(),u=r?s.appear:s.enter;!e&&!n||bpe?this.safeSetState({status:Spe},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,o),this.safeSetState({status:wpe},(function(){t.props.onEntering(i,o),t.onTransitionEnd(u,(function(){t.safeSetState({status:Spe},(function(){t.props.onEntered(i,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:T.findDOMNode(this);t&&!bpe?(this.props.onExit(r),this.safeSetState({status:Ipe},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:kpe},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:kpe},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:T.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=a[0],o=a[1];this.props.addEndListener(i,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===xpe)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,ke.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return N.createElement(Ue.Provider,{value:null},"function"===typeof n?n(e,r):N.cloneElement(N.Children.only(n),r))},t}(N.Component);function Tpe(){}Npe.contextType=Ue,Npe.propTypes={},Npe.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Tpe,onEntering:Tpe,onEntered:Tpe,onExit:Tpe,onExiting:Tpe,onExited:Tpe},Npe.UNMOUNTED=xpe,Npe.EXITED=kpe,Npe.ENTERING=wpe,Npe.ENTERED=Spe,Npe.EXITING=Ipe;var Cpe=Npe;function Epe(e){var t=function(e){return e&&e.ownerDocument||document}(e);return t&&t.defaultView||window}var _pe=/([A-Z])/g;var Ape=/^ms-/;function Rpe(e){return function(e){return e.replace(_pe,"-$1").toLowerCase()}(e).replace(Ape,"-ms-")}var Ope=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var Dpe=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(Rpe(t))||function(e,t){return Epe(e).getComputedStyle(e,t)}(e).getPropertyValue(Rpe(t));Object.keys(t).forEach((function(a){var i=t[a];i||0===i?!function(e){return!(!e||!Ope.test(e))}(a)?n+=Rpe(a)+": "+i+";":r+=a+"("+i+") ":e.style.removeProperty(Rpe(a))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n},Ppe=!("undefined"===typeof window||!window.document||!window.document.createElement),Fpe=!1,Mpe=!1;try{var Lpe={get passive(){return Fpe=!0},get once(){return Mpe=Fpe=!0}};Ppe&&(window.addEventListener("test",Lpe,Lpe),window.removeEventListener("test",Lpe,!0))}catch(Ome){}var $pe=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!Mpe){var a=r.once,i=r.capture,o=n;!Mpe&&a&&(o=n.__once||function e(r){this.removeEventListener(t,e,i),n.call(this,r)},n.__once=o),e.addEventListener(t,o,Fpe?r:i)}e.addEventListener(t,n,r)};var jpe=function(e,t,n,r){var a=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,a),n.__once&&e.removeEventListener(t,n.__once,a)};var zpe=function(e,t,n,r){return $pe(e,t,n,r),function(){jpe(e,t,n,r)}};function Bpe(e,t,n){void 0===n&&(n=5);var r=!1,a=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var a=document.createEvent("HTMLEvents");a.initEvent(t,n,r),e.dispatchEvent(a)}}(e,"transitionend",!0)}),t+n),i=zpe(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(a),i()}}function Upe(e,t,n,r){null==n&&(n=function(e){var t=Dpe(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var a=Bpe(e,n,r),i=zpe(e,"transitionend",t);return function(){a(),i()}}function Vpe(e,t){var n=Dpe(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function Wpe(e,t){var n=Vpe(e,"transitionDuration"),r=Vpe(e,"transitionDelay"),a=Upe(e,(function(n){n.target===e&&(a(),t(n))}),n+r)}var Gpe=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var Zpe=function(e,t){return(0,N.useMemo)((function(){return function(e,t){var n=Gpe(e),r=Gpe(t);return function(e){n&&n(e),r&&r(e)}}(e,t)}),[e,t])};var Hpe,qpe=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],Kpe=N.forwardRef((function(e,t){var n=e.onEnter,r=e.onEntering,a=e.onEntered,i=e.onExit,o=e.onExiting,s=e.onExited,u=e.addEndListener,c=e.children,l=e.childRef,d=epe(e,qpe),f=(0,N.useRef)(null),h=Zpe(f,l),p=function(e){var t;h((t=e)&&"setState"in t?T.findDOMNode(t):null!=t?t:null)},v=function(e){return function(t){e&&f.current&&e(f.current,t)}},m=(0,N.useCallback)(v(n),[n]),g=(0,N.useCallback)(v(r),[r]),y=(0,N.useCallback)(v(a),[a]),b=(0,N.useCallback)(v(i),[i]),x=(0,N.useCallback)(v(o),[o]),k=(0,N.useCallback)(v(s),[s]),w=(0,N.useCallback)(v(u),[u]);return(0,be.jsx)(Cpe,XV(XV({ref:t},d),{},{onEnter:m,onEntered:y,onEntering:g,onExit:b,onExited:k,onExiting:x,addEndListener:w,nodeRef:f,children:"function"===typeof c?function(e,t){return c(e,XV(XV({},t),{},{ref:p}))}:N.cloneElement(c,{ref:p})}))})),Xpe=Kpe,Jpe=["className","children","transitionClasses","onEnter"],Ype=(Hpe={},(0,De.Z)(Hpe,wpe,"show"),(0,De.Z)(Hpe,Spe,"show"),Hpe),Qpe=N.forwardRef((function(e,t){var n=e.className,r=e.children,a=e.transitionClasses,i=void 0===a?{}:a,o=e.onEnter,s=XV({in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},epe(e,Jpe)),u=(0,N.useCallback)((function(e,t){!function(e){e.offsetHeight}(e),null==o||o(e,t)}),[o]);return(0,be.jsx)(Xpe,XV(XV({ref:t,addEndListener:Wpe},s),{},{onEnter:u,childRef:r.ref,children:function(e,t){return N.cloneElement(r,XV(XV({},t),{},{className:Sce()("fade",n,r.props.className,Ype[e],i[e])}))}}))}));Qpe.displayName="Fade";var eve=Qpe,tve=["className","variant","aria-label"],nve={"aria-label":nue().string,onClick:nue().func,variant:nue().oneOf(["white"])},rve=N.forwardRef((function(e,t){var n=e.className,r=e.variant,a=e["aria-label"],i=void 0===a?"Close":a,o=epe(e,tve);return(0,be.jsx)("button",XV({ref:t,type:"button",className:Sce()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":i},o))}));rve.displayName="CloseButton",rve.propTypes=nve;var ave=rve,ive=/-(.)/g;var ove=["className","bsPrefix","as"],sve=function(e){return e[0].toUpperCase()+function(e){return e.replace(ive,(function(e,t){return t.toUpperCase()}))}(e).slice(1)};function uve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.displayName,r=void 0===n?sve(e):n,a=t.Component,i=t.defaultProps,o=N.forwardRef((function(t,n){var r=t.className,o=t.bsPrefix,s=t.as,u=void 0===s?a||"div":s,c=epe(t,ove),l=XV(XV({},i),c),d=ype(o,e);return(0,be.jsx)(u,XV({ref:n,className:Sce()(r,d)},l))}));return o.displayName=r,o}var cve,lve=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],dve=(cve="h4",N.forwardRef((function(e,t){return(0,be.jsx)("div",XV(XV({},e),{},{ref:t,className:Sce()(e.className,cve)}))})));dve.displayName="DivStyledAsH4";var fve=uve("alert-heading",{Component:dve}),hve=uve("alert-link",{Component:vpe}),pve=N.forwardRef((function(e,t){var n=rpe(e,{show:"onClose"}),r=n.bsPrefix,a=n.show,i=void 0===a||a,o=n.closeLabel,s=void 0===o?"Close alert":o,u=n.closeVariant,c=n.className,l=n.children,d=n.variant,f=void 0===d?"primary":d,h=n.onClose,p=n.dismissible,v=n.transition,m=void 0===v?eve:v,g=epe(n,lve),y=ype(r,"alert"),b=upe((function(e){h&&h(!1,e)})),x=!0===m?eve:m,k=(0,be.jsxs)("div",XV(XV({role:"alert"},x?void 0:g),{},{ref:t,className:Sce()(c,y,f&&"".concat(y,"-").concat(f),p&&"".concat(y,"-dismissible")),children:[p&&(0,be.jsx)(ave,{onClick:b,"aria-label":s,variant:u}),l]}));return x?(0,be.jsx)(x,XV(XV({unmountOnExit:!0},g),{},{ref:void 0,in:i,children:k})):i?k:null}));pve.displayName="Alert";var vve=Object.assign(pve,{Link:hve,Heading:fve}),mve=["as","className","type","tooltip"],gve={type:nue().string,tooltip:nue().bool,as:nue().elementType},yve=N.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,a=e.className,i=e.type,o=void 0===i?"valid":i,s=e.tooltip,u=void 0!==s&&s,c=epe(e,mve);return(0,be.jsx)(r,XV(XV({},c),{},{ref:t,className:Sce()(a,"".concat(o,"-").concat(u?"tooltip":"feedback"))}))}));yve.displayName="Feedback",yve.propTypes=gve;var bve=yve,xve=N.createContext({}),kve=["id","bsPrefix","className","type","isValid","isInvalid","as"],wve=N.forwardRef((function(e,t){var n=e.id,r=e.bsPrefix,a=e.className,i=e.type,o=void 0===i?"checkbox":i,s=e.isValid,u=void 0!==s&&s,c=e.isInvalid,l=void 0!==c&&c,d=e.as,f=void 0===d?"input":d,h=epe(e,kve),p=(0,N.useContext)(xve).controlId;return r=ype(r,"form-check-input"),(0,be.jsx)(f,XV(XV({},h),{},{ref:t,type:o,id:n||p,className:Sce()(a,r,u&&"is-valid",l&&"is-invalid")}))}));wve.displayName="FormCheckInput";var Sve=wve,Ive=["bsPrefix","className","htmlFor"],Nve=N.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.htmlFor,i=epe(e,Ive),o=(0,N.useContext)(xve).controlId;return n=ype(n,"form-check-label"),(0,be.jsx)("label",XV(XV({},i),{},{ref:t,htmlFor:a||o,className:Sce()(r,n)}))}));Nve.displayName="FormCheckLabel";var Tve=Nve;var Cve=["id","bsPrefix","bsSwitchPrefix","inline","reverse","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],Eve=N.forwardRef((function(e,t){var n=e.id,r=e.bsPrefix,a=e.bsSwitchPrefix,i=e.inline,o=void 0!==i&&i,s=e.reverse,u=void 0!==s&&s,c=e.disabled,l=void 0!==c&&c,d=e.isValid,f=void 0!==d&&d,h=e.isInvalid,p=void 0!==h&&h,v=e.feedbackTooltip,m=void 0!==v&&v,g=e.feedback,y=e.feedbackType,b=e.className,x=e.style,k=e.title,w=void 0===k?"":k,S=e.type,I=void 0===S?"checkbox":S,T=e.label,C=e.children,E=e.as,_=void 0===E?"input":E,A=epe(e,Cve);r=ype(r,"form-check"),a=ype(a,"form-switch");var R=(0,N.useContext)(xve).controlId,O=(0,N.useMemo)((function(){return{controlId:n||R}}),[R,n]),D=!C&&null!=T&&!1!==T||function(e,t){return N.Children.toArray(e).some((function(e){return N.isValidElement(e)&&e.type===t}))}(C,Tve),P=(0,be.jsx)(Sve,XV(XV({},A),{},{type:"switch"===I?"checkbox":I,ref:t,isValid:f,isInvalid:p,disabled:l,as:_}));return(0,be.jsx)(xve.Provider,{value:O,children:(0,be.jsx)("div",{style:x,className:Sce()(b,D&&r,o&&"".concat(r,"-inline"),u&&"".concat(r,"-reverse"),"switch"===I&&a),children:C||(0,be.jsxs)(be.Fragment,{children:[P,D&&(0,be.jsx)(Tve,{title:w,children:T}),g&&(0,be.jsx)(bve,{type:y,tooltip:m,children:g})]})})})}));Eve.displayName="FormCheck";var _ve=Object.assign(Eve,{Input:Sve,Label:Tve}),Ave=(n(2391),["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"]),Rve=N.forwardRef((function(e,t){var n,r,a=e.bsPrefix,i=e.type,o=e.size,s=e.htmlSize,u=e.id,c=e.className,l=e.isValid,d=void 0!==l&&l,f=e.isInvalid,h=void 0!==f&&f,p=e.plaintext,v=e.readOnly,m=e.as,g=void 0===m?"input":m,y=epe(e,Ave),b=(0,N.useContext)(xve).controlId;(a=ype(a,"form-control"),p)?n=(0,De.Z)({},"".concat(a,"-plaintext"),!0):(r={},(0,De.Z)(r,a,!0),(0,De.Z)(r,"".concat(a,"-").concat(o),o),n=r);return(0,be.jsx)(g,XV(XV({},y),{},{type:i,size:s,ref:t,readOnly:v,id:u||b,className:Sce()(c,n,d&&"is-valid",h&&"is-invalid","color"===i&&"".concat(a,"-color"))}))}));Rve.displayName="FormControl";var Ove=Object.assign(Rve,{Feedback:bve}),Dve=uve("form-floating"),Pve=["controlId","as"],Fve=N.forwardRef((function(e,t){var n=e.controlId,r=e.as,a=void 0===r?"div":r,i=epe(e,Pve),o=(0,N.useMemo)((function(){return{controlId:n}}),[n]);return(0,be.jsx)(xve.Provider,{value:o,children:(0,be.jsx)(a,XV(XV({},i),{},{ref:t}))})}));Fve.displayName="FormGroup";var Mve=Fve,Lve=["as","bsPrefix","className"],$ve=["className"];function jve(e){var t=e.as,n=e.bsPrefix,r=e.className,a=epe(e,Lve);n=ype(n,"col");var i=(0,N.useContext)(gpe).breakpoints,o=(0,N.useContext)(gpe).minBreakpoint,s=[],u=[];return i.forEach((function(e){var t,r,i,c=a[e];delete a[e],"object"===typeof c&&null!=c?(t=c.span,r=c.offset,i=c.order):t=c;var l=e!==o?"-".concat(e):"";t&&s.push(!0===t?"".concat(n).concat(l):"".concat(n).concat(l,"-").concat(t)),null!=i&&u.push("order".concat(l,"-").concat(i)),null!=r&&u.push("offset".concat(l,"-").concat(r))})),[XV(XV({},a),{},{className:Sce().apply(void 0,[r].concat(s,u))}),{as:t,bsPrefix:n,spans:s}]}var zve=N.forwardRef((function(e,t){var n=jve(e),r=(0,C.Z)(n,2),a=r[0],i=a.className,o=epe(a,$ve),s=r[1],u=s.as,c=void 0===u?"div":u,l=s.bsPrefix,d=s.spans;return(0,be.jsx)(c,XV(XV({},o),{},{ref:t,className:Sce()(i,!d.length&&l)}))}));zve.displayName="Col";var Bve=zve,Uve=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],Vve=N.forwardRef((function(e,t){var n=e.as,r=void 0===n?"label":n,a=e.bsPrefix,i=e.column,o=void 0!==i&&i,s=e.visuallyHidden,u=void 0!==s&&s,c=e.className,l=e.htmlFor,d=epe(e,Uve),f=(0,N.useContext)(xve).controlId;a=ype(a,"form-label");var h="col-form-label";"string"===typeof o&&(h="".concat(h," ").concat(h,"-").concat(o));var p=Sce()(c,a,u&&"visually-hidden",o&&h);return l=l||f,o?(0,be.jsx)(Bve,XV({ref:t,as:"label",className:p,htmlFor:l},d)):(0,be.jsx)(r,XV({ref:t,className:p,htmlFor:l},d))}));Vve.displayName="FormLabel";var Wve=Vve,Gve=["bsPrefix","className","id"],Zve=N.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.id,i=epe(e,Gve),o=(0,N.useContext)(xve).controlId;return n=ype(n,"form-range"),(0,be.jsx)("input",XV(XV({},i),{},{type:"range",ref:t,className:Sce()(r,n),id:a||o}))}));Zve.displayName="FormRange";var Hve=Zve,qve=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],Kve=N.forwardRef((function(e,t){var n=e.bsPrefix,r=e.size,a=e.htmlSize,i=e.className,o=e.isValid,s=void 0!==o&&o,u=e.isInvalid,c=void 0!==u&&u,l=e.id,d=epe(e,qve),f=(0,N.useContext)(xve).controlId;return n=ype(n,"form-select"),(0,be.jsx)("select",XV(XV({},d),{},{size:a,ref:t,className:Sce()(i,n,r&&"".concat(n,"-").concat(r),s&&"is-valid",c&&"is-invalid"),id:l||f}))}));Kve.displayName="FormSelect";var Xve=Kve,Jve=["bsPrefix","className","as","muted"],Yve=N.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.as,i=void 0===a?"small":a,o=e.muted,s=epe(e,Jve);return n=ype(n,"form-text"),(0,be.jsx)(i,XV(XV({},s),{},{ref:t,className:Sce()(r,n,o&&"text-muted")}))}));Yve.displayName="FormText";var Qve=Yve,eme=N.forwardRef((function(e,t){return(0,be.jsx)(_ve,XV(XV({},e),{},{ref:t,type:"switch"}))}));eme.displayName="Switch";var tme=Object.assign(eme,{Input:_ve.Input,Label:_ve.Label}),nme=["bsPrefix","className","children","controlId","label"],rme=N.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,a=e.children,i=e.controlId,o=e.label,s=epe(e,nme);return n=ype(n,"form-floating"),(0,be.jsxs)(Mve,XV(XV({ref:t,className:Sce()(r,n),controlId:i},s),{},{children:[a,(0,be.jsx)("label",{htmlFor:i,children:o})]}))}));rme.displayName="FloatingLabel";var ame=rme,ime=["className","validated","as"],ome={_ref:nue().any,validated:nue().bool,as:nue().elementType},sme=N.forwardRef((function(e,t){var n=e.className,r=e.validated,a=e.as,i=void 0===a?"form":a,o=epe(e,ime);return(0,be.jsx)(i,XV(XV({},o),{},{ref:t,className:Sce()(n,r&&"was-validated")}))}));sme.displayName="Form",sme.propTypes=ome;var ume=Object.assign(sme,{Group:Mve,Control:Ove,Floating:Dve,Check:_ve,Switch:tme,Label:Wve,Text:Qve,Range:Hve,Select:Xve,FloatingLabel:ame}),cme=["as","bsPrefix","variant","size","active","disabled","className"],lme=N.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,a=e.variant,i=void 0===a?"primary":a,o=e.size,s=e.active,u=void 0!==s&&s,c=e.disabled,l=void 0!==c&&c,d=e.className,f=epe(e,cme),h=ype(r,"btn"),p=dpe(XV({tagName:n,disabled:l},f)),v=(0,C.Z)(p,2),m=v[0],g=v[1].tagName;return(0,be.jsx)(g,XV(XV(XV({},m),f),{},{ref:t,disabled:l,className:Sce()(d,h,u&&"active",i&&"".concat(h,"-").concat(i),o&&"".concat(h,"-").concat(o),f.href&&l&&"disabled")}))}));lme.displayName="Button";var dme=lme,fme=function(e){var t=e.host,n=(0,N.useState)(""),r=(0,C.Z)(n,2),a=r[0],i=r[1],o=(0,N.useState)(""),s=(0,C.Z)(o,2),u=s[0],c=s[1],l=(0,N.useState)(!1),d=(0,C.Z)(l,2),f=d[0],h=d[1],p=(0,N.useState)(""),v=(0,C.Z)(p,2),m=v[0],g=v[1],y=(0,N.useState)(""),b=(0,C.Z)(y,2),x=b[0],k=b[1],w=(0,N.useState)(""),S=(0,C.Z)(w,2),I=S[0],T=S[1],E=Yie(),_=E.setUpRecaptha,A=E.user,R=H(),O=function(){var e=me(ye().mark((function e(){var n,r,a,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(A),e.next=3,Mse.post("".concat(t,"/api/auth/createUser"),{phone:null!==A&&void 0!==A&&A.phoneNumber?null===A||void 0===A?void 0:A.phoneNumber:nV.get("phonenpk"),name:x});case 3:if(n=e.sent,r=n.data,console.log(r),!r.mark){e.next=14;break}return e.next=9,Mse.post("".concat(t,"/api/auth/login"),{phone:null!==A&&void 0!==A&&A.phoneNumber?null===A||void 0===A?void 0:A.phoneNumber:nV.get("phonenpk")});case 9:return a=e.sent,i=a.data,nV.set("auth-Tokennpk",i.authToken,{expires:365}),R("/dashboard"),e.abrupt("return");case 14:nV.set("auth-Tokennpk",r.authToken,{expires:365}),R("/dashboard");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=me(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log(u),i(""),""!==u&&void 0!==u){e.next=5;break}return e.abrupt("return",i("Please enter a valid phone number!"));case 5:return e.prev=5,e.next=8,_(u);case 8:n=e.sent,T(n),h(!0),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),i(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=me(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),i(""),""!==m&&null!==m){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,I.confirm(m);case 7:O(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),i(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}();return(0,be.jsx)(be.Fragment,{children:(0,be.jsx)("div",{className:"flex items-center min-h-screen  p-4 bg-gray-100 lg:justify-center",children:(0,be.jsx)("div",{className:"flex flex-col w-full overflow-hidden bg-white rounded-md shadow-lg max md:flex-row md:flex-1 lg:max-w-screen-md",children:(0,be.jsxs)("div",{className:"p-5 bg-white md:flex-1",children:[(0,be.jsx)("h3",{className:"my-4 text-2xl text-center font-semibold text-gray-700",children:"Account Login"}),a&&(0,be.jsx)(vve,{variant:"danger",children:a}),(0,be.jsxs)(ume,{className:"flex flex-col space-y-5",onSubmit:D,style:{display:f?"none":"block"},children:[(0,be.jsxs)(ume.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,be.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,be.jsx)("label",{for:"name",className:"text-sm font-semibold text-gray-500",children:"Name"}),(0,be.jsx)("input",{type:"name",id:"name",value:x,onChange:function(e){k(e.target.value)},autofocus:!0,className:"px-4 py-2 transition duration-300 border border-gray-300 rounded focus:border-transparent focus:outline-none focus:ring-4 focus:ring-green-200"})]}),(0,be.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,be.jsx)("div",{className:"flex items-center justify-between",children:(0,be.jsx)("label",{for:"number",className:"text-sm font-semibold text-gray-500",children:"Enter Phone Number"})}),(0,be.jsx)(Qhe,{className:"px-4 py-2 transition duration-300 border border-gray-300 rounded focus:border-transparent focus:outline-none focus:ring-4 focus:ring-green-200",defaultCountry:"IN",value:u,onChange:c,placeholder:"Enter Phone Number"}),(0,be.jsx)("div",{id:"recaptcha-container",onTouch:!0})]})]}),(0,be.jsxs)("div",{className:"button-right flex justify-evenly",children:[(0,be.jsx)(dme,{onClick:function(){nV.set("phonenpk",u,{expires:365})},type:"submit",className:"w-full px-4 py-2 text-lg font-semibold text-white transition-colors duration-300 bg-green-500 rounded-md shadow hover:bg-green-600 focus:outline-none focus:ring-green-200 focus:ring-4  ",children:"Send Otp"}),"\xa0",(0,be.jsx)(dme,{onClick:function(){R("/")},className:"w-full px-4 py-2 text-lg font-semibold text-white transition-colors duration-300 bg-red-500 rounded-md shadow hover:bg-red-600 focus:outline-none focus:ring-red-200 focus:ring-4 ",children:"Cancel"})]})]}),(0,be.jsxs)(ume,{onSubmit:P,style:{display:f?"block":"none"},children:[(0,be.jsx)(ume.Group,{className:"mb-3",controlId:"formBasicOtp",children:(0,be.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,be.jsx)("label",{for:"number",className:"text-sm font-semibold text-gray-500",children:"Enter OTP"}),(0,be.jsx)(ume.Control,{className:"px-4 py-2 transition duration-300 border border-gray-300 rounded focus:border-transparent focus:outline-none focus:ring-4 focus:ring-green-200",type:"otp",onChange:function(e){return g(e.target.value)}})]})}),(0,be.jsxs)("div",{className:"button-right flex justify-evenly",children:[(0,be.jsx)(dme,{type:"submit",className:"w-full px-4 py-2 text-lg font-semibold text-white transition-colors duration-300 bg-green-500 rounded-md shadow hover:bg-green-600 focus:outline-none focus:ring-green-200 focus:ring-4  ",children:"Verify OTP"}),"\xa0",(0,be.jsx)(dme,{onClick:function(){R("/")},className:"w-full px-4 py-2 text-lg font-semibold text-white transition-colors duration-300 bg-red-500 rounded-md shadow hover:bg-red-600 focus:outline-none focus:ring-red-200 focus:ring-4 ",children:"Cancel"})]})]})]})})})})},hme=function(){return(0,be.jsx)("div",{children:(0,be.jsx)("section",{className:"bg-gradient-to-b from-[#fffa92] to-white",children:(0,be.jsx)("div",{className:"px-6 py-12 lg:my-0 md:px-12 text-gray-800 text-center lg:text-left",children:(0,be.jsx)("div",{className:"container mx-auto xl:px-32",children:(0,be.jsxs)("div",{className:"lg:flex justify-between items-center  sm:flex-row",children:[(0,be.jsxs)("div",{className:"my-10",children:[(0,be.jsxs)("h1",{className:"text-4xl md:text-5xl xl:text-6xl font-bold tracking-tight text-gray-800 mb-16",children:["Smart Farming Solution",(0,be.jsx)("span",{className:"text-primary",children:(0,be.jsx)(yce(),{options:{autoStart:!0,loop:!0,delay:100,strings:["Believe","Act","Results"]}})})]}),(0,be.jsx)("p",{class:"max-w-2xl mb-6 font-normal text-gray-600 lg:mb-8 md:text-lg lg:text-lg dark:text-gray-600",children:"Transforming Agriculture Through Technology"}),(0,be.jsx)(pe,{to:"/login",class:"inline-block rounded-3xl px-6 outline-1 py-1.5 text-base font-medium leading-7 text-gray-800 shadow-sm ring-1 ring-gray-600 hover:bg-transparent hover:outline rounded-full",children:"Get Started"})]}),(0,be.jsx)("div",{className:"grid place-items-center ",children:(0,be.jsx)("img",{className:"rounded-full w-60 h-60",src:"Images/xx.jpeg",alt:"React Logo"})})]})})})})})},pme=function(){return(0,be.jsx)("div",{children:(0,be.jsx)("footer",{className:"bg-white",children:(0,be.jsxs)("div",{className:"w-full",children:[(0,be.jsxs)("div",{className:"grid grid-cols-2 gap-8 md:grid-cols-2 lg:grid-cols-4 text-center",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"mb-6  font-semibold  uppercase text-black",children:"Company"}),(0,be.jsxs)("ul",{className:"text-black dark:text-black",children:[(0,be.jsx)("li",{className:"mb-2",children:(0,be.jsx)("a",{href:"/",className:" hover:underline",children:"About"})}),(0,be.jsx)("li",{className:"mb-2",children:(0,be.jsx)("a",{href:"/",className:"hover:underline",children:"Careers"})}),(0,be.jsx)("li",{className:"mb-2",children:(0,be.jsx)("a",{href:"/",className:"hover:underline",children:"Brand Center"})}),(0,be.jsx)("li",{className:"mb-2",children:(0,be.jsx)("a",{href:"/",className:"hover:underline",children:"Blog"})})]})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"mb-6  font-semibold text-black uppercase ",children:"Help center"}),(0,be.jsxs)("ul",{className:"text-black dark:text-black",children:[(0,be.jsx)("li",{className:"mb-2",children:(0,be.jsx)("a",{href:"/",className:"hover:underline",children:"Discord Server"})}),(0,be.jsx)("li",{className:"mb-2",children:(0,be.jsx)("a",{href:"/",className:"hover:underline",children:"Twitter"})}),(0,be.jsx)("li",{className:"mb-2",children:(0,be.jsx)("a",{href:"/",className:"hover:underline",children:"Facebook"})}),(0,be.jsx)("li",{className:"mb-3",children:(0,be.jsx)("a",{href:"/",className:"hover:underline",children:"Contact Us"})})]})]})]}),(0,be.jsxs)("div",{className:"text-center  mt-6",children:[(0,be.jsxs)("h1",{className:"text-lg md:text-3xl xl:text-4xl font-bold tracking-tight text-green-400",children:["NPK",(0,be.jsx)("span",{className:"text-primary"})]}),(0,be.jsx)("span",{className:"block pb-6 text-sm text-center text-black dark:text-black",children:"\xa9 2023 NPK\u2122. All Rights Reserved."})]})]})})})},vme=function(){return(0,be.jsxs)("section",{className:"mb-32 text-gray-900 text-center",children:[(0,be.jsxs)("h2",{className:"text-3xl font-bold mb-12",children:["Why is it so",(0,be.jsx)("span",{className:"text-green-600",children:" great?"})]}),(0,be.jsxs)("div",{className:"grid md:grid-cols-3 lg:gap-x-12",children:[(0,be.jsxs)("div",{className:"mb-6 md:mb-0",children:[(0,be.jsx)("div",{className:"p-4 bg-green-600 rounded-lg shadow-lg inline-block mb-6",children:(0,be.jsx)("svg",{className:"w-5 h-5 text-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,be.jsx)("path",{fill:"currentColor",d:"M192 208c0-17.67-14.33-32-32-32h-16c-35.35 0-64 28.65-64 64v48c0 35.35 28.65 64 64 64h16c17.67 0 32-14.33 32-32V208zm176 144c35.35 0 64-28.65 64-64v-48c0-35.35-28.65-64-64-64h-16c-17.67 0-32 14.33-32 32v112c0 17.67 14.33 32 32 32h16zM256 0C113.18 0 4.58 118.83 0 256v16c0 8.84 7.16 16 16 16h16c8.84 0 16-7.16 16-16v-16c0-114.69 93.31-208 208-208s208 93.31 208 208h-.12c.08 2.43.12 165.72.12 165.72 0 23.35-18.93 42.28-42.28 42.28H320c0-26.51-21.49-48-48-48h-32c-26.51 0-48 21.49-48 48s21.49 48 48 48h181.72c49.86 0 90.28-40.42 90.28-90.28V256C507.42 118.83 398.82 0 256 0z"})})}),(0,be.jsx)("h5",{className:"text-lg font-bold mb-4",children:"User Experience"}),(0,be.jsx)("p",{className:"text-gray-500",children:"The interface is made very simple so that it can be used very easily by all of our users and there wont be much of difficulty faced by user and all functionality are made simple."})]}),(0,be.jsxs)("div",{className:"mb-12 md:mb-0",children:[(0,be.jsx)("div",{className:"p-4 bg-green-600 rounded-lg shadow-lg inline-block mb-6",children:(0,be.jsx)("svg",{className:"w-5 h-5 text-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,be.jsx)("path",{fill:"currentColor",d:"M192 208c0-17.67-14.33-32-32-32h-16c-35.35 0-64 28.65-64 64v48c0 35.35 28.65 64 64 64h16c17.67 0 32-14.33 32-32V208zm176 144c35.35 0 64-28.65 64-64v-48c0-35.35-28.65-64-64-64h-16c-17.67 0-32 14.33-32 32v112c0 17.67 14.33 32 32 32h16zM256 0C113.18 0 4.58 118.83 0 256v16c0 8.84 7.16 16 16 16h16c8.84 0 16-7.16 16-16v-16c0-114.69 93.31-208 208-208s208 93.31 208 208h-.12c.08 2.43.12 165.72.12 165.72 0 23.35-18.93 42.28-42.28 42.28H320c0-26.51-21.49-48-48-48h-32c-26.51 0-48 21.49-48 48s21.49 48 48 48h181.72c49.86 0 90.28-40.42 90.28-90.28V256C507.42 118.83 398.82 0 256 0z"})})}),(0,be.jsx)("h5",{className:"text-lg font-bold mb-4",children:"Crop Prediction"}),(0,be.jsx)("p",{className:"text-gray-500",children:"Crop prediction using machine learning helps farmers in making decisions about harvesting, crop management, optimizing yields and reducing costs .We will improve the accuracy of model as we move forward."})]}),(0,be.jsxs)("div",{className:"mb-12 md:mb-0",children:[(0,be.jsx)("div",{className:"p-4 bg-green-600 rounded-lg shadow-lg inline-block mb-6",children:(0,be.jsx)("svg",{className:"w-5 h-5 text-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,be.jsx)("path",{fill:"currentColor",d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"})})}),(0,be.jsx)("h5",{className:"text-lg font-bold mb-4",children:"Disease Prediction"}),(0,be.jsx)("p",{className:"text-gray-500",children:"Plant disease prediction using machine learning involves analyzing data on plant health and environmental factors to identify potential diseases affecting plants."})]}),(0,be.jsxs)("div",{className:"mb-12 md:mb-0",children:[(0,be.jsx)("div",{className:"p-4 bg-green-600 rounded-lg shadow-lg inline-block mb-6",children:(0,be.jsx)("svg",{className:"w-5 h-5 text-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512",children:(0,be.jsx)("path",{fill:"currentColor",d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H112C85.5 0 64 21.5 64 48v48H8c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h272c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H40c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h208c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H8c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h208c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H64v128c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"})})}),(0,be.jsx)("h5",{className:"text-lg font-bold mb-4",children:"Drought Prediction"}),(0,be.jsx)("p",{className:"text-gray-500",children:"This feature will be implemented soon in our product."})]})]})]})},mme=function(){return(0,be.jsxs)("div",{children:[(0,be.jsx)(hme,{}),(0,be.jsx)(vme,{}),(0,be.jsx)(pme,{})]})};var gme=function(){return(0,be.jsx)("div",{children:"Blog"})};var yme=function(){return(0,be.jsx)("div",{className:"flex items-center min-h-screen  p-4 bg-gray-100 lg:justify-center",children:(0,be.jsx)("div",{className:"flex flex-col w-full overflow-hidden bg-white rounded-md shadow-lg max md:flex-row md:flex-1 lg:max-w-screen-md",children:(0,be.jsxs)("div",{className:"p-5 bg-white md:flex-1",children:[(0,be.jsx)("h3",{className:"my-4 text-2xl text-center font-semibold text-gray-700",children:"OTP Verification"}),(0,be.jsxs)("form",{action:"#",className:"flex flex-col space-y-5",children:[(0,be.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,be.jsx)("div",{className:"flex items-center justify-between",children:(0,be.jsx)("label",{for:"number",className:"text-sm font-semibold text-gray-500",children:"Enter OTP"})}),(0,be.jsx)("input",{type:"number",id:"number",className:"px-4 py-2 transition duration-300 border border-gray-300 rounded focus:border-transparent focus:outline-none focus:ring-4 focus:ring-green-200"})]}),(0,be.jsx)("div",{children:(0,be.jsx)("button",{type:"submit",className:"w-full px-4 py-2 text-lg font-semibold text-white transition-colors duration-300 bg-green-500 rounded-md shadow hover:bg-green-600 focus:outline-none focus:ring-green-200 focus:ring-4",children:"Verify & Proceed"})})]})]})})})};var bme=function(){return(0,be.jsx)("section",{className:"bg-white dark:bg-black-300",children:(0,be.jsxs)("div",{className:"py-8 px-4 mx-auto max-w-screen-xl text-center lg:py-16 lg:px-6",children:[(0,be.jsxs)("div",{className:"mx-auto mb-8 max-w-screen-sm lg:mb-16",children:[(0,be.jsx)("h2",{className:"mb-4 text-2xl tracking-tight font-semibold text-gray-900 dark:text-black",children:"Our Team"}),(0,be.jsx)("p",{className:"font-normal text-gray-500 sm:text-xl dark:text-gray-700",children:"Our team isn't just a group of developers, but a collective of creative problem solvers who turn code into innovation."})]}),(0,be.jsxs)("div",{className:"grid gap-8 lg:gap-16 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:[(0,be.jsxs)("div",{className:"text-center text-gray-500 dark:text-gray-500",children:[(0,be.jsx)("img",{className:"mx-auto mb-4 w-36 h-36 rounded-full",src:"./images/srj.jpeg",alt:"Bonnie Avatar"}),(0,be.jsx)("h3",{className:"mb-1 text-2xl font-semibold tracking-tight text-gray-900 dark:text-gray-700",children:(0,be.jsx)("a",{href:"#",children:"Suraj Kumar Gupta"})}),(0,be.jsx)("p",{className:"dark:text-gray-700 font-medium",children:"Developer"}),(0,be.jsxs)("ul",{className:"flex justify-center mt-4 space-x-4",children:[(0,be.jsx)("li",{children:(0,be.jsx)("a",{href:"#",className:"text-[#39569c] hover:text-gray-900 dark:hover:text-black",children:(0,be.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,be.jsx)("path",{"fill-rule":"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z","clip-rule":"evenodd"})})})}),(0,be.jsx)("li",{children:(0,be.jsx)("a",{href:"#",className:"text-[#00acee] hover:text-gray-900 dark:hover:text-white",children:(0,be.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,be.jsx)("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})})}),(0,be.jsx)("li",{children:(0,be.jsx)("a",{href:"#",className:"text-gray-900 hover:text-gray-900 dark:hover:text-white dark:text-gray-300",children:(0,be.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,be.jsx)("path",{"fill-rule":"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z","clip-rule":"evenodd"})})})}),(0,be.jsx)("li",{children:(0,be.jsx)("a",{href:"#",className:"text-[#ea4c89] hover:text-gray-900 dark:hover:text-white",children:(0,be.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",children:(0,be.jsx)("path",{d:"M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z",fill:"#0077B5"})})})})]})]}),(0,be.jsxs)("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[(0,be.jsx)("img",{className:"mx-auto mb-4 w-36 h-36 rounded-full",src:"./images/schn.jpeg",alt:"Helene Avatar"}),(0,be.jsx)("h3",{className:"mb-1 text-2xl font-semibold tracking-tight text-gray-900 dark:text-gray-700",children:(0,be.jsx)("a",{href:"#",children:"Sachin Kumar Sharma"})}),(0,be.jsx)("p",{className:"dark:text-gray-700 font-medium",children:"Developer"}),(0,be.jsxs)("ul",{className:"flex justify-center mt-4 space-x-4",children:[(0,be.jsx)("li",{children:(0,be.jsx)("a",{href:"#",className:"text-[#39569c] hover:text-gray-900 dark:hover:text-white",children:(0,be.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,be.jsx)("path",{"fill-rule":"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z","clip-rule":"evenodd"})})})}),(0,be.jsx)("li",{children:(0,be.jsx)("a",{href:"#",className:"text-[#00acee] hover:text-gray-900 dark:hover:text-white",children:(0,be.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,be.jsx)("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})})}),(0,be.jsx)("li",{children:(0,be.jsx)("a",{href:"#",className:"text-gray-900 hover:text-gray-900 dark:hover:text-white dark:text-gray-300",children:(0,be.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,be.jsx)("path",{"fill-rule":"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z","clip-rule":"evenodd"})})})}),(0,be.jsx)("li",{children:(0,be.jsx)("a",{href:"#",className:"text-[#ea4c89] hover:text-gray-900 dark:hover:text-white",children:(0,be.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",children:(0,be.jsx)("path",{d:"M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z",fill:"#0077B5"})})})})]})]}),(0,be.jsxs)("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[(0,be.jsx)("img",{className:"mx-auto mb-4 w-36 h-36 rounded-full",src:"./images/ksk.png",alt:"Jese Avatar"}),(0,be.jsx)("h3",{className:"mb-1 text-2xl font- font-semibold tracking-tight text-gray-900 dark:text-gray-700",children:(0,be.jsx)("a",{href:"#",children:"Koushik Das"})}),(0,be.jsx)("p",{className:"dark:text-gray-700 font-medium",children:"Developer"}),(0,be.jsxs)("ul",{className:"flex justify-center mt-4 space-x-4",children:[(0,be.jsx)("li",{children:(0,be.jsx)("a",{href:"#",className:"text-[#39569c] hover:text-gray-900 dark:hover:text-white",children:(0,be.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,be.jsx)("path",{"fill-rule":"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z","clip-rule":"evenodd"})})})}),(0,be.jsx)("li",{children:(0,be.jsx)("a",{href:"#",className:"text-[#00acee] hover:text-gray-900 dark:hover:text-white",children:(0,be.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,be.jsx)("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})})}),(0,be.jsx)("li",{children:(0,be.jsx)("a",{href:"#",className:"text-gray-900 hover:text-gray-900 dark:hover:text-white dark:text-gray-300",children:(0,be.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,be.jsx)("path",{"fill-rule":"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z","clip-rule":"evenodd"})})})}),(0,be.jsx)("li",{children:(0,be.jsx)("a",{href:"#",className:"text-[#ea4c89] hover:text-gray-900 dark:hover:text-white",children:(0,be.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",children:(0,be.jsx)("path",{d:"M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z",fill:"#0077B5"})})})})]})]}),(0,be.jsxs)("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[(0,be.jsx)("img",{className:"mx-auto mb-4 w-36 h-36 rounded-full",src:"./images/AB.png",alt:"Joseph Avatar"}),(0,be.jsx)("h3",{className:"mb-1 text-2xl font-semibold tracking-tight text-gray-900 dark:text-gray-700",children:(0,be.jsx)("a",{href:"#",children:"Aniket Bose"})}),(0,be.jsx)("p",{className:"dark:text-gray-700 font-medium",children:"Developer"}),(0,be.jsxs)("ul",{className:"flex justify-center mt-4 space-x-4",children:[(0,be.jsx)("li",{children:(0,be.jsx)("a",{href:"#",className:"text-[#39569c] hover:text-gray-900 dark:hover:text-white",children:(0,be.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,be.jsx)("path",{"fill-rule":"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z","clip-rule":"evenodd"})})})}),(0,be.jsx)("li",{children:(0,be.jsx)("a",{href:"#",className:"text-[#00acee] hover:text-gray-900 dark:hover:text-white",children:(0,be.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,be.jsx)("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})})}),(0,be.jsx)("li",{children:(0,be.jsx)("a",{href:"#",className:"text-gray-900 hover:text-gray-900 dark:hover:text-white dark:text-gray-300",children:(0,be.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,be.jsx)("path",{"fill-rule":"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z","clip-rule":"evenodd"})})})}),(0,be.jsx)("li",{children:(0,be.jsx)("a",{href:"#",className:"text-[#ea4c89] hover:text-gray-900 dark:hover:text-white",children:(0,be.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",children:(0,be.jsx)("path",{d:"M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z",fill:"#0077B5"})})})})]})]})]})]})})},xme=["Alstonia_Scholaris_diseased","Alstonia_Scholaris_healthy","Apple___Apple_scab","Apple___Black_rot","Apple___Cedar_apple_rust","Apple___healthy","Arjun_diseased","Arjun_healthy","Blueberry___healthy","Cherry_(including_sour)___Powdery_mildew","Cherry_(including_sour)___healthy","Chinar_diseased","Chinar_healthy","Corn_(maize)___Cercospora_leaf_spot Gray_leaf_spot","Corn___Common_Rust","Corn___Gray_Leaf_Spot","Corn___Healthy","Corn___Northern_Leaf_Blight","Gauva_diseased","Gauva_healthy","Grape___Esca_(Black_Measles)","Grape___Leaf_blight_(Isariopsis_Leaf_Spot)","Grape___healthy","Jamun_diseased","Jamun_healthy","Jatropha_diseased","Jatropha_healthy","Lemon_diseased","Lemon_healthy","Mango_diseased","Mango_healthy","Orange___Haunglongbing_(Citrus_greening)","Peach___Bacterial_spot","Peach___healthy","Pepper__bell___Bacterial__spot","Pepper__bell___healthy","Pomegranate_diseased","Pomegranate_healthy","Pongamia_Pinnata_diseased","Pongamia_Pinnata_healthy","Potato___Early_Blight","Potato___Healthy","Potato___Late_Blight","Raspberry___healthy","Rice___Brown_Spot","Rice___Healthy","Rice___Leaf_Blast","Rice___Neck_Blast","Soybean___healthy","Squash___Powdery_mildew","Strawberry___Leaf_scorch","Strawberry___healthy","Tomato_Bacterial_spot","Tomato_Early_blight","Tomato_Late_blight","Tomato_Leaf_Mold","Tomato_Septoria_leaf_spot","Tomato_Spider_mites_Two_spotted_spider_mite","Tomato__Target_Spot","Tomato__Tomato_YellowLeaf__Curl_Virus","Tomato__Tomato_mosaic_virus","Tomato_healthy","Wheat___Brown_Rust","Wheat___Healthy","Wheat___Yellow_Rust"],kme=function(e){var t=e.progressPercentage;return(0,be.jsx)(be.Fragment,{children:0!==t?(0,be.jsx)("div",{className:"h-2 w-full bg-gray-300",children:(0,be.jsx)("div",{style:{width:"".concat(t,"%")},className:"h-full ".concat(t<70?"bg-red-600":"bg-green-600")})}):(0,be.jsx)("div",{})})};var wme=function(e){var t=e.setUpdatedisease,n=e.host,r=Yie().user;(0,N.useEffect)((function(){if(!nV.get("auth-Tokennpk")||!r)return u("/login")}),[]);var a=(0,N.useState)(0),i=(0,C.Z)(a,2),o=i[0],s=i[1],u=H(),c=(0,N.useState)("https://t3.ftcdn.net/jpg/03/45/05/92/360_F_345059232_CPieT8RIWOUk4JqBkkWkIETYAkmz2b75.jpg"),l=(0,C.Z)(c,2),d=l[0],f=l[1],h=function(){var e=me(ye().mark((function e(t){var r,a,i,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=document.getElementById("file").files[0],(a=new FormData).append("file",r),a.append("category",t.className),a.append("probability",t.probability),e.next=7,Mse.post("".concat(n,"/api/file/upload"),a,{headers:{"Content-Type":"multipart/form-data","auth-token":nV.get("auth-Tokennpk")}});case 7:i=e.sent,o=i.data,console.log(o),u("/disease_predictor_result");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=me(ye().mark((function e(){var n,r,a,i,o,u,c,l;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(10),e.next=3,rT("https://storage.googleapis.com/drought-prediction-bucket/model1.json");case 3:return n=e.sent,s(40),console.log(n),r=jt()("#temp").get(0),console.log(r),a=Qc(r).resizeNearestNeighbor([224,224]).toFloat(),i=oc(255),o=oc(1).sub(a.div(i)),u=o.expandDims(0),e.next=14,n.predict(u).softmax().data();case 14:c=e.sent,s(70),l=Array.from(c).map((function(e,t){return{probability:e,className:xme[t]}})).sort((function(e,t){return t.probability-e.probability})),console.log(l),t(l),s(100),h(l[0]);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,be.jsxs)("div",{className:"xs:container m-auto px-5 bg-gray-100 h-[100vh]",children:[(0,be.jsx)("img",{className:"hidden",alt:"yoyo",id:"temp"}),(0,be.jsx)("div",{}),(0,be.jsx)("div",{className:"text-center font-bold py-7 text-xl",children:"Upload Image"}),(0,be.jsxs)("div",{class:"grid md:grid-cols[30%_70%] grid-cols-[40%_60%] m-auto h-[20vh] md:h-[40vh] overflow-hidden bg-white border border-gray-200 rounded-lg shadow flex-row md:max-w-xl hover:bg-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700",children:[(0,be.jsx)("div",{className:"border border-r-[1px] flex flex-col",style:{backgroundImage:"url(".concat(d,")"),backgroundSize:"contain"}}),(0,be.jsx)("div",{class:"flex flex-col justify-between p-4 leading-normal",children:(0,be.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,be.jsx)("input",{class:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400",id:"file",type:"file",onChange:function(){var e=document.getElementById("file").files[0],t=window.URL.createObjectURL(e);f(t);var n=new FileReader;n.onload=function(){var e=n.result;jt()("#temp").attr("src",e)};var r=jt()("#file").prop("files")[0];console.log(r),n.readAsDataURL(r)}}),(0,be.jsx)("div",{children:(0,be.jsx)("button",{onClick:p,className:"px-1 py-1 bg-slate-400 rounded text-sm",children:"Predict disease"})})]})})]}),(0,be.jsx)("div",{className:"my-6",children:(0,be.jsx)(kme,{progressPercentage:o})})]})},Sme={Alstonia_Scholaris_diseased:"This is a disease that affects the Alstonia Scholaris plant. It is characterized by wilting of the leaves and stems, and can be caused by a variety of factors, including fungal infections, bacterial infections, or environmental stress. Treatment involves removing affected plant material and applying fungicides or bactericides as necessary.",Alstonia_Scholaris_healthy:"This refers to a healthy Alstonia Scholaris plant, which is a tropical tree species that is native to Southeast Asia. It is a popular ornamental plant, and is also used for medicinal purposes.",Apple___Apple_scab:"This is a fungal disease that affects apple trees, and is characterized by the appearance of brown or olive-colored lesions on the leaves and fruit. Treatment involves removing affected plant material, applying fungicides, and practicing good sanitation practices to prevent the spread of the disease.",Apple___Black_rot:"This is another fungal disease that affects apple trees, and is characterized by the appearance of dark, sunken lesions on the fruit and canes. Treatment involves removing affected plant material, applying fungicides, and practicing good sanitation practices to prevent the spread of the disease.",Apple___Cedar_apple_rust:"This is a fungal disease that affects apple trees, and is characterized by the appearance of bright orange or yellow spots on the leaves and fruit. Treatment involves removing affected plant material, applying fungicides, and practicing good sanitation practices to prevent the spread of the disease.",Apple___healthy:"This refers to a healthy apple tree, which is a deciduous tree that is widely cultivated for its fruit.",Arjun_diseased:"This is a disease that affects the Arjun tree, which is a species of evergreen tree that is native to the Indian subcontinent. It is characterized by wilting of the leaves and stems, and can be caused by a variety of factors, including fungal infections, bacterial infections, or environmental stress. Treatment involves removing affected plant material and applying fungicides or bactericides as necessary.",Arjun_healthy:"This refers to a healthy Arjun tree, which is used for medicinal purposes and is also planted as an ornamental tree.",Blueberry___healthy:"This refers to a healthy blueberry plant, which is a perennial shrub that is native to North America and is cultivated for its edible berries.","Cherry_(including_sour)___Powdery_mildew":"This is a fungal disease that affects cherry trees, and is characterized by the appearance of a white or gray powdery coating on the leaves and fruit. Treatment involves removing affected plant material, applying fungicides, and practicing good sanitation practices to prevent the spread of the disease.","Cherry_(including_sour)___healthy":"This refers to a healthy cherry tree, which is a deciduous tree that is widely cultivated for its fruit.",Chinar_diseased:"This is a disease that affects the Chinar tree, which is a species of maple that is native to the Himalayas. It is characterized by wilting of the leaves and stems, and can be caused by a variety of factors, including fungal infections, bacterial infections, or environmental stress. Treatment involves removing affected plant material and applying fungicides or bactericides as necessary.",Chinar_healthy:"This refers to a healthy Chinar tree, which is planted for ornamental purposes and is also used for timber.","Corn_(maize)___Cercospora_leaf_spot Gray_leaf_spot":"These are fungal diseases that affect corn plants, and are characterized by the appearance of brown or gray spots on the leaves.",Wheat___Brown_Rust:"a fungal disease that causes orange-brown colored pustules on leaves, stems and grains, and can significantly reduce crop yield. It can be controlled by using resistant wheat varieties, planting at the right time, and crop rotation.",Wheat___Healthy:"indicates a healthy wheat crop with no signs of disease or pest infestation.",Wheat___Yellow_Rust:"a fungal disease that causes yellow-orange pustules on leaves and stems. It can be controlled by using resistant wheat varieties, timely fungicide sprays, and crop rotation.",Corn___Common_Rust:"a fungal disease that causes reddish-brown pustules on leaves and stems. It can be controlled by using resistant corn varieties and timely fungicide sprays.",Corn___Gray_Leaf_Spot:"a fungal disease that causes grayish-brown lesions on leaves. It can be controlled by using resistant corn varieties, timely fungicide sprays, and crop rotation.",Corn___Healthy:"indicates a healthy corn crop with no signs of disease or pest infestation.",Corn___Northern_Leaf_Blight:"a fungal disease that causes cigar-shaped lesions on leaves. It can be controlled by using resistant corn varieties, timely fungicide sprays, and crop rotation.",Gauva_diseased:"Unfortunately, without further information on the specific disease affecting the guava plant, it's difficult to provide a description or solution. However, common diseases affecting guava include anthracnose, root rot, and wilt, which can be controlled through proper pruning, soil management, and timely use of fungicides.",Gauva_healthy:"indicates a healthy guava plant with no signs of disease or pest infestation.","Grape__Esca(Black_Measles)":"a fungal disease that causes black spots and discoloration on leaves and shoots. It can be controlled by using resistant grape varieties, timely fungicide sprays, and proper pruning techniques.","Grape__Leaf_blight(Isariopsis_Leaf_Spot)":"a fungal disease that causes small, circular spots on leaves. It can be controlled by using resistant grape varieties, timely fungicide sprays, and proper pruning techniques.",Grape___healthy:"indicates a healthy grape vine with no signs of disease or pest infestation.",Jamun_diseased:"unfortunately, without further information on the specific disease affecting the jamun plant, it's difficult to provide a description or solution. However, common diseases affecting jamun include powdery mildew, leaf spot, and anthracnose, which can be controlled through proper pruning, soil management, and timely use of fungicides.",Jamun_healthy:"indicates a healthy jamun plant with no signs of disease or pest infestation.",Jatropha_diseased:"unfortunately, without further information on the specific disease affecting the jatropha plant, it's difficult to provide a description or solution. However, common diseases affecting jatropha include leaf spot, stem rot, and powdery mildew, which can be controlled through proper pruning, soil management, and timely use of fungicides.",Jatropha_healthy:"indicates a healthy jatropha plant with no signs of disease or pest infestation.",Lemon_diseased:"unfortunately, without further information on the specific disease affecting the lemon plant, it's difficult to provide a description or solution. However, common diseases affecting lemon include citrus canker, powdery mildew, and anthracnose, which can be controlled through proper pruning, soil management, and timely use of fungicides.",Lemon_healthy:"indicates a healthy lemon plant with no signs of disease or pest infestation.",Mango_diseased:"unfortunately, without further information on the specific disease affecting the mango plant, it's difficult to provide a description or solution. However, common diseases affecting mango include anthracnose, powdery mildew, and fruit rot, which can be controlled through proper pruning, soil management, and timely use of fungicides.",Mango_healthy:"indicates a healthy mango plant with no signs of disease or pest infestation.","Orange__Haunglongbing(Citrus_greening)":"a bacterial disease that causes yellowing of leaves, stunting",Peach___Bacterial_spot:"A bacterial disease that causes spots on leaves, twigs, and fruit of peach trees. Symptoms include water-soaked spots that turn brown, surrounded by a yellow halo. To control this disease, use clean tools to prune the tree, remove and destroy infected plant debris, and apply copper-based fungicides.",Peach___healthy:"Healthy peach trees without any signs of disease.",Pepper_bell_Bacterial_spot:"A bacterial disease that causes black, water-soaked spots on leaves, fruit, and stems of pepper plants. The spots may turn yellow or brown and cause leaves to drop prematurely. Control measures include removing infected plant debris, using copper-based fungicides, and planting resistant varieties.",Pepper_bell__healthy:"Healthy pepper plants without any signs of disease.",Pomegranate_diseased:"Pomegranate trees can suffer from a variety of diseases, including bacterial blight, fruit rot, and powdery mildew. Symptoms can include spotting on leaves and fruit, withering and dying branches, and powdery growth on leaves. Control measures depend on the specific disease, but can include pruning and destroying infected branches, applying fungicides, and practicing good cultural practices.",Pomegranate_healthy:"Healthy pomegranate trees without any signs of disease.",Pongamia_Pinnata_diseased:"Pongamia pinnata, also known as the Indian beech, can be affected by various fungal diseases, including leaf blight and stem canker. Symptoms include spotting on leaves and stem cankers, which can girdle and kill the tree. Control measures include pruning and destroying infected branches, applying fungicides, and practicing good cultural practices.",Pongamia_Pinnata_healthy:"Healthy Pongamia pinnata trees without any signs of disease.",Potato___Early_Blight:"A fungal disease that affects potato plants and causes brown spots on leaves and stems. The disease can reduce yields and make the plant more susceptible to other diseases. Control measures include removing infected plant debris, rotating crops, and using fungicides.",Potato___Healthy:"Healthy potato plants without any signs of disease.",Potato___Late_Blight:"A fungal disease that affects potato plants and can cause significant yield losses. Symptoms include brown spots on leaves and stems, as well as a white mold on the undersides of leaves. Control measures include removing infected plant debris, using fungicides, and planting resistant varieties.",Raspberry___healthy:"Healthy raspberry plants without any signs of disease.",Rice___Brown_Spot:"A fungal disease that affects rice plants and causes brown spots on leaves. The disease can reduce yields and make the plant more susceptible to other diseases. Control measures include removing infected plant debris, rotating crops, and using fungicides.",Rice___Healthy:"No disease found in the rice plant.",Rice___Leaf_Blast:"This disease causes blast lesions on the leaves and necks of the rice plant. To control it, remove the infected leaves and use resistant varieties of rice.",Rice___Neck_Blast:"This disease affects the necks of the rice plant, causing them to collapse. It can be controlled by using resistant varieties of rice, rotating crops, and removing infected plants.",Soybean___healthy:"No disease found in the soybean plant.",Squash___Powdery_mildew:"This disease causes a white, powdery coating on the leaves of the squash plant. It can be controlled by applying fungicides, improving air circulation, and removing infected leaves.",Strawberry___Leaf_scorch:"This disease causes brown spots on the leaves of the strawberry plant. To control it, use resistant varieties of strawberries and remove infected leaves.",Strawberry___healthy:"No disease found in the strawberry plant.",Tomato_Bacterial_spot:"This disease causes dark spots on the leaves and fruit of the tomato plant. It can be controlled by removing infected plants, using disease-free seeds, and avoiding overhead watering.",Tomato_Early_blight:"This disease causes brown spots on the lower leaves of the tomato plant. It can be controlled by using resistant varieties of tomatoes, rotating crops, and removing infected leaves.",Tomato_Late_blight:"This disease causes brown spots on the leaves and fruit of the tomato plant. It can be controlled by removing infected plants, using disease-free seeds, and avoiding overhead watering.",Tomato_Leaf_Mold:"This disease causes yellow spots on the leaves of the tomato plant. To control it, improve air circulation and remove infected leaves.",Tomato_Septoria_leaf_spot:"This disease causes brown spots on the leaves of the tomato plant. It can be controlled by removing infected leaves, using disease-free seeds, and avoiding overhead watering.",Tomato_Spider_mites_Two_spotted_spider_mite:"This disease causes yellow spots on the leaves of the tomato plant. It can be controlled by using insecticides and improving air circulation.",Tomato__Target_Spot:"This disease causes brown spots with concentric rings on the leaves and fruit of the tomato plant. It can be controlled by removing infected plants, using disease-free seeds, and avoiding overhead watering.",Tomato_Tomato_YellowLeaf_Curl_Virus:"This disease causes the leaves of the tomato plant to curl and turn yellow. It can be controlled by using disease-free seeds and controlling the whitefly population.",Tomato__Tomato_mosaic_virus:"This disease causes yellow-green mosaic patterns on the leaves of the tomato plant. It can be controlled by using disease-free seeds and controlling the aphid population.",Tomato_healthy:"No disease found in the tomato plant."},Ime=n(260);var Nme=function(e){var t,n,r=e.diseasedata,a=e.host,i=H(),o=(0,N.useState)(!1),s=(0,C.Z)(o,2),u=s[0],c=s[1];return(0,be.jsxs)("div",{className:"container m-auto px-7 bg-gray-50",children:[(0,be.jsx)("div",{className:"text-center font-bold text-lg my-5",children:"Prediction Result"}),(0,be.jsx)("div",{children:(0,be.jsxs)("button",{className:"font-semibold",onClick:function(){i("/disease_predictor")},children:[(0,be.jsx)(Ime.Z,{})," Back "]})}),(0,be.jsx)("div",{className:"text-lg font-bold my-5",children:"Top 5"}),(0,be.jsx)("ol",{class:"relative border-l border-gray-200 dark:border-gray-700",children:null===r||void 0===r||null===(t=r.slice(0,5))||void 0===t?void 0:t.map((function(e,t){var n;return(0,be.jsxs)("li",{class:"mb-10 ml-6",children:[(0,be.jsx)("div",{class:"absolute w-3 h-3 bg-gray-200 rounded-full mt-1.5 -left-1.5 border border-white dark:border-gray-900 dark:bg-gray-700"}),(0,be.jsx)("div",{className:"w-[60%] md:w-[40%] m-auto",children:(0,be.jsx)("img",{src:"".concat(a,"/static/").concat(null===e||void 0===e||null===(n=e.className)||void 0===n?void 0:n.split(" ")[0],".jpg"),alt:"temp",className:"w-full"})}),(0,be.jsx)("h3",{class:"flex items-center mb-1 text-lg font-semibold text-gray-900 dark:text-black",children:null===e||void 0===e?void 0:e.className}),(0,be.jsx)("div",{class:"block mb-2 text-sm font-normal leading-none text-gray-400 dark:text-gray-500",children:"".concat((100*(null===e||void 0===e?void 0:e.probability)).toFixed(2)," %")}),(0,be.jsx)("p",{class:"mb-4 text-base font-normal text-gray-500 dark:text-gray-400",children:Sme[null===e||void 0===e?void 0:e.className]})]},t)}))}),(0,be.jsxs)("section",{children:[(0,be.jsx)("div",{className:"cursor-pointer my-5 text-center",children:(0,be.jsx)("button",{onClick:function(){return c(!u)},className:"bg-gray-200 px-2 py-2 font-semibold rounded-md",children:(0,be.jsx)("div",{children:!1===u?"expand":"collapse"})})}),u&&(0,be.jsx)("div",{children:(0,be.jsx)("ol",{class:"relative border-l border-gray-200 dark:border-gray-700",children:null===r||void 0===r||null===(n=r.slice(5,10))||void 0===n?void 0:n.map((function(e,t){var n;return(0,be.jsxs)("li",{class:"mb-10 ml-6",children:[(0,be.jsx)("div",{class:"absolute w-3 h-3 bg-gray-200 rounded-full mt-1.5 -left-1.5 border border-white dark:border-gray-900 dark:bg-gray-700"}),(0,be.jsx)("div",{className:"w-[60%] md:w-[40%] m-auto",children:(0,be.jsx)("img",{src:"".concat(a,"/static/").concat(null===e||void 0===e||null===(n=e.className)||void 0===n?void 0:n.split(" ")[0],".jpg"),alt:"temp",className:"w-full"})}),(0,be.jsx)("h3",{class:"flex items-center mb-1 text-lg font-semibold text-gray-900 dark:text-black",children:null===e||void 0===e?void 0:e.className}),(0,be.jsx)("div",{class:"block mb-2 text-sm font-normal leading-none text-gray-400 dark:text-gray-500",children:"".concat((100*(null===e||void 0===e?void 0:e.probability)).toFixed(2)," %")}),(0,be.jsx)("p",{class:"mb-4 text-base font-normal text-gray-500 dark:text-gray-400",children:Sme[null===e||void 0===e?void 0:e.className]})]},"".concat(t,"2"))}))})})]}),(0,be.jsx)(Dt,{})]})},Tme=["A cereal grain that is a staple food for more than half of the world's population. It is a good source of carbohydrates and some vitamins and minerals","A cereal grain that is widely used for human consumption and animal feed. It is a good source of carbohydrates, fiber, and some vitamins and minerals","A legume that is high in protein, fiber, and some vitamins and minerals. It is often used in Middle Eastern and Indian cuisine","A type of legume that is high in protein, fiber, and some vitamins and minerals. It is commonly used in Mexican cuisine","A type of legume that is high in protein, fiber, and some vitamins and minerals. It is commonly used in Indian and African cuisine","A type of legume that is high in protein, fiber, and some vitamins and minerals. It is commonly used in Indian cuisine","A type of legume that is high in protein, fiber, and some vitamins and minerals. It is commonly used in Asian cuisine","A type of legume that is high in protein, fiber, and some vitamins and minerals. It is commonly used in Indian cuisine","A type of legume that is high in protein, fiber, and some vitamins and minerals. It is commonly used in Indian and Middle Eastern cuisine","A fruit that is high in antioxidants, vitamins, and minerals. It is commonly used in salads, juices, and smoothies","A fruit that is high in carbohydrates, fiber, and some vitamins and minerals. It is commonly used as a snack or in smoothies","A fruit that is high in vitamin C, vitamin A, and fiber. It is commonly used in smoothies, salads, and desserts","A fruit that is high in antioxidants, vitamins, and minerals. It is commonly used as a snack or in salads","A fruit that is high in vitamin C, vitamin A, and water. It is commonly used as a refreshing summer snack","A fruit that is high in vitamin C, vitamin A, and water. It is commonly used as a refreshing summer snack","A fruit that is high in fiber, vitamin C, and antioxidants. It is commonly used as a snack or in desserts"," A fruit that is high in vitamin C, fiber, and antioxidants. It is commonly used as a snack or in juices","A fruit that is high in vitamin C, vitamin A, and fiber. It is commonly used in smoothies and salads","A fruit that is high in healthy fats, fiber, and some vitamins and minerals. It is commonly used in cooking and as a source of coconut milk and oil","A plant that is grown for its fiber, which is used to make clothing, textiles, and other products","A plant that is grown for its fiber, which is used to make burlap, twine, and other products","A beverage that is made from roasted coffee beans. It contains caffeine and is commonly consumed worldwide"];var Cme=function(e){var t,n,r=e.setExtraDetails,a=e.extraDetails,i=(e.cropdata,e.setCropdata),o=e.setChange,s=e.host,u=H(),c=(0,N.useState)(!1),l=(0,C.Z)(c,2),d=l[0],f=l[1],h=(0,N.useState)([]),p=(0,C.Z)(h,2),v=p[0],m=p[1],g=(0,N.useState)(!1),y=(0,C.Z)(g,2),b=y[0],x=y[1],k=(0,N.useState)(0),w=(0,C.Z)(k,2),S=w[0],I=w[1],T=function(e){r(XV(XV({},a),{},(0,De.Z)({},e.target.name,e.target.value)))},E=function(e){i(e),o(!0),u("/dashboard")},_=function(){var e=me(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rT("cropmodel/model.json");case 2:t=e.sent,console.log(t),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(){var e=me(ye().mark((function e(n){var r,i,o,s,u,c,l,d,f,h,p,v,g,y,b,x,k,w;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(10),e.next=3,fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(n.coords.latitude,"&lon=").concat(n.coords.longitude,"&appid=1ae67afbcfd2c8ace165befd341a1d70&units=metric"));case 3:return d=e.sent,I(20),e.next=7,d.json();case 7:return f=e.sent,I(30),e.next=11,fetch("https://nominatim.openstreetmap.org/reverse?format=jsonv2&zoom=18&addressdetails=1&lat=".concat(n.coords.latitude,"&lon=").concat(n.coords.longitude));case 11:return h=e.sent,I(40),e.next=15,h.json();case 15:return p=e.sent,I(50),v=(new Date).toString().split(" ")[1].toUpperCase(),console.log(v),g=null===p||void 0===p||null===(r=p.address)||void 0===r||null===(i=r.state)||void 0===i||null===(o=i.split(" "))||void 0===o||null===(s=o.join(""))||void 0===s||null===(u=s.toString())||void 0===u?void 0:u.toUpperCase(),y=rV[g][v],console.log(y),b=Ps([[parseFloat(null===a||void 0===a?void 0:a.nitrogen),parseFloat(null===a||void 0===a?void 0:a.phosphrous),parseFloat(null===a||void 0===a?void 0:a.potassium),null===f||void 0===f||null===(c=f.main)||void 0===c?void 0:c.temp,null===f||void 0===f||null===(l=f.main)||void 0===l?void 0:l.humidity,.77,y]]),e.next=25,t.predict(b).data();case 25:x=e.sent,I(80),console.log(typeof a.potassium),k=x,console.log(k),w=Array.from(k).map((function(e,t){return{probability:e,description:Tme[t],className:zt[t]}})).sort((function(e,t){return t.probability-e.probability})),console.log(w),m(w),I(100);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):alert("Geolocation is not supported by this browser.");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,N.useEffect)((function(){_()}),[]),(0,be.jsxs)("div",{className:"container m-auto px-7",children:[(0,be.jsx)("div",{className:"text-center font-bold text-xl",children:"Recommended Crop for you"}),(0,be.jsx)("div",{className:"py-5",children:(0,be.jsxs)("button",{className:"font-semibold",onClick:function(){u("/dashboard")},children:[(0,be.jsx)(Ime.Z,{})," Back"," "]})}),(0,be.jsx)("div",{className:"text-center mt-5",children:(0,be.jsx)("button",{onClick:function(){x(!b)},className:"inline-block rounded-3xl px-4 outline-1 py-1.5 text-base font-medium leading-7 text-gray-800 shadow-sm ring-1 ring-gray-600 hover:bg-transparent hover:outline rounded-full",children:"Add NPK value"})}),(0,be.jsxs)("div",{children:[b&&(0,be.jsxs)(be.Fragment,{children:["          ",(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{children:(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{for:"nitrogen",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-black",children:"Nitrogen"}),(0,be.jsx)("input",{type:"number",id:"nitrogen",value:a.nitrogen,name:"nitrogen",class:"block w-full p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 sm:text-xs focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:T})]})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{for:"phosphrous",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-black",children:"Phosphrous"}),(0,be.jsx)("input",{type:"number",id:"phosphrous",value:a.phosphrous,name:"phosphrous",class:"block w-full p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 sm:text-xs focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:T})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{for:"potassium",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-black",children:"Potassium"}),(0,be.jsx)("input",{type:"number",id:"potassium",value:a.potassium,name:"potassium",class:"block w-full p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 sm:text-xs focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:T})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{for:"ph",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-black",children:"pH value"}),(0,be.jsx)("input",{type:"number",id:"ph",min:0,max:14,name:"ph",value:a.ph,class:"block w-full p-2 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 sm:text-xs focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",onChange:T})]}),(0,be.jsx)("div",{className:"my-5",children:(0,be.jsx)("button",{className:"px-4 py-2 text-lg font-semibold text-white transition-colors duration-300 bg-green-500 rounded-md shadow hover:bg-green-600 focus:outline-none focus:ring-green-200 focus:ring-4 justify-center items-center",onClick:function(){_()},children:"Submit"})})]}),S>0&&S<100&&(0,be.jsx)("div",{className:"my-5",children:(0,be.jsx)(kme,{progressPercentage:S})})]}),(0,be.jsx)("div",{className:"my-5 font-bold",children:"TOP 5"}),(0,be.jsx)("ol",{class:"relative border-l border-gray-200 dark:border-gray-700",children:null===v||void 0===v||null===(t=v.slice(0,5))||void 0===t?void 0:t.map((function(e,t){var n;return(0,be.jsx)("div",{className:"".concat("0.00"===(100*(null===e||void 0===e?void 0:e.probability)).toFixed(2)?"hidden":"block"),children:(0,be.jsxs)("li",{class:"mb-10 ml-6",children:[(0,be.jsx)("span",{class:"absolute flex items-center justify-center w-3 h-3 bg-blue-100 rounded-full -left-3 ring-8 ring-white dark:ring-gray-900 dark:bg-blue-900",children:(0,be.jsx)("svg",{height:"15px",width:"15px",version:"1.1",id:"_x35_",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,be.jsxs)("g",{children:[(0,be.jsxs)("g",{children:[(0,be.jsx)("path",{style:{fill:"#75A874"},d:"M461.044,46.548C331.271-11.868,184.378,3.571,89.951,98.005\r C-0.94,188.893-18.62,328.363,32.254,454.389c-8.792,8.638-16.89,16.648-23.973,23.734c-5.857,5.857,0,0,0,0l21.188,21.188\r c1.946-1.945,0,0,0,0c7.083-7.087,15.092-15.181,23.731-23.977c126.023,50.878,265.493,33.194,356.38-57.693\r C504.014,323.207,519.46,176.315,461.044,46.548z"}),(0,be.jsx)("path",{style:{fill:"#5AA25A"},d:"M17.463,511.318C16.697,512.083,16.415,512.361,17.463,511.318L17.463,511.318z"}),(0,be.jsx)("path",{style:{fill:"#5AA25A"},d:"M21.188,507.592c-0.808,0.808-1.441,1.437-2.003,2.002\r C20.219,508.565,21.188,507.592,21.188,507.592z"}),(0,be.jsx)("path",{style:{fill:"#5AA25A"},d:"M18.568,510.209c-0.393,0.393-0.765,0.765-1.069,1.073\r C17.763,511.017,18.135,510.646,18.568,510.209z"})]}),(0,be.jsxs)("g",{children:[(0,be.jsxs)("g",{children:[(0,be.jsx)("path",{style:{fill:"#79C17A"},d:"M89.951,85.799C-4.491,180.233-19.93,327.126,38.493,456.892l422.55-422.55\r C331.271-24.074,184.378-8.635,89.951,85.799z"}),(0,be.jsx)("path",{style:{fill:"#67B765"},d:"M409.579,405.435c-94.434,94.434-241.327,109.88-371.086,51.457l422.55-422.55\r C519.46,164.108,504.014,311.001,409.579,405.435z"})]}),(0,be.jsx)("path",{style:{fill:"#5AA25A"},d:"M21.188,495.386c3.168-1.988,3.168-1.988,8.28-8.281\r C131.175,385.391,408.442,91.169,417.631,77.754C404.209,86.936,109.987,364.21,8.281,465.917C2.424,471.773,0,474.19,0,474.19\r L21.188,495.386z"}),(0,be.jsx)("path",{style:{fill:"#5AA25A"},d:"M267.027,236.353c0,0,0,0,0-9.311c0-41.882-8.031-159.557-10.025-164.205\r c-2.009,4.648-10.033,122.323-10.033,164.205c-0.007,9.311-0.007,9.311-0.007,9.311H267.027z"}),(0,be.jsx)("path",{style:{fill:"#5AA25A"},d:"M160.479,342.901c0,0,0,0,0-9.31c0-41.883-8.03-159.557-10.033-164.205\r c-2.009,4.647-10.033,122.329-10.033,164.205c0,9.31,0,9.31,0,9.31H160.479z"}),(0,be.jsx)("path",{style:{fill:"#5AA25A"},d:"M260.813,230.139c0,0,0,0,9.31,0c41.882,0,159.557,8.023,164.205,10.033\r c-4.648,2.009-122.323,10.033-164.205,10.033c-9.31,0-9.31,0-9.31,0V230.139z"}),(0,be.jsx)("path",{style:{fill:"#5AA25A"},d:"M154.265,336.686c0,0,0,0,9.311,0c41.875,0,159.557,8.031,164.205,10.033\r c-4.648,2.01-122.33,10.033-164.205,10.033c-9.311,0.007-9.311,0.007-9.311,0.007V336.686z"})]})]})})}),(0,be.jsx)("div",{className:"w-[60%] md:w-[40%] m-auto",children:(0,be.jsx)("img",{src:"".concat(s,"/static/").concat(null===e||void 0===e||null===(n=e.className)||void 0===n?void 0:n.split(" ")[0],".jpg"),alt:"temp",className:"w-full"})}),(0,be.jsxs)("h3",{class:"flex items-center justify-between my-2 text-xl font-semibold text-gray-900 dark:text-black",children:[null===e||void 0===e?void 0:e.className,(0,be.jsx)("span",{class:"bg-blue-100 text-blue-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300 ml-3",onClick:function(){E(e)},children:"Change"})]}),(0,be.jsx)("time",{class:"block mb-2 text-sm font-normal leading-none text-gray-400 dark:text-gray-500",children:"".concat((100*(null===e||void 0===e?void 0:e.probability)).toFixed(2)," %")}),(0,be.jsx)("p",{class:"mb-4 text-base font-normal text-gray-500 dark:text-gray-400",children:null===e||void 0===e?void 0:e.description})]})},t)}))})]}),(0,be.jsxs)("section",{children:[(0,be.jsx)("div",{className:"cursor-pointer my-5 text-center",children:(0,be.jsx)("button",{onClick:function(){return f(!d)},className:"bg-gray-200 px-2 py-2 font-semibold rounded-md",children:(0,be.jsx)("div",{children:!1===d?"expand":"collapse"})})}),d&&(0,be.jsx)("div",{children:(0,be.jsx)("ol",{class:"relative border-l border-gray-200 dark:border-gray-700",children:null===v||void 0===v||null===(n=v.slice(5,10))||void 0===n?void 0:n.map((function(e,t){var n;return(0,be.jsx)("div",{className:"".concat("0.00"===(100*(null===e||void 0===e?void 0:e.probability)).toFixed(2)?"hidden":"block"),children:(0,be.jsxs)("li",{class:"mb-10 ml-6",children:[(0,be.jsx)("span",{class:"absolute flex items-center justify-center w-3 h-3 bg-blue-100 rounded-full -left-3 ring-8 ring-white dark:ring-gray-900 dark:bg-blue-900",children:(0,be.jsx)("svg",{height:"15px",width:"15px",version:"1.1",id:"_x35_",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:(0,be.jsxs)("g",{children:[(0,be.jsxs)("g",{children:[(0,be.jsx)("path",{style:{fill:"#75A874"},d:"M461.044,46.548C331.271-11.868,184.378,3.571,89.951,98.005\r C-0.94,188.893-18.62,328.363,32.254,454.389c-8.792,8.638-16.89,16.648-23.973,23.734c-5.857,5.857,0,0,0,0l21.188,21.188\r c1.946-1.945,0,0,0,0c7.083-7.087,15.092-15.181,23.731-23.977c126.023,50.878,265.493,33.194,356.38-57.693\r C504.014,323.207,519.46,176.315,461.044,46.548z"}),(0,be.jsx)("path",{style:{fill:"#5AA25A"},d:"M17.463,511.318C16.697,512.083,16.415,512.361,17.463,511.318L17.463,511.318z"}),(0,be.jsx)("path",{style:{fill:"#5AA25A"},d:"M21.188,507.592c-0.808,0.808-1.441,1.437-2.003,2.002\r C20.219,508.565,21.188,507.592,21.188,507.592z"}),(0,be.jsx)("path",{style:{fill:"#5AA25A"},d:"M18.568,510.209c-0.393,0.393-0.765,0.765-1.069,1.073\r C17.763,511.017,18.135,510.646,18.568,510.209z"})]}),(0,be.jsxs)("g",{children:[(0,be.jsxs)("g",{children:[(0,be.jsx)("path",{style:{fill:"#79C17A"},d:"M89.951,85.799C-4.491,180.233-19.93,327.126,38.493,456.892l422.55-422.55\r C331.271-24.074,184.378-8.635,89.951,85.799z"}),(0,be.jsx)("path",{style:{fill:"#67B765"},d:"M409.579,405.435c-94.434,94.434-241.327,109.88-371.086,51.457l422.55-422.55\r C519.46,164.108,504.014,311.001,409.579,405.435z"})]}),(0,be.jsx)("path",{style:{fill:"#5AA25A"},d:"M21.188,495.386c3.168-1.988,3.168-1.988,8.28-8.281\r C131.175,385.391,408.442,91.169,417.631,77.754C404.209,86.936,109.987,364.21,8.281,465.917C2.424,471.773,0,474.19,0,474.19\r L21.188,495.386z"}),(0,be.jsx)("path",{style:{fill:"#5AA25A"},d:"M267.027,236.353c0,0,0,0,0-9.311c0-41.882-8.031-159.557-10.025-164.205\r c-2.009,4.648-10.033,122.323-10.033,164.205c-0.007,9.311-0.007,9.311-0.007,9.311H267.027z"}),(0,be.jsx)("path",{style:{fill:"#5AA25A"},d:"M160.479,342.901c0,0,0,0,0-9.31c0-41.883-8.03-159.557-10.033-164.205\r c-2.009,4.647-10.033,122.329-10.033,164.205c0,9.31,0,9.31,0,9.31H160.479z"}),(0,be.jsx)("path",{style:{fill:"#5AA25A"},d:"M260.813,230.139c0,0,0,0,9.31,0c41.882,0,159.557,8.023,164.205,10.033\r c-4.648,2.009-122.323,10.033-164.205,10.033c-9.31,0-9.31,0-9.31,0V230.139z"}),(0,be.jsx)("path",{style:{fill:"#5AA25A"},d:"M154.265,336.686c0,0,0,0,9.311,0c41.875,0,159.557,8.031,164.205,10.033\r c-4.648,2.01-122.33,10.033-164.205,10.033c-9.311,0.007-9.311,0.007-9.311,0.007V336.686z"})]})]})})}),(0,be.jsx)("div",{className:"w-[60%] md:w-[40%] m-auto",children:(0,be.jsx)("img",{src:"".concat(s,"/static/").concat(null===e||void 0===e||null===(n=e.className)||void 0===n?void 0:n.split(" ")[0],".jpg"),alt:"temp",className:"w-full"})}),(0,be.jsxs)("h3",{class:"flex justify-between items-center my-2 text-xl font-semibold text-gray-900 dark:text-black",children:[null===e||void 0===e?void 0:e.className,(0,be.jsx)("span",{class:"bg-blue-100 text-blue-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300 ml-3",onClick:function(){E(e)},children:"Change"})]}),(0,be.jsx)("time",{class:"block mb-2 text-sm font-normal leading-none text-gray-400 dark:text-gray-500",children:"".concat((100*(null===e||void 0===e?void 0:e.probability)).toFixed(2)," %")}),(0,be.jsx)("p",{class:"mb-4 text-base font-normal text-gray-500 dark:text-gray-400",children:null===e||void 0===e?void 0:e.description})]})},t)}))})})]}),(0,be.jsx)(Dt,{})]})};var Eme=function(){var e=(0,N.useState)({nitrogen:50.55,phosphrous:53.36,potassium:48.14,ph:.77}),t=(0,C.Z)(e,2),n=t[0],r=t[1];(0,N.useEffect)((function(){}),[]);var a="http://34.125.50.13:8080",i=(0,N.useState)([]),o=(0,C.Z)(i,2),s=o[0],u=o[1],c=(0,N.useState)({}),l=(0,C.Z)(c,2),d=l[0],f=l[1],h=(0,N.useState)(!1),p=(0,C.Z)(h,2),v=p[0],m=p[1];return(0,be.jsx)(Jie,{children:(0,be.jsxs)(he,{children:[(0,be.jsx)(mce,{}),(0,be.jsxs)(V,{children:[(0,be.jsx)(B,{exact:!0,path:"/GetOtp",element:(0,be.jsx)(yme,{host:a})}),(0,be.jsx)(B,{exact:!0,path:"/",element:(0,be.jsx)(mme,{})}),(0,be.jsx)(B,{exact:!0,path:"/login",element:(0,be.jsx)(fme,{host:a})}),(0,be.jsx)(B,{exact:!0,path:"/blog",element:(0,be.jsx)(gme,{})}),(0,be.jsx)(B,{exact:!0,path:"/dev",element:(0,be.jsx)(bme,{})}),(0,be.jsx)(B,{exact:!0,path:"/activity",element:(0,be.jsx)(Lse,{host:a})}),(0,be.jsx)(B,{exact:!0,path:"/profile",element:(0,be.jsx)(pce,{host:a})}),(0,be.jsx)(B,{exact:!0,path:"/dashboard",element:(0,be.jsx)(vce,{cropdata:d,change:v,host:a,setCropdata:f})}),(0,be.jsx)(B,{exact:!0,path:"/disease_predictor",element:(0,be.jsx)(wme,{host:a,setUpdatedisease:u})}),(0,be.jsx)(B,{exact:!0,path:"/disease_predictor_result",element:(0,be.jsx)(Nme,{host:a,diseasedata:s})}),(0,be.jsx)(B,{exact:!0,path:"/recommended_crop",element:(0,be.jsx)(Cme,{setExtraDetails:r,setChange:m,host:a,extraDetails:n,cropdata:d,setCropdata:f})})]}),(0,be.jsx)(Dt,{})]})})},_me=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ame(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}T.render((0,be.jsx)(N.StrictMode,{children:(0,be.jsx)(Eme,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");_me?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ame(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Ame(t,e)}))}}()}()}();
//# sourceMappingURL=main.9320d639.js.map